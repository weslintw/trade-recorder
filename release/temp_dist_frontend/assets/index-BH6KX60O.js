var pv=Object.defineProperty;var gv=(n,t,e)=>t in n?pv(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var mv=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var X=(n,t,e)=>gv(n,typeof t!="symbol"?t+"":t,e);var AL=mv(($n,ts)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function Et(){}const m_=n=>n;function Xi(n,t){for(const e in t)n[e]=t[e];return n}function _v(n){return!!n&&(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function __(n){return n()}function Nf(){return Object.create(null)}function Vt(n){n.forEach(__)}function no(n){return typeof n=="function"}function bn(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}let _o;function ae(n,t){return n===t?!0:(_o||(_o=document.createElement("a")),_o.href=t,n===_o.href)}function bv(n){return Object.keys(n).length===0}function b_(n,...t){if(n==null){for(const s of t)s(void 0);return Et}const e=n.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function Ye(n,t,e){n.$$.on_destroy.push(b_(t,e))}function Ea(n,t,e,s){if(n){const i=v_(n,t,e,s);return n[0](i)}}function v_(n,t,e,s){return n[1]&&s?Xi(e.ctx.slice(),n[1](s(t))):e.ctx}function Ca(n,t,e,s){if(n[2]&&s){const i=n[2](s(e));if(t.dirty===void 0)return i;if(typeof i=="object"){const r=[],l=Math.max(t.dirty.length,i.length);for(let o=0;o<l;o+=1)r[o]=t.dirty[o]|i[o];return r}return t.dirty|i}return t.dirty}function Oa(n,t,e,s,i,r){if(i){const l=v_(t,e,s,r);n.p(l,i)}}function xa(n){if(n.ctx.length>32){const t=[],e=n.ctx.length/32;for(let s=0;s<e;s++)t[s]=-1;return t}return-1}function qc(n){const t={};for(const e in n)e[0]!=="$"&&(t[e]=n[e]);return t}function If(n,t){const e={};t=new Set(t);for(const s in n)!t.has(s)&&s[0]!=="$"&&(e[s]=n[s]);return e}function ra(n){return n??""}const y_=typeof window<"u";let k_=y_?()=>window.performance.now():()=>Date.now(),Bu=y_?n=>requestAnimationFrame(n):Et;const Wr=new Set;function w_(n){Wr.forEach(t=>{t.c(n)||(Wr.delete(t),t.f())}),Wr.size!==0&&Bu(w_)}function S_(n){let t;return Wr.size===0&&Bu(w_),{promise:new Promise(e=>{Wr.add(t={c:n,f:e})}),abort(){Wr.delete(t)}}}function d(n,t){n.appendChild(t)}function A_(n){if(!n)return document;const t=n.getRootNode?n.getRootNode():n.ownerDocument;return t&&t.host?t:n.ownerDocument}function vv(n){const t=v("style");return t.textContent="/* empty */",yv(A_(n),t),t.sheet}function yv(n,t){return d(n.head||n,t),t.sheet}function I(n,t,e){n.insertBefore(t,e||null)}function N(n){n.parentNode&&n.parentNode.removeChild(n)}function Gt(n,t){for(let e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function v(n){return document.createElement(n)}function P(n){return document.createTextNode(n)}function S(){return P(" ")}function ie(){return P("")}function j(n,t,e,s){return n.addEventListener(t,e,s),()=>n.removeEventListener(t,e,s)}function Ls(n){return function(t){return t.preventDefault(),n.call(this,t)}}function he(n){return function(t){return t.stopPropagation(),n.call(this,t)}}function T_(n){return function(t){t.target===this&&n.call(this,t)}}function g(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}const kv=["width","height"];function Df(n,t){const e=Object.getOwnPropertyDescriptors(n.__proto__);for(const s in t)t[s]==null?n.removeAttribute(s):s==="style"?n.style.cssText=t[s]:s==="__value"?n.value=n[s]=t[s]:e[s]&&e[s].set&&kv.indexOf(s)===-1?n[s]=t[s]:g(n,s,t[s])}function Fc(n){let t;return{p(...e){t=e,t.forEach(s=>n.push(s))},r(){t.forEach(e=>n.splice(n.indexOf(e),1))}}}function Ue(n){return n===""?null:+n}function wv(n){return Array.from(n.childNodes)}function G(n,t){t=""+t,n.data!==t&&(n.data=t)}function xt(n,t){n.value=t??""}function en(n,t,e,s){e==null?n.style.removeProperty(t):n.style.setProperty(t,e,"")}function Te(n,t,e){for(let s=0;s<n.options.length;s+=1){const i=n.options[s];if(i.__value===t){i.selected=!0;return}}(!e||t!==void 0)&&(n.selectedIndex=-1)}function As(n){const t=n.querySelector(":checked");return t&&t.__value}function Ot(n,t,e){n.classList.toggle(t,!!e)}function E_(n,t,{bubbles:e=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:t,bubbles:e,cancelable:s})}function Rf(n,t){return new n(t)}const la=new Map;let oa=0;function Sv(n){let t=5381,e=n.length;for(;e--;)t=(t<<5)-t^n.charCodeAt(e);return t>>>0}function Av(n,t){const e={stylesheet:vv(t),rules:{}};return la.set(n,e),e}function C_(n,t,e,s,i,r,l,o=0){const a=16.666/s;let c=`{
`;for(let b=0;b<=1;b+=a){const y=t+(e-t)*r(b);c+=b*100+`%{${l(y,1-y)}}
`}const u=c+`100% {${l(e,1-e)}}
}`,f=`__svelte_${Sv(u)}_${o}`,p=A_(n),{stylesheet:m,rules:h}=la.get(p)||Av(p,n);h[f]||(h[f]=!0,m.insertRule(`@keyframes ${f} ${u}`,m.cssRules.length));const _=n.style.animation||"";return n.style.animation=`${_?`${_}, `:""}${f} ${s}ms linear ${i}ms 1 both`,oa+=1,f}function jc(n,t){const e=(n.style.animation||"").split(", "),s=e.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),i=e.length-s.length;i&&(n.style.animation=s.join(", "),oa-=i,oa||Tv())}function Tv(){Bu(()=>{oa||(la.forEach(n=>{const{ownerNode:t}=n.stylesheet;t&&N(t)}),la.clear())})}let Pl;function mi(n){Pl=n}function Ar(){if(!Pl)throw new Error("Function called outside component initialization");return Pl}function es(n){Ar().$$.on_mount.push(n)}function Ev(n){Ar().$$.after_update.push(n)}function Ma(n){Ar().$$.on_destroy.push(n)}function Cv(){const n=Ar();return(t,e,{cancelable:s=!1}={})=>{const i=n.$$.callbacks[t];if(i){const r=E_(t,e,{cancelable:s});return i.slice().forEach(l=>{l.call(n,r)}),!r.defaultPrevented}return!0}}function tc(n,t){return Ar().$$.context.set(n,t),t}function Vr(n){return Ar().$$.context.get(n)}function Jr(n,t){const e=n.$$.callbacks[t.type];e&&e.slice().forEach(s=>s.call(this,t))}const Br=[],$s=[];let Kr=[];const zc=[],Ov=Promise.resolve();let Hc=!1;function xv(){Hc||(Hc=!0,Ov.then(qu))}function gn(n){Kr.push(n)}function Pf(n){zc.push(n)}const ec=new Set;let Ir=0;function qu(){if(Ir!==0)return;const n=Pl;do{try{for(;Ir<Br.length;){const t=Br[Ir];Ir++,mi(t),Mv(t.$$)}}catch(t){throw Br.length=0,Ir=0,t}for(mi(null),Br.length=0,Ir=0;$s.length;)$s.pop()();for(let t=0;t<Kr.length;t+=1){const e=Kr[t];ec.has(e)||(ec.add(e),e())}Kr.length=0}while(Br.length);for(;zc.length;)zc.pop()();Hc=!1,ec.clear(),mi(n)}function Mv(n){if(n.fragment!==null){n.update(),Vt(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(gn)}}function Lv(n){const t=[],e=[];Kr.forEach(s=>n.indexOf(s)===-1?t.push(s):e.push(s)),e.forEach(s=>s()),Kr=t}let fl;function O_(){return fl||(fl=Promise.resolve(),fl.then(()=>{fl=null})),fl}function aa(n,t,e){n.dispatchEvent(E_(`${t?"intro":"outro"}${e}`))}const Ho=new Set;let Pi;function ns(){Pi={r:0,c:[],p:Pi}}function ss(){Pi.r||Vt(Pi.c),Pi=Pi.p}function Wt(n,t){n&&n.i&&(Ho.delete(n),n.i(t))}function Kt(n,t,e,s){if(n&&n.o){if(Ho.has(n))return;Ho.add(n),Pi.c.push(()=>{Ho.delete(n),s&&(e&&n.d(1),s())}),n.o(t)}else s&&s()}const x_={duration:0};function Nv(n,t,e){const s={direction:"in"};let i=t(n,e,s),r=!1,l,o,a=0;function c(){l&&jc(n,l)}function u(){const{delay:p=0,duration:m=300,easing:h=m_,tick:_=Et,css:b}=i||x_;b&&(l=C_(n,0,1,m,p,h,b,a++)),_(0,1);const y=k_()+p,w=y+m;o&&o.abort(),r=!0,gn(()=>aa(n,!0,"start")),o=S_(A=>{if(r){if(A>=w)return _(1,0),aa(n,!0,"end"),c(),r=!1;if(A>=y){const E=h((A-y)/m);_(E,1-E)}}return r})}let f=!1;return{start(){f||(f=!0,jc(n),no(i)?(i=i(s),O_().then(u)):u())},invalidate(){f=!1},end(){r&&(c(),r=!1)}}}function Iv(n,t,e){const s={direction:"out"};let i=t(n,e,s),r=!0,l;const o=Pi;o.r+=1;let a;function c(){const{delay:u=0,duration:f=300,easing:p=m_,tick:m=Et,css:h}=i||x_;h&&(l=C_(n,1,0,f,u,p,h));const _=k_()+u,b=_+f;gn(()=>aa(n,!1,"start")),"inert"in n&&(a=n.inert,n.inert=!0),S_(y=>{if(r){if(y>=b)return m(0,1),aa(n,!1,"end"),--o.r||Vt(o.c),!1;if(y>=_){const w=p((y-_)/f);m(1-w,w)}}return r})}return no(i)?O_().then(()=>{i=i(s),c()}):c(),{end(u){u&&"inert"in n&&(n.inert=a),u&&i.tick&&i.tick(1,0),r&&(l&&jc(n,l),r=!1)}}}function Bf(n,t){const e=t.token={};function s(i,r,l,o){if(t.token!==e)return;t.resolved=o;let a=t.ctx;l!==void 0&&(a=a.slice(),a[l]=o);const c=i&&(t.current=i)(a);let u=!1;t.block&&(t.blocks?t.blocks.forEach((f,p)=>{p!==r&&f&&(ns(),Kt(f,1,1,()=>{t.blocks[p]===f&&(t.blocks[p]=null)}),ss())}):t.block.d(1),c.c(),Wt(c,1),c.m(t.mount(),t.anchor),u=!0),t.block=c,t.blocks&&(t.blocks[r]=c),u&&qu()}if(_v(n)){const i=Ar();if(n.then(r=>{mi(i),s(t.then,1,t.value,r),mi(null)},r=>{if(mi(i),s(t.catch,2,t.error,r),mi(null),!t.hasCatch)throw r}),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,n),!0;t.resolved=n}}function Dv(n,t,e){const s=t.slice(),{resolved:i}=n;n.current===n.then&&(s[n.value]=i),n.current===n.catch&&(s[n.error]=i),n.block.p(s,e)}function bt(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Fu(n,t){n.d(1),t.delete(n.key)}function ju(n,t,e,s,i,r,l,o,a,c,u,f){let p=n.length,m=r.length,h=p;const _={};for(;h--;)_[n[h].key]=h;const b=[],y=new Map,w=new Map,A=[];for(h=m;h--;){const M=f(i,r,h),x=e(M);let D=l.get(x);D?A.push(()=>D.p(M,t)):(D=c(x,M),D.c()),y.set(x,b[h]=D),x in _&&w.set(x,Math.abs(h-_[x]))}const E=new Set,T=new Set;function C(M){Wt(M,1),M.m(o,u),l.set(M.key,M),u=M.first,m--}for(;p&&m;){const M=b[m-1],x=n[p-1],D=M.key,L=x.key;M===x?(u=M.first,p--,m--):y.has(L)?!l.has(D)||E.has(D)?C(M):T.has(L)?p--:w.get(D)>w.get(L)?(T.add(D),C(M)):(E.add(L),p--):(a(x,l),p--)}for(;p--;){const M=n[p];y.has(M.key)||a(M,l)}for(;m;)C(b[m-1]);return Vt(A),b}function Uc(n,t){const e={},s={},i={$$scope:1};let r=n.length;for(;r--;){const l=n[r],o=t[r];if(o){for(const a in l)a in o||(s[a]=1);for(const a in o)i[a]||(e[a]=o[a],i[a]=1);n[r]=o}else for(const a in l)i[a]=1}for(const l in s)l in e||(e[l]=void 0);return e}function bo(n){return typeof n=="object"&&n!==null?n:{}}function qf(n,t,e){const s=n.$$.props[t];s!==void 0&&(n.$$.bound[s]=e,e(n.$$.ctx[s]))}function He(n){n&&n.c()}function Re(n,t,e){const{fragment:s,after_update:i}=n.$$;s&&s.m(t,e),gn(()=>{const r=n.$$.on_mount.map(__).filter(no);n.$$.on_destroy?n.$$.on_destroy.push(...r):Vt(r),n.$$.on_mount=[]}),i.forEach(gn)}function Pe(n,t){const e=n.$$;e.fragment!==null&&(Lv(e.after_update),Vt(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Rv(n,t){n.$$.dirty[0]===-1&&(Br.push(n),xv(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function qn(n,t,e,s,i,r,l=null,o=[-1]){const a=Pl;mi(n);const c=n.$$={fragment:null,ctx:[],props:r,update:Et,not_equal:i,bound:Nf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Nf(),dirty:o,skip_bound:!1,root:t.target||a.$$.root};l&&l(c.root);let u=!1;if(c.ctx=e?e(n,t.props||{},(f,p,...m)=>{const h=m.length?m[0]:p;return c.ctx&&i(c.ctx[f],c.ctx[f]=h)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](h),u&&Rv(n,f)),p}):[],c.update(),u=!0,Vt(c.before_update),c.fragment=s?s(c.ctx):!1,t.target){if(t.hydrate){const f=wv(t.target);c.fragment&&c.fragment.l(f),f.forEach(N)}else c.fragment&&c.fragment.c();t.intro&&Wt(n.$$.fragment),Re(n,t.target,t.anchor),qu()}mi(a)}class Fn{constructor(){X(this,"$$");X(this,"$$set")}$destroy(){Pe(this,1),this.$destroy=Et}$on(t,e){if(!no(e))return Et;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const i=s.indexOf(e);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!bv(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Pv="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pv);const Wc={},ca={},M_={},L_=/^:(.+)/,Ff=4,Bv=3,qv=2,Fv=1,jv=1,Bl=n=>n.replace(/(^\/+|\/+$)/g,"").split("/"),nc=n=>n.replace(/(^\/+|\/+$)/g,""),zv=(n,t)=>{const e=n.default?0:Bl(n.path).reduce((s,i)=>(s+=Ff,i===""?s+=jv:L_.test(i)?s+=qv:i[0]==="*"?s-=Ff+Fv:s+=Bv,s),0);return{route:n,score:e,index:t}},Hv=n=>n.map(zv).sort((t,e)=>t.score<e.score?1:t.score>e.score?-1:t.index-e.index),jf=(n,t)=>{let e,s;const[i]=t.split("?"),r=Bl(i),l=r[0]==="",o=Hv(n);for(let a=0,c=o.length;a<c;a++){const u=o[a].route;let f=!1;if(u.default){s={route:u,params:{},uri:t};continue}const p=Bl(u.path),m={},h=Math.max(r.length,p.length);let _=0;for(;_<h;_++){const b=p[_],y=r[_];if(b&&b[0]==="*"){const A=b==="*"?"*":b.slice(1);m[A]=r.slice(_).map(decodeURIComponent).join("/");break}if(typeof y>"u"){f=!0;break}const w=L_.exec(b);if(w&&!l){const A=decodeURIComponent(y);m[w[1]]=A}else if(b!==y){f=!0;break}}if(!f){e={route:u,params:m,uri:"/"+r.slice(0,_).join("/")};break}}return e||s||null},sc=(n,t)=>n+(t?`?${t}`:""),Uv=(n,t)=>{if(n.startsWith("/"))return n;const[e,s]=n.split("?"),[i]=t.split("?"),r=Bl(e),l=Bl(i);if(r[0]==="")return sc(i,s);if(!r[0].startsWith(".")){const c=l.concat(r).join("/");return sc((i==="/"?"":"/")+c,s)}const o=l.concat(r),a=[];return o.forEach(c=>{c===".."?a.pop():c!=="."&&a.push(c)}),sc("/"+a.join("/"),s)},zf=(n,t)=>`${nc(t==="/"?n:`${nc(n)}/${nc(t)}`)}/`,Wv=n=>!n.defaultPrevented&&n.button===0&&!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey),N_=()=>typeof window<"u"&&"document"in window&&"location"in window,Vv=n=>({active:n&4}),Hf=n=>({active:!!n[2]});function Kv(n){let t,e,s,i;const r=n[17].default,l=Ea(r,n,n[16],Hf);let o=[{href:n[0]},{"aria-current":n[2]},n[1],n[6]],a={};for(let c=0;c<o.length;c+=1)a=Xi(a,o[c]);return{c(){t=v("a"),l&&l.c(),Df(t,a)},m(c,u){I(c,t,u),l&&l.m(t,null),e=!0,s||(i=j(t,"click",n[5]),s=!0)},p(c,[u]){l&&l.p&&(!e||u&65540)&&Oa(l,r,c,c[16],e?Ca(r,c[16],u,Vv):xa(c[16]),Hf),Df(t,a=Uc(o,[(!e||u&1)&&{href:c[0]},(!e||u&4)&&{"aria-current":c[2]},u&2&&c[1],u&64&&c[6]]))},i(c){e||(Wt(l,c),e=!0)},o(c){Kt(l,c),e=!1},d(c){c&&N(t),l&&l.d(c),s=!1,i()}}}function Yv(n,t,e){let s;const i=["to","replace","state","getProps","preserveScroll"];let r=If(t,i),l,o,{$$slots:a={},$$scope:c}=t,{to:u="#"}=t,{replace:f=!1}=t,{state:p={}}=t,{getProps:m=()=>({})}=t,{preserveScroll:h=!1}=t;const _=Vr(Wc);Ye(n,_,x=>e(14,l=x));const{base:b}=Vr(ca);Ye(n,b,x=>e(15,o=x));const{navigate:y}=Vr(M_),w=Cv();let A,E,T,C;const M=x=>{if(w("click",x),Wv(x)){x.preventDefault();const D=l.pathname===A||f;y(A,{state:p,replace:D,preserveScroll:h})}};return n.$$set=x=>{t=Xi(Xi({},t),qc(x)),e(6,r=If(t,i)),"to"in x&&e(7,u=x.to),"replace"in x&&e(8,f=x.replace),"state"in x&&e(9,p=x.state),"getProps"in x&&e(10,m=x.getProps),"preserveScroll"in x&&e(11,h=x.preserveScroll),"$$scope"in x&&e(16,c=x.$$scope)},n.$$.update=()=>{n.$$.dirty&32896&&e(0,A=Uv(u,o.uri)),n.$$.dirty&16385&&e(12,E=l.pathname.startsWith(A)),n.$$.dirty&16385&&e(13,T=A===l.pathname),n.$$.dirty&8192&&e(2,s=T?"page":void 0),e(1,C=m({location:l,href:A,isPartiallyCurrent:E,isCurrent:T,existingProps:r}))},[A,C,s,_,b,M,r,u,f,p,m,h,E,T,l,o,c,a]}let Uo=class extends Fn{constructor(t){super(),qn(this,t,Yv,Kv,bn,{to:7,replace:8,state:9,getProps:10,preserveScroll:11})}};const Xv=n=>({params:n&4}),Uf=n=>({params:n[2]});function Wf(n){let t,e,s,i;const r=[Zv,Gv],l=[];function o(a,c){return a[0]?0:1}return t=o(n),e=l[t]=r[t](n),{c(){e.c(),s=ie()},m(a,c){l[t].m(a,c),I(a,s,c),i=!0},p(a,c){let u=t;t=o(a),t===u?l[t].p(a,c):(ns(),Kt(l[u],1,1,()=>{l[u]=null}),ss(),e=l[t],e?e.p(a,c):(e=l[t]=r[t](a),e.c()),Wt(e,1),e.m(s.parentNode,s))},i(a){i||(Wt(e),i=!0)},o(a){Kt(e),i=!1},d(a){a&&N(s),l[t].d(a)}}}function Gv(n){let t;const e=n[8].default,s=Ea(e,n,n[7],Uf);return{c(){s&&s.c()},m(i,r){s&&s.m(i,r),t=!0},p(i,r){s&&s.p&&(!t||r&132)&&Oa(s,e,i,i[7],t?Ca(e,i[7],r,Xv):xa(i[7]),Uf)},i(i){t||(Wt(s,i),t=!0)},o(i){Kt(s,i),t=!1},d(i){s&&s.d(i)}}}function Zv(n){let t,e,s,i={ctx:n,current:null,token:null,hasCatch:!1,pending:$v,then:Qv,catch:Jv,value:12,blocks:[,,,]};return Bf(e=n[0],i),{c(){t=ie(),i.block.c()},m(r,l){I(r,t,l),i.block.m(r,i.anchor=l),i.mount=()=>t.parentNode,i.anchor=t,s=!0},p(r,l){n=r,i.ctx=n,l&1&&e!==(e=n[0])&&Bf(e,i)||Dv(i,n,l)},i(r){s||(Wt(i.block),s=!0)},o(r){for(let l=0;l<3;l+=1){const o=i.blocks[l];Kt(o)}s=!1},d(r){r&&N(t),i.block.d(r),i.token=null,i=null}}}function Jv(n){return{c:Et,m:Et,p:Et,i:Et,o:Et,d:Et}}function Qv(n){var o;let t,e,s;const i=[n[2],n[3]];var r=((o=n[12])==null?void 0:o.default)||n[12];function l(a,c){let u={};for(let f=0;f<i.length;f+=1)u=Xi(u,i[f]);return c!==void 0&&c&12&&(u=Xi(u,Uc(i,[c&4&&bo(a[2]),c&8&&bo(a[3])]))),{props:u}}return r&&(t=Rf(r,l(n))),{c(){t&&He(t.$$.fragment),e=ie()},m(a,c){t&&Re(t,a,c),I(a,e,c),s=!0},p(a,c){var u;if(c&1&&r!==(r=((u=a[12])==null?void 0:u.default)||a[12])){if(t){ns();const f=t;Kt(f.$$.fragment,1,0,()=>{Pe(f,1)}),ss()}r?(t=Rf(r,l(a,c)),He(t.$$.fragment),Wt(t.$$.fragment,1),Re(t,e.parentNode,e)):t=null}else if(r){const f=c&12?Uc(i,[c&4&&bo(a[2]),c&8&&bo(a[3])]):{};t.$set(f)}},i(a){s||(t&&Wt(t.$$.fragment,a),s=!0)},o(a){t&&Kt(t.$$.fragment,a),s=!1},d(a){a&&N(e),t&&Pe(t,a)}}}function $v(n){return{c:Et,m:Et,p:Et,i:Et,o:Et,d:Et}}function ty(n){let t,e,s=n[1]&&n[1].route===n[5]&&Wf(n);return{c(){s&&s.c(),t=ie()},m(i,r){s&&s.m(i,r),I(i,t,r),e=!0},p(i,[r]){i[1]&&i[1].route===i[5]?s?(s.p(i,r),r&2&&Wt(s,1)):(s=Wf(i),s.c(),Wt(s,1),s.m(t.parentNode,t)):s&&(ns(),Kt(s,1,1,()=>{s=null}),ss())},i(i){e||(Wt(s),e=!0)},o(i){Kt(s),e=!1},d(i){i&&N(t),s&&s.d(i)}}}function ey(n,t,e){let s,{$$slots:i={},$$scope:r}=t,{path:l=""}=t,{component:o=null}=t,a={},c={};const{registerRoute:u,unregisterRoute:f,activeRoute:p}=Vr(ca);Ye(n,p,h=>e(1,s=h));const m={path:l,default:l===""};return u(m),Ma(()=>{f(m)}),n.$$set=h=>{e(11,t=Xi(Xi({},t),qc(h))),"path"in h&&e(6,l=h.path),"component"in h&&e(0,o=h.component),"$$scope"in h&&e(7,r=h.$$scope)},n.$$.update=()=>{if(s&&s.route===m){e(2,a=s.params);const{component:h,path:_,...b}=t;e(3,c=b),h&&(h.toString().startsWith("class ")?e(0,o=h):e(0,o=h())),N_()&&!s.preserveScroll&&(window==null||window.scrollTo(0,0))}},t=qc(t),[o,s,a,c,p,m,l,r,i]}class ai extends Fn{constructor(t){super(),qn(this,t,ey,ty,bn,{path:6,component:0})}}const Dr=[];function ny(n,t){return{subscribe:Bi(n,t).subscribe}}function Bi(n,t=Et){let e;const s=new Set;function i(o){if(bn(n,o)&&(n=o,e)){const a=!Dr.length;for(const c of s)c[1](),Dr.push(c,n);if(a){for(let c=0;c<Dr.length;c+=2)Dr[c][0](Dr[c+1]);Dr.length=0}}}function r(o){i(o(n))}function l(o,a=Et){const c=[o,a];return s.add(c),s.size===1&&(e=t(i,r)||Et),o(n),()=>{s.delete(c),s.size===0&&e&&(e(),e=null)}}return{set:i,update:r,subscribe:l}}function sy(n,t,e){const s=!Array.isArray(n),i=s?[n]:n;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=t.length<2;return ny(e,(l,o)=>{let a=!1;const c=[];let u=0,f=Et;const p=()=>{if(u)return;f();const h=t(s?c[0]:c,l,o);r?l(h):f=no(h)?h:Et},m=i.map((h,_)=>b_(h,b=>{c[_]=b,u&=~(1<<_),a&&p()},()=>{u|=1<<_}));return a=!0,p(),function(){Vt(m),f(),a=!1}})}const ic=n=>({...n.location,state:n.history.state,key:n.history.state&&n.history.state.key||"initial"}),iy=n=>{const t=[];let e=ic(n);return{get location(){return e},listen(s){t.push(s);const i=()=>{e=ic(n),s({location:e,action:"POP"})};return n.addEventListener("popstate",i),()=>{n.removeEventListener("popstate",i);const r=t.indexOf(s);t.splice(r,1)}},navigate(s,{state:i,replace:r=!1,preserveScroll:l=!1,blurActiveElement:o=!0}={}){i={...i,key:Date.now()+""};try{r?n.history.replaceState(i,"",s):n.history.pushState(i,"",s)}catch{n.location[r?"replace":"assign"](s)}e=ic(n),t.forEach(a=>a({location:e,action:"PUSH",preserveScroll:l})),o&&document.activeElement.blur()}}},ry=(n="/")=>{let t=0;const e=[{pathname:n,search:""}],s=[];return{get location(){return e[t]},addEventListener(i,r){},removeEventListener(i,r){},history:{get entries(){return e},get index(){return t},get state(){return s[t]},pushState(i,r,l){const[o,a=""]=l.split("?");t++,e.push({pathname:o,search:a}),s.push(i)},replaceState(i,r,l){const[o,a=""]=l.split("?");e[t]={pathname:o,search:a},s[t]=i}}}},I_=iy(N_()?window:ry()),{navigate:ye}=I_,ly=n=>({route:n&4,location:n&2}),Vf=n=>({route:n[2]&&n[2].uri,location:n[1]}),oy=n=>({route:n&4,location:n&2}),Kf=n=>({route:n[2]&&n[2].uri,location:n[1]});function ay(n){let t;const e=n[15].default,s=Ea(e,n,n[14],Vf);return{c(){s&&s.c()},m(i,r){s&&s.m(i,r),t=!0},p(i,r){s&&s.p&&(!t||r&16390)&&Oa(s,e,i,i[14],t?Ca(e,i[14],r,ly):xa(i[14]),Vf)},i(i){t||(Wt(s,i),t=!0)},o(i){Kt(s,i),t=!1},d(i){s&&s.d(i)}}}function cy(n){let t=n[1].pathname,e,s,i=Yf(n);return{c(){i.c(),e=ie()},m(r,l){i.m(r,l),I(r,e,l),s=!0},p(r,l){l&2&&bn(t,t=r[1].pathname)?(ns(),Kt(i,1,1,Et),ss(),i=Yf(r),i.c(),Wt(i,1),i.m(e.parentNode,e)):i.p(r,l)},i(r){s||(Wt(i),s=!0)},o(r){Kt(i),s=!1},d(r){r&&N(e),i.d(r)}}}function Yf(n){let t,e,s,i;const r=n[15].default,l=Ea(r,n,n[14],Kf);return{c(){t=v("div"),l&&l.c()},m(o,a){I(o,t,a),l&&l.m(t,null),i=!0},p(o,a){l&&l.p&&(!i||a&16390)&&Oa(l,r,o,o[14],i?Ca(r,o[14],a,oy):xa(o[14]),Kf)},i(o){i||(Wt(l,o),o&&gn(()=>{i&&(s&&s.end(1),e=Nv(t,n[3],{}),e.start())}),i=!0)},o(o){Kt(l,o),e&&e.invalidate(),o&&(s=Iv(t,n[3],{})),i=!1},d(o){o&&N(t),l&&l.d(o),o&&s&&s.end()}}}function uy(n){let t,e,s,i;const r=[cy,ay],l=[];function o(a,c){return a[0]?0:1}return t=o(n),e=l[t]=r[t](n),{c(){e.c(),s=ie()},m(a,c){l[t].m(a,c),I(a,s,c),i=!0},p(a,[c]){let u=t;t=o(a),t===u?l[t].p(a,c):(ns(),Kt(l[u],1,1,()=>{l[u]=null}),ss(),e=l[t],e?e.p(a,c):(e=l[t]=r[t](a),e.c()),Wt(e,1),e.m(s.parentNode,s))},i(a){i||(Wt(e),i=!0)},o(a){Kt(e),i=!1},d(a){a&&N(s),l[t].d(a)}}}function fy(n,t,e){let s,i,r,l,{$$slots:o={},$$scope:a}=t,{basepath:c="/"}=t,{url:u=null}=t,{viewtransition:f=null}=t,{history:p=I_}=t;const m=(D,L,q)=>{const F=f(q);return typeof(F==null?void 0:F.fn)=="function"?F.fn(D,F):F};tc(M_,p);const h=Vr(Wc),_=Vr(ca),b=Bi([]);Ye(n,b,D=>e(12,i=D));const y=Bi(null);Ye(n,y,D=>e(2,l=D));let w=!1;const A=h||Bi(u?{pathname:u}:p.location);Ye(n,A,D=>e(1,s=D));const E=_?_.routerBase:Bi({path:c,uri:c});Ye(n,E,D=>e(13,r=D));const T=sy([E,y],([D,L])=>{if(!L)return D;const{path:q}=D,{route:F,uri:nt}=L;return{path:F.default?q:F.path.replace(/\*.*$/,""),uri:nt}}),C=D=>{const{path:L}=r;let{path:q}=D;if(D._path=q,D.path=zf(L,q),typeof window>"u"){if(w)return;const F=jf([D],s.pathname);F&&(y.set(F),w=!0)}else b.update(F=>[...F,D])},M=D=>{b.update(L=>L.filter(q=>q!==D))};let x=!1;return h||(es(()=>p.listen(L=>{e(11,x=L.preserveScroll||!1),A.set(L.location)})),tc(Wc,A)),tc(ca,{activeRoute:y,base:E,routerBase:T,registerRoute:C,unregisterRoute:M}),n.$$set=D=>{"basepath"in D&&e(8,c=D.basepath),"url"in D&&e(9,u=D.url),"viewtransition"in D&&e(0,f=D.viewtransition),"history"in D&&e(10,p=D.history),"$$scope"in D&&e(14,a=D.$$scope)},n.$$.update=()=>{if(n.$$.dirty&8192){const{path:D}=r;b.update(L=>L.map(q=>Object.assign(q,{path:zf(D,q._path)})))}if(n.$$.dirty&6146){const D=jf(i,s.pathname);y.set(D&&{...D,preserveScroll:x})}},[f,s,l,m,b,y,A,E,c,u,p,x,i,r,a,o]}class hy extends Fn{constructor(t){super(),qn(this,t,fy,uy,bn,{basepath:8,url:9,viewtransition:0,history:10})}}function D_(n,t){return function(){return n.apply(t,arguments)}}const{toString:dy}=Object.prototype,{getPrototypeOf:zu}=Object,{iterator:La,toStringTag:R_}=Symbol,Na=(n=>t=>{const e=dy.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Fs=n=>(n=n.toLowerCase(),t=>Na(t)===n),Ia=n=>t=>typeof t===n,{isArray:al}=Array,Qr=Ia("undefined");function so(n){return n!==null&&!Qr(n)&&n.constructor!==null&&!Qr(n.constructor)&&Vn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const P_=Fs("ArrayBuffer");function py(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&P_(n.buffer),t}const gy=Ia("string"),Vn=Ia("function"),B_=Ia("number"),io=n=>n!==null&&typeof n=="object",my=n=>n===!0||n===!1,Wo=n=>{if(Na(n)!=="object")return!1;const t=zu(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(R_ in n)&&!(La in n)},_y=n=>{if(!io(n)||so(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},by=Fs("Date"),vy=Fs("File"),yy=Fs("Blob"),ky=Fs("FileList"),wy=n=>io(n)&&Vn(n.pipe),Sy=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||Vn(n.append)&&((t=Na(n))==="formdata"||t==="object"&&Vn(n.toString)&&n.toString()==="[object FormData]"))},Ay=Fs("URLSearchParams"),[Ty,Ey,Cy,Oy]=["ReadableStream","Request","Response","Headers"].map(Fs),xy=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ro(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let s,i;if(typeof n!="object"&&(n=[n]),al(n))for(s=0,i=n.length;s<i;s++)t.call(null,n[s],s,n);else{if(so(n))return;const r=e?Object.getOwnPropertyNames(n):Object.keys(n),l=r.length;let o;for(s=0;s<l;s++)o=r[s],t.call(null,n[o],o,n)}}function q_(n,t){if(so(n))return null;t=t.toLowerCase();const e=Object.keys(n);let s=e.length,i;for(;s-- >0;)if(i=e[s],t===i.toLowerCase())return i;return null}const hr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,F_=n=>!Qr(n)&&n!==hr;function Vc(){const{caseless:n,skipUndefined:t}=F_(this)&&this||{},e={},s=(i,r)=>{const l=n&&q_(e,r)||r;Wo(e[l])&&Wo(i)?e[l]=Vc(e[l],i):Wo(i)?e[l]=Vc({},i):al(i)?e[l]=i.slice():(!t||!Qr(i))&&(e[l]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&ro(arguments[i],s);return e}const My=(n,t,e,{allOwnKeys:s}={})=>(ro(t,(i,r)=>{e&&Vn(i)?n[r]=D_(i,e):n[r]=i},{allOwnKeys:s}),n),Ly=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Ny=(n,t,e,s)=>{n.prototype=Object.create(t.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},Iy=(n,t,e,s)=>{let i,r,l;const o={};if(t=t||{},n==null)return t;do{for(i=Object.getOwnPropertyNames(n),r=i.length;r-- >0;)l=i[r],(!s||s(l,n,t))&&!o[l]&&(t[l]=n[l],o[l]=!0);n=e!==!1&&zu(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},Dy=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const s=n.indexOf(t,e);return s!==-1&&s===e},Ry=n=>{if(!n)return null;if(al(n))return n;let t=n.length;if(!B_(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},Py=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&zu(Uint8Array)),By=(n,t)=>{const s=(n&&n[La]).call(n);let i;for(;(i=s.next())&&!i.done;){const r=i.value;t.call(n,r[0],r[1])}},qy=(n,t)=>{let e;const s=[];for(;(e=n.exec(t))!==null;)s.push(e);return s},Fy=Fs("HTMLFormElement"),jy=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,s,i){return s.toUpperCase()+i}),Xf=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),zy=Fs("RegExp"),j_=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),s={};ro(e,(i,r)=>{let l;(l=t(i,r,n))!==!1&&(s[r]=l||i)}),Object.defineProperties(n,s)},Hy=n=>{j_(n,(t,e)=>{if(Vn(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const s=n[e];if(Vn(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},Uy=(n,t)=>{const e={},s=i=>{i.forEach(r=>{e[r]=!0})};return al(n)?s(n):s(String(n).split(t)),e},Wy=()=>{},Vy=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t;function Ky(n){return!!(n&&Vn(n.append)&&n[R_]==="FormData"&&n[La])}const Yy=n=>{const t=new Array(10),e=(s,i)=>{if(io(s)){if(t.indexOf(s)>=0)return;if(so(s))return s;if(!("toJSON"in s)){t[i]=s;const r=al(s)?[]:{};return ro(s,(l,o)=>{const a=e(l,i+1);!Qr(a)&&(r[o]=a)}),t[i]=void 0,r}}return s};return e(n,0)},Xy=Fs("AsyncFunction"),Gy=n=>n&&(io(n)||Vn(n))&&Vn(n.then)&&Vn(n.catch),z_=((n,t)=>n?setImmediate:t?((e,s)=>(hr.addEventListener("message",({source:i,data:r})=>{i===hr&&r===e&&s.length&&s.shift()()},!1),i=>{s.push(i),hr.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Vn(hr.postMessage)),Zy=typeof queueMicrotask<"u"?queueMicrotask.bind(hr):typeof process<"u"&&process.nextTick||z_,Jy=n=>n!=null&&Vn(n[La]),tt={isArray:al,isArrayBuffer:P_,isBuffer:so,isFormData:Sy,isArrayBufferView:py,isString:gy,isNumber:B_,isBoolean:my,isObject:io,isPlainObject:Wo,isEmptyObject:_y,isReadableStream:Ty,isRequest:Ey,isResponse:Cy,isHeaders:Oy,isUndefined:Qr,isDate:by,isFile:vy,isBlob:yy,isRegExp:zy,isFunction:Vn,isStream:wy,isURLSearchParams:Ay,isTypedArray:Py,isFileList:ky,forEach:ro,merge:Vc,extend:My,trim:xy,stripBOM:Ly,inherits:Ny,toFlatObject:Iy,kindOf:Na,kindOfTest:Fs,endsWith:Dy,toArray:Ry,forEachEntry:By,matchAll:qy,isHTMLForm:Fy,hasOwnProperty:Xf,hasOwnProp:Xf,reduceDescriptors:j_,freezeMethods:Hy,toObjectSet:Uy,toCamelCase:jy,noop:Wy,toFiniteNumber:Vy,findKey:q_,global:hr,isContextDefined:F_,isSpecCompliantForm:Ky,toJSONObject:Yy,isAsyncFn:Xy,isThenable:Gy,setImmediate:z_,asap:Zy,isIterable:Jy};function Qt(n,t,e,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}tt.inherits(Qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:tt.toJSONObject(this.config),code:this.code,status:this.status}}});const H_=Qt.prototype,U_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{U_[n]={value:n}});Object.defineProperties(Qt,U_);Object.defineProperty(H_,"isAxiosError",{value:!0});Qt.from=(n,t,e,s,i,r)=>{const l=Object.create(H_);tt.toFlatObject(n,l,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const o=n&&n.message?n.message:"Error",a=t==null&&n?n.code:t;return Qt.call(l,o,a,e,s,i),n&&l.cause==null&&Object.defineProperty(l,"cause",{value:n,configurable:!0}),l.name=n&&n.name||"Error",r&&Object.assign(l,r),l};const Qy=null;function Kc(n){return tt.isPlainObject(n)||tt.isArray(n)}function W_(n){return tt.endsWith(n,"[]")?n.slice(0,-2):n}function Gf(n,t,e){return n?n.concat(t).map(function(i,r){return i=W_(i),!e&&r?"["+i+"]":i}).join(e?".":""):t}function $y(n){return tt.isArray(n)&&!n.some(Kc)}const t2=tt.toFlatObject(tt,{},null,function(t){return/^is[A-Z]/.test(t)});function Da(n,t,e){if(!tt.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=tt.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,b){return!tt.isUndefined(b[_])});const s=e.metaTokens,i=e.visitor||u,r=e.dots,l=e.indexes,a=(e.Blob||typeof Blob<"u"&&Blob)&&tt.isSpecCompliantForm(t);if(!tt.isFunction(i))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(tt.isDate(h))return h.toISOString();if(tt.isBoolean(h))return h.toString();if(!a&&tt.isBlob(h))throw new Qt("Blob is not supported. Use a Buffer instead.");return tt.isArrayBuffer(h)||tt.isTypedArray(h)?a&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,_,b){let y=h;if(h&&!b&&typeof h=="object"){if(tt.endsWith(_,"{}"))_=s?_:_.slice(0,-2),h=JSON.stringify(h);else if(tt.isArray(h)&&$y(h)||(tt.isFileList(h)||tt.endsWith(_,"[]"))&&(y=tt.toArray(h)))return _=W_(_),y.forEach(function(A,E){!(tt.isUndefined(A)||A===null)&&t.append(l===!0?Gf([_],E,r):l===null?_:_+"[]",c(A))}),!1}return Kc(h)?!0:(t.append(Gf(b,_,r),c(h)),!1)}const f=[],p=Object.assign(t2,{defaultVisitor:u,convertValue:c,isVisitable:Kc});function m(h,_){if(!tt.isUndefined(h)){if(f.indexOf(h)!==-1)throw Error("Circular reference detected in "+_.join("."));f.push(h),tt.forEach(h,function(y,w){(!(tt.isUndefined(y)||y===null)&&i.call(t,y,tt.isString(w)?w.trim():w,_,p))===!0&&m(y,_?_.concat(w):[w])}),f.pop()}}if(!tt.isObject(n))throw new TypeError("data must be an object");return m(n),t}function Zf(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Hu(n,t){this._pairs=[],n&&Da(n,this,t)}const V_=Hu.prototype;V_.append=function(t,e){this._pairs.push([t,e])};V_.toString=function(t){const e=t?function(s){return t.call(this,s,Zf)}:Zf;return this._pairs.map(function(i){return e(i[0])+"="+e(i[1])},"").join("&")};function e2(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function K_(n,t,e){if(!t)return n;const s=e&&e.encode||e2;tt.isFunction(e)&&(e={serialize:e});const i=e&&e.serialize;let r;if(i?r=i(t,e):r=tt.isURLSearchParams(t)?t.toString():new Hu(t,e).toString(s),r){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class Jf{constructor(){this.handlers=[]}use(t,e,s){return this.handlers.push({fulfilled:t,rejected:e,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){tt.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Y_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},n2=typeof URLSearchParams<"u"?URLSearchParams:Hu,s2=typeof FormData<"u"?FormData:null,i2=typeof Blob<"u"?Blob:null,r2={isBrowser:!0,classes:{URLSearchParams:n2,FormData:s2,Blob:i2},protocols:["http","https","file","blob","url","data"]},Uu=typeof window<"u"&&typeof document<"u",Yc=typeof navigator=="object"&&navigator||void 0,l2=Uu&&(!Yc||["ReactNative","NativeScript","NS"].indexOf(Yc.product)<0),o2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",a2=Uu&&window.location.href||"http://localhost",c2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Uu,hasStandardBrowserEnv:l2,hasStandardBrowserWebWorkerEnv:o2,navigator:Yc,origin:a2},Symbol.toStringTag,{value:"Module"})),An={...c2,...r2};function u2(n,t){return Da(n,new An.classes.URLSearchParams,{visitor:function(e,s,i,r){return An.isNode&&tt.isBuffer(e)?(this.append(s,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}function f2(n){return tt.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function h2(n){const t={},e=Object.keys(n);let s;const i=e.length;let r;for(s=0;s<i;s++)r=e[s],t[r]=n[r];return t}function X_(n){function t(e,s,i,r){let l=e[r++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),a=r>=e.length;return l=!l&&tt.isArray(i)?i.length:l,a?(tt.hasOwnProp(i,l)?i[l]=[i[l],s]:i[l]=s,!o):((!i[l]||!tt.isObject(i[l]))&&(i[l]=[]),t(e,s,i[l],r)&&tt.isArray(i[l])&&(i[l]=h2(i[l])),!o)}if(tt.isFormData(n)&&tt.isFunction(n.entries)){const e={};return tt.forEachEntry(n,(s,i)=>{t(f2(s),i,e,0)}),e}return null}function d2(n,t,e){if(tt.isString(n))try{return(t||JSON.parse)(n),tt.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(e||JSON.stringify)(n)}const lo={transitional:Y_,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const s=e.getContentType()||"",i=s.indexOf("application/json")>-1,r=tt.isObject(t);if(r&&tt.isHTMLForm(t)&&(t=new FormData(t)),tt.isFormData(t))return i?JSON.stringify(X_(t)):t;if(tt.isArrayBuffer(t)||tt.isBuffer(t)||tt.isStream(t)||tt.isFile(t)||tt.isBlob(t)||tt.isReadableStream(t))return t;if(tt.isArrayBufferView(t))return t.buffer;if(tt.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return u2(t,this.formSerializer).toString();if((o=tt.isFileList(t))||s.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Da(o?{"files[]":t}:t,a&&new a,this.formSerializer)}}return r||i?(e.setContentType("application/json",!1),d2(t)):t}],transformResponse:[function(t){const e=this.transitional||lo.transitional,s=e&&e.forcedJSONParsing,i=this.responseType==="json";if(tt.isResponse(t)||tt.isReadableStream(t))return t;if(t&&tt.isString(t)&&(s&&!this.responseType||i)){const l=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?Qt.from(o,Qt.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:An.classes.FormData,Blob:An.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};tt.forEach(["delete","get","head","post","put","patch"],n=>{lo.headers[n]={}});const p2=tt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),g2=n=>{const t={};let e,s,i;return n&&n.split(`
`).forEach(function(l){i=l.indexOf(":"),e=l.substring(0,i).trim().toLowerCase(),s=l.substring(i+1).trim(),!(!e||t[e]&&p2[e])&&(e==="set-cookie"?t[e]?t[e].push(s):t[e]=[s]:t[e]=t[e]?t[e]+", "+s:s)}),t},Qf=Symbol("internals");function hl(n){return n&&String(n).trim().toLowerCase()}function Vo(n){return n===!1||n==null?n:tt.isArray(n)?n.map(Vo):String(n)}function m2(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=e.exec(n);)t[s[1]]=s[2];return t}const _2=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function rc(n,t,e,s,i){if(tt.isFunction(s))return s.call(this,t,e);if(i&&(t=e),!!tt.isString(t)){if(tt.isString(s))return t.indexOf(s)!==-1;if(tt.isRegExp(s))return s.test(t)}}function b2(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,s)=>e.toUpperCase()+s)}function v2(n,t){const e=tt.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+e,{value:function(i,r,l){return this[s].call(this,t,i,r,l)},configurable:!0})})}let Kn=class{constructor(t){t&&this.set(t)}set(t,e,s){const i=this;function r(o,a,c){const u=hl(a);if(!u)throw new Error("header name must be a non-empty string");const f=tt.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||a]=Vo(o))}const l=(o,a)=>tt.forEach(o,(c,u)=>r(c,u,a));if(tt.isPlainObject(t)||t instanceof this.constructor)l(t,e);else if(tt.isString(t)&&(t=t.trim())&&!_2(t))l(g2(t),e);else if(tt.isObject(t)&&tt.isIterable(t)){let o={},a,c;for(const u of t){if(!tt.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[c=u[0]]=(a=o[c])?tt.isArray(a)?[...a,u[1]]:[a,u[1]]:u[1]}l(o,e)}else t!=null&&r(e,t,s);return this}get(t,e){if(t=hl(t),t){const s=tt.findKey(this,t);if(s){const i=this[s];if(!e)return i;if(e===!0)return m2(i);if(tt.isFunction(e))return e.call(this,i,s);if(tt.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=hl(t),t){const s=tt.findKey(this,t);return!!(s&&this[s]!==void 0&&(!e||rc(this,this[s],s,e)))}return!1}delete(t,e){const s=this;let i=!1;function r(l){if(l=hl(l),l){const o=tt.findKey(s,l);o&&(!e||rc(s,s[o],o,e))&&(delete s[o],i=!0)}}return tt.isArray(t)?t.forEach(r):r(t),i}clear(t){const e=Object.keys(this);let s=e.length,i=!1;for(;s--;){const r=e[s];(!t||rc(this,this[r],r,t,!0))&&(delete this[r],i=!0)}return i}normalize(t){const e=this,s={};return tt.forEach(this,(i,r)=>{const l=tt.findKey(s,r);if(l){e[l]=Vo(i),delete e[r];return}const o=t?b2(r):String(r).trim();o!==r&&delete e[r],e[o]=Vo(i),s[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return tt.forEach(this,(s,i)=>{s!=null&&s!==!1&&(e[i]=t&&tt.isArray(s)?s.join(", "):s)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const s=new this(t);return e.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[Qf]=this[Qf]={accessors:{}}).accessors,i=this.prototype;function r(l){const o=hl(l);s[o]||(v2(i,l),s[o]=!0)}return tt.isArray(t)?t.forEach(r):r(t),this}};Kn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);tt.reduceDescriptors(Kn.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(s){this[e]=s}}});tt.freezeMethods(Kn);function lc(n,t){const e=this||lo,s=t||e,i=Kn.from(s.headers);let r=s.data;return tt.forEach(n,function(o){r=o.call(e,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function G_(n){return!!(n&&n.__CANCEL__)}function cl(n,t,e){Qt.call(this,n??"canceled",Qt.ERR_CANCELED,t,e),this.name="CanceledError"}tt.inherits(cl,Qt,{__CANCEL__:!0});function Z_(n,t,e){const s=e.config.validateStatus;!e.status||!s||s(e.status)?n(e):t(new Qt("Request failed with status code "+e.status,[Qt.ERR_BAD_REQUEST,Qt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function y2(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function k2(n,t){n=n||10;const e=new Array(n),s=new Array(n);let i=0,r=0,l;return t=t!==void 0?t:1e3,function(a){const c=Date.now(),u=s[r];l||(l=c),e[i]=a,s[i]=c;let f=r,p=0;for(;f!==i;)p+=e[f++],f=f%n;if(i=(i+1)%n,i===r&&(r=(r+1)%n),c-l<t)return;const m=u&&c-u;return m?Math.round(p*1e3/m):void 0}}function w2(n,t){let e=0,s=1e3/t,i,r;const l=(c,u=Date.now())=>{e=u,i=null,r&&(clearTimeout(r),r=null),n(...c)};return[(...c)=>{const u=Date.now(),f=u-e;f>=s?l(c,u):(i=c,r||(r=setTimeout(()=>{r=null,l(i)},s-f)))},()=>i&&l(i)]}const ua=(n,t,e=3)=>{let s=0;const i=k2(50,250);return w2(r=>{const l=r.loaded,o=r.lengthComputable?r.total:void 0,a=l-s,c=i(a),u=l<=o;s=l;const f={loaded:l,total:o,progress:o?l/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&u?(o-l)/c:void 0,event:r,lengthComputable:o!=null,[t?"download":"upload"]:!0};n(f)},e)},$f=(n,t)=>{const e=n!=null;return[s=>t[0]({lengthComputable:e,total:n,loaded:s}),t[1]]},th=n=>(...t)=>tt.asap(()=>n(...t)),S2=An.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,An.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL(An.origin),An.navigator&&/(msie|trident)/i.test(An.navigator.userAgent)):()=>!0,A2=An.hasStandardBrowserEnv?{write(n,t,e,s,i,r,l){if(typeof document>"u")return;const o=[`${n}=${encodeURIComponent(t)}`];tt.isNumber(e)&&o.push(`expires=${new Date(e).toUTCString()}`),tt.isString(s)&&o.push(`path=${s}`),tt.isString(i)&&o.push(`domain=${i}`),r===!0&&o.push("secure"),tt.isString(l)&&o.push(`SameSite=${l}`),document.cookie=o.join("; ")},read(n){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function T2(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function E2(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function J_(n,t,e){let s=!T2(t);return n&&(s||e==!1)?E2(n,t):t}const eh=n=>n instanceof Kn?{...n}:n;function _r(n,t){t=t||{};const e={};function s(c,u,f,p){return tt.isPlainObject(c)&&tt.isPlainObject(u)?tt.merge.call({caseless:p},c,u):tt.isPlainObject(u)?tt.merge({},u):tt.isArray(u)?u.slice():u}function i(c,u,f,p){if(tt.isUndefined(u)){if(!tt.isUndefined(c))return s(void 0,c,f,p)}else return s(c,u,f,p)}function r(c,u){if(!tt.isUndefined(u))return s(void 0,u)}function l(c,u){if(tt.isUndefined(u)){if(!tt.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function o(c,u,f){if(f in t)return s(c,u);if(f in n)return s(void 0,c)}const a={url:r,method:r,data:r,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(c,u,f)=>i(eh(c),eh(u),f,!0)};return tt.forEach(Object.keys({...n,...t}),function(u){const f=a[u]||i,p=f(n[u],t[u],u);tt.isUndefined(p)&&f!==o||(e[u]=p)}),e}const Q_=n=>{const t=_r({},n);let{data:e,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:r,headers:l,auth:o}=t;if(t.headers=l=Kn.from(l),t.url=K_(J_(t.baseURL,t.url,t.allowAbsoluteUrls),n.params,n.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),tt.isFormData(e)){if(An.hasStandardBrowserEnv||An.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(tt.isFunction(e.getHeaders)){const a=e.getHeaders(),c=["content-type","content-length"];Object.entries(a).forEach(([u,f])=>{c.includes(u.toLowerCase())&&l.set(u,f)})}}if(An.hasStandardBrowserEnv&&(s&&tt.isFunction(s)&&(s=s(t)),s||s!==!1&&S2(t.url))){const a=i&&r&&A2.read(r);a&&l.set(i,a)}return t},C2=typeof XMLHttpRequest<"u",O2=C2&&function(n){return new Promise(function(e,s){const i=Q_(n);let r=i.data;const l=Kn.from(i.headers).normalize();let{responseType:o,onUploadProgress:a,onDownloadProgress:c}=i,u,f,p,m,h;function _(){m&&m(),h&&h(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function y(){if(!b)return;const A=Kn.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),T={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:A,config:n,request:b};Z_(function(M){e(M),_()},function(M){s(M),_()},T),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(s(new Qt("Request aborted",Qt.ECONNABORTED,n,b)),b=null)},b.onerror=function(E){const T=E&&E.message?E.message:"Network Error",C=new Qt(T,Qt.ERR_NETWORK,n,b);C.event=E||null,s(C),b=null},b.ontimeout=function(){let E=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const T=i.transitional||Y_;i.timeoutErrorMessage&&(E=i.timeoutErrorMessage),s(new Qt(E,T.clarifyTimeoutError?Qt.ETIMEDOUT:Qt.ECONNABORTED,n,b)),b=null},r===void 0&&l.setContentType(null),"setRequestHeader"in b&&tt.forEach(l.toJSON(),function(E,T){b.setRequestHeader(T,E)}),tt.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),o&&o!=="json"&&(b.responseType=i.responseType),c&&([p,h]=ua(c,!0),b.addEventListener("progress",p)),a&&b.upload&&([f,m]=ua(a),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(u=A=>{b&&(s(!A||A.type?new cl(null,n,b):A),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const w=y2(i.url);if(w&&An.protocols.indexOf(w)===-1){s(new Qt("Unsupported protocol "+w+":",Qt.ERR_BAD_REQUEST,n));return}b.send(r||null)})},x2=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let s=new AbortController,i;const r=function(c){if(!i){i=!0,o();const u=c instanceof Error?c:this.reason;s.abort(u instanceof Qt?u:new cl(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,r(new Qt(`timeout ${t} of ms exceeded`,Qt.ETIMEDOUT))},t);const o=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),n=null)};n.forEach(c=>c.addEventListener("abort",r));const{signal:a}=s;return a.unsubscribe=()=>tt.asap(o),a}},M2=function*(n,t){let e=n.byteLength;if(e<t){yield n;return}let s=0,i;for(;s<e;)i=s+t,yield n.slice(s,i),s=i},L2=async function*(n,t){for await(const e of N2(n))yield*M2(e,t)},N2=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},nh=(n,t,e,s)=>{const i=L2(n,t);let r=0,l,o=a=>{l||(l=!0,s&&s(a))};return new ReadableStream({async pull(a){try{const{done:c,value:u}=await i.next();if(c){o(),a.close();return}let f=u.byteLength;if(e){let p=r+=f;e(p)}a.enqueue(new Uint8Array(u))}catch(c){throw o(c),c}},cancel(a){return o(a),i.return()}},{highWaterMark:2})},sh=64*1024,{isFunction:vo}=tt,I2=(({Request:n,Response:t})=>({Request:n,Response:t}))(tt.global),{ReadableStream:ih,TextEncoder:rh}=tt.global,lh=(n,...t)=>{try{return!!n(...t)}catch{return!1}},D2=n=>{n=tt.merge.call({skipUndefined:!0},I2,n);const{fetch:t,Request:e,Response:s}=n,i=t?vo(t):typeof fetch=="function",r=vo(e),l=vo(s);if(!i)return!1;const o=i&&vo(ih),a=i&&(typeof rh=="function"?(h=>_=>h.encode(_))(new rh):async h=>new Uint8Array(await new e(h).arrayBuffer())),c=r&&o&&lh(()=>{let h=!1;const _=new e(An.origin,{body:new ih,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!_}),u=l&&o&&lh(()=>tt.isReadableStream(new s("").body)),f={stream:u&&(h=>h.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!f[h]&&(f[h]=(_,b)=>{let y=_&&_[h];if(y)return y.call(_);throw new Qt(`Response type '${h}' is not supported`,Qt.ERR_NOT_SUPPORT,b)})});const p=async h=>{if(h==null)return 0;if(tt.isBlob(h))return h.size;if(tt.isSpecCompliantForm(h))return(await new e(An.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(tt.isArrayBufferView(h)||tt.isArrayBuffer(h))return h.byteLength;if(tt.isURLSearchParams(h)&&(h=h+""),tt.isString(h))return(await a(h)).byteLength},m=async(h,_)=>{const b=tt.toFiniteNumber(h.getContentLength());return b??p(_)};return async h=>{let{url:_,method:b,data:y,signal:w,cancelToken:A,timeout:E,onDownloadProgress:T,onUploadProgress:C,responseType:M,headers:x,withCredentials:D="same-origin",fetchOptions:L}=Q_(h),q=t||fetch;M=M?(M+"").toLowerCase():"text";let F=x2([w,A&&A.toAbortSignal()],E),nt=null;const et=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let U;try{if(C&&c&&b!=="get"&&b!=="head"&&(U=await m(x,y))!==0){let wt=new e(_,{method:"POST",body:y,duplex:"half"}),rt;if(tt.isFormData(y)&&(rt=wt.headers.get("content-type"))&&x.setContentType(rt),wt.body){const[at,vt]=$f(U,ua(th(C)));y=nh(wt.body,sh,at,vt)}}tt.isString(D)||(D=D?"include":"omit");const W=r&&"credentials"in e.prototype,V={...L,signal:F,method:b.toUpperCase(),headers:x.normalize().toJSON(),body:y,duplex:"half",credentials:W?D:void 0};nt=r&&new e(_,V);let $=await(r?q(nt,L):q(_,V));const st=u&&(M==="stream"||M==="response");if(u&&(T||st&&et)){const wt={};["status","statusText","headers"].forEach(K=>{wt[K]=$[K]});const rt=tt.toFiniteNumber($.headers.get("content-length")),[at,vt]=T&&$f(rt,ua(th(T),!0))||[];$=new s(nh($.body,sh,at,()=>{vt&&vt(),et&&et()}),wt)}M=M||"text";let Z=await f[tt.findKey(f,M)||"text"]($,h);return!st&&et&&et(),await new Promise((wt,rt)=>{Z_(wt,rt,{data:Z,headers:Kn.from($.headers),status:$.status,statusText:$.statusText,config:h,request:nt})})}catch(W){throw et&&et(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new Qt("Network Error",Qt.ERR_NETWORK,h,nt),{cause:W.cause||W}):Qt.from(W,W&&W.code,h,nt)}}},R2=new Map,$_=n=>{let t=n&&n.env||{};const{fetch:e,Request:s,Response:i}=t,r=[s,i,e];let l=r.length,o=l,a,c,u=R2;for(;o--;)a=r[o],c=u.get(a),c===void 0&&u.set(a,c=o?new Map:D2(t)),u=c;return c};$_();const Wu={http:Qy,xhr:O2,fetch:{get:$_}};tt.forEach(Wu,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const oh=n=>`- ${n}`,P2=n=>tt.isFunction(n)||n===null||n===!1;function B2(n,t){n=tt.isArray(n)?n:[n];const{length:e}=n;let s,i;const r={};for(let l=0;l<e;l++){s=n[l];let o;if(i=s,!P2(s)&&(i=Wu[(o=String(s)).toLowerCase()],i===void 0))throw new Qt(`Unknown adapter '${o}'`);if(i&&(tt.isFunction(i)||(i=i.get(t))))break;r[o||"#"+l]=i}if(!i){const l=Object.entries(r).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?l.length>1?`since :
`+l.map(oh).join(`
`):" "+oh(l[0]):"as no adapter specified";throw new Qt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i}const tb={getAdapter:B2,adapters:Wu};function oc(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new cl(null,n)}function ah(n){return oc(n),n.headers=Kn.from(n.headers),n.data=lc.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),tb.getAdapter(n.adapter||lo.adapter,n)(n).then(function(s){return oc(n),s.data=lc.call(n,n.transformResponse,s),s.headers=Kn.from(s.headers),s},function(s){return G_(s)||(oc(n),s&&s.response&&(s.response.data=lc.call(n,n.transformResponse,s.response),s.response.headers=Kn.from(s.response.headers))),Promise.reject(s)})}const eb="1.13.2",Ra={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{Ra[n]=function(s){return typeof s===n||"a"+(t<1?"n ":" ")+n}});const ch={};Ra.transitional=function(t,e,s){function i(r,l){return"[Axios v"+eb+"] Transitional option '"+r+"'"+l+(s?". "+s:"")}return(r,l,o)=>{if(t===!1)throw new Qt(i(l," has been removed"+(e?" in "+e:"")),Qt.ERR_DEPRECATED);return e&&!ch[l]&&(ch[l]=!0,console.warn(i(l," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,l,o):!0}};Ra.spelling=function(t){return(e,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function q2(n,t,e){if(typeof n!="object")throw new Qt("options must be an object",Qt.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let i=s.length;for(;i-- >0;){const r=s[i],l=t[r];if(l){const o=n[r],a=o===void 0||l(o,r,n);if(a!==!0)throw new Qt("option "+r+" must be "+a,Qt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Qt("Unknown option "+r,Qt.ERR_BAD_OPTION)}}const Ko={assertOptions:q2,validators:Ra},Ks=Ko.validators;let pr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Jf,response:new Jf}}async request(t,e){try{return await this._request(t,e)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=_r(this.defaults,e);const{transitional:s,paramsSerializer:i,headers:r}=e;s!==void 0&&Ko.assertOptions(s,{silentJSONParsing:Ks.transitional(Ks.boolean),forcedJSONParsing:Ks.transitional(Ks.boolean),clarifyTimeoutError:Ks.transitional(Ks.boolean)},!1),i!=null&&(tt.isFunction(i)?e.paramsSerializer={serialize:i}:Ko.assertOptions(i,{encode:Ks.function,serialize:Ks.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Ko.assertOptions(e,{baseUrl:Ks.spelling("baseURL"),withXsrfToken:Ks.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let l=r&&tt.merge(r.common,r[e.method]);r&&tt.forEach(["delete","get","head","post","put","patch","common"],h=>{delete r[h]}),e.headers=Kn.concat(l,r);const o=[];let a=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(e)===!1||(a=a&&_.synchronous,o.unshift(_.fulfilled,_.rejected))});const c=[];this.interceptors.response.forEach(function(_){c.push(_.fulfilled,_.rejected)});let u,f=0,p;if(!a){const h=[ah.bind(this),void 0];for(h.unshift(...o),h.push(...c),p=h.length,u=Promise.resolve(e);f<p;)u=u.then(h[f++],h[f++]);return u}p=o.length;let m=e;for(;f<p;){const h=o[f++],_=o[f++];try{m=h(m)}catch(b){_.call(this,b);break}}try{u=ah.call(this,m)}catch(h){return Promise.reject(h)}for(f=0,p=c.length;f<p;)u=u.then(c[f++],c[f++]);return u}getUri(t){t=_r(this.defaults,t);const e=J_(t.baseURL,t.url,t.allowAbsoluteUrls);return K_(e,t.params,t.paramsSerializer)}};tt.forEach(["delete","get","head","options"],function(t){pr.prototype[t]=function(e,s){return this.request(_r(s||{},{method:t,url:e,data:(s||{}).data}))}});tt.forEach(["post","put","patch"],function(t){function e(s){return function(r,l,o){return this.request(_r(o||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:l}))}}pr.prototype[t]=e(),pr.prototype[t+"Form"]=e(!0)});let F2=class nb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const l=new Promise(o=>{s.subscribe(o),r=o}).then(i);return l.cancel=function(){s.unsubscribe(r)},l},t(function(r,l,o){s.reason||(s.reason=new cl(r,l,o),e(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=s=>{t.abort(s)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new nb(function(i){t=i}),cancel:t}}};function j2(n){return function(e){return n.apply(null,e)}}function z2(n){return tt.isObject(n)&&n.isAxiosError===!0}const Xc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Xc).forEach(([n,t])=>{Xc[t]=n});function sb(n){const t=new pr(n),e=D_(pr.prototype.request,t);return tt.extend(e,pr.prototype,t,{allOwnKeys:!0}),tt.extend(e,t,null,{allOwnKeys:!0}),e.create=function(i){return sb(_r(n,i))},e}const Ge=sb(lo);Ge.Axios=pr;Ge.CanceledError=cl;Ge.CancelToken=F2;Ge.isCancel=G_;Ge.VERSION=eb;Ge.toFormData=Da;Ge.AxiosError=Qt;Ge.Cancel=Ge.CanceledError;Ge.all=function(t){return Promise.all(t)};Ge.spread=j2;Ge.isAxiosError=z2;Ge.mergeConfig=_r;Ge.AxiosHeaders=Kn;Ge.formToJSON=n=>X_(tt.isHTMLForm(n)?new FormData(n):n);Ge.getAdapter=tb.getAdapter;Ge.HttpStatusCode=Xc;Ge.default=Ge;const{Axios:xL,AxiosError:ML,CanceledError:LL,isCancel:NL,CancelToken:IL,VERSION:DL,all:RL,Cancel:PL,isAxiosError:BL,spread:qL,toFormData:FL,AxiosHeaders:jL,HttpStatusCode:zL,formToJSON:HL,getAdapter:UL,mergeConfig:WL}=Ge,ib="/api/v1",Be=Ge.create({baseURL:ib,headers:{"Content-Type":"application/json"}}),gi={getAll:n=>Be.get("/trades",{params:n}),getOne:n=>Be.get(`/trades/${n}`),create:n=>Be.post("/trades",n),update:(n,t)=>Be.put(`/trades/${n}`,t),delete:n=>Be.delete(`/trades/${n}`)},Gi={upload:n=>Be.post("/images/upload",n,{headers:{"Content-Type":"multipart/form-data"}}),getUrl:n=>{const t=n.split("/").pop();return`${ib}/images/${t}?path=${encodeURIComponent(n)}`}},yo={getSummary:n=>Be.get("/stats/summary",{params:n}),getEquityCurve:n=>Be.get("/stats/equity-curve",{params:n}),getBySymbol:n=>Be.get("/stats/by-symbol",{params:n}),getByStrategy:n=>Be.get("/stats/by-strategy",{params:n})},H2={getAll:()=>Be.get("/tags")},yi={getAll:n=>Be.get("/daily-plans",{params:n}),getOne:n=>Be.get(`/daily-plans/${n}`),create:n=>Be.post("/daily-plans",n),update:(n,t)=>Be.put(`/daily-plans/${n}`,t),delete:n=>Be.delete(`/daily-plans/${n}`)},Di={getAll:()=>Be.get("/accounts"),create:n=>Be.post("/accounts",n),update:(n,t)=>Be.put(`/accounts/${n}`,t),delete:n=>Be.delete(`/accounts/${n}`),sync:n=>Be.post(`/accounts/${n}/sync`),importCSV:(n,t)=>Be.post(`/accounts/${n}/import-csv`,t,{headers:{"Content-Type":"multipart/form-data"}}),clearData:n=>Be.delete(`/accounts/${n}/data`)},Ts=["XAUUSD","NAS100","US30","EURUSD","GBPUSD","USDJPY"],vs=[{value:"asian",label:"",icon:""},{value:"european",label:"",icon:""},{value:"us",label:"",icon:""}],br=["M5","M15","H1","H4","D1"],ql=Bi(Ts[0]||"XAUUSD"),uh=typeof localStorage<"u"?localStorage.getItem("selectedAccountId"):null,Rs=Bi(uh?parseInt(uh):1);Rs.subscribe(n=>{typeof localStorage<"u"&&localStorage.setItem("selectedAccountId",n.toString())});const Fl=Bi([]);var rb=typeof global=="object"&&global&&global.Object===Object&&global,U2=typeof self=="object"&&self&&self.Object===Object&&self,ni=rb||U2||Function("return this")(),Zi=ni.Symbol,lb=Object.prototype,W2=lb.hasOwnProperty,V2=lb.toString,dl=Zi?Zi.toStringTag:void 0;function K2(n){var t=W2.call(n,dl),e=n[dl];try{n[dl]=void 0;var s=!0}catch{}var i=V2.call(n);return s&&(t?n[dl]=e:delete n[dl]),i}var Y2=Object.prototype,X2=Y2.toString;function G2(n){return X2.call(n)}var Z2="[object Null]",J2="[object Undefined]",fh=Zi?Zi.toStringTag:void 0;function ul(n){return n==null?n===void 0?J2:Z2:fh&&fh in Object(n)?K2(n):G2(n)}function ki(n){return n!=null&&typeof n=="object"}var vr=Array.isArray;function $i(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}function ob(n){return n}var Q2="[object AsyncFunction]",$2="[object Function]",tk="[object GeneratorFunction]",ek="[object Proxy]";function Vu(n){if(!$i(n))return!1;var t=ul(n);return t==$2||t==tk||t==Q2||t==ek}var ac=ni["__core-js_shared__"],hh=function(){var n=/[^.]+$/.exec(ac&&ac.keys&&ac.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function nk(n){return!!hh&&hh in n}var sk=Function.prototype,ik=sk.toString;function Tr(n){if(n!=null){try{return ik.call(n)}catch{}try{return n+""}catch{}}return""}var rk=/[\\^$.*+?()[\]{}|]/g,lk=/^\[object .+?Constructor\]$/,ok=Function.prototype,ak=Object.prototype,ck=ok.toString,uk=ak.hasOwnProperty,fk=RegExp("^"+ck.call(uk).replace(rk,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hk(n){if(!$i(n)||nk(n))return!1;var t=Vu(n)?fk:lk;return t.test(Tr(n))}function dk(n,t){return n==null?void 0:n[t]}function Er(n,t){var e=dk(n,t);return hk(e)?e:void 0}var Gc=Er(ni,"WeakMap"),dh=Object.create,pk=function(){function n(){}return function(t){if(!$i(t))return{};if(dh)return dh(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}();function gk(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}function mk(n,t){var e=-1,s=n.length;for(t||(t=Array(s));++e<s;)t[e]=n[e];return t}var _k=800,bk=16,vk=Date.now;function yk(n){var t=0,e=0;return function(){var s=vk(),i=bk-(s-e);if(e=s,i>0){if(++t>=_k)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}function kk(n){return function(){return n}}var fa=function(){try{var n=Er(Object,"defineProperty");return n({},"",{}),n}catch{}}(),wk=fa?function(n,t){return fa(n,"toString",{configurable:!0,enumerable:!1,value:kk(t),writable:!0})}:ob,Sk=yk(wk);function Ak(n,t){for(var e=-1,s=n==null?0:n.length;++e<s&&t(n[e],e,n)!==!1;);return n}var Tk=9007199254740991,Ek=/^(?:0|[1-9]\d*)$/;function ab(n,t){var e=typeof n;return t=t??Tk,!!t&&(e=="number"||e!="symbol"&&Ek.test(n))&&n>-1&&n%1==0&&n<t}function Ku(n,t,e){t=="__proto__"&&fa?fa(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function oo(n,t){return n===t||n!==n&&t!==t}var Ck=Object.prototype,Ok=Ck.hasOwnProperty;function cb(n,t,e){var s=n[t];(!(Ok.call(n,t)&&oo(s,e))||e===void 0&&!(t in n))&&Ku(n,t,e)}function xk(n,t,e,s){var i=!e;e||(e={});for(var r=-1,l=t.length;++r<l;){var o=t[r],a=void 0;a===void 0&&(a=n[o]),i?Ku(e,o,a):cb(e,o,a)}return e}var ph=Math.max;function Mk(n,t,e){return t=ph(t===void 0?n.length-1:t,0),function(){for(var s=arguments,i=-1,r=ph(s.length-t,0),l=Array(r);++i<r;)l[i]=s[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=s[i];return o[t]=e(l),gk(n,this,o)}}function Lk(n,t){return Sk(Mk(n,t,ob),n+"")}var Nk=9007199254740991;function ub(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Nk}function Pa(n){return n!=null&&ub(n.length)&&!Vu(n)}function Ik(n,t,e){if(!$i(e))return!1;var s=typeof t;return(s=="number"?Pa(e)&&ab(t,e.length):s=="string"&&t in e)?oo(e[t],n):!1}function Dk(n){return Lk(function(t,e){var s=-1,i=e.length,r=i>1?e[i-1]:void 0,l=i>2?e[2]:void 0;for(r=n.length>3&&typeof r=="function"?(i--,r):void 0,l&&Ik(e[0],e[1],l)&&(r=i<3?void 0:r,i=1),t=Object(t);++s<i;){var o=e[s];o&&n(t,o,s,r)}return t})}var Rk=Object.prototype;function Yu(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Rk;return n===e}function Pk(n,t){for(var e=-1,s=Array(n);++e<n;)s[e]=t(e);return s}var Bk="[object Arguments]";function gh(n){return ki(n)&&ul(n)==Bk}var fb=Object.prototype,qk=fb.hasOwnProperty,Fk=fb.propertyIsEnumerable,Zc=gh(function(){return arguments}())?gh:function(n){return ki(n)&&qk.call(n,"callee")&&!Fk.call(n,"callee")};function jk(){return!1}var hb=typeof $n=="object"&&$n&&!$n.nodeType&&$n,mh=hb&&typeof ts=="object"&&ts&&!ts.nodeType&&ts,zk=mh&&mh.exports===hb,_h=zk?ni.Buffer:void 0,Hk=_h?_h.isBuffer:void 0,jl=Hk||jk,Uk="[object Arguments]",Wk="[object Array]",Vk="[object Boolean]",Kk="[object Date]",Yk="[object Error]",Xk="[object Function]",Gk="[object Map]",Zk="[object Number]",Jk="[object Object]",Qk="[object RegExp]",$k="[object Set]",tw="[object String]",ew="[object WeakMap]",nw="[object ArrayBuffer]",sw="[object DataView]",iw="[object Float32Array]",rw="[object Float64Array]",lw="[object Int8Array]",ow="[object Int16Array]",aw="[object Int32Array]",cw="[object Uint8Array]",uw="[object Uint8ClampedArray]",fw="[object Uint16Array]",hw="[object Uint32Array]",Ce={};Ce[iw]=Ce[rw]=Ce[lw]=Ce[ow]=Ce[aw]=Ce[cw]=Ce[uw]=Ce[fw]=Ce[hw]=!0;Ce[Uk]=Ce[Wk]=Ce[nw]=Ce[Vk]=Ce[sw]=Ce[Kk]=Ce[Yk]=Ce[Xk]=Ce[Gk]=Ce[Zk]=Ce[Jk]=Ce[Qk]=Ce[$k]=Ce[tw]=Ce[ew]=!1;function dw(n){return ki(n)&&ub(n.length)&&!!Ce[ul(n)]}function Xu(n){return function(t){return n(t)}}var db=typeof $n=="object"&&$n&&!$n.nodeType&&$n,Cl=db&&typeof ts=="object"&&ts&&!ts.nodeType&&ts,pw=Cl&&Cl.exports===db,cc=pw&&rb.process,$r=function(){try{var n=Cl&&Cl.require&&Cl.require("util").types;return n||cc&&cc.binding&&cc.binding("util")}catch{}}(),bh=$r&&$r.isTypedArray,Gu=bh?Xu(bh):dw,gw=Object.prototype,mw=gw.hasOwnProperty;function pb(n,t){var e=vr(n),s=!e&&Zc(n),i=!e&&!s&&jl(n),r=!e&&!s&&!i&&Gu(n),l=e||s||i||r,o=l?Pk(n.length,String):[],a=o.length;for(var c in n)(t||mw.call(n,c))&&!(l&&(c=="length"||i&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ab(c,a)))&&o.push(c);return o}function gb(n,t){return function(e){return n(t(e))}}var _w=gb(Object.keys,Object),bw=Object.prototype,vw=bw.hasOwnProperty;function yw(n){if(!Yu(n))return _w(n);var t=[];for(var e in Object(n))vw.call(n,e)&&e!="constructor"&&t.push(e);return t}function kw(n){return Pa(n)?pb(n):yw(n)}function ww(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var Sw=Object.prototype,Aw=Sw.hasOwnProperty;function Tw(n){if(!$i(n))return ww(n);var t=Yu(n),e=[];for(var s in n)s=="constructor"&&(t||!Aw.call(n,s))||e.push(s);return e}function mb(n){return Pa(n)?pb(n,!0):Tw(n)}var zl=Er(Object,"create");function Ew(){this.__data__=zl?zl(null):{},this.size=0}function Cw(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var Ow="__lodash_hash_undefined__",xw=Object.prototype,Mw=xw.hasOwnProperty;function Lw(n){var t=this.__data__;if(zl){var e=t[n];return e===Ow?void 0:e}return Mw.call(t,n)?t[n]:void 0}var Nw=Object.prototype,Iw=Nw.hasOwnProperty;function Dw(n){var t=this.__data__;return zl?t[n]!==void 0:Iw.call(t,n)}var Rw="__lodash_hash_undefined__";function Pw(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=zl&&t===void 0?Rw:t,this}function yr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var s=n[t];this.set(s[0],s[1])}}yr.prototype.clear=Ew;yr.prototype.delete=Cw;yr.prototype.get=Lw;yr.prototype.has=Dw;yr.prototype.set=Pw;function Bw(){this.__data__=[],this.size=0}function Ba(n,t){for(var e=n.length;e--;)if(oo(n[e][0],t))return e;return-1}var qw=Array.prototype,Fw=qw.splice;function jw(n){var t=this.__data__,e=Ba(t,n);if(e<0)return!1;var s=t.length-1;return e==s?t.pop():Fw.call(t,e,1),--this.size,!0}function zw(n){var t=this.__data__,e=Ba(t,n);return e<0?void 0:t[e][1]}function Hw(n){return Ba(this.__data__,n)>-1}function Uw(n,t){var e=this.__data__,s=Ba(e,n);return s<0?(++this.size,e.push([n,t])):e[s][1]=t,this}function Ai(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var s=n[t];this.set(s[0],s[1])}}Ai.prototype.clear=Bw;Ai.prototype.delete=jw;Ai.prototype.get=zw;Ai.prototype.has=Hw;Ai.prototype.set=Uw;var Hl=Er(ni,"Map");function Ww(){this.size=0,this.__data__={hash:new yr,map:new(Hl||Ai),string:new yr}}function Vw(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function qa(n,t){var e=n.__data__;return Vw(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Kw(n){var t=qa(this,n).delete(n);return this.size-=t?1:0,t}function Yw(n){return qa(this,n).get(n)}function Xw(n){return qa(this,n).has(n)}function Gw(n,t){var e=qa(this,n),s=e.size;return e.set(n,t),this.size+=e.size==s?0:1,this}function Cr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var s=n[t];this.set(s[0],s[1])}}Cr.prototype.clear=Ww;Cr.prototype.delete=Kw;Cr.prototype.get=Yw;Cr.prototype.has=Xw;Cr.prototype.set=Gw;function Zw(n,t){for(var e=-1,s=t.length,i=n.length;++e<s;)n[i+e]=t[e];return n}var _b=gb(Object.getPrototypeOf,Object),Jw="[object Object]",Qw=Function.prototype,$w=Object.prototype,bb=Qw.toString,t4=$w.hasOwnProperty,e4=bb.call(Object);function n4(n){if(!ki(n)||ul(n)!=Jw)return!1;var t=_b(n);if(t===null)return!0;var e=t4.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&bb.call(e)==e4}function s4(){this.__data__=new Ai,this.size=0}function i4(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function r4(n){return this.__data__.get(n)}function l4(n){return this.__data__.has(n)}var o4=200;function a4(n,t){var e=this.__data__;if(e instanceof Ai){var s=e.__data__;if(!Hl||s.length<o4-1)return s.push([n,t]),this.size=++e.size,this;e=this.__data__=new Cr(s)}return e.set(n,t),this.size=e.size,this}function Zs(n){var t=this.__data__=new Ai(n);this.size=t.size}Zs.prototype.clear=s4;Zs.prototype.delete=i4;Zs.prototype.get=r4;Zs.prototype.has=l4;Zs.prototype.set=a4;var vb=typeof $n=="object"&&$n&&!$n.nodeType&&$n,vh=vb&&typeof ts=="object"&&ts&&!ts.nodeType&&ts,c4=vh&&vh.exports===vb,yh=c4?ni.Buffer:void 0,kh=yh?yh.allocUnsafe:void 0;function yb(n,t){if(t)return n.slice();var e=n.length,s=kh?kh(e):new n.constructor(e);return n.copy(s),s}function u4(n,t){for(var e=-1,s=n==null?0:n.length,i=0,r=[];++e<s;){var l=n[e];t(l,e,n)&&(r[i++]=l)}return r}function f4(){return[]}var h4=Object.prototype,d4=h4.propertyIsEnumerable,wh=Object.getOwnPropertySymbols,p4=wh?function(n){return n==null?[]:(n=Object(n),u4(wh(n),function(t){return d4.call(n,t)}))}:f4;function g4(n,t,e){var s=t(n);return vr(n)?s:Zw(s,e(n))}function Jc(n){return g4(n,kw,p4)}var Qc=Er(ni,"DataView"),$c=Er(ni,"Promise"),tu=Er(ni,"Set"),Sh="[object Map]",m4="[object Object]",Ah="[object Promise]",Th="[object Set]",Eh="[object WeakMap]",Ch="[object DataView]",_4=Tr(Qc),b4=Tr(Hl),v4=Tr($c),y4=Tr(tu),k4=Tr(Gc),Ns=ul;(Qc&&Ns(new Qc(new ArrayBuffer(1)))!=Ch||Hl&&Ns(new Hl)!=Sh||$c&&Ns($c.resolve())!=Ah||tu&&Ns(new tu)!=Th||Gc&&Ns(new Gc)!=Eh)&&(Ns=function(n){var t=ul(n),e=t==m4?n.constructor:void 0,s=e?Tr(e):"";if(s)switch(s){case _4:return Ch;case b4:return Sh;case v4:return Ah;case y4:return Th;case k4:return Eh}return t});var w4=Object.prototype,S4=w4.hasOwnProperty;function A4(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&S4.call(n,"index")&&(e.index=n.index,e.input=n.input),e}var ha=ni.Uint8Array;function Zu(n){var t=new n.constructor(n.byteLength);return new ha(t).set(new ha(n)),t}function T4(n,t){var e=Zu(n.buffer);return new n.constructor(e,n.byteOffset,n.byteLength)}var E4=/\w*$/;function C4(n){var t=new n.constructor(n.source,E4.exec(n));return t.lastIndex=n.lastIndex,t}var Oh=Zi?Zi.prototype:void 0,xh=Oh?Oh.valueOf:void 0;function O4(n){return xh?Object(xh.call(n)):{}}function kb(n,t){var e=t?Zu(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var x4="[object Boolean]",M4="[object Date]",L4="[object Map]",N4="[object Number]",I4="[object RegExp]",D4="[object Set]",R4="[object String]",P4="[object Symbol]",B4="[object ArrayBuffer]",q4="[object DataView]",F4="[object Float32Array]",j4="[object Float64Array]",z4="[object Int8Array]",H4="[object Int16Array]",U4="[object Int32Array]",W4="[object Uint8Array]",V4="[object Uint8ClampedArray]",K4="[object Uint16Array]",Y4="[object Uint32Array]";function X4(n,t,e){var s=n.constructor;switch(t){case B4:return Zu(n);case x4:case M4:return new s(+n);case q4:return T4(n);case F4:case j4:case z4:case H4:case U4:case W4:case V4:case K4:case Y4:return kb(n,e);case L4:return new s;case N4:case R4:return new s(n);case I4:return C4(n);case D4:return new s;case P4:return O4(n)}}function wb(n){return typeof n.constructor=="function"&&!Yu(n)?pk(_b(n)):{}}var G4="[object Map]";function Z4(n){return ki(n)&&Ns(n)==G4}var Mh=$r&&$r.isMap,J4=Mh?Xu(Mh):Z4,Q4="[object Set]";function $4(n){return ki(n)&&Ns(n)==Q4}var Lh=$r&&$r.isSet,tS=Lh?Xu(Lh):$4,eS=1,Sb="[object Arguments]",nS="[object Array]",sS="[object Boolean]",iS="[object Date]",rS="[object Error]",Ab="[object Function]",lS="[object GeneratorFunction]",oS="[object Map]",aS="[object Number]",Tb="[object Object]",cS="[object RegExp]",uS="[object Set]",fS="[object String]",hS="[object Symbol]",dS="[object WeakMap]",pS="[object ArrayBuffer]",gS="[object DataView]",mS="[object Float32Array]",_S="[object Float64Array]",bS="[object Int8Array]",vS="[object Int16Array]",yS="[object Int32Array]",kS="[object Uint8Array]",wS="[object Uint8ClampedArray]",SS="[object Uint16Array]",AS="[object Uint32Array]",Se={};Se[Sb]=Se[nS]=Se[pS]=Se[gS]=Se[sS]=Se[iS]=Se[mS]=Se[_S]=Se[bS]=Se[vS]=Se[yS]=Se[oS]=Se[aS]=Se[Tb]=Se[cS]=Se[uS]=Se[fS]=Se[hS]=Se[kS]=Se[wS]=Se[SS]=Se[AS]=!0;Se[rS]=Se[Ab]=Se[dS]=!1;function Yo(n,t,e,s,i,r){var l,o=t&eS;if(l!==void 0)return l;if(!$i(n))return n;var a=vr(n);if(a)l=A4(n);else{var c=Ns(n),u=c==Ab||c==lS;if(jl(n))return yb(n,o);if(c==Tb||c==Sb||u&&!i)l=u?{}:wb(n);else{if(!Se[c])return i?n:{};l=X4(n,c,o)}}r||(r=new Zs);var f=r.get(n);if(f)return f;r.set(n,l),tS(n)?n.forEach(function(h){l.add(Yo(h,t,e,h,n,r))}):J4(n)&&n.forEach(function(h,_){l.set(_,Yo(h,t,e,_,n,r))});var p=Jc,m=a?void 0:p(n);return Ak(m||n,function(h,_){m&&(_=h,h=n[_]),cb(l,_,Yo(h,t,e,_,n,r))}),l}var TS=1,ES=4;function Yr(n){return Yo(n,TS|ES)}var CS="__lodash_hash_undefined__";function OS(n){return this.__data__.set(n,CS),this}function xS(n){return this.__data__.has(n)}function da(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Cr;++t<e;)this.add(n[t])}da.prototype.add=da.prototype.push=OS;da.prototype.has=xS;function MS(n,t){for(var e=-1,s=n==null?0:n.length;++e<s;)if(t(n[e],e,n))return!0;return!1}function LS(n,t){return n.has(t)}var NS=1,IS=2;function Eb(n,t,e,s,i,r){var l=e&NS,o=n.length,a=t.length;if(o!=a&&!(l&&a>o))return!1;var c=r.get(n),u=r.get(t);if(c&&u)return c==t&&u==n;var f=-1,p=!0,m=e&IS?new da:void 0;for(r.set(n,t),r.set(t,n);++f<o;){var h=n[f],_=t[f];if(s)var b=l?s(_,h,f,t,n,r):s(h,_,f,n,t,r);if(b!==void 0){if(b)continue;p=!1;break}if(m){if(!MS(t,function(y,w){if(!LS(m,w)&&(h===y||i(h,y,e,s,r)))return m.push(w)})){p=!1;break}}else if(!(h===_||i(h,_,e,s,r))){p=!1;break}}return r.delete(n),r.delete(t),p}function DS(n){var t=-1,e=Array(n.size);return n.forEach(function(s,i){e[++t]=[i,s]}),e}function RS(n){var t=-1,e=Array(n.size);return n.forEach(function(s){e[++t]=s}),e}var PS=1,BS=2,qS="[object Boolean]",FS="[object Date]",jS="[object Error]",zS="[object Map]",HS="[object Number]",US="[object RegExp]",WS="[object Set]",VS="[object String]",KS="[object Symbol]",YS="[object ArrayBuffer]",XS="[object DataView]",Nh=Zi?Zi.prototype:void 0,uc=Nh?Nh.valueOf:void 0;function GS(n,t,e,s,i,r,l){switch(e){case XS:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case YS:return!(n.byteLength!=t.byteLength||!r(new ha(n),new ha(t)));case qS:case FS:case HS:return oo(+n,+t);case jS:return n.name==t.name&&n.message==t.message;case US:case VS:return n==t+"";case zS:var o=DS;case WS:var a=s&PS;if(o||(o=RS),n.size!=t.size&&!a)return!1;var c=l.get(n);if(c)return c==t;s|=BS,l.set(n,t);var u=Eb(o(n),o(t),s,i,r,l);return l.delete(n),u;case KS:if(uc)return uc.call(n)==uc.call(t)}return!1}var ZS=1,JS=Object.prototype,QS=JS.hasOwnProperty;function $S(n,t,e,s,i,r){var l=e&ZS,o=Jc(n),a=o.length,c=Jc(t),u=c.length;if(a!=u&&!l)return!1;for(var f=a;f--;){var p=o[f];if(!(l?p in t:QS.call(t,p)))return!1}var m=r.get(n),h=r.get(t);if(m&&h)return m==t&&h==n;var _=!0;r.set(n,t),r.set(t,n);for(var b=l;++f<a;){p=o[f];var y=n[p],w=t[p];if(s)var A=l?s(w,y,p,t,n,r):s(y,w,p,n,t,r);if(!(A===void 0?y===w||i(y,w,e,s,r):A)){_=!1;break}b||(b=p=="constructor")}if(_&&!b){var E=n.constructor,T=t.constructor;E!=T&&"constructor"in n&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof T=="function"&&T instanceof T)&&(_=!1)}return r.delete(n),r.delete(t),_}var t5=1,Ih="[object Arguments]",Dh="[object Array]",ko="[object Object]",e5=Object.prototype,Rh=e5.hasOwnProperty;function n5(n,t,e,s,i,r){var l=vr(n),o=vr(t),a=l?Dh:Ns(n),c=o?Dh:Ns(t);a=a==Ih?ko:a,c=c==Ih?ko:c;var u=a==ko,f=c==ko,p=a==c;if(p&&jl(n)){if(!jl(t))return!1;l=!0,u=!1}if(p&&!u)return r||(r=new Zs),l||Gu(n)?Eb(n,t,e,s,i,r):GS(n,t,a,e,s,i,r);if(!(e&t5)){var m=u&&Rh.call(n,"__wrapped__"),h=f&&Rh.call(t,"__wrapped__");if(m||h){var _=m?n.value():n,b=h?t.value():t;return r||(r=new Zs),i(_,b,e,s,r)}}return p?(r||(r=new Zs),$S(n,t,e,s,i,r)):!1}function Cb(n,t,e,s,i){return n===t?!0:n==null||t==null||!ki(n)&&!ki(t)?n!==n&&t!==t:n5(n,t,e,s,Cb,i)}function s5(n){return function(t,e,s){for(var i=-1,r=Object(t),l=s(t),o=l.length;o--;){var a=l[++i];if(e(r[a],a,r)===!1)break}return t}}var i5=s5();function eu(n,t,e){(e!==void 0&&!oo(n[t],e)||e===void 0&&!(t in n))&&Ku(n,t,e)}function r5(n){return ki(n)&&Pa(n)}function nu(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}function l5(n){return xk(n,mb(n))}function o5(n,t,e,s,i,r,l){var o=nu(n,e),a=nu(t,e),c=l.get(a);if(c){eu(n,e,c);return}var u=r?r(o,a,e+"",n,t,l):void 0,f=u===void 0;if(f){var p=vr(a),m=!p&&jl(a),h=!p&&!m&&Gu(a);u=a,p||m||h?vr(o)?u=o:r5(o)?u=mk(o):m?(f=!1,u=yb(a,!0)):h?(f=!1,u=kb(a,!0)):u=[]:n4(a)||Zc(a)?(u=o,Zc(o)?u=l5(o):(!$i(o)||Vu(o))&&(u=wb(a))):f=!1}f&&(l.set(a,u),i(u,a,s,r,l),l.delete(a)),eu(n,e,u)}function Ob(n,t,e,s,i){n!==t&&i5(t,function(r,l){if(i||(i=new Zs),$i(r))o5(n,t,l,e,Ob,s,i);else{var o=s?s(nu(n,l),r,l+"",n,t,i):void 0;o===void 0&&(o=r),eu(n,l,o)}},mb)}function Ju(n,t){return Cb(n,t)}var Ki=Dk(function(n,t,e){Ob(n,t,e)}),jt=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(jt||{});class ti{constructor(t,e,s={}){this.attrName=t,this.keyName=e;const i=jt.TYPE&jt.ATTRIBUTE;this.scope=s.scope!=null?s.scope&jt.LEVEL|i:jt.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class Xr extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const xb=class su{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let s=null;try{s=t.parentNode}catch{return null}return this.find(s,e)}return null}create(t,e,s){const i=this.query(e);if(i==null)throw new Xr(`Unable to create ${e} blot`);const r=i,l=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:r.create(s),o=new r(t,l,s);return su.blots.set(o.domNode,o),o}find(t,e=!1){return su.find(t,e)}query(t,e=jt.ANY){let s;return typeof t=="string"?s=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?s=this.types.text:typeof t=="number"?t&jt.LEVEL&jt.BLOCK?s=this.types.block:t&jt.LEVEL&jt.INLINE&&(s=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(i=>(s=this.classes[i],!!s)),s=s||this.tags[t.tagName]),s==null?null:"scope"in s&&e&jt.LEVEL&s.scope&&e&jt.TYPE&s.scope?s:null}register(...t){return t.map(e=>{const s="blotName"in e,i="attrName"in e;if(!s&&!i)throw new Xr("Invalid definition");if(s&&e.blotName==="abstract")throw new Xr("Cannot register abstract class");const r=s?e.blotName:i?e.attrName:void 0;return this.types[r]=e,i?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):s&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(l=>l.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(l=>{(this.tags[l]==null||e.className==null)&&(this.tags[l]=e)}))),e})}};xb.blots=new WeakMap;let tl=xb;function Ph(n,t){return(n.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}class a5 extends ti{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){Ph(t,this.keyName).forEach(e=>{t.classList.remove(e)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const e=(Ph(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}const js=a5;function fc(n){const t=n.split("-"),e=t.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return t[0]+e}class c5 extends ti{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return this.canAdd(t,e)?(t.style[fc(this.keyName)]=e,!0):!1}remove(t){t.style[fc(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[fc(this.keyName)];return this.canAdd(t,e)?e:""}}const tr=c5;class u5{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=tl.find(this.domNode);if(t==null)return;const e=ti.keys(this.domNode),s=js.keys(this.domNode),i=tr.keys(this.domNode);e.concat(s).concat(i).forEach(r=>{const l=t.scroll.query(r,jt.ATTRIBUTE);l instanceof ti&&(this.attributes[l.attrName]=l)})}copy(t){Object.keys(this.attributes).forEach(e=>{const s=this.attributes[e].value(this.domNode);t.format(e,s)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}}const Fa=u5,Mb=class{constructor(t,e){this.scroll=t,this.domNode=e,tl.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new Xr("Blot definition missing tagName");let e,s;return Array.isArray(this.tagName)?(typeof t=="string"?(s=t.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof t=="number"&&(s=t),typeof s=="number"?e=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?e=document.createElement(s):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),tl.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,s,i){const r=this.isolate(t,e);if(this.scroll.query(s,jt.BLOT)!=null&&i)r.wrap(s,i);else if(this.scroll.query(s,jt.ATTRIBUTE)!=null){const l=this.scroll.create(this.statics.scope);r.wrap(l),l.format(s,i)}}insertAt(t,e,s){const i=s==null?this.scroll.create("text",e):this.scroll.create(e,s),r=this.split(t);this.parent.insertBefore(i,r||void 0)}isolate(t,e){const s=this.split(t);if(s==null)throw new Error("Attempt to isolate at end");return s.split(e),s}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const s=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){const s=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new Xr(`Cannot wrap ${t}`);return s.appendChild(this),s}};Mb.blotName="abstract";let Lb=Mb;const Nb=class extends Lb{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Nb.scope=jt.INLINE_BLOT;let f5=Nb;const Tn=f5;class h5{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let s=e();for(;s&&t>0;)t-=1,s=e();return s}contains(t){const e=this.iterator();let s=e();for(;s;){if(s===t)return!0;s=e()}return!1}indexOf(t){const e=this.iterator();let s=e(),i=0;for(;s;){if(s===t)return i;i+=1,s=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,s=this.head;for(;s!=null;){if(s===t)return e;e+=s.length(),s=s.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){const s=this.iterator();let i=s();for(;i;){const r=i.length();if(t<r||e&&t===r&&(i.next==null||i.next.length()!==0))return[i,t];t-=r,i=s()}return[null,0]}forEach(t){const e=this.iterator();let s=e();for(;s;)t(s),s=e()}forEachAt(t,e,s){if(e<=0)return;const[i,r]=this.find(t);let l=t-r;const o=this.iterator(i);let a=o();for(;a&&l<t+e;){const c=a.length();t>l?s(a,t-l,Math.min(e,l+c-t)):s(a,0,Math.min(c,t+e-l)),l+=c,a=o()}}map(t){return this.reduce((e,s)=>(e.push(t(s)),e),[])}reduce(t,e){const s=this.iterator();let i=s();for(;i;)e=t(e,i),i=s();return e}}function Bh(n,t){const e=t.find(n);if(e)return e;try{return t.create(n)}catch{const s=t.create(jt.INLINE);return Array.from(n.childNodes).forEach(i=>{s.domNode.appendChild(i)}),n.parentNode&&n.parentNode.replaceChild(s.domNode,n),s.attach(),s}}const Ib=class Ri extends Lb{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,Ri.uiClass&&this.uiNode.classList.add(Ri.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new h5,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=Bh(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof Xr)return;throw e}})}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,(s,i,r)=>{s.deleteAt(i,r)})}descendant(t,e=0){const[s,i]=this.children.find(e);return t.blotName==null&&t(s)||t.blotName!=null&&s instanceof t?[s,i]:s instanceof Ri?s.descendant(t,i):[null,-1]}descendants(t,e=0,s=Number.MAX_VALUE){let i=[],r=s;return this.children.forEachAt(e,s,(l,o,a)=>{(t.blotName==null&&t(l)||t.blotName!=null&&l instanceof t)&&i.push(l),l instanceof Ri&&(i=i.concat(l.descendants(t,o,r))),r-=a}),i}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(s=>e instanceof s)||(e.statics.scope===jt.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof Ri?e.unwrap():e.remove())})}formatAt(t,e,s,i){this.children.forEachAt(t,e,(r,l,o)=>{r.formatAt(l,o,s,i)})}insertAt(t,e,s){const[i,r]=this.children.find(t);if(i)i.insertAt(r,e,s);else{const l=s==null?this.scroll.create("text",e):this.scroll.create(e,s);this.appendChild(l)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let s=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(s=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(t.domNode,s),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(s=>{t.insertBefore(s,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){const[s,i]=this.children.find(t,e),r=[[this,t]];return s instanceof Ri?r.concat(s.path(i,e)):(s!=null&&r.push([s,i]),r)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const s=typeof t=="string"?this.scroll.create(t,e):t;return s instanceof Ri&&this.moveChildren(s),super.replaceWith(s)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(t,this.length(),(i,r,l)=>{const o=i.split(r,e);o!=null&&s.appendChild(o)}),s}splitAfter(t){const e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const s=[],i=[];t.forEach(r=>{r.target===this.domNode&&r.type==="childList"&&(s.push(...r.addedNodes),i.push(...r.removedNodes))}),i.forEach(r=>{if(r.parentNode!=null&&r.tagName!=="IFRAME"&&document.body.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const l=this.scroll.find(r);l!=null&&(l.domNode.parentNode==null||l.domNode.parentNode===this.domNode)&&l.detach()}),s.filter(r=>r.parentNode===this.domNode&&r!==this.uiNode).sort((r,l)=>r===l?0:r.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(r=>{let l=null;r.nextSibling!=null&&(l=this.scroll.find(r.nextSibling));const o=Bh(r,this.scroll);(o.next!==l||o.next==null)&&(o.parent!=null&&o.parent.removeChild(this),this.insertBefore(o,l||void 0))}),this.enforceAllowedChildren()}};Ib.uiClass="";let d5=Ib;const Ps=d5;function p5(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(n[e]!==t[e])return!1;return!0}const qr=class Fr extends Ps{static create(t){return super.create(t)}static formats(t,e){const s=e.query(Fr.blotName);if(!(s!=null&&t.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Fa(this.domNode)}format(t,e){if(t===this.statics.blotName&&!e)this.children.forEach(s=>{s instanceof Fr||(s=s.wrap(Fr.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(t,jt.INLINE);if(s==null)return;s instanceof ti?this.attributes.attribute(s,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,s,i){this.formats()[s]!=null||this.scroll.query(s,jt.ATTRIBUTE)?this.isolate(t,e).format(s,i):super.formatAt(t,e,s,i)}optimize(t){super.optimize(t);const e=this.formats();if(Object.keys(e).length===0)return this.unwrap();const s=this.next;s instanceof Fr&&s.prev===this&&p5(e,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(t,e){const s=super.replaceWith(t,e);return this.attributes.copy(s),s}update(t,e){super.update(t,e),t.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(t,e){const s=super.wrap(t,e);return s instanceof Fr&&this.attributes.move(s),s}};qr.allowedChildren=[qr,Tn],qr.blotName="inline",qr.scope=jt.INLINE_BLOT,qr.tagName="SPAN";let g5=qr;const Qu=g5,jr=class iu extends Ps{static create(t){return super.create(t)}static formats(t,e){const s=e.query(iu.blotName);if(!(s!=null&&t.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Fa(this.domNode)}format(t,e){const s=this.scroll.query(t,jt.BLOCK);s!=null&&(s instanceof ti?this.attributes.attribute(s,e):t===this.statics.blotName&&!e?this.replaceWith(iu.blotName):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,s,i){this.scroll.query(s,jt.BLOCK)!=null?this.format(s,i):super.formatAt(t,e,s,i)}insertAt(t,e,s){if(s==null||this.scroll.query(e,jt.INLINE)!=null)super.insertAt(t,e,s);else{const i=this.split(t);if(i!=null){const r=this.scroll.create(e,s);i.parent.insertBefore(r,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){const s=super.replaceWith(t,e);return this.attributes.copy(s),s}update(t,e){super.update(t,e),t.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};jr.blotName="block",jr.scope=jt.BLOCK_BLOT,jr.tagName="P",jr.allowedChildren=[Qu,jr,Tn];let m5=jr;const Ul=m5,ru=class extends Ps{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,s,i){super.formatAt(t,e,s,i),this.enforceAllowedChildren()}insertAt(t,e,s){super.insertAt(t,e,s),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};ru.blotName="container",ru.scope=jt.BLOCK_BLOT;let _5=ru;const ja=_5;class b5 extends Tn{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,s,i){t===0&&e===this.length()?this.format(s,i):super.formatAt(t,e,s,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const is=b5,v5={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},y5=100,zr=class extends Ps{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,v5),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const s=this.registry.find(t,e);return s?s.scroll===this?s:e?this.find(s.scroll.domNode.parentNode,!0):null:null}query(t,e=jt.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(t,e)}formatAt(t,e,s,i){this.update(),super.formatAt(t,e,s,i)}insertAt(t,e,s){this.update(),super.insertAt(t,e,s)}optimize(t=[],e={}){super.optimize(e);const s=e.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)t.push(i.pop());const r=(a,c=!0)=>{a==null||a===this||a.domNode.parentNode!=null&&(s.has(a.domNode)||s.set(a.domNode,[]),c&&r(a.parent))},l=a=>{s.has(a.domNode)&&(a instanceof Ps&&a.children.forEach(l),s.delete(a.domNode),a.optimize(e))};let o=t;for(let a=0;o.length>0;a+=1){if(a>=y5)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach(c=>{const u=this.find(c.target,!0);u!=null&&(u.domNode===c.target&&(c.type==="childList"?(r(this.find(c.previousSibling,!1)),Array.from(c.addedNodes).forEach(f=>{const p=this.find(f,!1);r(p,!1),p instanceof Ps&&p.children.forEach(m=>{r(m,!1)})})):c.type==="attributes"&&r(u.prev)),r(u))}),this.children.forEach(l),o=Array.from(this.observer.takeRecords()),i=o.slice();i.length>0;)t.push(i.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const s=new WeakMap;t.map(i=>{const r=this.find(i.target,!0);return r==null?null:s.has(r.domNode)?(s.get(r.domNode).push(i),null):(s.set(r.domNode,[i]),r)}).forEach(i=>{i!=null&&i!==this&&s.has(i.domNode)&&i.update(s.get(i.domNode)||[],e)}),e.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),e),this.optimize(t,e)}};zr.blotName="scroll",zr.defaultChild=Ul,zr.allowedChildren=[Ul,ja],zr.scope=jt.BLOCK_BLOT,zr.tagName="DIV";let k5=zr;const $u=k5,lu=class Db extends Tn{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,s){s==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,s)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Db&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(t,e){t.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};lu.blotName="text",lu.scope=jt.INLINE_BLOT;let w5=lu;const pa=w5,S5=Object.freeze(Object.defineProperty({__proto__:null,Attributor:ti,AttributorStore:Fa,BlockBlot:Ul,ClassAttributor:js,ContainerBlot:ja,EmbedBlot:is,InlineBlot:Qu,LeafBlot:Tn,ParentBlot:Ps,Registry:tl,Scope:jt,ScrollBlot:$u,StyleAttributor:tr,TextBlot:pa},Symbol.toStringTag,{value:"Module"}));var qi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ou={exports:{}},Qn=-1,Bn=1,un=0;function Wl(n,t,e,s,i){if(n===t)return n?[[un,n]]:[];if(e!=null){var r=N5(n,t,e);if(r)return r}var l=tf(n,t),o=n.substring(0,l);n=n.substring(l),t=t.substring(l),l=za(n,t);var a=n.substring(n.length-l);n=n.substring(0,n.length-l),t=t.substring(0,t.length-l);var c=A5(n,t);return o&&c.unshift([un,o]),a&&c.push([un,a]),ef(c,i),s&&C5(c),c}function A5(n,t){var e;if(!n)return[[Bn,t]];if(!t)return[[Qn,n]];var s=n.length>t.length?n:t,i=n.length>t.length?t:n,r=s.indexOf(i);if(r!==-1)return e=[[Bn,s.substring(0,r)],[un,i],[Bn,s.substring(r+i.length)]],n.length>t.length&&(e[0][0]=e[2][0]=Qn),e;if(i.length===1)return[[Qn,n],[Bn,t]];var l=E5(n,t);if(l){var o=l[0],a=l[1],c=l[2],u=l[3],f=l[4],p=Wl(o,c),m=Wl(a,u);return p.concat([[un,f]],m)}return T5(n,t)}function T5(n,t){for(var e=n.length,s=t.length,i=Math.ceil((e+s)/2),r=i,l=2*i,o=new Array(l),a=new Array(l),c=0;c<l;c++)o[c]=-1,a[c]=-1;o[r+1]=0,a[r+1]=0;for(var u=e-s,f=u%2!==0,p=0,m=0,h=0,_=0,b=0;b<i;b++){for(var y=-b+p;y<=b-m;y+=2){var w=r+y,A;y===-b||y!==b&&o[w-1]<o[w+1]?A=o[w+1]:A=o[w-1]+1;for(var E=A-y;A<e&&E<s&&n.charAt(A)===t.charAt(E);)A++,E++;if(o[w]=A,A>e)m+=2;else if(E>s)p+=2;else if(f){var T=r+u-y;if(T>=0&&T<l&&a[T]!==-1){var C=e-a[T];if(A>=C)return qh(n,t,A,E)}}}for(var M=-b+h;M<=b-_;M+=2){var T=r+M,C;M===-b||M!==b&&a[T-1]<a[T+1]?C=a[T+1]:C=a[T-1]+1;for(var x=C-M;C<e&&x<s&&n.charAt(e-C-1)===t.charAt(s-x-1);)C++,x++;if(a[T]=C,C>e)_+=2;else if(x>s)h+=2;else if(!f){var w=r+u-M;if(w>=0&&w<l&&o[w]!==-1){var A=o[w],E=r+A-w;if(C=e-C,A>=C)return qh(n,t,A,E)}}}}return[[Qn,n],[Bn,t]]}function qh(n,t,e,s){var i=n.substring(0,e),r=t.substring(0,s),l=n.substring(e),o=t.substring(s),a=Wl(i,r),c=Wl(l,o);return a.concat(c)}function tf(n,t){if(!n||!t||n.charAt(0)!==t.charAt(0))return 0;for(var e=0,s=Math.min(n.length,t.length),i=s,r=0;e<i;)n.substring(r,i)==t.substring(r,i)?(e=i,r=e):s=i,i=Math.floor((s-e)/2+e);return Pb(n.charCodeAt(i-1))&&i--,i}function Fh(n,t){var e=n.length,s=t.length;if(e==0||s==0)return 0;e>s?n=n.substring(e-s):e<s&&(t=t.substring(0,e));var i=Math.min(e,s);if(n==t)return i;for(var r=0,l=1;;){var o=n.substring(i-l),a=t.indexOf(o);if(a==-1)return r;l+=a,(a==0||n.substring(i-l)==t.substring(0,l))&&(r=l,l++)}}function za(n,t){if(!n||!t||n.slice(-1)!==t.slice(-1))return 0;for(var e=0,s=Math.min(n.length,t.length),i=s,r=0;e<i;)n.substring(n.length-i,n.length-r)==t.substring(t.length-i,t.length-r)?(e=i,r=e):s=i,i=Math.floor((s-e)/2+e);return Bb(n.charCodeAt(n.length-i))&&i--,i}function E5(n,t){var e=n.length>t.length?n:t,s=n.length>t.length?t:n;if(e.length<4||s.length*2<e.length)return null;function i(m,h,_){for(var b=m.substring(_,_+Math.floor(m.length/4)),y=-1,w="",A,E,T,C;(y=h.indexOf(b,y+1))!==-1;){var M=tf(m.substring(_),h.substring(y)),x=za(m.substring(0,_),h.substring(0,y));w.length<x+M&&(w=h.substring(y-x,y)+h.substring(y,y+M),A=m.substring(0,_-x),E=m.substring(_+M),T=h.substring(0,y-x),C=h.substring(y+M))}return w.length*2>=m.length?[A,E,T,C,w]:null}var r=i(e,s,Math.ceil(e.length/4)),l=i(e,s,Math.ceil(e.length/2)),o;if(!r&&!l)return null;l?r?o=r[4].length>l[4].length?r:l:o=l:o=r;var a,c,u,f;n.length>t.length?(a=o[0],c=o[1],u=o[2],f=o[3]):(u=o[0],f=o[1],a=o[2],c=o[3]);var p=o[4];return[a,c,u,f,p]}function C5(n){for(var t=!1,e=[],s=0,i=null,r=0,l=0,o=0,a=0,c=0;r<n.length;)n[r][0]==un?(e[s++]=r,l=a,o=c,a=0,c=0,i=n[r][1]):(n[r][0]==Bn?a+=n[r][1].length:c+=n[r][1].length,i&&i.length<=Math.max(l,o)&&i.length<=Math.max(a,c)&&(n.splice(e[s-1],0,[Qn,i]),n[e[s-1]+1][0]=Bn,s--,s--,r=s>0?e[s-1]:-1,l=0,o=0,a=0,c=0,i=null,t=!0)),r++;for(t&&ef(n),M5(n),r=1;r<n.length;){if(n[r-1][0]==Qn&&n[r][0]==Bn){var u=n[r-1][1],f=n[r][1],p=Fh(u,f),m=Fh(f,u);p>=m?(p>=u.length/2||p>=f.length/2)&&(n.splice(r,0,[un,f.substring(0,p)]),n[r-1][1]=u.substring(0,u.length-p),n[r+1][1]=f.substring(p),r++):(m>=u.length/2||m>=f.length/2)&&(n.splice(r,0,[un,u.substring(0,m)]),n[r-1][0]=Bn,n[r-1][1]=f.substring(0,f.length-m),n[r+1][0]=Qn,n[r+1][1]=u.substring(m),r++),r++}r++}}var jh=/[^a-zA-Z0-9]/,zh=/\s/,Hh=/[\r\n]/,O5=/\n\r?\n$/,x5=/^\r?\n\r?\n/;function M5(n){function t(m,h){if(!m||!h)return 6;var _=m.charAt(m.length-1),b=h.charAt(0),y=_.match(jh),w=b.match(jh),A=y&&_.match(zh),E=w&&b.match(zh),T=A&&_.match(Hh),C=E&&b.match(Hh),M=T&&m.match(O5),x=C&&h.match(x5);return M||x?5:T||C?4:y&&!A&&E?3:A||E?2:y||w?1:0}for(var e=1;e<n.length-1;){if(n[e-1][0]==un&&n[e+1][0]==un){var s=n[e-1][1],i=n[e][1],r=n[e+1][1],l=za(s,i);if(l){var o=i.substring(i.length-l);s=s.substring(0,s.length-l),i=o+i.substring(0,i.length-l),r=o+r}for(var a=s,c=i,u=r,f=t(s,i)+t(i,r);i.charAt(0)===r.charAt(0);){s+=i.charAt(0),i=i.substring(1)+r.charAt(0),r=r.substring(1);var p=t(s,i)+t(i,r);p>=f&&(f=p,a=s,c=i,u=r)}n[e-1][1]!=a&&(a?n[e-1][1]=a:(n.splice(e-1,1),e--),n[e][1]=c,u?n[e+1][1]=u:(n.splice(e+1,1),e--))}e++}}function ef(n,t){n.push([un,""]);for(var e=0,s=0,i=0,r="",l="",o;e<n.length;){if(e<n.length-1&&!n[e][1]){n.splice(e,1);continue}switch(n[e][0]){case Bn:i++,l+=n[e][1],e++;break;case Qn:s++,r+=n[e][1],e++;break;case un:var a=e-i-s-1;if(t){if(a>=0&&Fb(n[a][1])){var c=n[a][1].slice(-1);if(n[a][1]=n[a][1].slice(0,-1),r=c+r,l=c+l,!n[a][1]){n.splice(a,1),e--;var u=a-1;n[u]&&n[u][0]===Bn&&(i++,l=n[u][1]+l,u--),n[u]&&n[u][0]===Qn&&(s++,r=n[u][1]+r,u--),a=u}}if(qb(n[e][1])){var c=n[e][1].charAt(0);n[e][1]=n[e][1].slice(1),r+=c,l+=c}}if(e<n.length-1&&!n[e][1]){n.splice(e,1);break}if(r.length>0||l.length>0){r.length>0&&l.length>0&&(o=tf(l,r),o!==0&&(a>=0?n[a][1]+=l.substring(0,o):(n.splice(0,0,[un,l.substring(0,o)]),e++),l=l.substring(o),r=r.substring(o)),o=za(l,r),o!==0&&(n[e][1]=l.substring(l.length-o)+n[e][1],l=l.substring(0,l.length-o),r=r.substring(0,r.length-o)));var f=i+s;r.length===0&&l.length===0?(n.splice(e-f,f),e=e-f):r.length===0?(n.splice(e-f,f,[Bn,l]),e=e-f+1):l.length===0?(n.splice(e-f,f,[Qn,r]),e=e-f+1):(n.splice(e-f,f,[Qn,r],[Bn,l]),e=e-f+2)}e!==0&&n[e-1][0]===un?(n[e-1][1]+=n[e][1],n.splice(e,1)):e++,i=0,s=0,r="",l="";break}}n[n.length-1][1]===""&&n.pop();var p=!1;for(e=1;e<n.length-1;)n[e-1][0]===un&&n[e+1][0]===un&&(n[e][1].substring(n[e][1].length-n[e-1][1].length)===n[e-1][1]?(n[e][1]=n[e-1][1]+n[e][1].substring(0,n[e][1].length-n[e-1][1].length),n[e+1][1]=n[e-1][1]+n[e+1][1],n.splice(e-1,1),p=!0):n[e][1].substring(0,n[e+1][1].length)==n[e+1][1]&&(n[e-1][1]+=n[e+1][1],n[e][1]=n[e][1].substring(n[e+1][1].length)+n[e+1][1],n.splice(e+1,1),p=!0)),e++;p&&ef(n,t)}function Pb(n){return n>=55296&&n<=56319}function Bb(n){return n>=56320&&n<=57343}function qb(n){return Bb(n.charCodeAt(0))}function Fb(n){return Pb(n.charCodeAt(n.length-1))}function L5(n){for(var t=[],e=0;e<n.length;e++)n[e][1].length>0&&t.push(n[e]);return t}function hc(n,t,e,s){return Fb(n)||qb(s)?null:L5([[un,n],[Qn,t],[Bn,e],[un,s]])}function N5(n,t,e){var s=typeof e=="number"?{index:e,length:0}:e.oldRange,i=typeof e=="number"?null:e.newRange,r=n.length,l=t.length;if(s.length===0&&(i===null||i.length===0)){var o=s.index,a=n.slice(0,o),c=n.slice(o),u=i?i.index:null;t:{var f=o+l-r;if(u!==null&&u!==f||f<0||f>l)break t;var p=t.slice(0,f),m=t.slice(f);if(m!==c)break t;var h=Math.min(o,f),_=a.slice(0,h),b=p.slice(0,h);if(_!==b)break t;var y=a.slice(h),w=p.slice(h);return hc(_,y,w,c)}t:{if(u!==null&&u!==o)break t;var A=o,p=t.slice(0,A),m=t.slice(A);if(p!==a)break t;var E=Math.min(r-A,l-A),T=c.slice(c.length-E),C=m.slice(m.length-E);if(T!==C)break t;var y=c.slice(0,c.length-E),w=m.slice(0,m.length-E);return hc(a,y,w,T)}}if(s.length>0&&i&&i.length===0)t:{var _=n.slice(0,s.index),T=n.slice(s.index+s.length),h=_.length,E=T.length;if(l<h+E)break t;var b=t.slice(0,h),C=t.slice(l-E);if(_!==b||T!==C)break t;var y=n.slice(h,r-E),w=t.slice(h,l-E);return hc(_,y,w,T)}return null}function Ha(n,t,e,s){return Wl(n,t,e,s,!0)}Ha.INSERT=Bn;Ha.DELETE=Qn;Ha.EQUAL=un;var I5=Ha,ga={exports:{}};ga.exports;(function(n,t){var e=200,s="__lodash_hash_undefined__",i=9007199254740991,r="[object Arguments]",l="[object Array]",o="[object Boolean]",a="[object Date]",c="[object Error]",u="[object Function]",f="[object GeneratorFunction]",p="[object Map]",m="[object Number]",h="[object Object]",_="[object Promise]",b="[object RegExp]",y="[object Set]",w="[object String]",A="[object Symbol]",E="[object WeakMap]",T="[object ArrayBuffer]",C="[object DataView]",M="[object Float32Array]",x="[object Float64Array]",D="[object Int8Array]",L="[object Int16Array]",q="[object Int32Array]",F="[object Uint8Array]",nt="[object Uint8ClampedArray]",et="[object Uint16Array]",U="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,V=/\w*$/,$=/^\[object .+?Constructor\]$/,st=/^(?:0|[1-9]\d*)$/,Z={};Z[r]=Z[l]=Z[T]=Z[C]=Z[o]=Z[a]=Z[M]=Z[x]=Z[D]=Z[L]=Z[q]=Z[p]=Z[m]=Z[h]=Z[b]=Z[y]=Z[w]=Z[A]=Z[F]=Z[nt]=Z[et]=Z[U]=!0,Z[c]=Z[u]=Z[E]=!1;var wt=typeof qi=="object"&&qi&&qi.Object===Object&&qi,rt=typeof self=="object"&&self&&self.Object===Object&&self,at=wt||rt||Function("return this")(),vt=t&&!t.nodeType&&t,K=vt&&!0&&n&&!n.nodeType&&n,ct=K&&K.exports===vt;function ft(k,O){return k.set(O[0],O[1]),k}function ut(k,O){return k.add(O),k}function Nt(k,O){for(var B=-1,R=k?k.length:0;++B<R&&O(k[B],B,k)!==!1;);return k}function yt(k,O){for(var B=-1,R=O.length,gt=k.length;++B<R;)k[gt+B]=O[B];return k}function z(k,O,B,R){for(var gt=-1,Lt=k?k.length:0;++gt<Lt;)B=O(B,k[gt],gt,k);return B}function Y(k,O){for(var B=-1,R=Array(k);++B<k;)R[B]=O(B);return R}function dt(k,O){return k==null?void 0:k[O]}function Ut(k){var O=!1;if(k!=null&&typeof k.toString!="function")try{O=!!(k+"")}catch{}return O}function $t(k){var O=-1,B=Array(k.size);return k.forEach(function(R,gt){B[++O]=[gt,R]}),B}function ht(k,O){return function(B){return k(O(B))}}function St(k){var O=-1,B=Array(k.size);return k.forEach(function(R){B[++O]=R}),B}var Ct=Array.prototype,it=Function.prototype,Dt=Object.prototype,zt=at["__core-js_shared__"],Q=function(){var k=/[^.]+$/.exec(zt&&zt.keys&&zt.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}(),lt=it.toString,mt=Dt.hasOwnProperty,kt=Dt.toString,Mt=RegExp("^"+lt.call(mt).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pt=ct?at.Buffer:void 0,Tt=at.Symbol,Bt=at.Uint8Array,_t=ht(Object.getPrototypeOf,Object),me=Object.create,qe=Dt.propertyIsEnumerable,de=Ct.splice,Xt=Object.getOwnPropertySymbols,nn=Pt?Pt.isBuffer:void 0,Ze=ht(Object.keys,Object),Je=le(at,"DataView"),ne=le(at,"Map"),re=le(at,"Promise"),ve=le(at,"Set"),Yn=le(at,"WeakMap"),Ie=le(Object,"create"),ce=we(Je),Mn=we(ne),Ln=we(re),Xn=we(ve),sn=we(Yn),ke=Tt?Tt.prototype:void 0,rs=ke?ke.valueOf:void 0;function rn(k){var O=-1,B=k?k.length:0;for(this.clear();++O<B;){var R=k[O];this.set(R[0],R[1])}}function Jt(){this.__data__=Ie?Ie(null):{}}function pe(k){return this.has(k)&&delete this.__data__[k]}function Gn(k){var O=this.__data__;if(Ie){var B=O[k];return B===s?void 0:B}return mt.call(O,k)?O[k]:void 0}function ls(k){var O=this.__data__;return Ie?O[k]!==void 0:mt.call(O,k)}function vn(k,O){var B=this.__data__;return B[k]=Ie&&O===void 0?s:O,this}rn.prototype.clear=Jt,rn.prototype.delete=pe,rn.prototype.get=Gn,rn.prototype.has=ls,rn.prototype.set=vn;function Ee(k){var O=-1,B=k?k.length:0;for(this.clear();++O<B;){var R=k[O];this.set(R[0],R[1])}}function os(){this.__data__=[]}function as(k){var O=this.__data__,B=Dn(O,k);if(B<0)return!1;var R=O.length-1;return B==R?O.pop():de.call(O,B,1),!0}function cs(k){var O=this.__data__,B=Dn(O,k);return B<0?void 0:O[B][1]}function Es(k){return Dn(this.__data__,k)>-1}function us(k,O){var B=this.__data__,R=Dn(B,k);return R<0?B.push([k,O]):B[R][1]=O,this}Ee.prototype.clear=os,Ee.prototype.delete=as,Ee.prototype.get=cs,Ee.prototype.has=Es,Ee.prototype.set=us;function xe(k){var O=-1,B=k?k.length:0;for(this.clear();++O<B;){var R=k[O];this.set(R[0],R[1])}}function Ci(){this.__data__={hash:new rn,map:new(ne||Ee),string:new rn}}function Nn(k){return Yt(this,k).delete(k)}function si(k){return Yt(this,k).get(k)}function Oi(k){return Yt(this,k).has(k)}function fs(k,O){return Yt(this,k).set(k,O),this}xe.prototype.clear=Ci,xe.prototype.delete=Nn,xe.prototype.get=si,xe.prototype.has=Oi,xe.prototype.set=fs;function Fe(k){this.__data__=new Ee(k)}function xi(){this.__data__=new Ee}function In(k){return this.__data__.delete(k)}function ii(k){return this.__data__.get(k)}function Mi(k){return this.__data__.has(k)}function jn(k,O){var B=this.__data__;if(B instanceof Ee){var R=B.__data__;if(!ne||R.length<e-1)return R.push([k,O]),this;B=this.__data__=new xe(R)}return B.set(k,O),this}Fe.prototype.clear=xi,Fe.prototype.delete=In,Fe.prototype.get=ii,Fe.prototype.has=Mi,Fe.prototype.set=jn;function zn(k,O){var B=tn(k)||ze(k)?Y(k.length,String):[],R=B.length,gt=!!R;for(var Lt in k)mt.call(k,Lt)&&!(gt&&(Lt=="length"||Ve(Lt,R)))&&B.push(Lt);return B}function ri(k,O,B){var R=k[O];(!(mt.call(k,O)&&Os(R,B))||B===void 0&&!(O in k))&&(k[O]=B)}function Dn(k,O){for(var B=k.length;B--;)if(Os(k[B][0],O))return B;return-1}function Me(k,O){return k&&At(O,ms(O),k)}function Us(k,O,B,R,gt,Lt,oe){var It;if(R&&(It=Lt?R(k,gt,Lt,oe):R(k)),It!==void 0)return It;if(!gs(k))return k;var _e=tn(k);if(_e){if(It=li(k),!O)return pt(k,It)}else{var ge=ue(k),yn=ge==u||ge==f;if(on(k))return Rn(k,O);if(ge==h||ge==r||yn&&!Lt){if(Ut(k))return Lt?k:{};if(It=$e(yn?{}:k),!O)return Ft(k,Me(It,k))}else{if(!Z[ge])return Lt?k:{};It=De(k,ge,Us,O)}}oe||(oe=new Fe);var Hn=oe.get(k);if(Hn)return Hn;if(oe.set(k,It),!_e)var cn=B?Ht(k):ms(k);return Nt(cn||k,function(kn,mn){cn&&(mn=kn,kn=k[mn]),ri(It,mn,Us(kn,O,B,R,mn,k,oe))}),It}function hs(k){return gs(k)?me(k):{}}function Li(k,O,B){var R=O(k);return tn(k)?R:yt(R,B(k))}function Cs(k){return kt.call(k)}function Ni(k){if(!gs(k)||Zn(k))return!1;var O=nr(k)||Ut(k)?Mt:$;return O.test(we(k))}function ds(k){if(!Pn(k))return Ze(k);var O=[];for(var B in Object(k))mt.call(k,B)&&B!="constructor"&&O.push(B);return O}function Rn(k,O){if(O)return k.slice();var B=new k.constructor(k.length);return k.copy(B),B}function Ws(k){var O=new k.constructor(k.byteLength);return new Bt(O).set(new Bt(k)),O}function hn(k,O){var B=O?Ws(k.buffer):k.buffer;return new k.constructor(B,k.byteOffset,k.byteLength)}function Vs(k,O,B){var R=O?B($t(k),!0):$t(k);return z(R,ft,new k.constructor)}function ps(k){var O=new k.constructor(k.source,V.exec(k));return O.lastIndex=k.lastIndex,O}function Qe(k,O,B){var R=O?B(St(k),!0):St(k);return z(R,ut,new k.constructor)}function H(k){return rs?Object(rs.call(k)):{}}function J(k,O){var B=O?Ws(k.buffer):k.buffer;return new k.constructor(B,k.byteOffset,k.length)}function pt(k,O){var B=-1,R=k.length;for(O||(O=Array(R));++B<R;)O[B]=k[B];return O}function At(k,O,B,R){B||(B={});for(var gt=-1,Lt=O.length;++gt<Lt;){var oe=O[gt],It=void 0;ri(B,oe,It===void 0?k[oe]:It)}return B}function Ft(k,O){return At(k,te(k),O)}function Ht(k){return Li(k,ms,te)}function Yt(k,O){var B=k.__data__;return je(O)?B[typeof O=="string"?"string":"hash"]:B.map}function le(k,O){var B=dt(k,O);return Ni(B)?B:void 0}var te=Xt?ht(Xt,Object):an,ue=Cs;(Je&&ue(new Je(new ArrayBuffer(1)))!=C||ne&&ue(new ne)!=p||re&&ue(re.resolve())!=_||ve&&ue(new ve)!=y||Yn&&ue(new Yn)!=E)&&(ue=function(k){var O=kt.call(k),B=O==h?k.constructor:void 0,R=B?we(B):void 0;if(R)switch(R){case ce:return C;case Mn:return p;case Ln:return _;case Xn:return y;case sn:return E}return O});function li(k){var O=k.length,B=k.constructor(O);return O&&typeof k[0]=="string"&&mt.call(k,"index")&&(B.index=k.index,B.input=k.input),B}function $e(k){return typeof k.constructor=="function"&&!Pn(k)?hs(_t(k)):{}}function De(k,O,B,R){var gt=k.constructor;switch(O){case T:return Ws(k);case o:case a:return new gt(+k);case C:return hn(k,R);case M:case x:case D:case L:case q:case F:case nt:case et:case U:return J(k,R);case p:return Vs(k,R,B);case m:case w:return new gt(k);case b:return ps(k);case y:return Qe(k,R,B);case A:return H(k)}}function Ve(k,O){return O=O??i,!!O&&(typeof k=="number"||st.test(k))&&k>-1&&k%1==0&&k<O}function je(k){var O=typeof k;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?k!=="__proto__":k===null}function Zn(k){return!!Q&&Q in k}function Pn(k){var O=k&&k.constructor,B=typeof O=="function"&&O.prototype||Dt;return k===B}function we(k){if(k!=null){try{return lt.call(k)}catch{}try{return k+""}catch{}}return""}function ln(k){return Us(k,!0,!0)}function Os(k,O){return k===O||k!==k&&O!==O}function ze(k){return dn(k)&&mt.call(k,"callee")&&(!qe.call(k,"callee")||kt.call(k)==r)}var tn=Array.isArray;function Ke(k){return k!=null&&sr(k.length)&&!nr(k)}function dn(k){return ir(k)&&Ke(k)}var on=nn||Nr;function nr(k){var O=gs(k)?kt.call(k):"";return O==u||O==f}function sr(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=i}function gs(k){var O=typeof k;return!!k&&(O=="object"||O=="function")}function ir(k){return!!k&&typeof k=="object"}function ms(k){return Ke(k)?zn(k):ds(k)}function an(){return[]}function Nr(){return!1}n.exports=ln})(ga,ga.exports);var jb=ga.exports,ma={exports:{}};ma.exports;(function(n,t){var e=200,s="__lodash_hash_undefined__",i=1,r=2,l=9007199254740991,o="[object Arguments]",a="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",f="[object Date]",p="[object Error]",m="[object Function]",h="[object GeneratorFunction]",_="[object Map]",b="[object Number]",y="[object Null]",w="[object Object]",A="[object Promise]",E="[object Proxy]",T="[object RegExp]",C="[object Set]",M="[object String]",x="[object Symbol]",D="[object Undefined]",L="[object WeakMap]",q="[object ArrayBuffer]",F="[object DataView]",nt="[object Float32Array]",et="[object Float64Array]",U="[object Int8Array]",W="[object Int16Array]",V="[object Int32Array]",$="[object Uint8Array]",st="[object Uint8ClampedArray]",Z="[object Uint16Array]",wt="[object Uint32Array]",rt=/[\\^$.*+?()[\]{}|]/g,at=/^\[object .+?Constructor\]$/,vt=/^(?:0|[1-9]\d*)$/,K={};K[nt]=K[et]=K[U]=K[W]=K[V]=K[$]=K[st]=K[Z]=K[wt]=!0,K[o]=K[a]=K[q]=K[u]=K[F]=K[f]=K[p]=K[m]=K[_]=K[b]=K[w]=K[T]=K[C]=K[M]=K[L]=!1;var ct=typeof qi=="object"&&qi&&qi.Object===Object&&qi,ft=typeof self=="object"&&self&&self.Object===Object&&self,ut=ct||ft||Function("return this")(),Nt=t&&!t.nodeType&&t,yt=Nt&&!0&&n&&!n.nodeType&&n,z=yt&&yt.exports===Nt,Y=z&&ct.process,dt=function(){try{return Y&&Y.binding&&Y.binding("util")}catch{}}(),Ut=dt&&dt.isTypedArray;function $t(k,O){for(var B=-1,R=k==null?0:k.length,gt=0,Lt=[];++B<R;){var oe=k[B];O(oe,B,k)&&(Lt[gt++]=oe)}return Lt}function ht(k,O){for(var B=-1,R=O.length,gt=k.length;++B<R;)k[gt+B]=O[B];return k}function St(k,O){for(var B=-1,R=k==null?0:k.length;++B<R;)if(O(k[B],B,k))return!0;return!1}function Ct(k,O){for(var B=-1,R=Array(k);++B<k;)R[B]=O(B);return R}function it(k){return function(O){return k(O)}}function Dt(k,O){return k.has(O)}function zt(k,O){return k==null?void 0:k[O]}function Q(k){var O=-1,B=Array(k.size);return k.forEach(function(R,gt){B[++O]=[gt,R]}),B}function lt(k,O){return function(B){return k(O(B))}}function mt(k){var O=-1,B=Array(k.size);return k.forEach(function(R){B[++O]=R}),B}var kt=Array.prototype,Mt=Function.prototype,Pt=Object.prototype,Tt=ut["__core-js_shared__"],Bt=Mt.toString,_t=Pt.hasOwnProperty,me=function(){var k=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}(),qe=Pt.toString,de=RegExp("^"+Bt.call(_t).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xt=z?ut.Buffer:void 0,nn=ut.Symbol,Ze=ut.Uint8Array,Je=Pt.propertyIsEnumerable,ne=kt.splice,re=nn?nn.toStringTag:void 0,ve=Object.getOwnPropertySymbols,Yn=Xt?Xt.isBuffer:void 0,Ie=lt(Object.keys,Object),ce=te(ut,"DataView"),Mn=te(ut,"Map"),Ln=te(ut,"Promise"),Xn=te(ut,"Set"),sn=te(ut,"WeakMap"),ke=te(Object,"create"),rs=we(ce),rn=we(Mn),Jt=we(Ln),pe=we(Xn),Gn=we(sn),ls=nn?nn.prototype:void 0,vn=ls?ls.valueOf:void 0;function Ee(k){var O=-1,B=k==null?0:k.length;for(this.clear();++O<B;){var R=k[O];this.set(R[0],R[1])}}function os(){this.__data__=ke?ke(null):{},this.size=0}function as(k){var O=this.has(k)&&delete this.__data__[k];return this.size-=O?1:0,O}function cs(k){var O=this.__data__;if(ke){var B=O[k];return B===s?void 0:B}return _t.call(O,k)?O[k]:void 0}function Es(k){var O=this.__data__;return ke?O[k]!==void 0:_t.call(O,k)}function us(k,O){var B=this.__data__;return this.size+=this.has(k)?0:1,B[k]=ke&&O===void 0?s:O,this}Ee.prototype.clear=os,Ee.prototype.delete=as,Ee.prototype.get=cs,Ee.prototype.has=Es,Ee.prototype.set=us;function xe(k){var O=-1,B=k==null?0:k.length;for(this.clear();++O<B;){var R=k[O];this.set(R[0],R[1])}}function Ci(){this.__data__=[],this.size=0}function Nn(k){var O=this.__data__,B=Rn(O,k);if(B<0)return!1;var R=O.length-1;return B==R?O.pop():ne.call(O,B,1),--this.size,!0}function si(k){var O=this.__data__,B=Rn(O,k);return B<0?void 0:O[B][1]}function Oi(k){return Rn(this.__data__,k)>-1}function fs(k,O){var B=this.__data__,R=Rn(B,k);return R<0?(++this.size,B.push([k,O])):B[R][1]=O,this}xe.prototype.clear=Ci,xe.prototype.delete=Nn,xe.prototype.get=si,xe.prototype.has=Oi,xe.prototype.set=fs;function Fe(k){var O=-1,B=k==null?0:k.length;for(this.clear();++O<B;){var R=k[O];this.set(R[0],R[1])}}function xi(){this.size=0,this.__data__={hash:new Ee,map:new(Mn||xe),string:new Ee}}function In(k){var O=le(this,k).delete(k);return this.size-=O?1:0,O}function ii(k){return le(this,k).get(k)}function Mi(k){return le(this,k).has(k)}function jn(k,O){var B=le(this,k),R=B.size;return B.set(k,O),this.size+=B.size==R?0:1,this}Fe.prototype.clear=xi,Fe.prototype.delete=In,Fe.prototype.get=ii,Fe.prototype.has=Mi,Fe.prototype.set=jn;function zn(k){var O=-1,B=k==null?0:k.length;for(this.__data__=new Fe;++O<B;)this.add(k[O])}function ri(k){return this.__data__.set(k,s),this}function Dn(k){return this.__data__.has(k)}zn.prototype.add=zn.prototype.push=ri,zn.prototype.has=Dn;function Me(k){var O=this.__data__=new xe(k);this.size=O.size}function Us(){this.__data__=new xe,this.size=0}function hs(k){var O=this.__data__,B=O.delete(k);return this.size=O.size,B}function Li(k){return this.__data__.get(k)}function Cs(k){return this.__data__.has(k)}function Ni(k,O){var B=this.__data__;if(B instanceof xe){var R=B.__data__;if(!Mn||R.length<e-1)return R.push([k,O]),this.size=++B.size,this;B=this.__data__=new Fe(R)}return B.set(k,O),this.size=B.size,this}Me.prototype.clear=Us,Me.prototype.delete=hs,Me.prototype.get=Li,Me.prototype.has=Cs,Me.prototype.set=Ni;function ds(k,O){var B=ze(k),R=!B&&Os(k),gt=!B&&!R&&Ke(k),Lt=!B&&!R&&!gt&&ir(k),oe=B||R||gt||Lt,It=oe?Ct(k.length,String):[],_e=It.length;for(var ge in k)_t.call(k,ge)&&!(oe&&(ge=="length"||gt&&(ge=="offset"||ge=="parent")||Lt&&(ge=="buffer"||ge=="byteLength"||ge=="byteOffset")||De(ge,_e)))&&It.push(ge);return It}function Rn(k,O){for(var B=k.length;B--;)if(ln(k[B][0],O))return B;return-1}function Ws(k,O,B){var R=O(k);return ze(k)?R:ht(R,B(k))}function hn(k){return k==null?k===void 0?D:y:re&&re in Object(k)?ue(k):Pn(k)}function Vs(k){return gs(k)&&hn(k)==o}function ps(k,O,B,R,gt){return k===O?!0:k==null||O==null||!gs(k)&&!gs(O)?k!==k&&O!==O:Qe(k,O,B,R,ps,gt)}function Qe(k,O,B,R,gt,Lt){var oe=ze(k),It=ze(O),_e=oe?a:$e(k),ge=It?a:$e(O);_e=_e==o?w:_e,ge=ge==o?w:ge;var yn=_e==w,Hn=ge==w,cn=_e==ge;if(cn&&Ke(k)){if(!Ke(O))return!1;oe=!0,yn=!1}if(cn&&!yn)return Lt||(Lt=new Me),oe||ir(k)?At(k,O,B,R,gt,Lt):Ft(k,O,_e,B,R,gt,Lt);if(!(B&i)){var kn=yn&&_t.call(k,"__wrapped__"),mn=Hn&&_t.call(O,"__wrapped__");if(kn||mn){var Ii=kn?k.value():k,oi=mn?O.value():O;return Lt||(Lt=new Me),gt(Ii,oi,B,R,Lt)}}return cn?(Lt||(Lt=new Me),Ht(k,O,B,R,gt,Lt)):!1}function H(k){if(!sr(k)||je(k))return!1;var O=on(k)?de:at;return O.test(we(k))}function J(k){return gs(k)&&nr(k.length)&&!!K[hn(k)]}function pt(k){if(!Zn(k))return Ie(k);var O=[];for(var B in Object(k))_t.call(k,B)&&B!="constructor"&&O.push(B);return O}function At(k,O,B,R,gt,Lt){var oe=B&i,It=k.length,_e=O.length;if(It!=_e&&!(oe&&_e>It))return!1;var ge=Lt.get(k);if(ge&&Lt.get(O))return ge==O;var yn=-1,Hn=!0,cn=B&r?new zn:void 0;for(Lt.set(k,O),Lt.set(O,k);++yn<It;){var kn=k[yn],mn=O[yn];if(R)var Ii=oe?R(mn,kn,yn,O,k,Lt):R(kn,mn,yn,k,O,Lt);if(Ii!==void 0){if(Ii)continue;Hn=!1;break}if(cn){if(!St(O,function(oi,rr){if(!Dt(cn,rr)&&(kn===oi||gt(kn,oi,B,R,Lt)))return cn.push(rr)})){Hn=!1;break}}else if(!(kn===mn||gt(kn,mn,B,R,Lt))){Hn=!1;break}}return Lt.delete(k),Lt.delete(O),Hn}function Ft(k,O,B,R,gt,Lt,oe){switch(B){case F:if(k.byteLength!=O.byteLength||k.byteOffset!=O.byteOffset)return!1;k=k.buffer,O=O.buffer;case q:return!(k.byteLength!=O.byteLength||!Lt(new Ze(k),new Ze(O)));case u:case f:case b:return ln(+k,+O);case p:return k.name==O.name&&k.message==O.message;case T:case M:return k==O+"";case _:var It=Q;case C:var _e=R&i;if(It||(It=mt),k.size!=O.size&&!_e)return!1;var ge=oe.get(k);if(ge)return ge==O;R|=r,oe.set(k,O);var yn=At(It(k),It(O),R,gt,Lt,oe);return oe.delete(k),yn;case x:if(vn)return vn.call(k)==vn.call(O)}return!1}function Ht(k,O,B,R,gt,Lt){var oe=B&i,It=Yt(k),_e=It.length,ge=Yt(O),yn=ge.length;if(_e!=yn&&!oe)return!1;for(var Hn=_e;Hn--;){var cn=It[Hn];if(!(oe?cn in O:_t.call(O,cn)))return!1}var kn=Lt.get(k);if(kn&&Lt.get(O))return kn==O;var mn=!0;Lt.set(k,O),Lt.set(O,k);for(var Ii=oe;++Hn<_e;){cn=It[Hn];var oi=k[cn],rr=O[cn];if(R)var Lf=oe?R(rr,oi,cn,O,k,Lt):R(oi,rr,cn,k,O,Lt);if(!(Lf===void 0?oi===rr||gt(oi,rr,B,R,Lt):Lf)){mn=!1;break}Ii||(Ii=cn=="constructor")}if(mn&&!Ii){var go=k.constructor,mo=O.constructor;go!=mo&&"constructor"in k&&"constructor"in O&&!(typeof go=="function"&&go instanceof go&&typeof mo=="function"&&mo instanceof mo)&&(mn=!1)}return Lt.delete(k),Lt.delete(O),mn}function Yt(k){return Ws(k,ms,li)}function le(k,O){var B=k.__data__;return Ve(O)?B[typeof O=="string"?"string":"hash"]:B.map}function te(k,O){var B=zt(k,O);return H(B)?B:void 0}function ue(k){var O=_t.call(k,re),B=k[re];try{k[re]=void 0;var R=!0}catch{}var gt=qe.call(k);return R&&(O?k[re]=B:delete k[re]),gt}var li=ve?function(k){return k==null?[]:(k=Object(k),$t(ve(k),function(O){return Je.call(k,O)}))}:an,$e=hn;(ce&&$e(new ce(new ArrayBuffer(1)))!=F||Mn&&$e(new Mn)!=_||Ln&&$e(Ln.resolve())!=A||Xn&&$e(new Xn)!=C||sn&&$e(new sn)!=L)&&($e=function(k){var O=hn(k),B=O==w?k.constructor:void 0,R=B?we(B):"";if(R)switch(R){case rs:return F;case rn:return _;case Jt:return A;case pe:return C;case Gn:return L}return O});function De(k,O){return O=O??l,!!O&&(typeof k=="number"||vt.test(k))&&k>-1&&k%1==0&&k<O}function Ve(k){var O=typeof k;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?k!=="__proto__":k===null}function je(k){return!!me&&me in k}function Zn(k){var O=k&&k.constructor,B=typeof O=="function"&&O.prototype||Pt;return k===B}function Pn(k){return qe.call(k)}function we(k){if(k!=null){try{return Bt.call(k)}catch{}try{return k+""}catch{}}return""}function ln(k,O){return k===O||k!==k&&O!==O}var Os=Vs(function(){return arguments}())?Vs:function(k){return gs(k)&&_t.call(k,"callee")&&!Je.call(k,"callee")},ze=Array.isArray;function tn(k){return k!=null&&nr(k.length)&&!on(k)}var Ke=Yn||Nr;function dn(k,O){return ps(k,O)}function on(k){if(!sr(k))return!1;var O=hn(k);return O==m||O==h||O==c||O==E}function nr(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=l}function sr(k){var O=typeof k;return k!=null&&(O=="object"||O=="function")}function gs(k){return k!=null&&typeof k=="object"}var ir=Ut?it(Ut):J;function ms(k){return tn(k)?ds(k):pt(k)}function an(){return[]}function Nr(){return!1}n.exports=dn})(ma,ma.exports);var zb=ma.exports,nf={};Object.defineProperty(nf,"__esModule",{value:!0});const D5=jb,R5=zb;var au;(function(n){function t(r={},l={},o=!1){typeof r!="object"&&(r={}),typeof l!="object"&&(l={});let a=D5(l);o||(a=Object.keys(a).reduce((c,u)=>(a[u]!=null&&(c[u]=a[u]),c),{}));for(const c in r)r[c]!==void 0&&l[c]===void 0&&(a[c]=r[c]);return Object.keys(a).length>0?a:void 0}n.compose=t;function e(r={},l={}){typeof r!="object"&&(r={}),typeof l!="object"&&(l={});const o=Object.keys(r).concat(Object.keys(l)).reduce((a,c)=>(R5(r[c],l[c])||(a[c]=l[c]===void 0?null:l[c]),a),{});return Object.keys(o).length>0?o:void 0}n.diff=e;function s(r={},l={}){r=r||{};const o=Object.keys(l).reduce((a,c)=>(l[c]!==r[c]&&r[c]!==void 0&&(a[c]=l[c]),a),{});return Object.keys(r).reduce((a,c)=>(r[c]!==l[c]&&l[c]===void 0&&(a[c]=null),a),o)}n.invert=s;function i(r,l,o=!1){if(typeof r!="object")return l;if(typeof l!="object")return;if(!o)return l;const a=Object.keys(l).reduce((c,u)=>(r[u]===void 0&&(c[u]=l[u]),c),{});return Object.keys(a).length>0?a:void 0}n.transform=i})(au||(au={}));nf.default=au;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});var cu;(function(n){function t(e){return typeof e.delete=="number"?e.delete:typeof e.retain=="number"?e.retain:typeof e.retain=="object"&&e.retain!==null?1:typeof e.insert=="string"?e.insert.length:1}n.length=t})(cu||(cu={}));Ua.default=cu;var sf={};Object.defineProperty(sf,"__esModule",{value:!0});const Uh=Ua;class P5{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const e=this.ops[this.index];if(e){const s=this.offset,i=Uh.default.length(e);if(t>=i-s?(t=i-s,this.index+=1,this.offset=0):this.offset+=t,typeof e.delete=="number")return{delete:t};{const r={};return e.attributes&&(r.attributes=e.attributes),typeof e.retain=="number"?r.retain=t:typeof e.retain=="object"&&e.retain!==null?r.retain=e.retain:typeof e.insert=="string"?r.insert=e.insert.substr(s,t):r.insert=e.insert,r}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?Uh.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?typeof t.delete=="number"?"delete":typeof t.retain=="number"||typeof t.retain=="object"&&t.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const t=this.offset,e=this.index,s=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[s].concat(i)}}else return[]}}sf.default=P5;(function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const e=I5,s=jb,i=zb,r=nf;t.AttributeMap=r.default;const l=Ua;t.Op=l.default;const o=sf;t.OpIterator=o.default;const a="\0",c=(f,p)=>{if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);const m=Object.keys(f)[0];if(!m||m!==Object.keys(p)[0])throw new Error(`embed types not matched: ${m} != ${Object.keys(p)[0]}`);return[m,f[m],p[m]]};class u{constructor(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]}static registerEmbed(p,m){this.handlers[p]=m}static unregisterEmbed(p){delete this.handlers[p]}static getHandler(p){const m=this.handlers[p];if(!m)throw new Error(`no handlers for embed type "${p}"`);return m}insert(p,m){const h={};return typeof p=="string"&&p.length===0?this:(h.insert=p,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(h.attributes=m),this.push(h))}delete(p){return p<=0?this:this.push({delete:p})}retain(p,m){if(typeof p=="number"&&p<=0)return this;const h={retain:p};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(h.attributes=m),this.push(h)}push(p){let m=this.ops.length,h=this.ops[m-1];if(p=s(p),typeof h=="object"){if(typeof p.delete=="number"&&typeof h.delete=="number")return this.ops[m-1]={delete:h.delete+p.delete},this;if(typeof h.delete=="number"&&p.insert!=null&&(m-=1,h=this.ops[m-1],typeof h!="object"))return this.ops.unshift(p),this;if(i(p.attributes,h.attributes)){if(typeof p.insert=="string"&&typeof h.insert=="string")return this.ops[m-1]={insert:h.insert+p.insert},typeof p.attributes=="object"&&(this.ops[m-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof h.retain=="number")return this.ops[m-1]={retain:h.retain+p.retain},typeof p.attributes=="object"&&(this.ops[m-1].attributes=p.attributes),this}}return m===this.ops.length?this.ops.push(p):this.ops.splice(m,0,p),this}chop(){const p=this.ops[this.ops.length-1];return p&&typeof p.retain=="number"&&!p.attributes&&this.ops.pop(),this}filter(p){return this.ops.filter(p)}forEach(p){this.ops.forEach(p)}map(p){return this.ops.map(p)}partition(p){const m=[],h=[];return this.forEach(_=>{(p(_)?m:h).push(_)}),[m,h]}reduce(p,m){return this.ops.reduce(p,m)}changeLength(){return this.reduce((p,m)=>m.insert?p+l.default.length(m):m.delete?p-m.delete:p,0)}length(){return this.reduce((p,m)=>p+l.default.length(m),0)}slice(p=0,m=1/0){const h=[],_=new o.default(this.ops);let b=0;for(;b<m&&_.hasNext();){let y;b<p?y=_.next(p-b):(y=_.next(m-b),h.push(y)),b+=l.default.length(y)}return new u(h)}compose(p){const m=new o.default(this.ops),h=new o.default(p.ops),_=[],b=h.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){let w=b.retain;for(;m.peekType()==="insert"&&m.peekLength()<=w;)w-=m.peekLength(),_.push(m.next());b.retain-w>0&&h.next(b.retain-w)}const y=new u(_);for(;m.hasNext()||h.hasNext();)if(h.peekType()==="insert")y.push(h.next());else if(m.peekType()==="delete")y.push(m.next());else{const w=Math.min(m.peekLength(),h.peekLength()),A=m.next(w),E=h.next(w);if(E.retain){const T={};if(typeof A.retain=="number")T.retain=typeof E.retain=="number"?w:E.retain;else if(typeof E.retain=="number")A.retain==null?T.insert=A.insert:T.retain=A.retain;else{const M=A.retain==null?"insert":"retain",[x,D,L]=c(A[M],E.retain),q=u.getHandler(x);T[M]={[x]:q.compose(D,L,M==="retain")}}const C=r.default.compose(A.attributes,E.attributes,typeof A.retain=="number");if(C&&(T.attributes=C),y.push(T),!h.hasNext()&&i(y.ops[y.ops.length-1],T)){const M=new u(m.rest());return y.concat(M).chop()}}else typeof E.delete=="number"&&(typeof A.retain=="number"||typeof A.retain=="object"&&A.retain!==null)&&y.push(E)}return y.chop()}concat(p){const m=new u(this.ops.slice());return p.ops.length>0&&(m.push(p.ops[0]),m.ops=m.ops.concat(p.ops.slice(1))),m}diff(p,m){if(this.ops===p.ops)return new u;const h=[this,p].map(A=>A.map(E=>{if(E.insert!=null)return typeof E.insert=="string"?E.insert:a;const T=A===p?"on":"with";throw new Error("diff() called "+T+" non-document")}).join("")),_=new u,b=e(h[0],h[1],m,!0),y=new o.default(this.ops),w=new o.default(p.ops);return b.forEach(A=>{let E=A[1].length;for(;E>0;){let T=0;switch(A[0]){case e.INSERT:T=Math.min(w.peekLength(),E),_.push(w.next(T));break;case e.DELETE:T=Math.min(E,y.peekLength()),y.next(T),_.delete(T);break;case e.EQUAL:T=Math.min(y.peekLength(),w.peekLength(),E);const C=y.next(T),M=w.next(T);i(C.insert,M.insert)?_.retain(T,r.default.diff(C.attributes,M.attributes)):_.push(M).delete(T);break}E-=T}}),_.chop()}eachLine(p,m=`
`){const h=new o.default(this.ops);let _=new u,b=0;for(;h.hasNext();){if(h.peekType()!=="insert")return;const y=h.peek(),w=l.default.length(y)-h.peekLength(),A=typeof y.insert=="string"?y.insert.indexOf(m,w)-w:-1;if(A<0)_.push(h.next());else if(A>0)_.push(h.next(A));else{if(p(_,h.next(1).attributes||{},b)===!1)return;b+=1,_=new u}}_.length()>0&&p(_,{},b)}invert(p){const m=new u;return this.reduce((h,_)=>{if(_.insert)m.delete(l.default.length(_));else{if(typeof _.retain=="number"&&_.attributes==null)return m.retain(_.retain),h+_.retain;if(_.delete||typeof _.retain=="number"){const b=_.delete||_.retain;return p.slice(h,h+b).forEach(w=>{_.delete?m.push(w):_.retain&&_.attributes&&m.retain(l.default.length(w),r.default.invert(_.attributes,w.attributes))}),h+b}else if(typeof _.retain=="object"&&_.retain!==null){const b=p.slice(h,h+1),y=new o.default(b.ops).next(),[w,A,E]=c(_.retain,y.insert),T=u.getHandler(w);return m.retain({[w]:T.invert(A,E)},r.default.invert(_.attributes,y.attributes)),h+1}}return h},0),m.chop()}transform(p,m=!1){if(m=!!m,typeof p=="number")return this.transformPosition(p,m);const h=p,_=new o.default(this.ops),b=new o.default(h.ops),y=new u;for(;_.hasNext()||b.hasNext();)if(_.peekType()==="insert"&&(m||b.peekType()!=="insert"))y.retain(l.default.length(_.next()));else if(b.peekType()==="insert")y.push(b.next());else{const w=Math.min(_.peekLength(),b.peekLength()),A=_.next(w),E=b.next(w);if(A.delete)continue;if(E.delete)y.push(E);else{const T=A.retain,C=E.retain;let M=typeof C=="object"&&C!==null?C:w;if(typeof T=="object"&&T!==null&&typeof C=="object"&&C!==null){const x=Object.keys(T)[0];if(x===Object.keys(C)[0]){const D=u.getHandler(x);D&&(M={[x]:D.transform(T[x],C[x],m)})}}y.retain(M,r.default.transform(A.attributes,E.attributes,m))}}return y.chop()}transformPosition(p,m=!1){m=!!m;const h=new o.default(this.ops);let _=0;for(;h.hasNext()&&_<=p;){const b=h.peekLength(),y=h.peekType();if(h.next(),y==="delete"){p-=Math.min(b,p-_);continue}else y==="insert"&&(_<p||!m)&&(p+=b);_+=b}return p}}u.Op=l.default,u.OpIterator=o.default,u.AttributeMap=r.default,u.handlers={},t.default=u,n.exports=u,n.exports.default=u})(ou,ou.exports);var Ss=ou.exports;const qt=Rb(Ss);class zs extends is{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}zs.blotName="break";zs.tagName="BR";let qs=class extends pa{};const B5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Wa(n){return n.replace(/[&<>"']/g,t=>B5[t])}const Gs=class Gs extends Qu{static compare(t,e){const s=Gs.order.indexOf(t),i=Gs.order.indexOf(e);return s>=0||i>=0?s-i:t===e?0:t<e?-1:1}formatAt(t,e,s,i){if(Gs.compare(this.statics.blotName,s)<0&&this.scroll.query(s,jt.BLOT)){const r=this.isolate(t,e);i&&r.wrap(s,i)}else super.formatAt(t,e,s,i)}optimize(t){if(super.optimize(t),this.parent instanceof Gs&&Gs.compare(this.statics.blotName,this.parent.statics.blotName)>0){const e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}};X(Gs,"allowedChildren",[Gs,zs,is,qs]),X(Gs,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let ei=Gs;const Wh=1;class _n extends Ul{constructor(){super(...arguments);X(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=Hb(this)),this.cache.delta}deleteAt(e,s){super.deleteAt(e,s),this.cache={}}formatAt(e,s,i,r){s<=0||(this.scroll.query(i,jt.BLOCK)?e+s===this.length()&&this.format(i,r):super.formatAt(e,Math.min(s,this.length()-e-1),i,r),this.cache={})}insertAt(e,s,i){if(i!=null){super.insertAt(e,s,i),this.cache={};return}if(s.length===0)return;const r=s.split(`
`),l=r.shift();l.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let o=this;r.reduce((a,c)=>(o=o.split(a,!0),o.insertAt(0,c),c.length),e+l.length)}insertBefore(e,s){const{head:i}=this.children;super.insertBefore(e,s),i instanceof zs&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Wh),this.cache.length}moveChildren(e,s){super.moveChildren(e,s),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s&&(e===0||e>=this.length()-Wh)){const r=this.clone();return e===0?(this.parent.insertBefore(r,this),this):(this.parent.insertBefore(r,this.next),r)}const i=super.split(e,s);return this.cache={},i}}_n.blotName="block";_n.tagName="P";_n.defaultChild=zs;_n.allowedChildren=[zs,ei,is,qs];class ws extends is{attach(){super.attach(),this.attributes=new Fa(this.domNode)}delta(){return new qt().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const s=this.scroll.query(t,jt.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,e)}formatAt(t,e,s,i){this.format(s,i)}insertAt(t,e,s){if(s!=null){super.insertAt(t,e,s);return}const i=e.split(`
`),r=i.pop(),l=i.map(a=>{const c=this.scroll.create(_n.blotName);return c.insertAt(0,a),c}),o=this.split(t);l.forEach(a=>{this.parent.insertBefore(a,o)}),r&&this.parent.insertBefore(this.scroll.create("text",r),o)}}ws.scope=jt.BLOCK_BLOT;function Hb(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(Tn).reduce((e,s)=>s.length()===0?e:e.insert(s.value(),ys(s,{},t)),new qt).insert(`
`,ys(n))}function ys(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(t={...t,...n.formats()},e&&delete t["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?t:ys(n.parent,t,e)}const bs=class bs extends is{static value(){}constructor(t,e,s){super(t,e),this.selection=s,this.textNode=document.createTextNode(bs.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let s=this,i=0;for(;s!=null&&s.statics.scope!==jt.BLOCK_BLOT;)i+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=bs.CONTENTS.length,s.optimize(),s.formatAt(i,bs.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof qs?this.prev:null,s=e?e.length():0,i=this.next instanceof qs?this.next:null,r=i?i.text:"",{textNode:l}=this,o=l.data.split(bs.CONTENTS).join("");l.data=bs.CONTENTS;let a;if(e)a=e,(o||i)&&(e.insertAt(e.length(),o+r),i&&i.remove());else if(i)a=i,i.insertAt(0,o);else{const c=document.createTextNode(o);a=this.scroll.create(c),this.parent.insertBefore(a,this)}if(this.remove(),t){const c=(p,m)=>e&&p===e.domNode?m:p===l?s+m-1:i&&p===i.domNode?s+o.length+m:null,u=c(t.start.node,t.start.offset),f=c(t.end.node,t.end.offset);if(u!==null&&f!==null)return{startNode:a.domNode,startOffset:u,endNode:a.domNode,endOffset:f}}return null}update(t,e){if(t.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(e.range=s)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=bs.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}};X(bs,"blotName","cursor"),X(bs,"className","ql-cursor"),X(bs,"tagName","span"),X(bs,"CONTENTS","\uFEFF");let el=bs;var Ub={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function i(a,c,u){this.fn=a,this.context=c,this.once=u||!1}function r(a,c,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,f||a,p),h=e?e+c:c;return a._events[h]?a._events[h].fn?a._events[h]=[a._events[h],m]:a._events[h].push(m):(a._events[h]=m,a._eventsCount++),a}function l(a,c){--a._eventsCount===0?a._events=new s:delete a._events[c]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)t.call(u,f)&&c.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=e?e+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,h=new Array(m);p<m;p++)h[p]=f[p].fn;return h},o.prototype.listenerCount=function(c){var u=e?e+c:c,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,u,f,p,m,h){var _=e?e+c:c;if(!this._events[_])return!1;var b=this._events[_],y=arguments.length,w,A;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,f),!0;case 4:return b.fn.call(b.context,u,f,p),!0;case 5:return b.fn.call(b.context,u,f,p,m),!0;case 6:return b.fn.call(b.context,u,f,p,m,h),!0}for(A=1,w=new Array(y-1);A<y;A++)w[A-1]=arguments[A];b.fn.apply(b.context,w)}else{var E=b.length,T;for(A=0;A<E;A++)switch(b[A].once&&this.removeListener(c,b[A].fn,void 0,!0),y){case 1:b[A].fn.call(b[A].context);break;case 2:b[A].fn.call(b[A].context,u);break;case 3:b[A].fn.call(b[A].context,u,f);break;case 4:b[A].fn.call(b[A].context,u,f,p);break;default:if(!w)for(T=1,w=new Array(y-1);T<y;T++)w[T-1]=arguments[T];b[A].fn.apply(b[A].context,w)}}return!0},o.prototype.on=function(c,u,f){return r(this,c,u,f,!1)},o.prototype.once=function(c,u,f){return r(this,c,u,f,!0)},o.prototype.removeListener=function(c,u,f,p){var m=e?e+c:c;if(!this._events[m])return this;if(!u)return l(this,m),this;var h=this._events[m];if(h.fn)h.fn===u&&(!p||h.once)&&(!f||h.context===f)&&l(this,m);else{for(var _=0,b=[],y=h.length;_<y;_++)(h[_].fn!==u||p&&!h[_].once||f&&h[_].context!==f)&&b.push(h[_]);b.length?this._events[m]=b.length===1?b[0]:b:l(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=e?e+c:c,this._events[u]&&l(this,u)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,n.exports=o})(Ub);var q5=Ub.exports;const F5=Rb(q5),uu=new WeakMap,fu=["error","warn","log","info"];let hu="warn";function Wb(n){if(hu&&fu.indexOf(n)<=fu.indexOf(hu)){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];console[n](...e)}}function Ti(n){return fu.reduce((t,e)=>(t[e]=Wb.bind(console,e,n),t),{})}Ti.level=n=>{hu=n};Wb.level=Ti.level;const dc=Ti("quill:events"),j5=["selectionchange","mousedown","mouseup","click"];j5.forEach(n=>{document.addEventListener(n,function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const r=uu.get(i);r&&r.emitter&&r.emitter.handleDOM(...e)})})});class Rt extends F5{constructor(){super(),this.domListeners={},this.on("error",dc.error)}emit(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return dc.log.call(dc,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];(this.domListeners[t.type]||[]).forEach(r=>{let{node:l,handler:o}=r;(t.target===l||l.contains(t.target))&&o(t,...s)})}listenDOM(t,e,s){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:s})}}X(Rt,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),X(Rt,"sources",{API:"api",SILENT:"silent",USER:"user"});const pc=Ti("quill:selection");class kr{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=e}}class z5{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new kr(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Rt.sources.USER),1)}),this.emitter.on(Rt.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(Rt.events.SCROLL_UPDATE,(i,r)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const l=r.some(o=>o.type==="characterData"||o.type==="childList"||o.type==="attributes"&&o.target===this.root);this.update(l?Rt.sources.SILENT:i)}catch{}})}),this.emitter.on(Rt.events.SCROLL_OPTIMIZE,(s,i)=>{if(i.range){const{startNode:r,startOffset:l,endNode:o,endOffset:a}=i.range;this.setNativeRange(r,l,o,a),this.update(Rt.sources.SILENT)}}),this.update(Rt.sources.SILENT)}handleComposition(){this.emitter.on(Rt.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Rt.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Rt.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(t,jt.BLOCK))){if(s.start.node!==this.cursor.textNode){const i=this.scroll.find(s.start.node,!1);if(i==null)return;if(i instanceof Tn){const r=i.split(s.start.offset);i.parent.insertBefore(this.cursor,r)}else i.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();t=Math.min(t,s-1),e=Math.min(t+e,s-1)-t;let i,[r,l]=this.scroll.leaf(t);if(r==null)return null;if(e>0&&l===r.length()){const[u]=this.scroll.leaf(t+1);if(u){const[f]=this.scroll.line(t),[p]=this.scroll.line(t+1);f===p&&(r=u,l=0)}}[i,l]=r.position(l,!0);const o=document.createRange();if(e>0)return o.setStart(i,l),[r,l]=this.scroll.leaf(t+e),r==null?null:([i,l]=r.position(l,!0),o.setEnd(i,l),o.getBoundingClientRect());let a="left",c;if(i instanceof Text){if(!i.data.length)return null;l<i.data.length?(o.setStart(i,l),o.setEnd(i,l+1)):(o.setStart(i,l-1),o.setEnd(i,l),a="right"),c=o.getBoundingClientRect()}else{if(!(r.domNode instanceof Element))return null;c=r.domNode.getBoundingClientRect(),l>0&&(a="right")}return{bottom:c.top+c.height,height:c.height,left:c[a],right:c[a],top:c.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(e==null)return null;const s=this.normalizeNative(e);return pc.info("getNativeRange",s),s}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&gc(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const s=e.map(l=>{const[o,a]=l,c=this.scroll.find(o,!0),u=c.offset(this.scroll);return a===0?u:c instanceof Tn?u+c.index(o,a):u+c.length()}),i=Math.min(Math.max(...s),this.scroll.length()-1),r=Math.min(i,...s);return new kr(r,i-r)}normalizeNative(t){if(!gc(this.root,t.startContainer)||!t.collapsed&&!gc(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(s=>{let{node:i,offset:r}=s;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>r)i=i.childNodes[r],r=0;else if(i.childNodes.length===r)i=i.lastChild,i instanceof Text?r=i.data.length:i.childNodes.length>0?r=i.childNodes.length:r=i.childNodes.length+1;else break;s.node=i,s.offset=r}),e}rangeToNative(t){const e=this.scroll.length(),s=(i,r)=>{i=Math.min(e-1,i);const[l,o]=this.scroll.leaf(i);return l?l.position(o,r):[null,-1]};return[...s(t.index,!1),...s(t.index+t.length,!0)]}setNativeRange(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(pc.info("setNativeRange",t,e,s,i),t!=null&&(this.root.parentNode==null||t.parentNode==null||s.parentNode==null))return;const l=document.getSelection();if(l!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:o}=this.getNativeRange()||{};if(o==null||r||t!==o.startContainer||e!==o.startOffset||s!==o.endContainer||i!==o.endOffset){t instanceof Element&&t.tagName==="BR"&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),s instanceof Element&&s.tagName==="BR"&&(i=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const a=document.createRange();a.setStart(t,e),a.setEnd(s,i),l.removeAllRanges(),l.addRange(a)}}else l.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rt.sources.API;if(typeof e=="string"&&(s=e,e=!1),pc.info("setRange",t),t!=null){const i=this.rangeToNative(t);this.setNativeRange(...i,e)}else this.setNativeRange(null);this.update(s)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rt.sources.USER;const e=this.lastRange,[s,i]=this.getRange();if(this.lastRange=s,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!Ju(e,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const l=this.cursor.restore();l&&this.setNativeRange(l.startNode,l.startOffset,l.endNode,l.endOffset)}const r=[Rt.events.SELECTION_CHANGE,Yr(this.lastRange),Yr(e),t];this.emitter.emit(Rt.events.EDITOR_CHANGE,...r),t!==Rt.sources.SILENT&&this.emitter.emit(...r)}}}function gc(n,t){try{t.parentNode}catch{return!1}return n.contains(t)}const H5=/^[ -~]*$/;class U5{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const s=Vh(t),i=new qt;return V5(s.ops.slice()).reduce((l,o)=>{const a=Ss.Op.length(o);let c=o.attributes||{},u=!1,f=!1;if(o.insert!=null){if(i.retain(a),typeof o.insert=="string"){const h=o.insert;f=!h.endsWith(`
`)&&(e<=l||!!this.scroll.descendant(ws,l)[0]),this.scroll.insertAt(l,h);const[_,b]=this.scroll.line(l);let y=Ki({},ys(_));if(_ instanceof _n){const[w]=_.descendant(Tn,b);w&&(y=Ki(y,ys(w)))}c=Ss.AttributeMap.diff(y,c)||{}}else if(typeof o.insert=="object"){const h=Object.keys(o.insert)[0];if(h==null)return l;const _=this.scroll.query(h,jt.INLINE)!=null;if(_)(e<=l||this.scroll.descendant(ws,l)[0])&&(f=!0);else if(l>0){const[b,y]=this.scroll.descendant(Tn,l-1);b instanceof qs?b.value()[y]!==`
`&&(u=!0):b instanceof is&&b.statics.scope===jt.INLINE_BLOT&&(u=!0)}if(this.scroll.insertAt(l,h,o.insert[h]),_){const[b]=this.scroll.descendant(Tn,l);if(b){const y=Ki({},ys(b));c=Ss.AttributeMap.diff(y,c)||{}}}}e+=a}else if(i.push(o),o.retain!==null&&typeof o.retain=="object"){const h=Object.keys(o.retain)[0];if(h==null)return l;this.scroll.updateEmbedAt(l,h,o.retain[h])}Object.keys(c).forEach(h=>{this.scroll.formatAt(l,a,h,c[h])});const p=u?1:0,m=f?1:0;return e+=p+m,i.retain(p),i.delete(m),l+a+p+m},0),i.reduce((l,o)=>typeof o.delete=="number"?(this.scroll.deleteAt(l,o.delete),l):l+Ss.Op.length(o),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update(new qt().retain(t).delete(e))}formatLine(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(r=>{this.scroll.lines(t,Math.max(e,1)).forEach(l=>{l.format(r,s[r])})}),this.scroll.optimize();const i=new qt().retain(t).retain(e,Yr(s));return this.update(i)}formatText(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(r=>{this.scroll.formatAt(t,e,r,s[r])});const i=new qt().retain(t).retain(e,Yr(s));return this.update(i)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new qt)}getFormat(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],i=[];e===0?this.scroll.path(t).forEach(o=>{const[a]=o;a instanceof _n?s.push(a):a instanceof Tn&&i.push(a)}):(s=this.scroll.lines(t,e),i=this.scroll.descendants(Tn,t,e));const[r,l]=[s,i].map(o=>{const a=o.shift();if(a==null)return{};let c=ys(a);for(;Object.keys(c).length>0;){const u=o.shift();if(u==null)return c;c=W5(ys(u),c)}return c});return{...r,...l}}getHTML(t,e){const[s,i]=this.scroll.line(t);if(s){const r=s.length();return s.length()>=i+e&&!(i===0&&e===r)?Vl(s,i,e,!0):Vl(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(t,e){const s=Vh(e),i=new qt().retain(t).concat(s);return this.scroll.insertContents(t,s),this.update(i)}insertEmbed(t,e,s){return this.scroll.insertAt(t,e,s),this.update(new qt().retain(t).insert({[e]:s}))}insertText(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,e),Object.keys(s).forEach(i=>{this.scroll.formatAt(t,e.length,i,s[i])}),this.update(new qt().retain(t).insert(e,Yr(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==_n.blotName)return!1;const e=t;return e.children.length>1?!1:e.children.head instanceof zs}removeFormat(t,e){const s=this.getText(t,e),[i,r]=this.scroll.line(t+e);let l=0,o=new qt;i!=null&&(l=i.length()-r,o=i.delta().slice(r,r+l-1).insert(`
`));const c=this.getContents(t,e+l).diff(new qt().insert(s).concat(o)),u=new qt().retain(t).concat(c);return this.applyDelta(u)}update(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(H5)&&this.scroll.find(e[0].target)){const r=this.scroll.find(e[0].target),l=ys(r),o=r.offset(this.scroll),a=e[0].oldValue.replace(el.CONTENTS,""),c=new qt().insert(a),u=new qt().insert(r.value()),f=s&&{oldRange:Kh(s.oldRange,-o),newRange:Kh(s.newRange,-o)};t=new qt().retain(o).concat(c.diff(u,f)).reduce((m,h)=>h.insert?m.insert(h.insert,l):m.push(h),new qt),this.delta=i.compose(t)}else this.delta=this.getDelta(),(!t||!Ju(i.compose(t),this.delta))&&(t=i.diff(this.delta,s));return t}}function Hr(n,t,e){if(n.length===0){const[m]=mc(e.pop());return t<=0?`</li></${m}>`:`</li></${m}>${Hr([],t-1,e)}`}const[{child:s,offset:i,length:r,indent:l,type:o},...a]=n,[c,u]=mc(o);if(l>t)return e.push(o),l===t+1?`<${c}><li${u}>${Vl(s,i,r)}${Hr(a,l,e)}`:`<${c}><li>${Hr(n,t+1,e)}`;const f=e[e.length-1];if(l===t&&o===f)return`</li><li${u}>${Vl(s,i,r)}${Hr(a,l,e)}`;const[p]=mc(e.pop());return`</li></${p}>${Hr(n,t-1,e)}`}function Vl(n,t,e){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(t,e);if(n instanceof qs)return Wa(n.value().slice(t,t+e)).replaceAll(" ","&nbsp;");if(n instanceof Ps){if(n.statics.blotName==="list-container"){const c=[];return n.children.forEachAt(t,e,(u,f,p)=>{const m="formats"in u&&typeof u.formats=="function"?u.formats():{};c.push({child:u,offset:f,length:p,indent:m.indent||0,type:m.list})}),Hr(c,-1,[])}const i=[];if(n.children.forEachAt(t,e,(c,u,f)=>{i.push(Vl(c,u,f))}),s||n.statics.blotName==="list")return i.join("");const{outerHTML:r,innerHTML:l}=n.domNode,[o,a]=r.split(`>${l}<`);return o==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${a}`:`${o}>${i.join("")}<${a}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function W5(n,t){return Object.keys(t).reduce((e,s)=>{if(n[s]==null)return e;const i=t[s];return i===n[s]?e[s]=i:Array.isArray(i)?i.indexOf(n[s])<0?e[s]=i.concat([n[s]]):e[s]=i:e[s]=[i,n[s]],e},{})}function mc(n){const t=n==="ordered"?"ol":"ul";switch(n){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function Vh(n){return n.reduce((t,e)=>{if(typeof e.insert=="string"){const s=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(s,e.attributes)}return t.push(e)},new qt)}function Kh(n,t){let{index:e,length:s}=n;return new kr(e+t,s)}function V5(n){const t=[];return n.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((i,r)=>{r&&t.push({insert:`
`,attributes:e.attributes}),i&&t.push({insert:i,attributes:e.attributes})}):t.push(e)}),t}class Hs{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=e}}X(Hs,"DEFAULTS",{});const wo="\uFEFF";class rf extends is{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(wo),this.rightGuard=document.createTextNode(wo),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e=null,s;const i=t.data.split(wo).join("");if(t===this.leftGuard)if(this.prev instanceof qs){const r=this.prev.length();this.prev.insertAt(r,i),e={startNode:this.prev.domNode,startOffset:r+i.length}}else s=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(s),this),e={startNode:s,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof qs?(this.next.insertAt(0,i),e={startNode:this.next.domNode,startOffset:i.length}):(s=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(s),this.next),e={startNode:s,startOffset:i.length}));return t.data=wo,e}update(t,e){t.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const i=this.restore(s.target);i&&(e.range=i)}})}}class K5{constructor(t,e){X(this,"isComposing",!1);this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof rf)&&(this.emitter.emit(Rt.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(Rt.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(Rt.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(Rt.events.COMPOSITION_END,t),this.isComposing=!1}}const Dl=class Dl{constructor(t,e){X(this,"modules",{});this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}};X(Dl,"DEFAULTS",{modules:{}}),X(Dl,"themes",{default:Dl});let nl=Dl;const Y5=n=>n.parentElement||n.getRootNode().host||null,X5=n=>{const t=n.getBoundingClientRect(),e="offsetWidth"in n&&Math.abs(t.width)/n.offsetWidth||1,s="offsetHeight"in n&&Math.abs(t.height)/n.offsetHeight||1;return{top:t.top,right:t.left+n.clientWidth*e,bottom:t.top+n.clientHeight*s,left:t.left}},So=n=>{const t=parseInt(n,10);return Number.isNaN(t)?0:t},Yh=(n,t,e,s,i,r)=>n<e&&t>s?0:n<e?-(e-n+i):t>s?t-n>s-e?n+i-e:t-s+r:0,G5=(n,t)=>{var r,l,o;const e=n.ownerDocument;let s=t,i=n;for(;i;){const a=i===e.body,c=a?{top:0,right:((r=window.visualViewport)==null?void 0:r.width)??e.documentElement.clientWidth,bottom:((l=window.visualViewport)==null?void 0:l.height)??e.documentElement.clientHeight,left:0}:X5(i),u=getComputedStyle(i),f=Yh(s.left,s.right,c.left,c.right,So(u.scrollPaddingLeft),So(u.scrollPaddingRight)),p=Yh(s.top,s.bottom,c.top,c.bottom,So(u.scrollPaddingTop),So(u.scrollPaddingBottom));if(f||p)if(a)(o=e.defaultView)==null||o.scrollBy(f,p);else{const{scrollLeft:m,scrollTop:h}=i;p&&(i.scrollTop+=p),f&&(i.scrollLeft+=f);const _=i.scrollLeft-m,b=i.scrollTop-h;s={left:s.left-_,top:s.top-b,right:s.right-_,bottom:s.bottom-b}}i=a||u.position==="fixed"?null:Y5(i)}},Z5=100,J5=["block","break","cursor","inline","scroll","text"],Q5=(n,t,e)=>{const s=new tl;return J5.forEach(i=>{const r=t.query(i);r&&s.register(r)}),n.forEach(i=>{let r=t.query(i);r||e.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let l=0;for(;r;)if(s.register(r),r="blotName"in r?r.requiredContainer??null:null,l+=1,l>Z5){e.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),s},Gr=Ti("quill"),Ao=new tl;Ps.uiClass="ql-ui";const Ms=class Ms{static debug(t){t===!0&&(t="log"),Ti.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return uu.get(t)||Ao.find(t,e)}static import(t){return this.imports[t]==null&&Gr.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in t?t.attrName:t.blotName;typeof s=="string"?this.register(`formats/${s}`,t,e):Object.keys(t).forEach(i=>{this.register(i,t[i],e)})}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!s&&Gr.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&Ao.register(e),typeof e.register=="function"&&e.register(Ao)}}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=$5(t,e),this.container=this.options.container,this.container==null){Gr.error("Invalid Quill container",t);return}this.options.debug&&Ms.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",uu.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Rt;const i=$u.blotName,r=this.options.registry.query(i);if(!r||!("blotName"in r))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new r(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new U5(this.scroll),this.selection=new z5(this.scroll,this.emitter),this.composition=new K5(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Rt.events.EDITOR_CHANGE,l=>{l===Rt.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Rt.events.SCROLL_UPDATE,(l,o)=>{const a=this.selection.lastRange,[c]=this.selection.getRange(),u=a&&c?{oldRange:a,newRange:c}:void 0;xs.call(this,()=>this.editor.update(null,o,u),l)}),this.emitter.on(Rt.events.SCROLL_EMBED_UPDATE,(l,o)=>{const a=this.selection.lastRange,[c]=this.selection.getRange(),u=a&&c?{oldRange:a,newRange:c}:void 0;xs.call(this,()=>{const f=new qt().retain(l.offset(this)).retain({[l.statics.blotName]:o});return this.editor.update(f,[],u)},Ms.sources.USER)}),s){const l=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(l)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const s=t;t=document.createElement("div"),t.classList.add(s)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,s){return[t,e,,s]=ci(t,e,s),xs.call(this,()=>this.editor.deleteText(t,e),s,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rt.sources.API;return xs.call(this,()=>{const i=this.getSelection(!0);let r=new qt;if(i==null)return r;if(this.scroll.query(t,jt.BLOCK))r=this.editor.formatLine(i.index,i.length,{[t]:e});else{if(i.length===0)return this.selection.format(t,e),r;r=this.editor.formatText(i.index,i.length,{[t]:e})}return this.setSelection(i,Rt.sources.SILENT),r},s)}formatLine(t,e,s,i,r){let l;return[t,e,l,r]=ci(t,e,s,i,r),xs.call(this,()=>this.editor.formatLine(t,e,l),r,t,0)}formatText(t,e,s,i,r){let l;return[t,e,l,r]=ci(t,e,s,i,r),xs.call(this,()=>this.editor.formatText(t,e,l),r,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof t=="number"?s=this.selection.getBounds(t,e):s=this.selection.getBounds(t.index,t.length),!s)return null;const i=this.container.getBoundingClientRect();return{bottom:s.bottom-i.top,height:s.height,left:s.left-i.left,right:s.right-i.left,top:s.top-i.top,width:s.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,e]=ci(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=ci(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=ci(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ms.sources.API;return xs.call(this,()=>this.editor.insertEmbed(t,e,s),i,t)}insertText(t,e,s,i,r){let l;return[t,,l,r]=ci(t,0,s,i,r),xs.call(this,()=>this.editor.insertText(t,e,l),r,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,s){return[t,e,,s]=ci(t,e,s),xs.call(this,()=>this.editor.removeFormat(t,e),s,t)}scrollRectIntoView(t){G5(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rt.sources.API;return xs.call(this,()=>{t=new qt(t);const s=this.getLength(),i=this.editor.deleteText(0,s),r=this.editor.insertContents(0,t),l=this.editor.deleteText(this.getLength()-1,1);return i.compose(r).compose(l)},e)}setSelection(t,e,s){t==null?this.selection.setRange(null,e||Ms.sources.API):([t,e,,s]=ci(t,e,s),this.selection.setRange(new kr(Math.max(0,t),e),s),s!==Rt.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rt.sources.API;const s=new qt().insert(t);return this.setContents(s,e)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rt.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rt.sources.API;return xs.call(this,()=>(t=new qt(t),this.editor.applyDelta(t)),e,!0)}};X(Ms,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Ao,theme:"default"}),X(Ms,"events",Rt.events),X(Ms,"sources",Rt.sources),X(Ms,"version","2.0.3"),X(Ms,"imports",{delta:qt,parchment:S5,"core/module":Hs,"core/theme":nl});let ot=Ms;function Xh(n){return typeof n=="string"?document.querySelector(n):n}function _c(n){return Object.entries(n??{}).reduce((t,e)=>{let[s,i]=e;return{...t,[s]:i===!0?{}:i}},{})}function Gh(n){return Object.fromEntries(Object.entries(n).filter(t=>t[1]!==void 0))}function $5(n,t){const e=Xh(n);if(!e)throw new Error("Invalid Quill container");const i=!t.theme||t.theme===ot.DEFAULTS.theme?nl:ot.import(`themes/${t.theme}`);if(!i)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:r,...l}=ot.DEFAULTS,{modules:o,...a}=i.DEFAULTS;let c=_c(t.modules);c!=null&&c.toolbar&&c.toolbar.constructor!==Object&&(c={...c,toolbar:{container:c.toolbar}});const u=Ki({},_c(r),_c(o),c),f={...l,...Gh(a),...Gh(t)};let p=t.registry;return p?t.formats&&Gr.warn('Ignoring "formats" option because "registry" is specified'):p=t.formats?Q5(t.formats,f.registry,Gr):f.registry,{...f,registry:p,container:e,theme:i,modules:Object.entries(u).reduce((m,h)=>{let[_,b]=h;if(!b)return m;const y=ot.import(`modules/${_}`);return y==null?(Gr.error(`Cannot load ${_} module. Are you sure you registered it?`),m):{...m,[_]:Ki({},y.DEFAULTS||{},b)}},{}),bounds:Xh(f.bounds)}}function xs(n,t,e,s){if(!this.isEnabled()&&t===Rt.sources.USER&&!this.allowReadOnlyEdits)return new qt;let i=e==null?null:this.getSelection();const r=this.editor.delta,l=n();if(i!=null&&(e===!0&&(e=i.index),s==null?i=Zh(i,l,t):s!==0&&(i=Zh(i,e,s,t)),this.setSelection(i,Rt.sources.SILENT)),l.length()>0){const o=[Rt.events.TEXT_CHANGE,l,r,t];this.emitter.emit(Rt.events.EDITOR_CHANGE,...o),t!==Rt.sources.SILENT&&this.emitter.emit(...o)}return l}function ci(n,t,e,s,i){let r={};return typeof n.index=="number"&&typeof n.length=="number"?typeof t!="number"?(i=s,s=e,e=t,t=n.length,n=n.index):(t=n.length,n=n.index):typeof t!="number"&&(i=s,s=e,e=t,t=0),typeof e=="object"?(r=e,i=s):typeof e=="string"&&(s!=null?r[e]=s:i=e),i=i||Rt.sources.API,[n,t,r,i]}function Zh(n,t,e,s){const i=typeof e=="number"?e:0;if(n==null)return null;let r,l;return t&&typeof t.transformPosition=="function"?[r,l]=[n.index,n.index+n.length].map(o=>t.transformPosition(o,s!==Rt.sources.USER)):[r,l]=[n.index,n.index+n.length].map(o=>o<t||o===t&&s===Rt.sources.USER?o:i>=0?o+i:Math.max(t,o+i)),new kr(r,l-r)}class Or extends ja{}function Jh(n){return n instanceof _n||n instanceof ws}function Qh(n){return typeof n.updateContent=="function"}class Ur extends $u{constructor(t,e,s){let{emitter:i}=s;super(t,e),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",r=>this.handleDragStart(r))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(Rt.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(Rt.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(Rt.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[s,i]=this.line(t),[r]=this.line(t+e);if(super.deleteAt(t,e),r!=null&&s!==r&&i>0){if(s instanceof ws||r instanceof ws){this.optimize();return}const l=r.children.head instanceof zs?null:r.children.head;s.moveChildren(r,l),s.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,s,i){super.formatAt(t,e,s,i),this.optimize()}insertAt(t,e,s){if(t>=this.length())if(s==null||this.scroll.query(e,jt.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),s==null&&e.endsWith(`
`)?i.insertAt(0,e.slice(0,-1),s):i.insertAt(0,e,s)}else{const i=this.scroll.create(e,s);this.appendChild(i)}else super.insertAt(t,e,s);this.optimize()}insertBefore(t,e){if(t.statics.scope===jt.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(t),super.insertBefore(s,e)}else super.insertBefore(t,e)}insertContents(t,e){const s=this.deltaToRenderBlocks(e.concat(new qt().insert(`
`))),i=s.pop();if(i==null)return;this.batchStart();const r=s.shift();if(r){const a=r.type==="block"&&(r.delta.length()===0||!this.descendant(ws,t)[0]&&t<this.length()),c=r.type==="block"?r.delta:new qt().insert({[r.key]:r.value});bc(this,t,c);const u=r.type==="block"?1:0,f=t+c.length()+u;a&&this.insertAt(f-1,`
`);const p=ys(this.line(t)[0]),m=Ss.AttributeMap.diff(p,r.attributes)||{};Object.keys(m).forEach(h=>{this.formatAt(f-1,1,h,m[h])}),t=f}let[l,o]=this.children.find(t);if(s.length&&(l&&(l=l.split(o),o=0),s.forEach(a=>{if(a.type==="block"){const c=this.createBlock(a.attributes,l||void 0);bc(c,0,a.delta)}else{const c=this.create(a.key,a.value);this.insertBefore(c,l||void 0),Object.keys(a.attributes).forEach(u=>{c.format(u,a.attributes[u])})}})),i.type==="block"&&i.delta.length()){const a=l?l.offset(l.scroll)+o:this.length();bc(this,a,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[s,i]=e;return s instanceof Tn?[s,i]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(Jh,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(i,r,l)=>{let o=[],a=l;return i.children.forEachAt(r,l,(c,u,f)=>{Jh(c)?o.push(c):c instanceof ja&&(o=o.concat(s(c,u,a))),a-=f}),o};return s(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(Rt.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let e=Rt.sources.USER;typeof t=="string"&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(s=>{let{target:i}=s;const r=this.find(i,!0);return r&&!Qh(r)}),t.length>0&&this.emitter.emit(Rt.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(Rt.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,s){const[i]=this.descendant(r=>r instanceof ws,t);i&&i.statics.blotName===e&&Qh(i)&&i.updateContent(s)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let s=new qt;return t.forEach(i=>{const r=i==null?void 0:i.insert;if(r)if(typeof r=="string"){const l=r.split(`
`);l.slice(0,-1).forEach(a=>{s.insert(a,i.attributes),e.push({type:"block",delta:s,attributes:i.attributes??{}}),s=new qt});const o=l[l.length-1];o&&s.insert(o,i.attributes)}else{const l=Object.keys(r)[0];if(!l)return;this.query(l,jt.INLINE)?s.push(i):(s.length()&&e.push({type:"block",delta:s,attributes:{}}),s=new qt,e.push({type:"blockEmbed",key:l,value:r[l],attributes:i.attributes??{}}))}}),s.length()&&e.push({type:"block",delta:s,attributes:{}}),e}createBlock(t,e){let s;const i={};Object.entries(t).forEach(o=>{let[a,c]=o;this.query(a,jt.BLOCK&jt.BLOT)!=null?s=a:i[a]=c});const r=this.create(s||this.statics.defaultChild.blotName,s?t[s]:void 0);this.insertBefore(r,e||void 0);const l=r.length();return Object.entries(i).forEach(o=>{let[a,c]=o;r.formatAt(0,l,a,c)}),r}}X(Ur,"blotName","scroll"),X(Ur,"className","ql-editor"),X(Ur,"tagName","DIV"),X(Ur,"defaultChild",_n),X(Ur,"allowedChildren",[_n,ws,Or]);function bc(n,t,e){e.reduce((s,i)=>{const r=Ss.Op.length(i);let l=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const o=i.insert;n.insertAt(s,o);const[a]=n.descendant(Tn,s),c=ys(a);l=Ss.AttributeMap.diff(c,l)||{}}else if(typeof i.insert=="object"){const o=Object.keys(i.insert)[0];if(o==null)return s;if(n.insertAt(s,o,i.insert[o]),n.scroll.query(o,jt.INLINE)!=null){const[c]=n.descendant(Tn,s),u=ys(c);l=Ss.AttributeMap.diff(u,l)||{}}}}return Object.keys(l).forEach(o=>{n.formatAt(s,r,o,l[o])}),s+r},t)}const lf={scope:jt.BLOCK,whitelist:["right","center","justify"]},tA=new ti("align","align",lf),Vb=new js("align","ql-align",lf),Kb=new tr("align","text-align",lf);class Yb extends tr{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):e}}const eA=new js("color","ql-color",{scope:jt.INLINE}),of=new Yb("color","color",{scope:jt.INLINE}),nA=new js("background","ql-bg",{scope:jt.INLINE}),af=new Yb("background","background-color",{scope:jt.INLINE});class xr extends Or{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(t,t+e)}html(t,e){return`<pre>
${Wa(this.code(t,e))}
</pre>`}}class On extends _n{static register(){ot.register(xr)}}X(On,"TAB","  ");class cf extends ei{}cf.blotName="code";cf.tagName="CODE";On.blotName="code-block";On.className="ql-code-block";On.tagName="DIV";xr.blotName="code-block-container";xr.className="ql-code-block-container";xr.tagName="DIV";xr.allowedChildren=[On];On.allowedChildren=[qs,zs,el];On.requiredContainer=xr;const uf={scope:jt.BLOCK,whitelist:["rtl"]},Xb=new ti("direction","dir",uf),Gb=new js("direction","ql-direction",uf),Zb=new tr("direction","direction",uf),Jb={scope:jt.INLINE,whitelist:["serif","monospace"]},Qb=new js("font","ql-font",Jb);class sA extends tr{value(t){return super.value(t).replace(/["']/g,"")}}const $b=new sA("font","font-family",Jb),t0=new js("size","ql-size",{scope:jt.INLINE,whitelist:["small","large","huge"]}),e0=new tr("size","font-size",{scope:jt.INLINE,whitelist:["10px","18px","32px"]}),iA=Ti("quill:keyboard"),rA=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Va extends Hs{static match(t,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!e[s]!==t[s]&&e[s]!==null)?!1:e.key===t.key||e.key===t.which}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=oA(t);if(i==null){iA.warn("Attempted to add invalid keyboard binding",i);return}typeof e=="function"&&(e={handler:e}),typeof s=="function"&&(s={handler:s}),(Array.isArray(i.key)?i.key:[i.key]).forEach(l=>{const o={...i,key:l,...e,...s};this.bindings[o.key]=this.bindings[o.key]||[],this.bindings[o.key].push(o)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const i=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(y=>Va.match(t,y));if(i.length===0)return;const r=ot.find(t.target,!0);if(r&&r.scroll!==this.quill.scroll)return;const l=this.quill.getSelection();if(l==null||!this.quill.hasFocus())return;const[o,a]=this.quill.getLine(l.index),[c,u]=this.quill.getLeaf(l.index),[f,p]=l.length===0?[c,u]:this.quill.getLeaf(l.index+l.length),m=c instanceof pa?c.value().slice(0,u):"",h=f instanceof pa?f.value().slice(p):"",_={collapsed:l.length===0,empty:l.length===0&&o.length()<=1,format:this.quill.getFormat(l),line:o,offset:a,prefix:m,suffix:h,event:t};i.some(y=>{if(y.collapsed!=null&&y.collapsed!==_.collapsed||y.empty!=null&&y.empty!==_.empty||y.offset!=null&&y.offset!==_.offset)return!1;if(Array.isArray(y.format)){if(y.format.every(w=>_.format[w]==null))return!1}else if(typeof y.format=="object"&&!Object.keys(y.format).every(w=>y.format[w]===!0?_.format[w]!=null:y.format[w]===!1?_.format[w]==null:Ju(y.format[w],_.format[w])))return!1;return y.prefix!=null&&!y.prefix.test(_.prefix)||y.suffix!=null&&!y.suffix.test(_.suffix)?!1:y.handler.call(this,l,_,y)!==!0})&&t.preventDefault()})}handleBackspace(t,e){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let i={};const[r]=this.quill.getLine(t.index);let l=new qt().retain(t.index-s).delete(s);if(e.offset===0){const[o]=this.quill.getLine(t.index-1);if(o&&!(o.statics.blotName==="block"&&o.length()<=1)){const c=r.formats(),u=this.quill.getFormat(t.index-1,1);if(i=Ss.AttributeMap.diff(c,u)||{},Object.keys(i).length>0){const f=new qt().retain(t.index+r.length()-2).retain(1,i);l=l.compose(f)}}}this.quill.updateContents(l,ot.sources.USER),this.quill.focus()}handleDelete(t,e){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-s)return;let i={};const[r]=this.quill.getLine(t.index);let l=new qt().retain(t.index).delete(s);if(e.offset>=r.length()-1){const[o]=this.quill.getLine(t.index+1);if(o){const a=r.formats(),c=this.quill.getFormat(t.index,1);i=Ss.AttributeMap.diff(a,c)||{},Object.keys(i).length>0&&(l=l.retain(o.length()-1).retain(1,i))}}this.quill.updateContents(l,ot.sources.USER),this.quill.focus()}handleDeleteRange(t){ff({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const s=Object.keys(e.format).reduce((r,l)=>(this.quill.scroll.query(l,jt.BLOCK)&&!Array.isArray(e.format[l])&&(r[l]=e.format[l]),r),{}),i=new qt().retain(t.index).delete(t.length).insert(`
`,s);this.quill.updateContents(i,ot.sources.USER),this.quill.setSelection(t.index+1,ot.sources.SILENT),this.quill.focus()}}const lA={bindings:{bold:vc("bold"),italic:vc("italic"),underline:vc("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",ot.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",ot.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,t){t.format.indent!=null?this.quill.format("indent","-1",ot.sources.USER):t.format.list!=null&&this.quill.format("list",!1,ot.sources.USER)}},"indent code-block":$h(!0),"outdent code-block":$h(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,ot.sources.USER)}},tab:{key:"Tab",handler(n,t){if(t.format.table)return!0;this.quill.history.cutoff();const e=new qt().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(e,ot.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,ot.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,ot.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,t){const e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(n.index,n.length,e,ot.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[t,e]=this.quill.getLine(n.index),s={...t.formats(),list:"checked"},i=new qt().retain(n.index).insert(`
`,s).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,ot.sources.USER),this.quill.setSelection(n.index+1,ot.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,t){const[e,s]=this.quill.getLine(n.index),i=new qt().retain(n.index).insert(`
`,t.format).retain(e.length()-s-1).retain(1,{header:null});this.quill.updateContents(i,ot.sources.USER),this.quill.setSelection(n.index+1,ot.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const t=this.quill.getModule("table");if(t){const[e,s,i,r]=t.getTable(n),l=aA(e,s,i,r);if(l==null)return;let o=e.offset();if(l<0){const a=new qt().retain(o).insert(`
`);this.quill.updateContents(a,ot.sources.USER),this.quill.setSelection(n.index+1,n.length,ot.sources.SILENT)}else if(l>0){o+=e.length();const a=new qt().retain(o).insert(`
`);this.quill.updateContents(a,ot.sources.USER),this.quill.setSelection(o,ot.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,t){const{event:e,line:s}=t,i=s.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(i-1,ot.sources.USER):this.quill.setSelection(i+s.length(),ot.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,t){if(this.quill.scroll.query("list")==null)return!0;const{length:e}=t.prefix,[s,i]=this.quill.getLine(n.index);if(i>e)return!0;let r;switch(t.prefix.trim()){case"[]":case"[ ]":r="unchecked";break;case"[x]":r="checked";break;case"-":case"*":r="bullet";break;default:r="ordered"}this.quill.insertText(n.index," ",ot.sources.USER),this.quill.history.cutoff();const l=new qt().retain(n.index-i).delete(e+1).retain(s.length()-2-i).retain(1,{list:r});return this.quill.updateContents(l,ot.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-e,ot.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[t,e]=this.quill.getLine(n.index);let s=2,i=t;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,s-=1,s<=0){const r=new qt().retain(n.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(r,ot.sources.USER),this.quill.setSelection(n.index-1,ot.sources.SILENT),!1}return!0}},"embed left":To("ArrowLeft",!1),"embed left shift":To("ArrowLeft",!0),"embed right":To("ArrowRight",!1),"embed right shift":To("ArrowRight",!0),"table down":td(!1),"table up":td(!0)}};Va.DEFAULTS=lA;function $h(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(t,e){let{event:s}=e;const i=this.quill.scroll.query("code-block"),{TAB:r}=i;if(t.length===0&&!s.shiftKey){this.quill.insertText(t.index,r,ot.sources.USER),this.quill.setSelection(t.index+r.length,ot.sources.SILENT);return}const l=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:o,length:a}=t;l.forEach((c,u)=>{n?(c.insertAt(0,r),u===0?o+=r.length:a+=r.length):c.domNode.textContent.startsWith(r)&&(c.deleteAt(0,r.length),u===0?o-=r.length:a-=r.length)}),this.quill.update(ot.sources.USER),this.quill.setSelection(o,a,ot.sources.SILENT)}}}function To(n,t){return{key:n,shiftKey:t,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:i}=s;n==="ArrowRight"&&(i+=s.length+1);const[r]=this.quill.getLeaf(i);return r instanceof is?(n==="ArrowLeft"?t?this.quill.setSelection(s.index-1,s.length+1,ot.sources.USER):this.quill.setSelection(s.index-1,ot.sources.USER):t?this.quill.setSelection(s.index,s.length+1,ot.sources.USER):this.quill.setSelection(s.index+s.length+1,ot.sources.USER),!1):!0}}}function vc(n){return{key:n[0],shortKey:!0,handler(t,e){this.quill.format(n,!e.format[n],ot.sources.USER)}}}function td(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){const s=n?"prev":"next",i=e.line,r=i.parent[s];if(r!=null){if(r.statics.blotName==="table-row"){let l=r.children.head,o=i;for(;o.prev!=null;)o=o.prev,l=l.next;const a=l.offset(this.quill.scroll)+Math.min(e.offset,l.length()-1);this.quill.setSelection(a,0,ot.sources.USER)}}else{const l=i.table()[s];l!=null&&(n?this.quill.setSelection(l.offset(this.quill.scroll)+l.length()-1,0,ot.sources.USER):this.quill.setSelection(l.offset(this.quill.scroll),0,ot.sources.USER))}return!1}}}function oA(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=Yr(n);else return null;return n.shortKey&&(n[rA]=n.shortKey,delete n.shortKey),n}function ff(n){let{quill:t,range:e}=n;const s=t.getLines(e);let i={};if(s.length>1){const r=s[0].formats(),l=s[s.length-1].formats();i=Ss.AttributeMap.diff(l,r)||{}}t.deleteText(e,ot.sources.USER),Object.keys(i).length>0&&t.formatLine(e.index,1,i,ot.sources.USER),t.setSelection(e.index,ot.sources.SILENT)}function aA(n,t,e,s){return t.prev==null&&t.next==null?e.prev==null&&e.next==null?s===0?-1:1:e.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const cA=/font-weight:\s*normal/,uA=["P","OL","UL"],ed=n=>n&&uA.includes(n.tagName),fA=n=>{Array.from(n.querySelectorAll("br")).filter(t=>ed(t.previousElementSibling)&&ed(t.nextElementSibling)).forEach(t=>{var e;(e=t.parentNode)==null||e.removeChild(t)})},hA=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var e;return(e=t.getAttribute("style"))==null?void 0:e.match(cA)}).forEach(t=>{var s;const e=n.createDocumentFragment();e.append(...t.childNodes),(s=t.parentNode)==null||s.replaceChild(e,t)})};function dA(n){n.querySelector('[id^="docs-internal-guid-"]')&&(hA(n),fA(n))}const pA=/\bmso-list:[^;]*ignore/i,gA=/\bmso-list:[^;]*\bl(\d+)/i,mA=/\bmso-list:[^;]*\blevel(\d+)/i,_A=(n,t)=>{const e=n.getAttribute("style"),s=e==null?void 0:e.match(gA);if(!s)return null;const i=Number(s[1]),r=e==null?void 0:e.match(mA),l=r?Number(r[1]):1,o=new RegExp(`@list l${i}:level${l}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),a=t.match(o),c=a&&a[1]==="bullet"?"bullet":"ordered";return{id:i,indent:l,type:c,element:n}},bA=n=>{var l,o;const t=Array.from(n.querySelectorAll("[style*=mso-list]")),e=[],s=[];t.forEach(a=>{(a.getAttribute("style")||"").match(pA)?e.push(a):s.push(a)}),e.forEach(a=>{var c;return(c=a.parentNode)==null?void 0:c.removeChild(a)});const i=n.documentElement.innerHTML,r=s.map(a=>_A(a,i)).filter(a=>a);for(;r.length;){const a=[];let c=r.shift();for(;c;)a.push(c),c=r.length&&((l=r[0])==null?void 0:l.element)===c.element.nextElementSibling&&r[0].id===c.id?r.shift():null;const u=document.createElement("ul");a.forEach(m=>{const h=document.createElement("li");h.setAttribute("data-list",m.type),m.indent>1&&h.setAttribute("class",`ql-indent-${m.indent-1}`),h.innerHTML=m.element.innerHTML,u.appendChild(h)});const f=(o=a[0])==null?void 0:o.element,{parentNode:p}=f??{};f&&(p==null||p.replaceChild(u,f)),a.slice(1).forEach(m=>{let{element:h}=m;p==null||p.removeChild(h)})}};function vA(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&bA(n)}const yA=[vA,dA],kA=n=>{n.documentElement&&yA.forEach(t=>{t(n)})},wA=Ti("quill:clipboard"),SA=[[Node.TEXT_NODE,RA],[Node.TEXT_NODE,sd],["br",OA],[Node.ELEMENT_NODE,sd],[Node.ELEMENT_NODE,CA],[Node.ELEMENT_NODE,EA],[Node.ELEMENT_NODE,IA],["li",LA],["ol, ul",NA],["pre",xA],["tr",DA],["b",yc("bold")],["i",yc("italic")],["strike",yc("strike")],["style",MA]],AA=[tA,Xb].reduce((n,t)=>(n[t.keyName]=t,n),{}),nd=[Kb,af,of,Zb,$b,e0].reduce((n,t)=>(n[t.keyName]=t,n),{});class n0 extends Hs{constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],SA.concat(this.options.matchers??[]).forEach(s=>{let[i,r]=s;this.addMatcher(i,r)})}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:s}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[On.blotName])return new qt().insert(s||"",{[On.blotName]:i[On.blotName]});if(!e)return new qt().insert(s||"",i);const r=this.convertHTML(e);return ao(r,`
`)&&(r.ops[r.ops.length-1].attributes==null||i.table)?r.compose(new qt().retain(r.length()-1).delete(1)):r}normalizeHTML(t){kA(t)}convertHTML(t){const e=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(e);const s=e.body,i=new WeakMap,[r,l]=this.prepareMatching(s,i);return hf(this.quill.scroll,s,r,l,i)}dangerouslyPasteHTML(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ot.sources.API;if(typeof t=="string"){const i=this.convert({html:t,text:""});this.quill.setContents(i,e),this.quill.setSelection(0,ot.sources.SILENT)}else{const i=this.convert({html:e,text:""});this.quill.updateContents(new qt().retain(t).concat(i),s),this.quill.setSelection(t+i.length(),ot.sources.SILENT)}}onCaptureCopy(t){var l,o;let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:i,text:r}=this.onCopy(s,e);(l=t.clipboardData)==null||l.setData("text/plain",r),(o=t.clipboardData)==null||o.setData("text/html",i),e&&ff({range:s,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(t){var l,o,a,c,u;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(e==null)return;const s=(l=t.clipboardData)==null?void 0:l.getData("text/html");let i=(o=t.clipboardData)==null?void 0:o.getData("text/plain");if(!s&&!i){const f=(a=t.clipboardData)==null?void 0:a.getData("text/uri-list");f&&(i=this.normalizeURIList(f))}const r=Array.from(((c=t.clipboardData)==null?void 0:c.files)||[]);if(!s&&r.length>0){this.quill.uploader.upload(e,r);return}if(s&&r.length>0){const f=new DOMParser().parseFromString(s,"text/html");if(f.body.childElementCount===1&&((u=f.body.firstElementChild)==null?void 0:u.tagName)==="IMG"){this.quill.uploader.upload(e,r);return}}this.onPaste(e,{html:s,text:i})}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:s,html:i}=e;const r=this.quill.getFormat(t.index),l=this.convert({text:s,html:i},r);wA.log("onPaste",l,{text:s,html:i});const o=new qt().retain(t.index).delete(t.length).concat(l);this.quill.updateContents(o,ot.sources.USER),this.quill.setSelection(o.length()-t.length,ot.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const s=[],i=[];return this.matchers.forEach(r=>{const[l,o]=r;switch(l){case Node.TEXT_NODE:i.push(o);break;case Node.ELEMENT_NODE:s.push(o);break;default:Array.from(t.querySelectorAll(l)).forEach(a=>{if(e.has(a)){const c=e.get(a);c==null||c.push(o)}else e.set(a,[o])});break}}),[s,i]}}X(n0,"DEFAULTS",{matchers:[]});function Mr(n,t,e,s){return s.query(t)?n.reduce((i,r)=>{if(!r.insert)return i;if(r.attributes&&r.attributes[t])return i.push(r);const l=e?{[t]:e}:{};return i.insert(r.insert,{...l,...r.attributes})},new qt):n}function ao(n,t){let e="";for(let s=n.ops.length-1;s>=0&&e.length<t.length;--s){const i=n.ops[s];if(typeof i.insert!="string")break;e=i.insert+e}return e.slice(-1*t.length)===t}function Fi(n,t){if(!(n instanceof Element))return!1;const e=t.query(n);return e&&e.prototype instanceof is?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function TA(n,t){return n.previousElementSibling&&n.nextElementSibling&&!Fi(n.previousElementSibling,t)&&!Fi(n.nextElementSibling,t)}const Eo=new WeakMap;function s0(n){return n==null?!1:(Eo.has(n)||(n.tagName==="PRE"?Eo.set(n,!0):Eo.set(n,s0(n.parentNode))),Eo.get(n))}function hf(n,t,e,s,i){return t.nodeType===t.TEXT_NODE?s.reduce((r,l)=>l(t,r,n),new qt):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((r,l)=>{let o=hf(n,l,e,s,i);return l.nodeType===t.ELEMENT_NODE&&(o=e.reduce((a,c)=>c(l,a,n),o),o=(i.get(l)||[]).reduce((a,c)=>c(l,a,n),o)),r.concat(o)},new qt):new qt}function yc(n){return(t,e,s)=>Mr(e,n,!0,s)}function EA(n,t,e){const s=ti.keys(n),i=js.keys(n),r=tr.keys(n),l={};return s.concat(i).concat(r).forEach(o=>{let a=e.query(o,jt.ATTRIBUTE);a!=null&&(l[a.attrName]=a.value(n),l[a.attrName])||(a=AA[o],a!=null&&(a.attrName===o||a.keyName===o)&&(l[a.attrName]=a.value(n)||void 0),a=nd[o],a!=null&&(a.attrName===o||a.keyName===o)&&(a=nd[o],l[a.attrName]=a.value(n)||void 0))}),Object.entries(l).reduce((o,a)=>{let[c,u]=a;return Mr(o,c,u,e)},t)}function CA(n,t,e){const s=e.query(n);if(s==null)return t;if(s.prototype instanceof is){const i={},r=s.value(n);if(r!=null)return i[s.blotName]=r,new qt().insert(i,s.formats(n,e))}else if(s.prototype instanceof Ul&&!ao(t,`
`)&&t.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return Mr(t,s.blotName,s.formats(n,e),e);return t}function OA(n,t){return ao(t,`
`)||t.insert(`
`),t}function xA(n,t,e){const s=e.query("code-block"),i=s&&"formats"in s&&typeof s.formats=="function"?s.formats(n,e):!0;return Mr(t,"code-block",i,e)}function MA(){return new qt}function LA(n,t,e){const s=e.query(n);if(s==null||s.blotName!=="list"||!ao(t,`
`))return t;let i=-1,r=n.parentNode;for(;r!=null;)["OL","UL"].includes(r.tagName)&&(i+=1),r=r.parentNode;return i<=0?t:t.reduce((l,o)=>o.insert?o.attributes&&typeof o.attributes.indent=="number"?l.push(o):l.insert(o.insert,{indent:i,...o.attributes||{}}):l,new qt)}function NA(n,t,e){const s=n;let i=s.tagName==="OL"?"ordered":"bullet";const r=s.getAttribute("data-checked");return r&&(i=r==="true"?"checked":"unchecked"),Mr(t,"list",i,e)}function sd(n,t,e){if(!ao(t,`
`)){if(Fi(n,e)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&n.nextSibling){let s=n.nextSibling;for(;s!=null;){if(Fi(s,e))return t.insert(`
`);const i=e.query(s);if(i&&i.prototype instanceof ws)return t.insert(`
`);s=s.firstChild}}}return t}function IA(n,t,e){var r;const s={},i=n.style||{};return i.fontStyle==="italic"&&(s.italic=!0),i.textDecoration==="underline"&&(s.underline=!0),i.textDecoration==="line-through"&&(s.strike=!0),((r=i.fontWeight)!=null&&r.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(s.bold=!0),t=Object.entries(s).reduce((l,o)=>{let[a,c]=o;return Mr(l,a,c,e)},t),parseFloat(i.textIndent||0)>0?new qt().insert("	").concat(t):t}function DA(n,t,e){var i,r;const s=((i=n.parentElement)==null?void 0:i.tagName)==="TABLE"?n.parentElement:(r=n.parentElement)==null?void 0:r.parentElement;if(s!=null){const o=Array.from(s.querySelectorAll("tr")).indexOf(n)+1;return Mr(t,"table",o,e)}return t}function RA(n,t,e){var i;let s=n.data;if(((i=n.parentElement)==null?void 0:i.tagName)==="O:P")return t.insert(s.trim());if(!s0(n)){if(s.trim().length===0&&s.includes(`
`)&&!TA(n,e))return t;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(n.previousSibling==null&&n.parentElement!=null&&Fi(n.parentElement,e)||n.previousSibling instanceof Element&&Fi(n.previousSibling,e))&&(s=s.replace(/^ /,"")),(n.nextSibling==null&&n.parentElement!=null&&Fi(n.parentElement,e)||n.nextSibling instanceof Element&&Fi(n.nextSibling,e))&&(s=s.replace(/ $/,"")),s=s.replaceAll(""," ")}return t.insert(s)}class i0 extends Hs{constructor(e,s){super(e,s);X(this,"lastRecorded",0);X(this,"ignoreChange",!1);X(this,"stack",{undo:[],redo:[]});X(this,"currentRange",null);this.quill.on(ot.events.EDITOR_CHANGE,(i,r,l,o)=>{i===ot.events.SELECTION_CHANGE?r&&o!==ot.sources.SILENT&&(this.currentRange=r):i===ot.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===ot.sources.USER?this.record(r,l):this.transform(r)),this.currentRange=du(this.currentRange,r))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(e,s){if(this.stack[e].length===0)return;const i=this.stack[e].pop();if(!i)return;const r=this.quill.getContents(),l=i.delta.invert(r);this.stack[s].push({delta:l,range:du(i.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,ot.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,s){if(e.ops.length===0)return;this.stack.redo=[];let i=e.invert(s),r=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(i=i.compose(o.delta),r=o.range)}else this.lastRecorded=l;i.length()!==0&&(this.stack.undo.push({delta:i,range:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){id(this.stack.undo,e),id(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,ot.sources.USER);else{const s=BA(this.quill.scroll,e.delta);this.quill.setSelection(s,ot.sources.USER)}}}X(i0,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function id(n,t){let e=t;for(let s=n.length-1;s>=0;s-=1){const i=n[s];n[s]={delta:e.transform(i.delta,!0),range:i.range&&du(i.range,e)},e=i.delta.transform(e),n[s].delta.length()===0&&n.splice(s,1)}}function PA(n,t){const e=t.ops[t.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(s=>n.query(s,jt.BLOCK)!=null):!1}function BA(n,t){const e=t.reduce((i,r)=>i+(r.delete||0),0);let s=t.length()-e;return PA(n,t)&&(s-=1),s}function du(n,t){if(!n)return n;const e=t.transformPosition(n.index),s=t.transformPosition(n.index+n.length);return{index:e,length:s-e}}class r0 extends Hs{constructor(t,e){super(t,e),t.root.addEventListener("drop",s=>{var l;s.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(s.clientX,s.clientY);i=document.createRange(),i.setStart(o.offsetNode,o.offset),i.setEnd(o.offsetNode,o.offset)}const r=i&&t.selection.normalizeNative(i);if(r){const o=t.selection.normalizedToRange(r);(l=s.dataTransfer)!=null&&l.files&&this.upload(o,s.dataTransfer.files)}})}upload(t,e){const s=[];Array.from(e).forEach(i=>{var r;i&&((r=this.options.mimetypes)!=null&&r.includes(i.type))&&s.push(i)}),s.length>0&&this.options.handler.call(this,t,s)}}r0.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,t){if(!this.quill.scroll.query("image"))return;const e=t.map(s=>new Promise(i=>{const r=new FileReader;r.onload=()=>{i(r.result)},r.readAsDataURL(s)}));Promise.all(e).then(s=>{const i=s.reduce((r,l)=>r.insert({image:l}),new qt().retain(n.index).delete(n.length));this.quill.updateContents(i,Rt.sources.USER),this.quill.setSelection(n.index+s.length,Rt.sources.SILENT)})}};const qA=["insertText","insertReplacementText"];class FA extends Hs{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||t.on(ot.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){ff({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(e){const s=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new qt().retain(t.index).insert(e,s),ot.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,ot.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!qA.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;const s=jA(t);if(s==null)return;const i=this.quill.selection.normalizeNative(e),r=i?this.quill.selection.normalizedToRange(i):null;r&&this.replaceText(r,s)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function jA(n){var t;return typeof n.data=="string"?n.data:(t=n.dataTransfer)!=null&&t.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const zA=/Mac/i.test(navigator.platform),HA=100,UA=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||zA&&n.key==="a"&&n.ctrlKey===!0);class WA extends Hs{constructor(e,s){super(e,s);X(this,"isListening",!1);X(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,s){let{line:i,event:r}=s;if(!(i instanceof Ps)||!i.uiNode)return!0;const l=getComputedStyle(i.domNode).direction==="rtl";return l&&r.key!=="ArrowRight"||!l&&r.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(r.shiftKey?1:0),ot.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&UA(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+HA,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const s=e.getRangeAt(0);if(s.collapsed!==!0||s.startOffset!==0)return;const i=this.quill.scroll.find(s.startContainer);if(!(i instanceof Ps)||!i.uiNode)return;const r=document.createRange();r.setStartAfter(i.uiNode),r.setEndAfter(i.uiNode),e.removeAllRanges(),e.addRange(r)}}ot.register({"blots/block":_n,"blots/block/embed":ws,"blots/break":zs,"blots/container":Or,"blots/cursor":el,"blots/embed":rf,"blots/inline":ei,"blots/scroll":Ur,"blots/text":qs,"modules/clipboard":n0,"modules/history":i0,"modules/keyboard":Va,"modules/uploader":r0,"modules/input":FA,"modules/uiNode":WA});class VA extends js{add(t,e){let s=0;if(e==="+1"||e==="-1"){const i=this.value(t)||0;s=e==="+1"?i+1:i-1}else typeof e=="number"&&(s=e);return s===0?(this.remove(t),!0):super.add(t,s.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}const KA=new VA("indent","ql-indent",{scope:jt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class pu extends _n{}X(pu,"blotName","blockquote"),X(pu,"tagName","blockquote");class gu extends _n{static formats(t){return this.tagName.indexOf(t.tagName)+1}}X(gu,"blotName","header"),X(gu,"tagName",["H1","H2","H3","H4","H5","H6"]);class co extends Or{}co.blotName="list-container";co.tagName="OL";class uo extends _n{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){ot.register(co)}constructor(t,e){super(t,e);const s=e.ownerDocument.createElement("span"),i=r=>{if(!t.isEnabled())return;const l=this.statics.formats(e,t);l==="checked"?(this.format("list","unchecked"),r.preventDefault()):l==="unchecked"&&(this.format("list","checked"),r.preventDefault())};s.addEventListener("mousedown",i),s.addEventListener("touchstart",i),this.attachUI(s)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}uo.blotName="list";uo.tagName="LI";co.allowedChildren=[uo];uo.requiredContainer=co;class Kl extends ei{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}X(Kl,"blotName","bold"),X(Kl,"tagName",["STRONG","B"]);class mu extends Kl{}X(mu,"blotName","italic"),X(mu,"tagName",["EM","I"]);class ji extends ei{static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return l0(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t!==this.statics.blotName||!e?super.format(t,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}}X(ji,"blotName","link"),X(ji,"tagName","A"),X(ji,"SANITIZED_URL","about:blank"),X(ji,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function l0(n,t){const e=document.createElement("a");e.href=n;const s=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(s)>-1}class _u extends ei{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}X(_u,"blotName","script"),X(_u,"tagName",["SUB","SUP"]);class bu extends Kl{}X(bu,"blotName","strike"),X(bu,"tagName",["S","STRIKE"]);class vu extends ei{}X(vu,"blotName","underline"),X(vu,"tagName","U");class Xo extends rf{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return typeof t=="string"&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}X(Xo,"blotName","formula"),X(Xo,"className","ql-formula"),X(Xo,"tagName","SPAN");const rd=["alt","height","width"];var jo;let YA=(jo=class extends is{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return rd.reduce((e,s)=>(t.hasAttribute(s)&&(e[s]=t.getAttribute(s)),e),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return l0(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){rd.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}},X(jo,"blotName","image"),X(jo,"tagName","IMG"),jo);const ld=["height","width"];class Go extends ws{static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return ld.reduce((e,s)=>(t.hasAttribute(s)&&(e[s]=t.getAttribute(s)),e),{})}static sanitize(t){return ji.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){ld.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}X(Go,"blotName","video"),X(Go,"className","ql-video"),X(Go,"tagName","IFRAME");const yl=new js("code-token","hljs",{scope:jt.INLINE});class wi extends ei{static formats(t,e){for(;t!=null&&t!==e.domNode;){if(t.classList&&t.classList.contains(On.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,s){super(t,e,s),yl.add(this.domNode,s)}format(t,e){t!==wi.blotName?super.format(t,e):e?yl.add(this.domNode,e):(yl.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),yl.value(this.domNode)||this.unwrap()}}wi.blotName="code-token";wi.className="ql-token";class ks extends On{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),wi.blotName,!1),super.replaceWith(t,e)}}class Ol extends xr{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===ks.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(t,e)}))}formatAt(t,e,s,i){s===ks.blotName&&(this.forceNext=!0),super.formatAt(t,e,s,i)}highlight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(l=>l!==this.uiNode).map(l=>l.textContent).join(`
`)}
`,r=ks.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const l=this.children.reduce((a,c)=>a.concat(Hb(c,!1)),new qt),o=t(i,r);l.diff(o).reduce((a,c)=>{let{retain:u,attributes:f}=c;return u?(f&&Object.keys(f).forEach(p=>{[ks.blotName,wi.blotName].includes(p)&&this.formatAt(a,u,p,f[p])}),a+u):a},0)}this.cachedText=i,this.forceNext=!1}}html(t,e){const[s]=this.children.find(t);return`<pre data-language="${s?ks.formats(s.domNode):"plain"}">
${Wa(this.code(t,e))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const e=ks.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}}Ol.allowedChildren=[ks];ks.requiredContainer=Ol;ks.allowedChildren=[wi,el,qs,zs];const XA=(n,t,e)=>{if(typeof n.versionString=="string"){const s=n.versionString.split(".")[0];if(parseInt(s,10)>=11)return n.highlight(e,{language:t}).value}return n.highlight(t,e).value};class o0 extends Hs{static register(){ot.register(wi,!0),ot.register(ks,!0),ot.register(Ol,!0)}constructor(t,e){if(super(t,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,i)=>{let{key:r}=i;return s[r]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(ot.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof Ol))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:i,label:r}=s;const l=e.ownerDocument.createElement("option");l.textContent=r,l.setAttribute("value",i),e.appendChild(l)}),e.addEventListener("change",()=>{t.format(ks.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(e),t.children.head&&(e.value=ks.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(ot.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(ot.sources.USER);const s=this.quill.getSelection();(t==null?this.quill.scroll.descendants(Ol):[t]).forEach(r=>{r.highlight(this.highlightBlot,e)}),this.quill.update(ot.sources.SILENT),s!=null&&this.quill.setSelection(s,ot.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return Wa(t).split(`
`).reduce((i,r,l)=>(l!==0&&i.insert(`
`,{[On.blotName]:e}),i.insert(r)),new qt);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add(On.className),s.innerHTML=XA(this.options.hljs,e,t),hf(this.quill.scroll,s,[(i,r)=>{const l=yl.value(i);return l?r.compose(new qt().retain(r.length(),{[wi.blotName]:l})):r}],[(i,r)=>i.data.split(`
`).reduce((l,o,a)=>(a!==0&&l.insert(`
`,{[On.blotName]:e}),l.insert(o)),r)],new WeakMap)}}o0.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const Rl=class Rl extends _n{static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",df()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===Rl.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};X(Rl,"blotName","table"),X(Rl,"tagName","TD");let Is=Rl;class Si extends Or{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),e=this.children.tail.formats(),s=this.next.children.head.formats(),i=this.next.children.tail.formats();return t.table===e.table&&t.table===s.table&&t.table===i.table}return!1}optimize(t){super.optimize(t),this.children.forEach(e=>{if(e.next==null)return;const s=e.formats(),i=e.next.formats();if(s.table!==i.table){const r=this.splitAfter(e);r&&r.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}X(Si,"blotName","table-row"),X(Si,"tagName","TR");class Js extends Or{}X(Js,"blotName","table-body"),X(Js,"tagName","TBODY");class sl extends Or{balanceCells(){const t=this.descendants(Si),e=t.reduce((s,i)=>Math.max(i.children.length,s),0);t.forEach(s=>{new Array(e-s.children.length).fill(0).forEach(()=>{let i;s.children.head!=null&&(i=Is.formats(s.children.head.domNode));const r=this.scroll.create(Is.blotName,i);s.appendChild(r),r.optimize()})})}cells(t){return this.rows().map(e=>e.children.at(t))}deleteColumn(t){const[e]=this.descendant(Js);e==null||e.children.head==null||e.children.forEach(s=>{const i=s.children.at(t);i!=null&&i.remove()})}insertColumn(t){const[e]=this.descendant(Js);e==null||e.children.head==null||e.children.forEach(s=>{const i=s.children.at(t),r=Is.formats(s.children.head.domNode),l=this.scroll.create(Is.blotName,r);s.insertBefore(l,i)})}insertRow(t){const[e]=this.descendant(Js);if(e==null||e.children.head==null)return;const s=df(),i=this.scroll.create(Si.blotName);e.children.head.children.forEach(()=>{const l=this.scroll.create(Is.blotName,s);i.appendChild(l)});const r=e.children.at(t);e.insertBefore(i,r)}rows(){const t=this.children.head;return t==null?[]:t.children.map(e=>e)}}X(sl,"blotName","table-container"),X(sl,"tagName","TABLE");sl.allowedChildren=[Js];Js.requiredContainer=sl;Js.allowedChildren=[Si];Si.requiredContainer=Js;Si.allowedChildren=[Is];Is.requiredContainer=Si;function df(){return`row-${Math.random().toString(36).slice(2,6)}`}class GA extends Hs{static register(){ot.register(Is),ot.register(Si),ot.register(Js),ot.register(sl)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(sl).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,e]=this.getTable();e!=null&&(t.deleteColumn(e.cellOffset()),this.quill.update(ot.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(ot.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const e=t.offset();t.remove(),this.quill.update(ot.sources.USER),this.quill.setSelection(e,ot.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[e,s]=this.quill.getLine(t.index);if(e==null||e.statics.blotName!==Is.blotName)return[null,null,null,-1];const i=e.parent;return[i.parent.parent,i,e,s]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[s,i,r]=this.getTable(e);if(r==null)return;const l=r.cellOffset();s.insertColumn(l+t),this.quill.update(ot.sources.USER);let o=i.rowOffset();t===0&&(o+=1),this.quill.setSelection(e.index+o,e.length,ot.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[s,i,r]=this.getTable(e);if(r==null)return;const l=i.rowOffset();s.insertRow(l+t),this.quill.update(ot.sources.USER),t>0?this.quill.setSelection(e,ot.sources.SILENT):this.quill.setSelection(e.index+i.children.length,e.length,ot.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const s=this.quill.getSelection();if(s==null)return;const i=new Array(t).fill(0).reduce(r=>{const l=new Array(e).fill(`
`).join("");return r.insert(l,{table:df()})},new qt().retain(s.index));this.quill.updateContents(i,ot.sources.USER),this.quill.setSelection(s.index,ot.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(ot.events.SCROLL_OPTIMIZE,t=>{t.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(ot.events.TEXT_CHANGE,(s,i,r)=>{r===ot.sources.USER&&this.balanceTables()}),!0):!1)})}}const od=Ti("quill:toolbar");class pf extends Hs{constructor(t,e){var s,i;if(super(t,e),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),ZA(r,this.options.container),(i=(s=t.container)==null?void 0:s.parentNode)==null||i.insertBefore(r,t.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){od.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{var o;const l=(o=this.options.handlers)==null?void 0:o[r];l&&this.addHandler(r,l)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(ot.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find(i=>i.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){od.warn("ignoring attaching to nonexistent format",e,t);return}const s=t.tagName==="SELECT"?"change":"click";t.addEventListener(s,i=>{let r;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const o=t.options[t.selectedIndex];o.hasAttribute("selected")?r=!1:r=o.value||!1}else t.classList.contains("ql-active")?r=!1:r=t.value||!t.hasAttribute("value"),i.preventDefault();this.quill.focus();const[l]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,r);else if(this.quill.scroll.query(e).prototype instanceof is){if(r=prompt(`Enter ${e}`),!r)return;this.quill.updateContents(new qt().retain(l.index).delete(l.length).insert({[e]:r}),ot.sources.USER)}else this.quill.format(e,r,ot.sources.USER);this.update(l)}),this.controls.push([e,t])}update(t){const e=t==null?{}:this.quill.getFormat(t);this.controls.forEach(s=>{const[i,r]=s;if(r.tagName==="SELECT"){let l=null;if(t==null)l=null;else if(e[i]==null)l=r.querySelector("option[selected]");else if(!Array.isArray(e[i])){let o=e[i];typeof o=="string"&&(o=o.replace(/"/g,'\\"')),l=r.querySelector(`option[value="${o}"]`)}l==null?(r.value="",r.selectedIndex=-1):l.selected=!0}else if(t==null)r.classList.remove("ql-active"),r.setAttribute("aria-pressed","false");else if(r.hasAttribute("value")){const l=e[i],o=l===r.getAttribute("value")||l!=null&&l.toString()===r.getAttribute("value")||l==null&&!r.getAttribute("value");r.classList.toggle("ql-active",o),r.setAttribute("aria-pressed",o.toString())}else{const l=e[i]!=null;r.classList.toggle("ql-active",l),r.setAttribute("aria-pressed",l.toString())}})}}pf.DEFAULTS={};function ad(n,t,e){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${t}`),s.setAttribute("aria-pressed","false"),e!=null?(s.value=e,s.setAttribute("aria-label",`${t}: ${e}`)):s.setAttribute("aria-label",t),n.appendChild(s)}function ZA(n,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{const s=document.createElement("span");s.classList.add("ql-formats"),e.forEach(i=>{if(typeof i=="string")ad(s,i);else{const r=Object.keys(i)[0],l=i[r];Array.isArray(l)?JA(s,r,l):ad(s,r,l)}}),n.appendChild(s)})}function JA(n,t,e){const s=document.createElement("select");s.classList.add(`ql-${t}`),e.forEach(i=>{const r=document.createElement("option");i!==!1?r.setAttribute("value",String(i)):r.setAttribute("selected","selected"),s.appendChild(r)}),n.appendChild(s)}pf.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(e=>{this.quill.scroll.query(e,jt.INLINE)!=null&&this.quill.format(e,!1,ot.sources.USER)})}else this.quill.removeFormat(n.index,n.length,ot.sources.USER)},direction(n){const{align:t}=this.quill.getFormat();n==="rtl"&&t==null?this.quill.format("align","right",ot.sources.USER):!n&&t==="right"&&this.quill.format("align",!1,ot.sources.USER),this.quill.format("direction",n,ot.sources.USER)},indent(n){const t=this.quill.getSelection(),e=this.quill.getFormat(t),s=parseInt(e.indent||0,10);if(n==="+1"||n==="-1"){let i=n==="+1"?1:-1;e.direction==="rtl"&&(i*=-1),this.quill.format("indent",s+i,ot.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,ot.sources.USER)},list(n){const t=this.quill.getSelection(),e=this.quill.getFormat(t);n==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,ot.sources.USER):this.quill.format("list","unchecked",ot.sources.USER):this.quill.format("list",n,ot.sources.USER)}}};const QA='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',$A='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',t3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',e3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',n3='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',s3='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',i3='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',r3='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',cd='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',l3='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',o3='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',a3='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',c3='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',u3='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',f3='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',h3='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',d3='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',p3='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',g3='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',m3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',_3='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',b3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',v3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',y3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',k3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',w3='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',S3='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',A3='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',T3='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',E3='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',C3='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',O3='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',x3='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Yl={align:{"":QA,center:$A,right:t3,justify:e3},background:n3,blockquote:s3,bold:i3,clean:r3,code:cd,"code-block":cd,color:l3,direction:{"":o3,rtl:a3},formula:c3,header:{1:u3,2:f3,3:h3,4:d3,5:p3,6:g3},italic:m3,image:_3,indent:{"+1":b3,"-1":v3},link:y3,list:{bullet:k3,check:w3,ordered:S3},script:{sub:A3,super:T3},strike:E3,table:C3,underline:O3,video:x3},M3='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let ud=0;function fd(n,t){n.setAttribute(t,`${n.getAttribute(t)!=="true"}`)}class Ka{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),fd(this.label,"aria-expanded"),fd(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const s=t.getAttribute("value");return s&&e.setAttribute("data-value",s),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(e,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=M3,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${ud}`,ud+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{const s=this.buildItem(e);t.appendChild(s),e.selected===!0&&this.selectItem(s)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");t!==s&&(s!=null&&s.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class a0 extends Ka{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const s=this.label.querySelector(".ql-color-label"),i=t&&t.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=i:s.style.fill=i)}}class c0 extends Ka{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=e[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const s=t||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const L3=n=>{const{overflowY:t}=getComputedStyle(n,null);return t!=="visible"&&t!=="clip"};let u0=class{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,L3(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,s=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect();let l=0;if(r.right>i.right&&(l=i.right-r.right,this.root.style.left=`${e+l}px`),r.left<i.left&&(l=i.left-r.left,this.root.style.left=`${e+l}px`),r.bottom>i.bottom){const o=r.bottom-r.top,a=t.bottom-t.top+o;this.root.style.top=`${s-a}px`,this.root.classList.add("ql-flip")}return l}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}};const N3=[!1,"center","right","justify"],I3=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],D3=[!1,"serif","monospace"],R3=["1","2","3",!1],P3=["small",!1,"large","huge"];class fo extends nl{constructor(t,e){super(t,e);const s=i=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(r=>{r.container.contains(i.target)||r.close()})};t.emitter.listenDOM("click",document.body,s)}addModule(t){const e=super.addModule(t);return t==="toolbar"&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(r=>{if(r.startsWith("ql-")&&(r=r.slice(3),e[r]!=null))if(r==="direction")s.innerHTML=e[r][""]+e[r].rtl;else if(typeof e[r]=="string")s.innerHTML=e[r];else{const l=s.value||"";l!=null&&e[r][l]&&(s.innerHTML=e[r][l])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&pl(i,N3),typeof e.align=="object"))return new c0(i,e.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const r=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&pl(i,I3,r==="background"?"#ffffff":"#000000"),new a0(i,e[r])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?pl(i,D3):i.classList.contains("ql-header")?pl(i,R3):i.classList.contains("ql-size")&&pl(i,P3)),new Ka(i)});const s=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(Rt.events.EDITOR_CHANGE,s)}}fo.DEFAULTS=Ki({},nl.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class f0 extends u0{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,Rt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,Rt.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=B3(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(e!=null){const s=e.index+e.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),t,Rt.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",Rt.sources.USER),this.quill.setSelection(s+2,Rt.sources.USER)}break}}this.textbox.value="",this.hide()}}function B3(n){let t=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:n}function pl(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(s=>{const i=document.createElement("option");s===e?i.setAttribute("selected","selected"):i.setAttribute("value",String(s)),n.appendChild(i)})}const q3=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class h0 extends f0{constructor(t,e){super(t,e),this.quill.on(Rt.events.EDITOR_CHANGE,(s,i,r,l)=>{if(s===Rt.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&l===Rt.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const o=this.quill.getLines(i.index,i.length);if(o.length===1){const a=this.quill.getBounds(i);a!=null&&this.position(a)}else{const a=o[o.length-1],c=this.quill.getIndex(a),u=Math.min(a.length()-1,i.index+i.length-c),f=this.quill.getBounds(new kr(c,u));f!=null&&this.position(f)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Rt.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const e=this.quill.getBounds(t);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(t){const e=super.position(t),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",e!==0&&(s.style.marginLeft=`${-1*e-s.offsetWidth/2}px`),e}}X(h0,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class d0 extends fo{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=q3),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new h0(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Yl),this.buildPickers(t.container.querySelectorAll("select"),Yl))}}d0.DEFAULTS=Ki({},fo.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,ot.sources.USER)}}}}});const F3=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class p0 extends f0{constructor(){super(...arguments);X(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const s=this.linkRange;this.restoreFocus(),this.quill.formatText(s,"link",!1,Rt.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Rt.events.SELECTION_CHANGE,(e,s,i)=>{if(e!=null){if(e.length===0&&i===Rt.sources.USER){const[r,l]=this.quill.scroll.descendant(ji,e.index);if(r!=null){this.linkRange=new kr(e.index-l,r.length());const o=ji.formats(r.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const a=this.quill.getBounds(this.linkRange);a!=null&&this.position(a);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}X(p0,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class g0 extends fo{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=F3),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Yl),this.buildPickers(t.container.querySelectorAll("select"),Yl),this.tooltip=new p0(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,s)=>{t.handlers.link.call(t,!s.format.link)}))}}g0.DEFAULTS=Ki({},fo.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);const{tooltip:s}=this.quill.theme;s.edit("link",e)}else this.quill.format("link",!1,ot.sources.USER)}}}}});ot.register({"attributors/attribute/direction":Xb,"attributors/class/align":Vb,"attributors/class/background":nA,"attributors/class/color":eA,"attributors/class/direction":Gb,"attributors/class/font":Qb,"attributors/class/size":t0,"attributors/style/align":Kb,"attributors/style/background":af,"attributors/style/color":of,"attributors/style/direction":Zb,"attributors/style/font":$b,"attributors/style/size":e0},!0);ot.register({"formats/align":Vb,"formats/direction":Gb,"formats/indent":KA,"formats/background":af,"formats/color":of,"formats/font":Qb,"formats/size":t0,"formats/blockquote":pu,"formats/code-block":On,"formats/header":gu,"formats/list":uo,"formats/bold":Kl,"formats/code":cf,"formats/italic":mu,"formats/link":ji,"formats/script":_u,"formats/strike":bu,"formats/underline":vu,"formats/formula":Xo,"formats/image":YA,"formats/video":Go,"modules/syntax":o0,"modules/table":GA,"modules/toolbar":pf,"themes/bubble":d0,"themes/snow":g0,"ui/icons":Yl,"ui/picker":Ka,"ui/icon-picker":c0,"ui/color-picker":a0,"ui/tooltip":u0},!0);function j3(n){let t,e;return{c(){t=v("div"),e=v("div"),en(e,"height",n[0]),g(t,"class","rich-editor-wrapper svelte-86n3tg")},m(s,i){I(s,t,i),d(t,e),n[8](e),n[9](t)},p(s,[i]){i&1&&en(e,"height",s[0])},i:Et,o:Et,d(s){s&&N(t),n[8](null),n[9](null)}}}function z3(n,t,e){let{value:s=""}=t,{placeholder:i="..."}=t,{height:r="200px"}=t,l,o,a;es(()=>{e(7,o=new ot(l,{theme:"snow",placeholder:i,modules:{toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,!1]}],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["link","image"],["clean"]]}})),s&&e(7,o.root.innerHTML=s,o),o.on("text-change",()=>{e(3,s=o.root.innerHTML)}),o.getModule("toolbar").addHandler("image",c),o.root.addEventListener("paste",u)}),Ma(()=>{o&&o.root.removeEventListener("paste",u)});function c(){const b=document.createElement("input");b.setAttribute("type","file"),b.setAttribute("accept","image/*"),b.click(),b.onchange=async()=>{const y=b.files[0];y&&await f(y)}}async function u(b){const w=(b.clipboardData||window.clipboardData).items;for(let A of w)if(A.type.indexOf("image")!==-1){b.preventDefault();const E=A.getAsFile();await f(E);break}}async function f(b){var y,w;try{const A=new FormData;A.append("image",b),A.append("symbol","note");const E=await Gi.upload(A),T=Gi.getUrl(E.data.path),C=o.getSelection(!0);o.insertEmbed(C.index,"image",T),o.setSelection(C.index+1)}catch(A){console.error(":",A),alert(""+(((w=(y=A.response)==null?void 0:y.data)==null?void 0:w.error)||A.message))}}function p(){return o?o.root.innerHTML:s}function m(b){o&&(e(7,o.root.innerHTML=b,o),e(3,s=b))}function h(b){$s[b?"unshift":"push"](()=>{l=b,e(1,l)})}function _(b){$s[b?"unshift":"push"](()=>{a=b,e(2,a)})}return n.$$set=b=>{"value"in b&&e(3,s=b.value),"placeholder"in b&&e(4,i=b.placeholder),"height"in b&&e(0,r=b.height)},n.$$.update=()=>{if(n.$$.dirty&136&&o&&s!==o.root.innerHTML){const b=o.getSelection();e(7,o.root.innerHTML=s||"",o),b&&o.setSelection(b)}},[r,l,a,s,i,p,m,o,h,_]}class hd extends Fn{constructor(t){super(),qn(this,t,z3,j3,bn,{value:3,placeholder:4,height:0,getContent:5,setContent:6})}get getContent(){return this.$$.ctx[5]}get setContent(){return this.$$.ctx[6]}}function dd(n,t,e){const s=n.slice();return s[46]=t[e],s}function pd(n,t,e){const s=n.slice();return s[49]=t[e],s}function gd(n){let t,e,s;function i(){return n[27](n[49])}return{c(){t=v("button"),g(t,"class","color-btn svelte-v2jhf0"),en(t,"background-color",n[49]),en(t,"border-color",n[49]==="#ffffff"?"#ccc":n[49]),g(t,"title",n[49]),Ot(t,"active",n[2]===n[49])},m(r,l){I(r,t,l),e||(s=j(t,"click",i),e=!0)},p(r,l){n=r,l[0]&68&&Ot(t,"active",n[2]===n[49])},d(r){r&&N(t),e=!1,s()}}}function md(n){let t,e,s,i,r;function l(){return n[29](n[46])}return{c(){t=v("button"),e=v("span"),s=S(),g(e,"class","width-indicator svelte-v2jhf0"),en(e,"width",n[46]*2+"px"),en(e,"height",n[46]*2+"px"),en(e,"background",n[2]),g(t,"class","width-btn svelte-v2jhf0"),g(t,"title",n[46]+"px"),Ot(t,"active",n[3]===n[46])},m(o,a){I(o,t,a),d(t,e),d(t,s),i||(r=j(t,"click",l),i=!0)},p(o,a){n=o,a[0]&4&&en(e,"background",n[2]),a[0]&136&&Ot(t,"active",n[3]===n[46])},d(o){o&&N(t),i=!1,r()}}}function _d(n){let t,e,s,i,r,l,o,a,c;return{c(){t=v("div"),e=v("input"),s=S(),i=v("div"),r=v("button"),r.textContent=" ",l=S(),o=v("button"),o.textContent=" ",g(e,"type","text"),g(e,"placeholder","..."),g(e,"class","svelte-v2jhf0"),g(r,"class","text-btn confirm svelte-v2jhf0"),g(o,"class","text-btn cancel svelte-v2jhf0"),g(i,"class","text-dialog-buttons svelte-v2jhf0"),g(t,"class","text-input-dialog svelte-v2jhf0")},m(u,f){I(u,t,f),d(t,e),xt(e,n[4]),d(t,s),d(t,i),d(i,r),d(i,l),d(i,o),a||(c=[j(e,"input",n[30]),j(e,"keydown",n[31]),j(r,"click",n[17]),j(o,"click",n[18])],a=!0)},p(u,f){f[0]&16&&e.value!==u[4]&&xt(e,u[4])},d(u){u&&N(t),a=!1,Vt(c)}}}function H3(n){let t,e,s,i,r,l,o,a,c,u,f,p,m,h,_,b,y,w,A,E,T,C,M,x,D,L,q,F,nt,et,U,W,V,$,st,Z,wt=bt(n[6]),rt=[];for(let ct=0;ct<wt.length;ct+=1)rt[ct]=gd(pd(n,wt,ct));let at=bt(n[7]),vt=[];for(let ct=0;ct<at.length;ct+=1)vt[ct]=md(dd(n,at,ct));let K=n[5]&&_d(n);return{c(){t=v("div"),e=v("div"),s=v("div"),i=v("span"),i.textContent="",r=S(),l=v("div"),o=v("button"),o.textContent="",a=S(),c=v("button"),c.textContent="",u=S(),f=v("button"),f.textContent="",p=S(),m=v("div"),h=v("span"),h.textContent="",_=S(),b=v("div");for(let ct=0;ct<rt.length;ct+=1)rt[ct].c();y=S(),w=v("input"),A=S(),E=v("div"),T=v("span"),T.textContent="",C=S(),M=v("div");for(let ct=0;ct<vt.length;ct+=1)vt[ct].c();x=S(),D=v("div"),L=v("button"),L.textContent="",q=S(),F=v("button"),F.textContent="",nt=S(),et=v("button"),et.textContent="",U=S(),K&&K.c(),W=S(),V=v("div"),$=v("canvas"),g(i,"class","tool-label svelte-v2jhf0"),g(o,"class","tool-btn svelte-v2jhf0"),g(o,"title",""),Ot(o,"active",n[1]==="brush"),g(c,"class","tool-btn svelte-v2jhf0"),g(c,"title",""),Ot(c,"active",n[1]==="line"),g(f,"class","tool-btn svelte-v2jhf0"),g(f,"title",""),Ot(f,"active",n[1]==="text"),g(l,"class","tool-buttons svelte-v2jhf0"),g(s,"class","tool-group svelte-v2jhf0"),g(h,"class","tool-label svelte-v2jhf0"),g(w,"type","color"),g(w,"class","color-input svelte-v2jhf0"),g(w,"title",""),g(b,"class","color-picker svelte-v2jhf0"),g(m,"class","tool-group svelte-v2jhf0"),g(T,"class","tool-label svelte-v2jhf0"),g(M,"class","line-width-selector svelte-v2jhf0"),g(E,"class","tool-group svelte-v2jhf0"),g(L,"class","action-btn reset svelte-v2jhf0"),g(L,"title",""),g(F,"class","action-btn clear svelte-v2jhf0"),g(F,"title",""),g(et,"class","action-btn save svelte-v2jhf0"),g(et,"title",""),g(D,"class","tool-group actions svelte-v2jhf0"),g(e,"class","annotator-toolbar svelte-v2jhf0"),g($,"class","svelte-v2jhf0"),g(V,"class","canvas-wrapper svelte-v2jhf0"),g(t,"class","annotator-container svelte-v2jhf0")},m(ct,ft){I(ct,t,ft),d(t,e),d(e,s),d(s,i),d(s,r),d(s,l),d(l,o),d(l,a),d(l,c),d(l,u),d(l,f),d(e,p),d(e,m),d(m,h),d(m,_),d(m,b);for(let ut=0;ut<rt.length;ut+=1)rt[ut]&&rt[ut].m(b,null);d(b,y),d(b,w),xt(w,n[2]),d(e,A),d(e,E),d(E,T),d(E,C),d(E,M);for(let ut=0;ut<vt.length;ut+=1)vt[ut]&&vt[ut].m(M,null);d(e,x),d(e,D),d(D,L),d(D,q),d(D,F),d(D,nt),d(D,et),d(t,U),K&&K.m(t,null),d(t,W),d(t,V),d(V,$),n[32]($),st||(Z=[j(o,"click",n[24]),j(c,"click",n[25]),j(f,"click",n[26]),j(w,"input",n[28]),j(L,"click",n[12]),j(F,"click",n[11]),j(et,"click",n[13]),j($,"mousedown",Ls(n[8])),j($,"mousemove",Ls(n[9])),j($,"mouseup",Ls(n[10])),j($,"mouseleave",Ls(n[10])),j($,"touchstart",Ls(n[33])),j($,"touchmove",Ls(n[34])),j($,"touchend",Ls(n[35]))],st=!0)},p(ct,ft){if(ft[0]&2&&Ot(o,"active",ct[1]==="brush"),ft[0]&2&&Ot(c,"active",ct[1]==="line"),ft[0]&2&&Ot(f,"active",ct[1]==="text"),ft[0]&16452){wt=bt(ct[6]);let ut;for(ut=0;ut<wt.length;ut+=1){const Nt=pd(ct,wt,ut);rt[ut]?rt[ut].p(Nt,ft):(rt[ut]=gd(Nt),rt[ut].c(),rt[ut].m(b,y))}for(;ut<rt.length;ut+=1)rt[ut].d(1);rt.length=wt.length}if(ft[0]&4&&xt(w,ct[2]),ft[0]&65676){at=bt(ct[7]);let ut;for(ut=0;ut<at.length;ut+=1){const Nt=dd(ct,at,ut);vt[ut]?vt[ut].p(Nt,ft):(vt[ut]=md(Nt),vt[ut].c(),vt[ut].m(M,null))}for(;ut<vt.length;ut+=1)vt[ut].d(1);vt.length=at.length}ct[5]?K?K.p(ct,ft):(K=_d(ct),K.c(),K.m(t,W)):K&&(K.d(1),K=null)},i:Et,o:Et,d(ct){ct&&N(t),Gt(rt,ct),Gt(vt,ct),K&&K.d(),n[32](null),st=!1,Vt(Z)}}}function U3(n,t,e){let{imageSrc:s=""}=t,{originalImageSrc:i=""}=t,{onSave:r=null}=t,l,o,a,c=!1,u=0,f=0,p=0,m=0,h=null,_=null,b="brush",y="#ff0000",w=3,A="",E=null;const T=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#000000","#ffffff","#ffa500"],C=[1,2,3];es(()=>{l&&(e(22,o=l.getContext("2d")),s&&M())});function M(){!s||!o||!l||(a=new Image,a.crossOrigin="anonymous",a.onload=()=>{e(0,l.width=a.width,l),e(0,l.height=a.height,l),o.drawImage(a,0,0),_=o.getImageData(0,0,l.width,l.height),h=o.getImageData(0,0,l.width,l.height)},a.onerror=()=>{console.error(":",s)},a.src=s)}let x="";function D(Y){if(!l||!o)return;if(b==="text"){const ht=l.getBoundingClientRect(),St=l.width/ht.width,Ct=l.height/ht.height;e(5,E={x:(Y.clientX-ht.left)*St,y:(Y.clientY-ht.top)*Ct});return}c=!0;const dt=l.getBoundingClientRect(),Ut=l.width/dt.width,$t=l.height/dt.height;u=(Y.clientX-dt.left)*Ut,f=(Y.clientY-dt.top)*$t,p=u,m=f,b==="line"&&(h=o.getImageData(0,0,l.width,l.height)),b==="brush"&&(e(22,o.strokeStyle=y,o),e(22,o.fillStyle=y,o),e(22,o.lineWidth=w,o),e(22,o.lineCap="round",o),o.beginPath(),o.arc(u,f,w/2,0,Math.PI*2),o.fill())}function L(Y){if(!c||!o||!l)return;Y.preventDefault();const dt=l.getBoundingClientRect(),Ut=l.width/dt.width,$t=l.height/dt.height,ht=(Y.clientX-dt.left)*Ut,St=(Y.clientY-dt.top)*$t;e(22,o.strokeStyle=y,o),e(22,o.lineWidth=w,o),e(22,o.lineCap="round",o),e(22,o.lineJoin="round",o),b==="brush"?(o.beginPath(),o.moveTo(u,f),o.lineTo(ht,St),o.stroke(),u=ht,f=St):b==="line"&&(u=ht,f=St,h?o.putImageData(h,0,0):a&&(o.clearRect(0,0,l.width,l.height),o.drawImage(a,0,0)),e(22,o.strokeStyle=y,o),e(22,o.lineWidth=w,o),e(22,o.lineCap="round",o),e(22,o.lineJoin="round",o),o.beginPath(),o.moveTo(p,m),o.lineTo(ht,St),o.stroke())}function q(Y){if(!c||!o||!l){c=!1;return}if(b==="line"){const dt=l.getBoundingClientRect(),Ut=l.width/dt.width,$t=l.height/dt.height;let ht,St;Y&&Y.clientX!==void 0&&Y.clientY!==void 0?(ht=(Y.clientX-dt.left)*Ut,St=(Y.clientY-dt.top)*$t):(ht=u,St=f),h?o.putImageData(h,0,0):a&&(o.clearRect(0,0,l.width,l.height),o.drawImage(a,0,0)),e(22,o.strokeStyle=y,o),e(22,o.lineWidth=w,o),e(22,o.lineCap="round",o),e(22,o.lineJoin="round",o),o.beginPath(),o.moveTo(p,m),o.lineTo(ht,St),o.stroke(),h=o.getImageData(0,0,l.width,l.height)}else b==="brush"&&(h=o.getImageData(0,0,l.width,l.height));c=!1}function F(){!o||!l||!_||(o.putImageData(_,0,0),h=o.getImageData(0,0,l.width,l.height))}function nt(){if(!(!o||!l))if(i&&i!==s){const Y=new Image;Y.onload=()=>{e(0,l.width=Y.width,l),e(0,l.height=Y.height,l),o.clearRect(0,0,l.width,l.height),o.drawImage(Y,0,0),_=o.getImageData(0,0,l.width,l.height),h=o.getImageData(0,0,l.width,l.height)},Y.src=i}else _&&(o.putImageData(_,0,0),h=o.getImageData(0,0,l.width,l.height))}function et(){if(!l)return;const Y=l.toDataURL("image/png");r&&r(Y)}function U(Y){e(2,y=Y)}function W(Y){e(1,b=Y)}function V(Y){e(3,w=Y)}function $(){!o||!l||!E||!A.trim()||(e(22,o.fillStyle=y,o),e(22,o.font=`${w*8}px Arial`,o),e(22,o.textBaseline="top",o),o.fillText(A,E.x,E.y),h=o.getImageData(0,0,l.width,l.height),e(4,A=""),e(5,E=null))}function st(){e(4,A=""),e(5,E=null)}const Z=()=>W("brush"),wt=()=>W("line"),rt=()=>W("text"),at=Y=>U(Y);function vt(){y=this.value,e(2,y)}const K=Y=>V(Y);function ct(){A=this.value,e(4,A)}const ft=Y=>{Y.key==="Enter"&&$(),Y.key==="Escape"&&st()};function ut(Y){$s[Y?"unshift":"push"](()=>{l=Y,e(0,l)})}const Nt=Y=>{const dt=Y.touches[0];l.getBoundingClientRect();const Ut={clientX:dt.clientX,clientY:dt.clientY};D(Ut)},yt=Y=>{const dt=Y.touches[0],Ut={clientX:dt.clientX,clientY:dt.clientY,preventDefault:()=>{}};L(Ut)},z=Y=>{q()};return n.$$set=Y=>{"imageSrc"in Y&&e(19,s=Y.imageSrc),"originalImageSrc"in Y&&e(20,i=Y.originalImageSrc),"onSave"in Y&&e(21,r=Y.onSave)},n.$$.update=()=>{n.$$.dirty[0]&13107201&&s&&l&&s!==x&&(e(23,x=s),o||e(22,o=l.getContext("2d")),M())},[l,b,y,w,A,E,T,C,D,L,q,F,nt,et,U,W,V,$,st,s,i,r,o,x,Z,wt,rt,at,vt,K,ct,ft,ut,Nt,yt,z]}class m0 extends Fn{constructor(t){super(),qn(this,t,U3,H3,bn,{imageSrc:19,originalImageSrc:20,onSave:21},null,[-1,-1])}}function bd(n,t,e){const s=n.slice();return s[125]=t[e],s}function vd(n,t,e){const s=n.slice();return s[128]=t[e],s[129]=t,s[130]=e,s}function yd(n,t,e){const s=n.slice();s[131]=t[e];const i=s[1].entry_pattern.some(function(...l){return n[102](s[131],...l)});return s[132]=i,s}function kd(n,t,e){const s=n.slice();s[135]=t[e];const i=s[28](s[135]);s[132]=i;const r=s[39](s[135]);return s[136]=r,s}function wd(n,t,e){const s=n.slice();return s[139]=t[e],s}function Sd(n,t,e){const s=n.slice();return s[139]=t[e],s}function Ad(n,t,e){const s=n.slice();return s[139]=t[e],s}function Td(n,t,e){const s=n.slice();return s[146]=t[e],s}function Ed(n,t,e){const s=n.slice();s[135]=t[e];const i=s[28](s[135]);s[132]=i;const r=s[39](s[135]);return s[136]=r,s}function Cd(n,t,e){const s=n.slice();return s[139]=t[e],s}function Od(n,t,e){const s=n.slice();return s[154]=t[e],s}function xd(n,t,e){var o,a,c,u,f,p;const s=n.slice();s[139]=t[e];const i=(a=(o=s[153].asian)==null?void 0:o.trends)==null?void 0:a[s[139]];s[157]=i;const r=(u=(c=s[153].european)==null?void 0:c.trends)==null?void 0:u[s[139]];s[158]=r;const l=(p=(f=s[153].us)==null?void 0:f.trends)==null?void 0:p[s[139]];return s[159]=l,s}function kc(n){const t=n.slice(),e=JSON.parse(t[14].trend_analysis||"{}");return t[153]=e,t}function Md(n,t,e){const s=n.slice();return s[162]=t[e],s[164]=e,s}function Ld(n,t,e){const s=n.slice();return s[165]=t[e],s}function W3(n){let t=n[0]?"":"",e,s;return{c(){e=P(t),s=P("")},m(i,r){I(i,e,r),I(i,s,r)},p(i,r){r[0]&1&&t!==(t=i[0]?"":"")&&G(e,t)},d(i){i&&(N(e),N(s))}}}function V3(n){let t;return{c(){t=P("...")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function Nd(n){let t,e=n[165]+"",s;return{c(){t=v("option"),s=P(e),t.__value=n[165],xt(t,t.__value)},m(i,r){I(i,t,r),d(t,s)},p:Et,d(i){i&&N(t)}}}function Id(n){let t,e,s;function i(o,a){return o[8]?Y3:K3}let r=i(n),l=r(n);return{c(){t=v("div"),e=v("label"),e.textContent="",s=S(),l.c(),g(e,"for","lot_size"),g(e,"class","svelte-1om8at4"),g(t,"class","form-group")},m(o,a){I(o,t,a),d(t,e),d(t,s),l.m(t,null)},p(o,a){r===(r=i(o))&&l?l.p(o,a):(l.d(1),l=r(o),l&&(l.c(),l.m(t,null)))},d(o){o&&N(t),l.d()}}}function K3(n){let t,e,s;return{c(){t=v("input"),g(t,"type","number"),g(t,"step","0.01"),g(t,"id","lot_size"),g(t,"class","form-control"),t.required=!0},m(i,r){I(i,t,r),xt(t,n[1].lot_size),e||(s=j(t,"input",n[58]),e=!0)},p(i,r){r[0]&524290&&Ue(t.value)!==i[1].lot_size&&xt(t,i[1].lot_size)},d(i){i&&N(t),e=!1,s()}}}function Y3(n){let t,e,s=n[16].toFixed(2)+"",i,r,l=n[2].length+"",o,a;return{c(){t=v("div"),e=P(" "),i=P(s),r=P("  ("),o=P(l),a=P(" )"),g(t,"class","readonly-value-badge svelte-1om8at4")},m(c,u){I(c,t,u),d(t,e),d(t,i),d(t,r),d(t,o),d(t,a)},p(c,u){u[0]&65536&&s!==(s=c[16].toFixed(2)+"")&&G(i,s),u[0]&4&&l!==(l=c[2].length+"")&&G(o,l)},d(c){c&&N(t)}}}function X3(n){let t,e,s,i,r,l,o,a,c,u,f,p,m,h,_,b=n[15]>=0?"+":"",y,w=n[15].toFixed(2)+"",A,E,T,C,M,x,D,L,q,F,nt=bt(n[2]),et=[];for(let U=0;U<nt.length;U+=1)et[U]=Rd(Md(n,nt,U));return{c(){t=v("div"),e=v("div"),s=v("label"),s.textContent="",i=S(),r=v("input"),l=S(),o=v("div"),a=v("label"),a.textContent=" (SL)",c=S(),u=v("input"),f=S(),p=v("div"),m=v("label"),m.textContent="",h=S(),_=v("div"),y=P(b),A=P(w),E=P(" USD"),C=S(),M=v("div"),x=v("label"),x.textContent="  ()",D=S(),L=v("div");for(let U=0;U<et.length;U+=1)et[U].c();g(s,"for","entry_price"),g(s,"class","svelte-1om8at4"),g(r,"type","number"),g(r,"step","0.00001"),g(r,"id","entry_price"),g(r,"class","form-control"),r.required=!0,g(e,"class","form-group"),g(a,"for","initial_sl"),g(a,"class","svelte-1om8at4"),g(u,"type","number"),g(u,"step","0.00001"),g(u,"id","initial_sl"),g(u,"class","form-control"),g(o,"class","form-group"),g(m,"class","svelte-1om8at4"),g(_,"class",T="readonly-value-badge pnl "+(n[15]>=0?"profit":"loss")+" svelte-1om8at4"),g(p,"class","form-group"),g(t,"class","form-row svelte-1om8at4"),g(x,"class","section-subtitle svelte-1om8at4"),g(L,"class","timeline-container-mini svelte-1om8at4"),g(M,"class","execution-timeline-section svelte-1om8at4")},m(U,W){I(U,t,W),d(t,e),d(e,s),d(e,i),d(e,r),xt(r,n[1].entry_price),d(t,l),d(t,o),d(o,a),d(o,c),d(o,u),xt(u,n[1].initial_sl),d(t,f),d(t,p),d(p,m),d(p,h),d(p,_),d(_,y),d(_,A),d(_,E),I(U,C,W),I(U,M,W),d(M,x),d(M,D),d(M,L);for(let V=0;V<et.length;V+=1)et[V]&&et[V].m(L,null);q||(F=[j(r,"input",n[67]),j(u,"input",n[68])],q=!0)},p(U,W){if(W[0]&524290&&Ue(r.value)!==U[1].entry_price&&xt(r,U[1].entry_price),W[0]&524290&&Ue(u.value)!==U[1].initial_sl&&xt(u,U[1].initial_sl),W[0]&32768&&b!==(b=U[15]>=0?"+":"")&&G(y,b),W[0]&32768&&w!==(w=U[15].toFixed(2)+"")&&G(A,w),W[0]&32768&&T!==(T="readonly-value-badge pnl "+(U[15]>=0?"profit":"loss")+" svelte-1om8at4")&&g(_,"class",T),W[0]&4){nt=bt(U[2]);let V;for(V=0;V<nt.length;V+=1){const $=Md(U,nt,V);et[V]?et[V].p($,W):(et[V]=Rd($),et[V].c(),et[V].m(L,null))}for(;V<et.length;V+=1)et[V].d(1);et.length=nt.length}},d(U){U&&(N(t),N(C),N(M)),Gt(et,U),q=!1,Vt(F)}}}function G3(n){let t,e,s,i,r,l,o,a,c,u,f,p,m,h,_,b,y,w,A,E,T,C,M,x,D,L,q,F,nt,et,U,W,V,$,st,Z,wt,rt,at,vt,K,ct,ft,ut,Nt,yt=(!n[1].entry_price||!n[1].initial_sl)&&Pd();return{c(){t=v("div"),e=v("div"),s=v("label"),s.textContent="",i=S(),r=v("input"),l=S(),o=v("div"),a=v("label"),a.textContent=" (SL)",c=S(),u=v("input"),f=S(),p=v("div"),m=v("label"),m.textContent="",h=S(),_=v("input"),b=S(),y=v("div"),w=v("label"),w.textContent=" SL",A=S(),E=v("input"),T=S(),C=v("div"),M=v("div"),x=v("label"),x.textContent="",D=S(),L=v("input"),q=S(),F=v("div"),nt=v("label"),nt.textContent="",et=S(),U=v("input"),W=S(),V=v("div"),$=v("label"),$.textContent=" (Bullet)",st=S(),Z=v("input"),wt=S(),rt=v("div"),at=v("label"),at.textContent=" (R:R)",vt=S(),K=v("input"),ct=S(),yt&&yt.c(),ft=ie(),g(s,"for","entry_price"),g(s,"class","svelte-1om8at4"),g(r,"type","number"),g(r,"step","0.00001"),g(r,"id","entry_price"),g(r,"class","form-control"),r.required=!0,g(e,"class","form-group"),g(a,"for","initial_sl"),g(a,"class","svelte-1om8at4"),g(u,"type","number"),g(u,"step","0.00001"),g(u,"id","initial_sl"),g(u,"class","form-control"),g(u,"placeholder",""),g(o,"class","form-group"),g(m,"for","exit_price"),g(m,"class","svelte-1om8at4"),g(_,"type","number"),g(_,"step","0.00001"),g(_,"id","exit_price"),g(_,"class","form-control"),g(p,"class","form-group"),g(w,"for","exit_sl"),g(w,"class","svelte-1om8at4"),g(E,"type","number"),g(E,"step","0.00001"),g(E,"id","exit_sl"),g(E,"class","form-control"),g(E,"placeholder"," SL"),g(y,"class","form-group"),g(t,"class","form-row four-cols svelte-1om8at4"),g(x,"for","pnl"),g(x,"class","svelte-1om8at4"),g(L,"type","number"),g(L,"step","0.01"),g(L,"id","pnl"),g(L,"class","form-control"),g(M,"class","form-group"),g(nt,"for","pnl_points"),g(nt,"class","svelte-1om8at4"),g(U,"type","number"),g(U,"step","0.1"),g(U,"id","pnl_points"),g(U,"class","form-control readonly-calc svelte-1om8at4"),U.readOnly=!0,g(U,"placeholder",""),g(F,"class","form-group"),g($,"for","bullet_size"),g($,"class","svelte-1om8at4"),g(Z,"type","number"),g(Z,"id","bullet_size"),g(Z,"class","form-control readonly-calc svelte-1om8at4"),Z.readOnly=!0,g(Z,"placeholder",""),g(V,"class","form-group"),g(at,"for","rr_ratio"),g(at,"class","svelte-1om8at4"),g(K,"type","number"),g(K,"id","rr_ratio"),g(K,"class","form-control readonly-calc svelte-1om8at4"),K.readOnly=!0,g(K,"placeholder",""),g(rt,"class","form-group"),g(C,"class","form-row four-cols svelte-1om8at4")},m(z,Y){I(z,t,Y),d(t,e),d(e,s),d(e,i),d(e,r),xt(r,n[1].entry_price),d(t,l),d(t,o),d(o,a),d(o,c),d(o,u),xt(u,n[1].initial_sl),d(t,f),d(t,p),d(p,m),d(p,h),d(p,_),xt(_,n[1].exit_price),d(t,b),d(t,y),d(y,w),d(y,A),d(y,E),xt(E,n[1].exit_sl),I(z,T,Y),I(z,C,Y),d(C,M),d(M,x),d(M,D),d(M,L),xt(L,n[1].pnl),d(C,q),d(C,F),d(F,nt),d(F,et),d(F,U),xt(U,n[1].pnl_points),d(C,W),d(C,V),d(V,$),d(V,st),d(V,Z),xt(Z,n[1].bullet_size),d(C,wt),d(C,rt),d(rt,at),d(rt,vt),d(rt,K),xt(K,n[1].rr_ratio),I(z,ct,Y),yt&&yt.m(z,Y),I(z,ft,Y),ut||(Nt=[j(r,"input",n[59]),j(u,"input",n[60]),j(_,"input",n[61]),j(E,"input",n[62]),j(L,"input",n[63]),j(U,"input",n[64]),j(Z,"input",n[65]),j(K,"input",n[66])],ut=!0)},p(z,Y){Y[0]&524290&&Ue(r.value)!==z[1].entry_price&&xt(r,z[1].entry_price),Y[0]&524290&&Ue(u.value)!==z[1].initial_sl&&xt(u,z[1].initial_sl),Y[0]&524290&&Ue(_.value)!==z[1].exit_price&&xt(_,z[1].exit_price),Y[0]&524290&&Ue(E.value)!==z[1].exit_sl&&xt(E,z[1].exit_sl),Y[0]&524290&&Ue(L.value)!==z[1].pnl&&xt(L,z[1].pnl),Y[0]&524290&&Ue(U.value)!==z[1].pnl_points&&xt(U,z[1].pnl_points),Y[0]&524290&&Ue(Z.value)!==z[1].bullet_size&&xt(Z,z[1].bullet_size),Y[0]&524290&&Ue(K.value)!==z[1].rr_ratio&&xt(K,z[1].rr_ratio),!z[1].entry_price||!z[1].initial_sl?yt||(yt=Pd(),yt.c(),yt.m(ft.parentNode,ft)):yt&&(yt.d(1),yt=null)},d(z){z&&(N(t),N(T),N(C),N(ct),N(ft)),yt&&yt.d(z),ut=!1,Vt(Nt)}}}function Dd(n){let t,e,s=n[162].ticket+"",i;return{c(){t=v("span"),e=P("#"),i=P(s),g(t,"class","badge-mini ticket svelte-1om8at4")},m(r,l){I(r,t,l),d(t,e),d(t,i)},p(r,l){l[0]&4&&s!==(s=r[162].ticket+"")&&G(i,s)},d(r){r&&N(t)}}}function Rd(n){var W;let t,e,s,i=n[164]+1+"",r,l,o,a=new Date(n[162].exit_time).toLocaleString("zh-TW",{hour:"2-digit",minute:"2-digit"})+"",c,u,f,p,m,h=n[162].exit_price+"",_,b,y,w,A=n[162].lot_size+"",E,T,C,M,x=n[162].pnl>=0?"+":"",D,L=((W=n[162].pnl)==null?void 0:W.toFixed(2))+"",q,F,nt,et,U=n[162].ticket&&Dd(n);return{c(){t=v("div"),e=v("div"),s=P(" "),r=P(i),l=P(": "),o=v("strong"),c=P(a),u=S(),f=v("div"),p=v("span"),m=P(": "),_=P(h),b=S(),y=v("span"),w=P(": "),E=P(A),T=S(),C=v("span"),M=P(": "),D=P(x),q=P(L),nt=S(),U&&U.c(),et=S(),g(e,"class","item-time svelte-1om8at4"),g(p,"class","badge-mini svelte-1om8at4"),g(y,"class","badge-mini svelte-1om8at4"),g(C,"class",F="badge-mini pnl "+(n[162].pnl>=0?"profit":"loss")+" svelte-1om8at4"),g(f,"class","item-details svelte-1om8at4"),g(t,"class","timeline-item-mini svelte-1om8at4")},m(V,$){I(V,t,$),d(t,e),d(e,s),d(e,r),d(e,l),d(e,o),d(o,c),d(t,u),d(t,f),d(f,p),d(p,m),d(p,_),d(f,b),d(f,y),d(y,w),d(y,E),d(f,T),d(f,C),d(C,M),d(C,D),d(C,q),d(f,nt),U&&U.m(f,null),d(t,et)},p(V,$){var st;$[0]&4&&a!==(a=new Date(V[162].exit_time).toLocaleString("zh-TW",{hour:"2-digit",minute:"2-digit"})+"")&&G(c,a),$[0]&4&&h!==(h=V[162].exit_price+"")&&G(_,h),$[0]&4&&A!==(A=V[162].lot_size+"")&&G(E,A),$[0]&4&&x!==(x=V[162].pnl>=0?"+":"")&&G(D,x),$[0]&4&&L!==(L=((st=V[162].pnl)==null?void 0:st.toFixed(2))+"")&&G(q,L),$[0]&4&&F!==(F="badge-mini pnl "+(V[162].pnl>=0?"profit":"loss")+" svelte-1om8at4")&&g(C,"class",F),V[162].ticket?U?U.p(V,$):(U=Dd(V),U.c(),U.m(f,null)):U&&(U.d(1),U=null)},d(V){V&&N(t),U&&U.d()}}}function Pd(n){let t;return{c(){t=v("div"),t.innerHTML='<small class="form-hint svelte-1om8at4"> </small>',en(t,"margin-top","-0.5rem"),en(t,"margin-bottom","1rem")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function Bd(n){let t,e,s,i,r,l=n[23][n[1].market_session]+"",o,a,c,u,f=n[24](n[1].market_session)+"",p,m,h,_,b,y,w,A;function E(M,x){return M[14]?J3:Z3}let T=E(n),C=T(n);return{c(){t=v("div"),e=v("label"),e.textContent="",s=S(),i=v("div"),r=v("div"),o=P(l),a=S(),c=v("div"),u=v("span"),p=P(f),m=S(),h=v("span"),h.textContent="",_=S(),b=v("span"),b.textContent=`${n[25]()}`,y=S(),w=v("div"),C.c(),g(e,"class","svelte-1om8at4"),g(r,"class","session-badge-mini svelte-1om8at4"),g(u,"class","session-time-text svelte-1om8at4"),g(h,"class","session-dot svelte-1om8at4"),g(b,"class","session-season-text svelte-1om8at4"),g(c,"class","session-info-line svelte-1om8at4"),g(w,"class","plan-status-mini svelte-1om8at4"),g(i,"class",A="session-status-card "+n[1].market_session+" svelte-1om8at4"),g(t,"class","form-group")},m(M,x){I(M,t,x),d(t,e),d(t,s),d(t,i),d(i,r),d(r,o),d(i,a),d(i,c),d(c,u),d(u,p),d(c,m),d(c,h),d(c,_),d(c,b),d(i,y),d(i,w),C.m(w,null)},p(M,x){x[0]&2&&l!==(l=M[23][M[1].market_session]+"")&&G(o,l),x[0]&2&&f!==(f=M[24](M[1].market_session)+"")&&G(p,f),T===(T=E(M))&&C?C.p(M,x):(C.d(1),C=T(M),C&&(C.c(),C.m(w,null))),x[0]&524290&&A!==(A="session-status-card "+M[1].market_session+" svelte-1om8at4")&&g(i,"class",A)},d(M){M&&N(t),C.d()}}}function Z3(n){let t,e,s;return{c(){t=v("span"),t.innerHTML='<i class="icon svelte-1om8at4"></i> ',g(t,"class","status-no svelte-1om8at4")},m(i,r){I(i,t,r),e||(s=j(t,"click",n[71]),e=!0)},p:Et,d(i){i&&N(t),e=!1,s()}}}function J3(n){let t,e,s;return{c(){t=v("span"),t.innerHTML='<i class="icon svelte-1om8at4"></i> ',g(t,"class","status-yes svelte-1om8at4")},m(i,r){I(i,t,r),e||(s=j(t,"click",n[70]),e=!0)},p:Et,d(i){i&&N(t),e=!1,s()}}}function qd(n){let t,e,s,i,r,l,o=n[1].timezone_offset>=0?"+":"",a,c=n[1].timezone_offset+"",u,f,p,m,h,_;return{c(){t=v("div"),e=v("div"),s=v("label"),i=P(`\r
            `),r=v("span"),l=P("(UTC"),a=P(o),u=P(c),f=P(")"),p=S(),m=v("input"),g(r,"class","utc-label-info svelte-1om8at4"),g(s,"for","exit_time"),g(s,"class","svelte-1om8at4"),g(m,"type","datetime-local"),g(m,"id","exit_time"),g(m,"class","form-control"),g(e,"class","form-group"),g(t,"class","form-row svelte-1om8at4")},m(b,y){I(b,t,y),d(t,e),d(e,s),d(s,i),d(s,r),d(r,l),d(r,a),d(r,u),d(r,f),d(e,p),d(e,m),xt(m,n[1].exit_time),h||(_=j(m,"input",n[72]),h=!0)},p(b,y){y[0]&2&&o!==(o=b[1].timezone_offset>=0?"+":"")&&G(a,o),y[0]&2&&c!==(c=b[1].timezone_offset+"")&&G(u,c),y[0]&524290&&xt(m,b[1].exit_time)},d(b){b&&N(t),h=!1,_()}}}function Q3(n){let t,e,s;return{c(){t=v("button"),t.innerHTML='  <span class="add-link svelte-1om8at4"> </span>',g(t,"type","button"),g(t,"class","plan-status-badge missing svelte-1om8at4")},m(i,r){I(i,t,r),e||(s=j(t,"click",n[74]),e=!0)},p:Et,d(i){i&&N(t),e=!1,s()}}}function $3(n){let t,e,s;return{c(){t=v("button"),t.innerHTML='  <span class="view-link svelte-1om8at4"> </span>',g(t,"type","button"),g(t,"class","plan-status-badge linked svelte-1om8at4")},m(i,r){I(i,t,r),e||(s=j(t,"click",n[73]),e=!0)},p:Et,d(i){i&&N(t),e=!1,s()}}}function Fd(n){let t,e,s=n[14].notes&&n[14].notes!=="Session-based unified plan"&&jd(n),i=n[14].market_session==="all"&&zd(kc(n));return{c(){t=v("div"),s&&s.c(),e=S(),i&&i.c(),g(t,"class","plan-details-summary svelte-1om8at4")},m(r,l){I(r,t,l),s&&s.m(t,null),d(t,e),i&&i.m(t,null)},p(r,l){r[14].notes&&r[14].notes!=="Session-based unified plan"?s?s.p(r,l):(s=jd(r),s.c(),s.m(t,e)):s&&(s.d(1),s=null),r[14].market_session==="all"?i?i.p(kc(r),l):(i=zd(kc(r)),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(r){r&&N(t),s&&s.d(),i&&i.d()}}}function jd(n){let t,e=n[14].notes+"",s;return{c(){t=v("div"),s=P(e),g(t,"class","plan-general-notes svelte-1om8at4")},m(i,r){I(i,t,r),d(t,s)},p(i,r){r[0]&16384&&e!==(e=i[14].notes+"")&&G(s,e)},d(i){i&&N(t)}}}function zd(n){var o,a,c;let t,e,s,i=bt(["M5","M15","M30","H1","H4","D1"]),r=[];for(let u=0;u<6;u+=1)r[u]=Xd(xd(n,i,u));let l=(((o=n[153].asian)==null?void 0:o.notes)||((a=n[153].european)==null?void 0:a.notes)||((c=n[153].us)==null?void 0:c.notes))&&Gd(n);return{c(){t=v("div");for(let u=0;u<6;u+=1)r[u].c();e=S(),l&&l.c(),s=ie(),g(t,"class","progression-view svelte-1om8at4")},m(u,f){I(u,t,f);for(let p=0;p<6;p+=1)r[p]&&r[p].m(t,null);I(u,e,f),l&&l.m(u,f),I(u,s,f)},p(u,f){var p,m,h;if(f[0]&16384){i=bt(["M5","M15","M30","H1","H4","D1"]);let _;for(_=0;_<6;_+=1){const b=xd(u,i,_);r[_]?r[_].p(b,f):(r[_]=Xd(b),r[_].c(),r[_].m(t,null))}for(;_<6;_+=1)r[_].d(1)}(p=u[153].asian)!=null&&p.notes||(m=u[153].european)!=null&&m.notes||(h=u[153].us)!=null&&h.notes?l?l.p(u,f):(l=Gd(u),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(u){u&&(N(t),N(e),N(s)),Gt(r,u),l&&l.d(u)}}}function Hd(n){var f,p,m;let t,e,s,i,r,l,o,a=((f=n[157])==null?void 0:f.direction)&&Ud(n),c=((p=n[158])==null?void 0:p.direction)&&Wd(n),u=((m=n[159])==null?void 0:m.direction)&&Kd(n);return{c(){t=v("div"),e=v("span"),e.textContent=`${n[139]}:`,s=S(),i=v("div"),a&&a.c(),r=S(),c&&c.c(),l=S(),u&&u.c(),o=S(),g(e,"class","tf-name svelte-1om8at4"),g(i,"class","steps svelte-1om8at4"),g(t,"class","progression-row svelte-1om8at4")},m(h,_){I(h,t,_),d(t,e),d(t,s),d(t,i),a&&a.m(i,null),d(i,r),c&&c.m(i,null),d(i,l),u&&u.m(i,null),d(t,o)},p(h,_){var b,y,w;(b=h[157])!=null&&b.direction?a?a.p(h,_):(a=Ud(h),a.c(),a.m(i,r)):a&&(a.d(1),a=null),(y=h[158])!=null&&y.direction?c?c.p(h,_):(c=Wd(h),c.c(),c.m(i,l)):c&&(c.d(1),c=null),(w=h[159])!=null&&w.direction?u?u.p(h,_):(u=Kd(h),u.c(),u.m(i,null)):u&&(u.d(1),u=null)},d(h){h&&N(t),a&&a.d(),c&&c.d(),u&&u.d()}}}function Ud(n){let t,e,s=n[157].direction==="long"?"":"",i;return{c(){t=v("span"),e=P(" "),i=P(s),g(t,"class","step svelte-1om8at4"),Ot(t,"long",n[157].direction==="long"),Ot(t,"short",n[157].direction==="short")},m(r,l){I(r,t,l),d(t,e),d(t,i)},p(r,l){l[0]&16384&&s!==(s=r[157].direction==="long"?"":"")&&G(i,s),l[0]&16384&&Ot(t,"long",r[157].direction==="long"),l[0]&16384&&Ot(t,"short",r[157].direction==="short")},d(r){r&&N(t)}}}function Wd(n){var o;let t,e,s,i=n[158].direction==="long"?"":"",r,l=((o=n[157])==null?void 0:o.direction)&&Vd();return{c(){l&&l.c(),t=S(),e=v("span"),s=P(" "),r=P(i),g(e,"class","step svelte-1om8at4"),Ot(e,"long",n[158].direction==="long"),Ot(e,"short",n[158].direction==="short")},m(a,c){l&&l.m(a,c),I(a,t,c),I(a,e,c),d(e,s),d(e,r)},p(a,c){var u;(u=a[157])!=null&&u.direction?l||(l=Vd(),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),c[0]&16384&&i!==(i=a[158].direction==="long"?"":"")&&G(r,i),c[0]&16384&&Ot(e,"long",a[158].direction==="long"),c[0]&16384&&Ot(e,"short",a[158].direction==="short")},d(a){a&&(N(t),N(e)),l&&l.d(a)}}}function Vd(n){let t;return{c(){t=v("span"),t.textContent="=>",g(t,"class","arrow svelte-1om8at4")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function Kd(n){var o,a;let t,e,s,i=n[159].direction==="long"?"":"",r,l=(((o=n[157])==null?void 0:o.direction)||((a=n[158])==null?void 0:a.direction))&&Yd();return{c(){l&&l.c(),t=S(),e=v("span"),s=P(" "),r=P(i),g(e,"class","step svelte-1om8at4"),Ot(e,"long",n[159].direction==="long"),Ot(e,"short",n[159].direction==="short")},m(c,u){l&&l.m(c,u),I(c,t,u),I(c,e,u),d(e,s),d(e,r)},p(c,u){var f,p;(f=c[157])!=null&&f.direction||(p=c[158])!=null&&p.direction?l||(l=Yd(),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),u[0]&16384&&i!==(i=c[159].direction==="long"?"":"")&&G(r,i),u[0]&16384&&Ot(e,"long",c[159].direction==="long"),u[0]&16384&&Ot(e,"short",c[159].direction==="short")},d(c){c&&(N(t),N(e)),l&&l.d(c)}}}function Yd(n){let t;return{c(){t=v("span"),t.textContent="=>",g(t,"class","arrow svelte-1om8at4")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function Xd(n){var s,i,r;let t,e=(((s=n[157])==null?void 0:s.direction)||((i=n[158])==null?void 0:i.direction)||((r=n[159])==null?void 0:r.direction))&&Hd(n);return{c(){e&&e.c(),t=ie()},m(l,o){e&&e.m(l,o),I(l,t,o)},p(l,o){var a,c,u;(a=l[157])!=null&&a.direction||(c=l[158])!=null&&c.direction||(u=l[159])!=null&&u.direction?e?e.p(l,o):(e=Hd(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(l){l&&N(t),e&&e.d(l)}}}function Gd(n){let t,e=bt(["asian","european","us"]),s=[];for(let i=0;i<3;i+=1)s[i]=Jd(Od(n,e,i));return{c(){t=v("div");for(let i=0;i<3;i+=1)s[i].c();g(t,"class","plan-session-notes svelte-1om8at4")},m(i,r){I(i,t,r);for(let l=0;l<3;l+=1)s[l]&&s[l].m(t,null)},p(i,r){if(r[0]&8404992){e=bt(["asian","european","us"]);let l;for(l=0;l<3;l+=1){const o=Od(i,e,l);s[l]?s[l].p(o,r):(s[l]=Jd(o),s[l].c(),s[l].m(t,null))}for(;l<3;l+=1)s[l].d(1)}},d(i){i&&N(t),Gt(s,i)}}}function Zd(n){let t,e,s,i,r=n[153][n[154]].notes+"",l,o;return{c(){t=v("div"),e=v("span"),e.textContent=`${n[23][n[154]]}`,s=S(),i=v("span"),l=P(r),o=S(),g(e,"class","session-tag "+n[154]+" svelte-1om8at4"),g(i,"class","note-text svelte-1om8at4"),g(t,"class","plan-note-item svelte-1om8at4")},m(a,c){I(a,t,c),d(t,e),d(t,s),d(t,i),d(i,l),d(t,o)},p(a,c){c[0]&16384&&r!==(r=a[153][a[154]].notes+"")&&G(l,r)},d(a){a&&N(t)}}}function Jd(n){var s;let t,e=((s=n[153][n[154]])==null?void 0:s.notes)&&Zd(n);return{c(){e&&e.c(),t=ie()},m(i,r){e&&e.m(i,r),I(i,t,r)},p(i,r){var l;(l=i[153][i[154]])!=null&&l.notes?e?e.p(i,r):(e=Zd(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(i){i&&N(t),e&&e.d(i)}}}function Qd(n){let t,e=n[139].label+"",s,i,r,l;function o(){return n[78](n[139])}return{c(){t=v("button"),s=P(e),i=S(),g(t,"type","button"),g(t,"class","timeframe-btn svelte-1om8at4"),Ot(t,"active",n[1].entry_timeframe===n[139].value)},m(a,c){I(a,t,c),d(t,s),d(t,i),r||(l=j(t,"click",o),r=!0)},p(a,c){n=a,c[0]&131072&&e!==(e=n[139].label+"")&&G(s,e),c[0]&131074&&Ot(t,"active",n[1].entry_timeframe===n[139].value)},d(a){a&&N(t),r=!1,l()}}}function $d(n){let t,e,s,i,r=bt(n[18]),l=[];for(let o=0;o<r.length;o+=1)l[o]=ep(Ed(n,r,o));return{c(){t=v("div"),e=v("label"),e.textContent="",s=S(),i=v("div");for(let o=0;o<l.length;o+=1)l[o].c();g(e,"class","signals-label svelte-1om8at4"),g(i,"class","signals-card-grid svelte-1om8at4"),g(t,"class","signals-section svelte-1om8at4")},m(o,a){I(o,t,a),d(t,e),d(t,s),d(t,i);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(i,null)},p(o,a){if(a[0]&805568512|a[1]&771){r=bt(o[18]);let c;for(c=0;c<r.length;c+=1){const u=Ed(o,r,c);l[c]?l[c].p(u,a):(l[c]=ep(u),l[c].c(),l[c].m(i,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=r.length}},d(o){o&&N(t),Gt(l,o)}}}function tp(n){let t;function e(r,l){return r[136]?eT:tT}let s=e(n),i=s(n);return{c(){i.c(),t=ie()},m(r,l){i.m(r,l),I(r,t,l)},p(r,l){s===(s=e(r))&&i?i.p(r,l):(i.d(1),i=s(r),i&&(i.c(),i.m(t.parentNode,t)))},d(r){r&&N(t),i.d(r)}}}function tT(n){let t;return{c(){t=v("div"),t.innerHTML='<span class="placeholder-text svelte-1om8at4"> Ctrl+V </span>',g(t,"class","signal-image-placeholder svelte-1om8at4")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function eT(n){let t,e,s,i,r,l,o,a;function c(...f){return n[80](n[135],...f)}function u(...f){return n[81](n[136],n[135],...f)}return{c(){t=v("div"),e=v("img"),r=S(),l=v("button"),l.textContent="",ae(e.src,s=n[136])||g(e,"src",s),g(e,"alt",i=n[135]+" "),en(e,"cursor","zoom-in"),en(e,"pointer-events","none"),g(e,"class","svelte-1om8at4"),g(l,"type","button"),g(l,"class","remove-signal-image svelte-1om8at4"),g(l,"title",""),g(t,"class","signal-image-preview svelte-1om8at4")},m(f,p){I(f,t,p),d(t,e),d(t,r),d(t,l),o||(a=[j(l,"click",c),j(t,"click",u)],o=!0)},p(f,p){n=f,p[0]&262144&&!ae(e.src,s=n[136])&&g(e,"src",s),p[0]&262144&&i!==(i=n[135]+" ")&&g(e,"alt",i)},d(f){f&&N(t),o=!1,Vt(a)}}}function ep(n){let t,e,s,i,r,l,o=n[135]+"",a,c,u,f,p;function m(){return n[79](n[135])}let h=n[132]&&tp(n);function _(...y){return n[82](n[135],...y)}function b(...y){return n[83](n[135],...y)}return{c(){t=v("div"),e=v("label"),s=v("input"),r=S(),l=v("span"),a=P(o),c=S(),h&&h.c(),u=S(),g(s,"type","checkbox"),g(s,"class","signal-checkbox svelte-1om8at4"),s.checked=i=n[132],g(l,"class","signal-name svelte-1om8at4"),g(e,"class","signal-checkbox-wrapper svelte-1om8at4"),g(t,"class","signal-card svelte-1om8at4"),g(t,"tabindex","0"),Ot(t,"selected",n[132])},m(y,w){I(y,t,w),d(t,e),d(e,s),d(e,r),d(e,l),d(l,a),d(t,c),h&&h.m(t,null),d(t,u),f||(p=[j(s,"change",m),j(s,"click",he(n[51])),j(t,"paste",_),j(t,"click",b)],f=!0)},p(y,w){n=y,w[0]&262144&&i!==(i=n[132])&&(s.checked=i),w[0]&262144&&o!==(o=n[135]+"")&&G(a,o),n[132]?h?h.p(n,w):(h=tp(n),h.c(),h.m(t,u)):h&&(h.d(1),h=null),w[0]&268697600&&Ot(t,"selected",n[132])},d(y){y&&N(t),h&&h.d(),f=!1,Vt(p)}}}function np(n){let t,e,s=n[1].entry_strategy==="elite"?"":"",i,r,l,o,a,c,u,f,p=bt(n[1].entry_strategy==="elite"?n[20]:n[21]),m=[];for(let y=0;y<p.length;y+=1)m[y]=sp(Td(n,p,y));let h=n[1].entry_strategy==="legend"&&n[1].entry_checklist.item_618_786&&ip(n),_=n[1].entry_strategy==="legend"&&n[1].entry_checklist.item_che&&lp(n),b=n[1].entry_strategy==="legend"&&n[1].entry_checklist.item_de&&ap(n);return{c(){t=v("div"),e=v("label"),i=P(s),r=P(""),l=S(),o=v("div");for(let y=0;y<m.length;y+=1)m[y].c();a=S(),h&&h.c(),c=S(),_&&_.c(),u=S(),b&&b.c(),f=ie(),g(e,"class","checklist-label svelte-1om8at4"),g(o,"class","checklist-items svelte-1om8at4"),g(t,"class","checklist-section svelte-1om8at4")},m(y,w){I(y,t,w),d(t,e),d(e,i),d(e,r),d(t,l),d(t,o);for(let A=0;A<m.length;A+=1)m[A]&&m[A].m(o,null);I(y,a,w),h&&h.m(y,w),I(y,c,w),_&&_.m(y,w),I(y,u,w),b&&b.m(y,w),I(y,f,w)},p(y,w){if(w[0]&2&&s!==(s=y[1].entry_strategy==="elite"?"":"")&&G(i,s),w[0]&3145730){p=bt(y[1].entry_strategy==="elite"?y[20]:y[21]);let A;for(A=0;A<p.length;A+=1){const E=Td(y,p,A);m[A]?m[A].p(E,w):(m[A]=sp(E),m[A].c(),m[A].m(o,null))}for(;A<m.length;A+=1)m[A].d(1);m.length=p.length}y[1].entry_strategy==="legend"&&y[1].entry_checklist.item_618_786?h?h.p(y,w):(h=ip(y),h.c(),h.m(c.parentNode,c)):h&&(h.d(1),h=null),y[1].entry_strategy==="legend"&&y[1].entry_checklist.item_che?_?_.p(y,w):(_=lp(y),_.c(),_.m(u.parentNode,u)):_&&(_.d(1),_=null),y[1].entry_strategy==="legend"&&y[1].entry_checklist.item_de?b?b.p(y,w):(b=ap(y),b.c(),b.m(f.parentNode,f)):b&&(b.d(1),b=null)},d(y){y&&(N(t),N(a),N(c),N(u),N(f)),Gt(m,y),h&&h.d(y),_&&_.d(y),b&&b.d(y)}}}function sp(n){let t,e,s,i,r,l=n[146].label+"",o,a,c,u;function f(...p){return n[84](n[146],...p)}return{c(){t=v("label"),e=v("input"),i=S(),r=v("span"),o=P(l),a=S(),g(e,"type","checkbox"),e.checked=s=n[1].entry_checklist[n[146].id]||!1,g(e,"class","svelte-1om8at4"),g(r,"class","checkbox-label svelte-1om8at4"),g(t,"class","checkbox-item svelte-1om8at4")},m(p,m){I(p,t,m),d(t,e),d(t,i),d(t,r),d(r,o),d(t,a),c||(u=j(e,"change",f),c=!0)},p(p,m){n=p,m[0]&524290&&s!==(s=n[1].entry_checklist[n[146].id]||!1)&&(e.checked=s),m[0]&2&&l!==(l=n[146].label+"")&&G(o,l)},d(p){p&&N(t),c=!1,u()}}}function ip(n){let t,e,s,i,r,l,o,a,c,u=bt([{label:"1",value:"M1"},{label:"5",value:"M5"},{label:"15",value:"M15"},{label:"30",value:"M30"},{label:"1",value:"H1"},{label:"4",value:"H4"},{label:"",value:"D1"}]),f=[];for(let _=0;_<7;_+=1)f[_]=rp(Ad(n,u,_));function p(_,b){return _[1].legend_king_image?sT:nT}let m=p(n),h=m(n);return{c(){t=v("div"),e=v("label"),e.textContent="618786 - ",s=S(),i=v("div"),r=v("div");for(let _=0;_<7;_+=1)f[_].c();l=S(),o=v("div"),h.c(),g(e,"class","signals-label svelte-1om8at4"),g(r,"class","timeframe-options svelte-1om8at4"),g(i,"class","htf-selector-row svelte-1om8at4"),g(o,"class","signal-card htf-image-card svelte-1om8at4"),g(o,"tabindex","0"),g(t,"class","signals-section nested king-section svelte-1om8at4")},m(_,b){I(_,t,b),d(t,e),d(t,s),d(t,i),d(i,r);for(let y=0;y<7;y+=1)f[y]&&f[y].m(r,null);d(t,l),d(t,o),h.m(o,null),a||(c=[j(o,"paste",n[37]),j(o,"click",n[87])],a=!0)},p(_,b){if(b[0]&2){u=bt([{label:"1",value:"M1"},{label:"5",value:"M5"},{label:"15",value:"M15"},{label:"30",value:"M30"},{label:"1",value:"H1"},{label:"4",value:"H4"},{label:"",value:"D1"}]);let y;for(y=0;y<7;y+=1){const w=Ad(_,u,y);f[y]?f[y].p(w,b):(f[y]=rp(w),f[y].c(),f[y].m(r,null))}for(;y<7;y+=1)f[y].d(1)}m===(m=p(_))&&h?h.p(_,b):(h.d(1),h=m(_),h&&(h.c(),h.m(o,null)))},d(_){_&&N(t),Gt(f,_),h.d(),a=!1,Vt(c)}}}function rp(n){let t,e,s;function i(){return n[85](n[139])}return{c(){t=v("button"),t.textContent=`${n[139].label} `,g(t,"type","button"),g(t,"class","timeframe-btn svelte-1om8at4"),Ot(t,"active",n[1].legend_king_htf===n[139].value)},m(r,l){I(r,t,l),e||(s=j(t,"click",i),e=!0)},p(r,l){n=r,l[0]&2&&Ot(t,"active",n[1].legend_king_htf===n[139].value)},d(r){r&&N(t),e=!1,s()}}}function nT(n){let t;return{c(){t=v("div"),t.innerHTML='<span class="placeholder-text svelte-1om8at4"> Ctrl+V </span>',g(t,"class","signal-image-placeholder svelte-1om8at4")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function sT(n){let t,e,s,i,r,l,o;return{c(){t=v("div"),e=v("img"),i=S(),r=v("button"),r.textContent="",ae(e.src,s=n[1].legend_king_image)||g(e,"src",s),g(e,"alt",""),g(e,"class","svelte-1om8at4"),g(r,"type","button"),g(r,"class","remove-signal-image svelte-1om8at4"),g(t,"class","signal-image-preview svelte-1om8at4")},m(a,c){I(a,t,c),d(t,e),d(t,i),d(t,r),l||(o=j(r,"click",n[86]),l=!0)},p(a,c){c[0]&524290&&!ae(e.src,s=a[1].legend_king_image)&&g(e,"src",s)},d(a){a&&N(t),l=!1,o()}}}function lp(n){let t,e,s,i,r,l,o,a,c,u=bt([{label:"1",value:"M1"},{label:"5",value:"M5"},{label:"15",value:"M15"},{label:"30",value:"M30"},{label:"1",value:"H1"},{label:"4",value:"H4"},{label:"",value:"D1"}]),f=[];for(let _=0;_<7;_+=1)f[_]=op(Sd(n,u,_));function p(_,b){return _[1].legend_htf_image?rT:iT}let m=p(n),h=m(n);return{c(){t=v("div"),e=v("label"),e.textContent='"" - ',s=S(),i=v("div"),r=v("div");for(let _=0;_<7;_+=1)f[_].c();l=S(),o=v("div"),h.c(),g(e,"class","signals-label svelte-1om8at4"),g(r,"class","timeframe-options svelte-1om8at4"),g(i,"class","htf-selector-row svelte-1om8at4"),g(o,"class","signal-card htf-image-card svelte-1om8at4"),g(o,"tabindex","0"),g(t,"class","signals-section nested htf-section svelte-1om8at4")},m(_,b){I(_,t,b),d(t,e),d(t,s),d(t,i),d(i,r);for(let y=0;y<7;y+=1)f[y]&&f[y].m(r,null);d(t,l),d(t,o),h.m(o,null),a||(c=[j(o,"paste",n[35]),j(o,"click",n[90])],a=!0)},p(_,b){if(b[0]&2){u=bt([{label:"1",value:"M1"},{label:"5",value:"M5"},{label:"15",value:"M15"},{label:"30",value:"M30"},{label:"1",value:"H1"},{label:"4",value:"H4"},{label:"",value:"D1"}]);let y;for(y=0;y<7;y+=1){const w=Sd(_,u,y);f[y]?f[y].p(w,b):(f[y]=op(w),f[y].c(),f[y].m(r,null))}for(;y<7;y+=1)f[y].d(1)}m===(m=p(_))&&h?h.p(_,b):(h.d(1),h=m(_),h&&(h.c(),h.m(o,null)))},d(_){_&&N(t),Gt(f,_),h.d(),a=!1,Vt(c)}}}function op(n){let t,e,s;function i(){return n[88](n[139])}return{c(){t=v("button"),t.textContent=`${n[139].label} `,g(t,"type","button"),g(t,"class","timeframe-btn svelte-1om8at4"),Ot(t,"active",n[1].legend_htf===n[139].value)},m(r,l){I(r,t,l),e||(s=j(t,"click",i),e=!0)},p(r,l){n=r,l[0]&2&&Ot(t,"active",n[1].legend_htf===n[139].value)},d(r){r&&N(t),e=!1,s()}}}function iT(n){let t;return{c(){t=v("div"),t.innerHTML='<span class="placeholder-text svelte-1om8at4"> Ctrl+V </span>',g(t,"class","signal-image-placeholder svelte-1om8at4")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function rT(n){let t,e,s,i,r,l,o;return{c(){t=v("div"),e=v("img"),i=S(),r=v("button"),r.textContent="",ae(e.src,s=n[1].legend_htf_image)||g(e,"src",s),g(e,"alt",""),g(e,"class","svelte-1om8at4"),g(r,"type","button"),g(r,"class","remove-signal-image svelte-1om8at4"),g(t,"class","signal-image-preview svelte-1om8at4")},m(a,c){I(a,t,c),d(t,e),d(t,i),d(t,r),l||(o=j(r,"click",n[89]),l=!0)},p(a,c){c[0]&524290&&!ae(e.src,s=a[1].legend_htf_image)&&g(e,"src",s)},d(a){a&&N(t),l=!1,o()}}}function ap(n){let t,e,s,i,r,l,o,a=bt([{label:"1",value:"M1"},{label:"5",value:"M5"},{label:"15",value:"M15"},{label:"30",value:"M30"},{label:"1",value:"H1"},{label:"4",value:"H4"},{label:"",value:"D1"}]),c=[];for(let p=0;p<7;p+=1)c[p]=cp(wd(n,a,p));let u=bt(n[18]),f=[];for(let p=0;p<u.length;p+=1)f[p]=fp(kd(n,u,p));return{c(){t=v("div"),e=v("label"),e.textContent=" (ABC[D][E]):",s=S(),i=v("div"),r=v("div");for(let p=0;p<7;p+=1)c[p].c();l=S(),o=v("div");for(let p=0;p<f.length;p+=1)f[p].c();g(e,"class","signals-label svelte-1om8at4"),g(r,"class","timeframe-options svelte-1om8at4"),g(i,"class","htf-selector-row svelte-1om8at4"),en(i,"margin-bottom","1.5rem"),g(o,"class","signals-card-grid svelte-1om8at4"),g(t,"class","signals-section nested svelte-1om8at4")},m(p,m){I(p,t,m),d(t,e),d(t,s),d(t,i),d(i,r);for(let h=0;h<7;h+=1)c[h]&&c[h].m(r,null);d(t,l),d(t,o);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(o,null)},p(p,m){if(m[0]&2){a=bt([{label:"1",value:"M1"},{label:"5",value:"M5"},{label:"15",value:"M15"},{label:"30",value:"M30"},{label:"1",value:"H1"},{label:"4",value:"H4"},{label:"",value:"D1"}]);let h;for(h=0;h<7;h+=1){const _=wd(p,a,h);c[h]?c[h].p(_,m):(c[h]=cp(_),c[h].c(),c[h].m(r,null))}for(;h<7;h+=1)c[h].d(1)}if(m[0]&805568512|m[1]&771){u=bt(p[18]);let h;for(h=0;h<u.length;h+=1){const _=kd(p,u,h);f[h]?f[h].p(_,m):(f[h]=fp(_),f[h].c(),f[h].m(o,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=u.length}},d(p){p&&N(t),Gt(c,p),Gt(f,p)}}}function cp(n){let t,e,s;function i(){return n[91](n[139])}return{c(){t=v("button"),t.textContent=`${n[139].label} `,g(t,"type","button"),g(t,"class","timeframe-btn svelte-1om8at4"),Ot(t,"active",n[1].legend_de_htf===n[139].value)},m(r,l){I(r,t,l),e||(s=j(t,"click",i),e=!0)},p(r,l){n=r,l[0]&2&&Ot(t,"active",n[1].legend_de_htf===n[139].value)},d(r){r&&N(t),e=!1,s()}}}function up(n){let t;function e(r,l){return r[136]?oT:lT}let s=e(n),i=s(n);return{c(){i.c(),t=ie()},m(r,l){i.m(r,l),I(r,t,l)},p(r,l){s===(s=e(r))&&i?i.p(r,l):(i.d(1),i=s(r),i&&(i.c(),i.m(t.parentNode,t)))},d(r){r&&N(t),i.d(r)}}}function lT(n){let t;return{c(){t=v("div"),t.innerHTML='<span class="placeholder-text svelte-1om8at4"> Ctrl+V </span>',g(t,"class","signal-image-placeholder svelte-1om8at4")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function oT(n){let t,e,s,i,r,l,o,a;function c(...f){return n[93](n[135],...f)}function u(...f){return n[94](n[136],n[135],...f)}return{c(){t=v("div"),e=v("img"),r=S(),l=v("button"),l.textContent="",ae(e.src,s=n[136])||g(e,"src",s),g(e,"alt",i=n[135]+" "),en(e,"cursor","zoom-in"),en(e,"pointer-events","none"),g(e,"class","svelte-1om8at4"),g(l,"type","button"),g(l,"class","remove-signal-image svelte-1om8at4"),g(t,"class","signal-image-preview svelte-1om8at4")},m(f,p){I(f,t,p),d(t,e),d(t,r),d(t,l),o||(a=[j(l,"click",c),j(t,"click",u)],o=!0)},p(f,p){n=f,p[0]&262144&&!ae(e.src,s=n[136])&&g(e,"src",s),p[0]&262144&&i!==(i=n[135]+" ")&&g(e,"alt",i)},d(f){f&&N(t),o=!1,Vt(a)}}}function fp(n){let t,e,s,i,r,l,o=n[135]+"",a,c,u,f,p;function m(){return n[92](n[135])}let h=n[132]&&up(n);function _(...y){return n[95](n[135],...y)}function b(...y){return n[96](n[135],...y)}return{c(){t=v("div"),e=v("label"),s=v("input"),r=S(),l=v("span"),a=P(o),c=S(),h&&h.c(),u=S(),g(s,"type","checkbox"),g(s,"class","signal-checkbox svelte-1om8at4"),s.checked=i=n[132],g(l,"class","signal-name svelte-1om8at4"),g(e,"class","signal-checkbox-wrapper svelte-1om8at4"),g(t,"class","signal-card svelte-1om8at4"),g(t,"tabindex","0"),Ot(t,"selected",n[132])},m(y,w){I(y,t,w),d(t,e),d(e,s),d(e,r),d(e,l),d(l,a),d(t,c),h&&h.m(t,null),d(t,u),f||(p=[j(s,"change",m),j(s,"click",he(n[50])),j(t,"paste",_),j(t,"click",b)],f=!0)},p(y,w){n=y,w[0]&262144&&i!==(i=n[132])&&(s.checked=i),w[0]&262144&&o!==(o=n[135]+"")&&G(a,o),n[132]?h?h.p(n,w):(h=up(n),h.c(),h.m(t,u)):h&&(h.d(1),h=null),w[0]&268697600&&Ot(t,"selected",n[132])},d(y){y&&N(t),h&&h.d(),f=!1,Vt(p)}}}function hp(n){let t,e,s,i,r,l;function o(u,f){return u[1].entry_strategy_image?cT:aT}let a=o(n),c=a(n);return{c(){t=v("div"),e=v("label"),e.textContent=" (Ctrl+V )",s=S(),i=v("div"),c.c(),g(e,"class","signals-label svelte-1om8at4"),g(i,"class","signal-card legend-image-card svelte-1om8at4"),g(i,"tabindex","0"),g(i,"role","button"),g(t,"class","signals-section svelte-1om8at4")},m(u,f){I(u,t,f),d(t,e),d(t,s),d(t,i),c.m(i,null),r||(l=[j(i,"paste",n[33]),j(i,"click",n[98]),j(i,"keydown",n[99])],r=!0)},p(u,f){a===(a=o(u))&&c?c.p(u,f):(c.d(1),c=a(u),c&&(c.c(),c.m(i,null)))},d(u){u&&N(t),c.d(),r=!1,Vt(l)}}}function aT(n){let t;return{c(){t=v("div"),t.innerHTML='<span class="placeholder-text svelte-1om8at4"> Ctrl+V </span>',g(t,"class","signal-image-placeholder svelte-1om8at4")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function cT(n){let t,e,s,i,r,l,o;return{c(){t=v("div"),e=v("img"),i=S(),r=v("button"),r.textContent="",ae(e.src,s=n[1].entry_strategy_image)||g(e,"src",s),g(e,"alt",""),g(e,"class","svelte-1om8at4"),g(r,"type","button"),g(r,"class","remove-signal-image svelte-1om8at4"),g(t,"class","signal-image-preview svelte-1om8at4")},m(a,c){I(a,t,c),d(t,e),d(t,i),d(t,r),l||(o=j(r,"click",n[97]),l=!0)},p(a,c){c[0]&524290&&!ae(e.src,s=a[1].entry_strategy_image)&&g(e,"src",s)},d(a){a&&N(t),l=!1,o()}}}function dp(n){let t,e,s,i,r,l=bt(n[22]),o=[];for(let c=0;c<l.length;c+=1)o[c]=pp(yd(n,l,c));let a=n[1].entry_pattern.length>0&&gp(n);return{c(){t=v("div"),e=v("span"),e.textContent="",s=S(),i=v("div");for(let c=0;c<o.length;c+=1)o[c].c();r=S(),a&&a.c(),g(e,"class","entry-pattern-label svelte-1om8at4"),g(i,"class","entry-pattern-options svelte-1om8at4"),g(t,"class","entry-pattern-section svelte-1om8at4")},m(c,u){I(c,t,u),d(t,e),d(t,s),d(t,i);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(i,null);d(t,r),a&&a.m(t,null)},p(c,u){if(u[0]&1077936130){l=bt(c[22]);let f;for(f=0;f<l.length;f+=1){const p=yd(c,l,f);o[f]?o[f].p(p,u):(o[f]=pp(p),o[f].c(),o[f].m(i,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}c[1].entry_pattern.length>0?a?a.p(c,u):(a=gp(c),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(c){c&&N(t),Gt(o,c),a&&a.d()}}}function pp(n){let t,e,s,i,r;function l(){return n[100](n[131])}function o(...a){return n[101](n[131],...a)}return{c(){t=v("div"),e=v("span"),e.textContent=`${n[131]}`,s=S(),g(e,"class","pattern-name svelte-1om8at4"),g(t,"class","pattern-option svelte-1om8at4"),g(t,"role","button"),g(t,"tabindex","0"),Ot(t,"active",n[132])},m(a,c){I(a,t,c),d(t,e),d(t,s),i||(r=[j(t,"click",l),j(t,"keydown",o)],i=!0)},p(a,c){n=a,c[0]&4194306&&Ot(t,"active",n[132])},d(a){a&&N(t),i=!1,Vt(r)}}}function gp(n){let t,e=bt(n[1].entry_pattern),s=[];for(let i=0;i<e.length;i+=1)s[i]=mp(vd(n,e,i));return{c(){t=v("div");for(let i=0;i<s.length;i+=1)s[i].c();g(t,"class","pattern-cards-grid svelte-1om8at4")},m(i,r){I(i,t,r);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null)},p(i,r){if(r[0]&10|r[1]&512){e=bt(i[1].entry_pattern);let l;for(l=0;l<e.length;l+=1){const o=vd(i,e,l);s[l]?s[l].p(o,r):(s[l]=mp(o),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=e.length}},d(i){i&&N(t),Gt(s,i)}}}function uT(n){let t;return{c(){t=v("div"),t.innerHTML='<span class="placeholder-text svelte-1om8at4"> Ctrl+V </span>',g(t,"class","pattern-image-placeholder svelte-1om8at4")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function fT(n){let t,e,s,i,r,l,o,a;function c(){return n[103](n[128],n[129],n[130])}function u(){return n[104](n[128])}function f(...p){return n[105](n[128],...p)}return{c(){t=v("div"),e=v("img"),r=S(),l=v("button"),l.textContent="",ae(e.src,s=n[128].image)||g(e,"src",s),g(e,"alt",i=n[128].name),g(e,"class","svelte-1om8at4"),g(l,"type","button"),g(l,"class","remove-pattern-image svelte-1om8at4"),g(t,"class","pattern-image-preview svelte-1om8at4"),g(t,"role","button"),g(t,"tabindex","0")},m(p,m){I(p,t,m),d(t,e),d(t,r),d(t,l),o||(a=[j(l,"click",he(c)),j(t,"click",u),j(t,"keydown",f)],o=!0)},p(p,m){n=p,m[0]&524290&&!ae(e.src,s=n[128].image)&&g(e,"src",s),m[0]&524290&&i!==(i=n[128].name)&&g(e,"alt",i)},d(p){p&&N(t),o=!1,Vt(a)}}}function mp(n){let t,e,s,i=n[128].name+"",r,l,o,a,c,u;function f(_,b){return _[128].image?fT:uT}let p=f(n),m=p(n);function h(..._){return n[106](n[128],n[129],n[130],..._)}return{c(){t=v("div"),e=v("div"),s=v("span"),r=P(i),l=S(),o=v("div"),m.c(),a=S(),g(s,"class","pattern-card-title svelte-1om8at4"),g(e,"class","pattern-card-header svelte-1om8at4"),g(o,"class","pattern-card-body svelte-1om8at4"),g(t,"class","pattern-image-card svelte-1om8at4")},m(_,b){I(_,t,b),d(t,e),d(e,s),d(s,r),d(t,l),d(t,o),m.m(o,null),d(t,a),c||(u=j(t,"paste",h),c=!0)},p(_,b){n=_,b[0]&2&&i!==(i=n[128].name+"")&&G(r,i),p===(p=f(n))&&m?m.p(n,b):(m.d(1),m=p(n),m&&(m.c(),m.m(o,null)))},d(_){_&&N(t),m.d(),c=!1,u()}}}function _p(n){let t,e,s=n[125]+"",i,r,l,o,a,c;function u(){return n[113](n[125])}return{c(){t=v("span"),e=P("#"),i=P(s),r=S(),l=v("button"),l.textContent="",o=S(),g(l,"type","button"),g(l,"class","tag-remove svelte-1om8at4"),g(t,"class","tag svelte-1om8at4")},m(f,p){I(f,t,p),d(t,e),d(t,i),d(t,r),d(t,l),d(t,o),a||(c=j(l,"click",u),a=!0)},p(f,p){n=f,p[0]&2&&s!==(s=n[125]+"")&&G(i,s)},d(f){f&&N(t),a=!1,c()}}}function hT(n){let t=n[0]?"":"",e,s;return{c(){e=P(t),s=P("")},m(i,r){I(i,e,r),I(i,s,r)},p(i,r){r[0]&1&&t!==(t=i[0]?"":"")&&G(e,t)},d(i){i&&(N(e),N(s))}}}function dT(n){let t;return{c(){t=P("...")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function bp(n){let t,e,s,i,r,l,o,a,c=n[11]?" ":" ",u,f,p,m,h,_,b,y,w;const A=[gT,pT],E=[];function T(C,M){return C[11]?0:1}return h=T(n),_=E[h]=A[h](n),{c(){t=v("div"),e=v("div"),s=v("div"),i=v("h3"),r=P(n[10]),l=S(),o=v("div"),a=v("button"),u=P(c),f=S(),p=v("button"),p.textContent="",m=S(),_.c(),g(i,"class","image-modal-title svelte-1om8at4"),g(a,"class","annotator-toggle-btn svelte-1om8at4"),g(a,"title",""),Ot(a,"active",n[11]),g(p,"class","image-modal-close svelte-1om8at4"),g(o,"class","image-modal-actions svelte-1om8at4"),g(s,"class","image-modal-header svelte-1om8at4"),g(e,"class","image-modal-content svelte-1om8at4"),g(e,"role","presentation"),g(t,"class","image-modal svelte-1om8at4"),g(t,"role","presentation")},m(C,M){I(C,t,M),d(t,e),d(e,s),d(s,i),d(i,r),d(s,l),d(s,o),d(o,a),d(a,u),d(o,f),d(o,p),d(e,m),E[h].m(e,null),b=!0,y||(w=[j(a,"click",n[115]),j(p,"click",n[43]),j(e,"click",vT),j(t,"click",n[43])],y=!0)},p(C,M){(!b||M[0]&1024)&&G(r,C[10]),(!b||M[0]&2048)&&c!==(c=C[11]?" ":" ")&&G(u,c),(!b||M[0]&2048)&&Ot(a,"active",C[11]);let x=h;h=T(C),h===x?E[h].p(C,M):(ns(),Kt(E[x],1,1,()=>{E[x]=null}),ss(),_=E[h],_?_.p(C,M):(_=E[h]=A[h](C),_.c()),Wt(_,1),_.m(e,null))},i(C){b||(Wt(_),b=!0)},o(C){Kt(_),b=!1},d(C){C&&N(t),E[h].d(),y=!1,Vt(w)}}}function pT(n){let t,e;return{c(){t=v("img"),ae(t.src,e=n[9])||g(t,"src",e),g(t,"alt",n[10]),g(t,"class","image-modal-img svelte-1om8at4")},m(s,i){I(s,t,i)},p(s,i){i[0]&512&&!ae(t.src,e=s[9])&&g(t,"src",e),i[0]&1024&&g(t,"alt",s[10])},i:Et,o:Et,d(s){s&&N(t)}}}function gT(n){let t,e;return t=new m0({props:{imageSrc:n[9],originalImageSrc:n[12],onSave:n[42]}}),{c(){He(t.$$.fragment)},m(s,i){Re(t,s,i),e=!0},p(s,i){const r={};i[0]&512&&(r.imageSrc=s[9]),i[0]&4096&&(r.originalImageSrc=s[12]),t.$set(r)},i(s){e||(Wt(t.$$.fragment,s),e=!0)},o(s){Kt(t.$$.fragment,s),e=!1},d(s){Pe(t,s)}}}function mT(n){let t,e,s,i=n[0]?"":"",r,l,o,a,c,u,f,p,m,h,_,b,y,w,A,E,T,C,M,x,D,L,q,F,nt,et,U,W,V,$,st,Z,wt,rt,at,vt,K,ct,ft,ut,Nt,yt,z,Y,dt=n[1].timezone_offset>=0?"+":"",Ut,$t=n[1].timezone_offset+"",ht,St,Ct,it,Dt,zt,Q,lt,mt,kt,Mt,Pt,Tt,Bt,_t,me,qe,de,Xt,nn,Ze,Je,ne,re,ve,Yn,Ie,ce,Mn,Ln,Xn,sn,ke,rs,rn,Jt,pe,Gn,ls,vn,Ee,os,as,cs,Es,us,xe,Ci,Nn,si,Oi,fs,Fe,xi,In,ii,Mi,jn,zn,ri,Dn,Me,Us,hs,Li,Cs,Ni,ds,Rn,Ws,hn,Vs,ps,Qe,H,J,pt,At;function Ft(R,gt){return R[5]?V3:W3}let Ht=Ft(n),Yt=Ht(n),le=bt(n[19]),te=[];for(let R=0;R<le.length;R+=1)te[R]=Nd(Ld(n,le,R));let ue=n[13]&&Id(n);function li(R,gt){if(R[13]&&!R[8])return G3;if(R[13]&&R[8])return X3}let $e=li(n),De=$e&&$e(n),Ve=n[1].market_session&&Bd(n),je=n[13]&&!n[8]&&qd(n);function Zn(R,gt){return R[14]?$3:Q3}let Pn=Zn(n),we=Pn(n),ln=n[14]&&Fd(n),Os=bt(n[17]),ze=[];for(let R=0;R<Os.length;R+=1)ze[R]=Qd(Cd(n,Os,R));let tn=n[1].entry_strategy==="expert"&&$d(n),Ke=(n[1].entry_strategy==="elite"||n[1].entry_strategy==="legend")&&np(n),dn=n[1].entry_strategy==="legend"&&hp(n),on=n[1].entry_strategy==="elite"&&dp(n);function nr(R){n[108](R)}let sr={placeholder:"//...",height:"180px"};n[1].exit_reason!==void 0&&(sr.value=n[1].exit_reason),Nn=new hd({props:sr}),n[107](Nn),$s.push(()=>qf(Nn,"value",nr));function gs(R){n[110](R)}let ir={placeholder:"......",height:"200px"};n[1].notes!==void 0&&(ir.value=n[1].notes),In=new hd({props:ir}),n[109](In),$s.push(()=>qf(In,"value",gs));let ms=bt(n[1].tags),an=[];for(let R=0;R<ms.length;R+=1)an[R]=_p(bd(n,ms,R));function Nr(R,gt){return R[5]?dT:hT}let k=Nr(n),O=k(n),B=n[9]&&bp(n);return H=Fc(n[54][0]),J=Fc(n[54][1]),{c(){t=v("div"),e=v("div"),s=v("h2"),r=P(i),l=P(""),o=S(),a=v("div"),c=v("button"),c.textContent="",u=S(),f=v("button"),Yt.c(),p=S(),m=v("form"),h=v("div"),_=v("label"),_.textContent="",b=S(),y=v("div"),w=v("label"),A=v("input"),E=S(),T=v("span"),T.innerHTML='<span class="radio-icon svelte-1om8at4"></span> <span class="radio-text svelte-1om8at4"><strong class="svelte-1om8at4"> ()</strong> <small class="svelte-1om8at4"></small></span>',C=S(),M=v("label"),x=v("input"),D=S(),L=v("span"),L.innerHTML='<span class="radio-icon svelte-1om8at4"></span> <span class="radio-text svelte-1om8at4"><strong class="svelte-1om8at4"></strong> <small class="svelte-1om8at4"></small></span>',q=S(),F=v("div"),nt=v("div"),et=v("label"),et.textContent="",U=S(),W=v("select");for(let R=0;R<te.length;R+=1)te[R].c();V=S(),$=v("div"),st=v("label"),st.textContent="",Z=S(),wt=v("select"),rt=v("option"),rt.textContent=" (Long)",at=v("option"),at.textContent=" (Short)",vt=S(),ue&&ue.c(),K=S(),De&&De.c(),ct=S(),ft=v("div"),ut=v("div"),Nt=v("label"),yt=P(`\r
          `),z=v("span"),Y=P("(UTC"),Ut=P(dt),ht=P($t),St=P(")"),Ct=S(),it=v("input"),Dt=S(),Ve&&Ve.c(),zt=S(),je&&je.c(),Q=S(),lt=v("div"),lt.innerHTML='<label class="svelte-1om8at4"> </label>',mt=S(),kt=v("div"),Mt=v("div"),Pt=v("div"),Tt=v("label"),Tt.textContent=" ",Bt=S(),we.c(),_t=S(),ln&&ln.c(),me=S(),qe=v("div"),de=v("div"),Xt=v("label"),Xt.textContent=" ",nn=S(),Ze=v("div"),Je=v("label"),ne=v("input"),re=S(),ve=v("span"),ve.textContent="",Yn=S(),Ie=v("label"),ce=v("input"),Mn=S(),Ln=v("span"),Ln.textContent="",Xn=S(),sn=v("label"),ke=v("input"),rs=S(),rn=v("span"),rn.textContent="",Jt=S(),pe=v("div"),Gn=v("label"),Gn.textContent=" ",ls=S(),vn=v("div");for(let R=0;R<ze.length;R+=1)ze[R].c();Ee=S(),tn&&tn.c(),os=S(),Ke&&Ke.c(),as=S(),dn&&dn.c(),cs=S(),on&&on.c(),Es=S(),us=v("div"),xe=v("label"),xe.innerHTML=` 
        <span class="hint-inline svelte-1om8at4">Ctrl+V </span>`,Ci=S(),He(Nn.$$.fragment),Oi=S(),fs=v("div"),Fe=v("label"),Fe.innerHTML=` 
        <span class="hint-inline svelte-1om8at4">Ctrl+V </span>`,xi=S(),He(In.$$.fragment),Mi=S(),jn=v("div"),zn=v("label"),zn.textContent="",ri=S(),Dn=v("div"),Me=v("input"),Us=S(),hs=v("button"),hs.textContent="",Li=S(),Cs=v("div");for(let R=0;R<an.length;R+=1)an[R].c();Ni=S(),ds=v("div"),Rn=v("button"),Rn.textContent="",Ws=S(),hn=v("button"),O.c(),Vs=S(),B&&B.c(),ps=ie(),g(s,"class","svelte-1om8at4"),g(c,"type","button"),g(c,"class","btn btn-sm svelte-1om8at4"),g(f,"type","button"),g(f,"class","btn btn-sm btn-primary svelte-1om8at4"),f.disabled=n[5],g(a,"class","header-form-actions svelte-1om8at4"),g(e,"class","card-header-actions svelte-1om8at4"),g(_,"class","trade-type-label svelte-1om8at4"),g(A,"type","radio"),A.__value="observation",xt(A,A.__value),g(A,"class","svelte-1om8at4"),g(T,"class","radio-label svelte-1om8at4"),g(w,"class","radio-option svelte-1om8at4"),Ot(w,"active",n[1].trade_type==="observation"),g(x,"type","radio"),x.__value="actual",xt(x,x.__value),g(x,"class","svelte-1om8at4"),g(L,"class","radio-label svelte-1om8at4"),g(M,"class","radio-option svelte-1om8at4"),Ot(M,"active",n[1].trade_type==="actual"),g(y,"class","trade-type-options svelte-1om8at4"),g(h,"class","form-group trade-type-section svelte-1om8at4"),g(et,"for","symbol"),g(et,"class","svelte-1om8at4"),g(W,"id","symbol"),g(W,"class","form-control"),W.required=!0,n[1].symbol===void 0&&gn(()=>n[56].call(W)),g(nt,"class","form-group"),g(st,"for","side"),g(st,"class","svelte-1om8at4"),rt.__value="long",xt(rt,rt.__value),at.__value="short",xt(at,at.__value),g(wt,"id","side"),g(wt,"class","form-control"),wt.required=!0,n[1].side===void 0&&gn(()=>n[57].call(wt)),g($,"class","form-group"),g(F,"class","form-row svelte-1om8at4"),g(z,"class","utc-label-info svelte-1om8at4"),g(Nt,"for","entry_time"),g(Nt,"class","svelte-1om8at4"),g(it,"type","datetime-local"),g(it,"id","entry_time"),g(it,"class","form-control"),it.required=!0,g(ut,"class","form-group"),g(ft,"class","form-row time-row svelte-1om8at4"),g(lt,"class","form-group highlight-label svelte-1om8at4"),g(Tt,"class","strategy-label svelte-1om8at4"),g(Pt,"class","section-label-group svelte-1om8at4"),g(Mt,"class","trade-plan-status-section svelte-1om8at4"),g(Xt,"class","svelte-1om8at4"),g(ne,"type","radio"),ne.__value="expert",xt(ne,ne.__value),g(ne,"class","svelte-1om8at4"),g(ve,"class","strategy-name svelte-1om8at4"),g(Je,"class","strategy-option svelte-1om8at4"),Ot(Je,"active",n[1].entry_strategy==="expert"),g(ce,"type","radio"),ce.__value="elite",xt(ce,ce.__value),g(ce,"class","svelte-1om8at4"),g(Ln,"class","strategy-name svelte-1om8at4"),g(Ie,"class","strategy-option svelte-1om8at4"),Ot(Ie,"active",n[1].entry_strategy==="elite"),g(ke,"type","radio"),ke.__value="legend",xt(ke,ke.__value),g(ke,"class","svelte-1om8at4"),g(rn,"class","strategy-name svelte-1om8at4"),g(sn,"class","strategy-option svelte-1om8at4"),Ot(sn,"active",n[1].entry_strategy==="legend"),g(Ze,"class","strategy-options mini svelte-1om8at4"),g(de,"class","form-group svelte-1om8at4"),g(Gn,"class","svelte-1om8at4"),g(vn,"class","timeframe-options svelte-1om8at4"),g(pe,"class","form-group svelte-1om8at4"),g(qe,"class","form-row timeframe-trend-row svelte-1om8at4"),g(kt,"class","form-group entry-strategy-section svelte-1om8at4"),g(xe,"for","exit_reason"),g(xe,"class","svelte-1om8at4"),g(us,"class","form-group"),g(Fe,"for","notes"),g(Fe,"class","svelte-1om8at4"),g(fs,"class","form-group"),g(zn,"for","trade-tags"),g(zn,"class","svelte-1om8at4"),g(Me,"id","trade-tags"),g(Me,"type","text"),g(Me,"class","form-control"),g(Me,"placeholder",""),g(hs,"type","button"),g(hs,"class","btn btn-primary"),g(Dn,"class","tag-input-wrapper svelte-1om8at4"),g(Cs,"class","tags-container svelte-1om8at4"),g(jn,"class","form-group"),g(Rn,"type","button"),g(Rn,"class","btn"),g(hn,"type","submit"),g(hn,"class","btn btn-primary"),hn.disabled=n[5],g(ds,"class","form-actions svelte-1om8at4"),g(t,"class","card"),H.p(ne,ce,ke),J.p(A,x)},m(R,gt){I(R,t,gt),d(t,e),d(e,s),d(s,r),d(s,l),d(e,o),d(e,a),d(a,c),d(a,u),d(a,f),Yt.m(f,null),d(t,p),d(t,m),d(m,h),d(h,_),d(h,b),d(h,y),d(y,w),d(w,A),A.checked=A.__value===n[1].trade_type,d(w,E),d(w,T),d(y,C),d(y,M),d(M,x),x.checked=x.__value===n[1].trade_type,d(M,D),d(M,L),d(m,q),d(m,F),d(F,nt),d(nt,et),d(nt,U),d(nt,W);for(let Lt=0;Lt<te.length;Lt+=1)te[Lt]&&te[Lt].m(W,null);Te(W,n[1].symbol,!0),d(F,V),d(F,$),d($,st),d($,Z),d($,wt),d(wt,rt),d(wt,at),Te(wt,n[1].side,!0),d(F,vt),ue&&ue.m(F,null),d(m,K),De&&De.m(m,null),d(m,ct),d(m,ft),d(ft,ut),d(ut,Nt),d(Nt,yt),d(Nt,z),d(z,Y),d(z,Ut),d(z,ht),d(z,St),d(ut,Ct),d(ut,it),xt(it,n[1].entry_time),d(ft,Dt),Ve&&Ve.m(ft,null),d(m,zt),je&&je.m(m,null),d(m,Q),d(m,lt),d(m,mt),d(m,kt),d(kt,Mt),d(Mt,Pt),d(Pt,Tt),d(Pt,Bt),we.m(Pt,null),d(Mt,_t),ln&&ln.m(Mt,null),d(kt,me),d(kt,qe),d(qe,de),d(de,Xt),d(de,nn),d(de,Ze),d(Ze,Je),d(Je,ne),ne.checked=ne.__value===n[1].entry_strategy,d(Je,re),d(Je,ve),d(Ze,Yn),d(Ze,Ie),d(Ie,ce),ce.checked=ce.__value===n[1].entry_strategy,d(Ie,Mn),d(Ie,Ln),d(Ze,Xn),d(Ze,sn),d(sn,ke),ke.checked=ke.__value===n[1].entry_strategy,d(sn,rs),d(sn,rn),d(qe,Jt),d(qe,pe),d(pe,Gn),d(pe,ls),d(pe,vn);for(let Lt=0;Lt<ze.length;Lt+=1)ze[Lt]&&ze[Lt].m(vn,null);d(kt,Ee),tn&&tn.m(kt,null),d(kt,os),Ke&&Ke.m(kt,null),d(kt,as),dn&&dn.m(kt,null),d(kt,cs),on&&on.m(kt,null),d(m,Es),d(m,us),d(us,xe),d(us,Ci),Re(Nn,us,null),d(m,Oi),d(m,fs),d(fs,Fe),d(fs,xi),Re(In,fs,null),d(m,Mi),d(m,jn),d(jn,zn),d(jn,ri),d(jn,Dn),d(Dn,Me),xt(Me,n[4]),d(Dn,Us),d(Dn,hs),d(jn,Li),d(jn,Cs);for(let Lt=0;Lt<an.length;Lt+=1)an[Lt]&&an[Lt].m(Cs,null);d(m,Ni),d(m,ds),d(ds,Rn),d(ds,Ws),d(ds,hn),O.m(hn,null),I(R,Vs,gt),B&&B.m(R,gt),I(R,ps,gt),Qe=!0,pt||(At=[j(c,"click",n[52]),j(f,"click",n[44]),j(A,"change",n[53]),j(x,"change",n[55]),j(W,"change",n[56]),j(wt,"change",n[57]),j(it,"input",n[69]),j(ne,"change",n[75]),j(ce,"change",n[76]),j(ke,"change",n[77]),j(Me,"input",n[111]),j(Me,"keypress",n[112]),j(hs,"click",n[26]),j(Rn,"click",n[114]),j(m,"submit",Ls(n[44]))],pt=!0)},p(R,gt){if((!Qe||gt[0]&1)&&i!==(i=R[0]?"":"")&&G(r,i),Ht===(Ht=Ft(R))&&Yt?Yt.p(R,gt):(Yt.d(1),Yt=Ht(R),Yt&&(Yt.c(),Yt.m(f,null))),(!Qe||gt[0]&32)&&(f.disabled=R[5]),gt[0]&524290&&(A.checked=A.__value===R[1].trade_type),(!Qe||gt[0]&2)&&Ot(w,"active",R[1].trade_type==="observation"),gt[0]&524290&&(x.checked=x.__value===R[1].trade_type),(!Qe||gt[0]&2)&&Ot(M,"active",R[1].trade_type==="actual"),gt[0]&524288){le=bt(R[19]);let It;for(It=0;It<le.length;It+=1){const _e=Ld(R,le,It);te[It]?te[It].p(_e,gt):(te[It]=Nd(_e),te[It].c(),te[It].m(W,null))}for(;It<te.length;It+=1)te[It].d(1);te.length=le.length}if(gt[0]&524290&&Te(W,R[1].symbol),gt[0]&524290&&Te(wt,R[1].side),R[13]?ue?ue.p(R,gt):(ue=Id(R),ue.c(),ue.m(F,null)):ue&&(ue.d(1),ue=null),$e===($e=li(R))&&De?De.p(R,gt):(De&&De.d(1),De=$e&&$e(R),De&&(De.c(),De.m(m,ct))),(!Qe||gt[0]&2)&&dt!==(dt=R[1].timezone_offset>=0?"+":"")&&G(Ut,dt),(!Qe||gt[0]&2)&&$t!==($t=R[1].timezone_offset+"")&&G(ht,$t),gt[0]&524290&&xt(it,R[1].entry_time),R[1].market_session?Ve?Ve.p(R,gt):(Ve=Bd(R),Ve.c(),Ve.m(ft,null)):Ve&&(Ve.d(1),Ve=null),R[13]&&!R[8]?je?je.p(R,gt):(je=qd(R),je.c(),je.m(m,Q)):je&&(je.d(1),je=null),Pn===(Pn=Zn(R))&&we?we.p(R,gt):(we.d(1),we=Pn(R),we&&(we.c(),we.m(Pt,null))),R[14]?ln?ln.p(R,gt):(ln=Fd(R),ln.c(),ln.m(Mt,null)):ln&&(ln.d(1),ln=null),gt[0]&524290&&(ne.checked=ne.__value===R[1].entry_strategy),(!Qe||gt[0]&2)&&Ot(Je,"active",R[1].entry_strategy==="expert"),gt[0]&524290&&(ce.checked=ce.__value===R[1].entry_strategy),(!Qe||gt[0]&2)&&Ot(Ie,"active",R[1].entry_strategy==="elite"),gt[0]&524290&&(ke.checked=ke.__value===R[1].entry_strategy),(!Qe||gt[0]&2)&&Ot(sn,"active",R[1].entry_strategy==="legend"),gt[0]&131074){Os=bt(R[17]);let It;for(It=0;It<Os.length;It+=1){const _e=Cd(R,Os,It);ze[It]?ze[It].p(_e,gt):(ze[It]=Qd(_e),ze[It].c(),ze[It].m(vn,null))}for(;It<ze.length;It+=1)ze[It].d(1);ze.length=Os.length}R[1].entry_strategy==="expert"?tn?tn.p(R,gt):(tn=$d(R),tn.c(),tn.m(kt,os)):tn&&(tn.d(1),tn=null),R[1].entry_strategy==="elite"||R[1].entry_strategy==="legend"?Ke?Ke.p(R,gt):(Ke=np(R),Ke.c(),Ke.m(kt,as)):Ke&&(Ke.d(1),Ke=null),R[1].entry_strategy==="legend"?dn?dn.p(R,gt):(dn=hp(R),dn.c(),dn.m(kt,cs)):dn&&(dn.d(1),dn=null),R[1].entry_strategy==="elite"?on?on.p(R,gt):(on=dp(R),on.c(),on.m(kt,null)):on&&(on.d(1),on=null);const Lt={};!si&&gt[0]&2&&(si=!0,Lt.value=R[1].exit_reason,Pf(()=>si=!1)),Nn.$set(Lt);const oe={};if(!ii&&gt[0]&2&&(ii=!0,oe.value=R[1].notes,Pf(()=>ii=!1)),In.$set(oe),gt[0]&16&&Me.value!==R[4]&&xt(Me,R[4]),gt[0]&134217730){ms=bt(R[1].tags);let It;for(It=0;It<ms.length;It+=1){const _e=bd(R,ms,It);an[It]?an[It].p(_e,gt):(an[It]=_p(_e),an[It].c(),an[It].m(Cs,null))}for(;It<an.length;It+=1)an[It].d(1);an.length=ms.length}k===(k=Nr(R))&&O?O.p(R,gt):(O.d(1),O=k(R),O&&(O.c(),O.m(hn,null))),(!Qe||gt[0]&32)&&(hn.disabled=R[5]),R[9]?B?(B.p(R,gt),gt[0]&512&&Wt(B,1)):(B=bp(R),B.c(),Wt(B,1),B.m(ps.parentNode,ps)):B&&(ns(),Kt(B,1,1,()=>{B=null}),ss())},i(R){Qe||(Wt(Nn.$$.fragment,R),Wt(In.$$.fragment,R),Wt(B),Qe=!0)},o(R){Kt(Nn.$$.fragment,R),Kt(In.$$.fragment,R),Kt(B),Qe=!1},d(R){R&&(N(t),N(Vs),N(ps)),Yt.d(),Gt(te,R),ue&&ue.d(),De&&De.d(),Ve&&Ve.d(),je&&je.d(),we.d(),ln&&ln.d(),Gt(ze,R),tn&&tn.d(),Ke&&Ke.d(),dn&&dn.d(),on&&on.d(),n[107](null),Pe(Nn),n[109](null),Pe(In),Gt(an,R),O.d(),B&&B.d(R),H.r(),J.r(),pt=!1,Vt(At)}}}function _T(n,t){if(!n)return"";const e=new Date(n),s=e.getMonth()+1,i=s>=3&&s<=11,r=e.getUTCHours(),l=e.getUTCMinutes(),a=(r+8+24)%24*60+l,c=8*60,u=15*60;let f,p;i?(f=15*60,p=23*60):(f=16*60,p=24*60);let m,h;if(i?(m=20*60,h=4*60):(m=21*60,h=5*60),a>=c&&a<u)return"asian";if(a>=m||a<h)return"us";if(i){if(a>=f&&a<p)return"european"}else if(a>=f||a<0)return"european";return"asian"}function vp(n){if(!n)return"";const t=new Date(n),e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),r=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${e}-${s}-${i}T${r}:${l}`}function bT(n,t){if(!n)return t;try{return JSON.parse(n)}catch{return t}}const vT=n=>n.stopPropagation();function yT(n,t,e){let s,i,r,l,o,a,c,u,f;Ye(n,Rs,H=>e(48,u=H)),Ye(n,Fl,H=>e(49,f=H));let{id:p=null}=t;const m=Ts;let h={account_id:u,trade_type:"observation",symbol:"XAUUSD",side:"long",entry_price:"",exit_price:"",lot_size:"",pnl:"",pnl_points:"",notes:"",entry_reason:"",exit_reason:"",entry_strategy:"",entry_signals:[],entry_checklist:{},entry_pattern:[],entry_timeframe:"",trend_type:"",market_session:"",initial_sl:"",bullet_size:"",rr_ratio:"",timezone_offset:new Date().getTimezoneOffset()/-60,entry_time:(()=>{const H=new Date,J=H.getFullYear(),pt=String(H.getMonth()+1).padStart(2,"0"),At=String(H.getDate()).padStart(2,"0"),Ft=String(H.getHours()).padStart(2,"0"),Ht=String(H.getMinutes()).padStart(2,"0");return`${J}-${pt}-${At}T${Ft}:${Ht}`})(),exit_time:"",tags:[],entry_strategy_image:"",entry_strategy_image_original:"",legend_htf:"",legend_htf_image:"",legend_htf_image_original:"",legend_king_htf:"",legend_king_image:"",legend_king_image_original:"",legend_de_htf:"",exit_sl:""};const _=["","","","",""],b=["","","","",""];let y={},w={};const A=[{id:"trend_line",label:"?"},{id:"price_level",label:"?"},{id:"impulse_wave",label:"?"},{id:"high_low",label:"?"},{id:"sentiment",label:"?"}],E=[{id:"item_618_786",label:"618786"},{id:"item_che",label:"[]"},{id:"item_de",label:"ABC[D][E]"}],T=["","","","","Leading","Leading"],C=vs.reduce((H,J)=>(H[J.value]=J.label,H),{});function M(H){if(!H||!h.entry_time)return"";const pt=new Date(h.entry_time).getMonth()+1,At=pt>=3&&pt<=11;switch(H){case"asian":return"08:00 - 15:00";case"european":return At?"15:00 - 23:00":"16:00 - 00:00";case"us":return At?"20:00 - 04:00":"21:00 - 05:00";default:return""}}function x(){if(!h.entry_time)return"";const J=new Date(h.entry_time).getMonth()+1;return J>=3&&J<=11?"":""}let D="",L=!1,q,F,nt,et=!1,U=[],W=null,V="",$=null,st=!1,Z=[];es(()=>{const J=new URLSearchParams(window.location.search).get("symbol");J&&J!=="undefined"&&J!=="null"&&!J.includes("{$")?e(1,h.symbol=J,h):p||e(1,h.symbol="XAUUSD",h),p&&rt(),wt()});async function wt(){try{const H=await yi.getAll({account_id:u,page_size:100});e(45,Z=H.data.data||[])}catch(H){console.error(":",H)}}async function rt(){var H;try{const J=await gi.getOne(p);e(1,h={...J.data,initial_sl:J.data.initial_sl||"",bullet_size:J.data.bullet_size||"",rr_ratio:J.data.rr_ratio||"",entry_reason:J.data.entry_reason||"",exit_reason:J.data.exit_reason||"",notes:J.data.notes||"",entry_strategy:J.data.entry_strategy||"",entry_signals:J.data.entry_signals?(()=>{const At=JSON.parse(J.data.entry_signals);return Array.isArray(At)&&At.length>0&&typeof At[0]=="string"?At.map(Ft=>({name:Ft,image:""})):At})():[],entry_checklist:J.data.entry_checklist?JSON.parse(J.data.entry_checklist):{},entry_pattern:J.data.entry_pattern||"",entry_timeframe:J.data.entry_timeframe||"",trend_type:J.data.trend_type||"",market_session:J.data.market_session||"",timezone_offset:J.data.timezone_offset!==null?J.data.timezone_offset:new Date().getTimezoneOffset()/-60,entry_time:vp(J.data.entry_time),exit_time:J.data.exit_time?vp(J.data.exit_time):"",entry_strategy_image:J.data.entry_strategy_image||"",entry_strategy_image_original:J.data.entry_strategy_image_original||"",entry_pattern:bT(J.data.entry_pattern,[]),tags:((H=J.data.tags)==null?void 0:H.map(At=>At.name))||[]}),h.entry_signals&&Array.isArray(h.entry_signals)&&h.entry_signals.forEach(At=>{At.name&&(At.image||At.originalImage)&&(y[At.name]={image:At.image||"",originalImage:At.originalImage||""})}),h.entry_pattern&&Array.isArray(h.entry_pattern)&&h.entry_pattern.forEach(At=>{At.name&&(At.image||At.originalImage)&&e(3,w[At.name]={image:At.image||"",originalImage:At.originalImage||""},w)});const pt=await gi.getAll({account_id:h.account_id,symbol:h.symbol,page_size:100});e(2,U=pt.data.data.filter(At=>At.entry_time===J.data.entry_time).sort((At,Ft)=>new Date(At.exit_time||0)-new Date(Ft.exit_time||0))),e(8,et=U.length>1)}catch(J){console.error(":",J),alert("")}}function at(){D.trim()&&!h.tags.includes(D.trim())&&(e(1,h.tags=[...h.tags,D.trim()],h),e(4,D=""))}function vt(H){e(1,h.tags=h.tags.filter(J=>J!==H),h)}let K=h.side;function ct(H){return h.entry_signals.some(J=>typeof J=="string"?J===H:J.name===H)}function ft(H){const J=h.entry_signals.findIndex(pt=>typeof pt=="string"?pt===H:pt.name===H);if(J>=0){const pt=h.entry_signals[J];(pt.image||pt.originalImage)&&(y[H]={image:pt.image||"",originalImage:pt.originalImage||""}),e(1,h.entry_signals=h.entry_signals.filter((At,Ft)=>Ft!==J),h)}else{const pt=y[H];pt?e(1,h.entry_signals=[...h.entry_signals,{name:H,image:pt.image,originalImage:pt.originalImage}],h):e(1,h.entry_signals=[...h.entry_signals,{name:H,image:"",originalImage:""}],h)}e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)}function ut(H){const J=h.entry_pattern.findIndex(pt=>pt.name===H);if(J>=0){const pt=h.entry_pattern[J];(pt.image||pt.originalImage)&&e(3,w[H]={image:pt.image||"",originalImage:pt.originalImage||""},w),e(1,h.entry_pattern=h.entry_pattern.filter((At,Ft)=>Ft!==J),h)}else{const pt=w[H];e(1,h.entry_pattern=[...h.entry_pattern,{name:H,image:pt?pt.image:"",originalImage:pt?pt.originalImage:""}],h)}e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)}function Nt(H,J){const pt=(H.clipboardData||H.originalEvent.clipboardData).items;for(let At of pt)if(At.type.indexOf("image")!==-1){H.preventDefault();const Ft=At.getAsFile(),Ht=new FileReader;Ht.onload=Yt=>{const le=h.entry_signals.findIndex(te=>typeof te=="string"?te===J:te.name===J);if(le>=0){const te=typeof h.entry_signals[le]=="string"?{name:J,image:Yt.target.result,originalImage:Yt.target.result}:{...h.entry_signals[le],image:Yt.target.result,originalImage:h.entry_signals[le].originalImage||Yt.target.result};e(1,h.entry_signals[le]=te,h)}else e(1,h.entry_signals=[...h.entry_signals,{name:J,image:Yt.target.result,originalImage:Yt.target.result}],h);e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)},Ht.readAsDataURL(Ft);break}}function yt(H){const J=h.entry_signals.findIndex(pt=>typeof pt=="string"?pt===H:pt.name===H);if(J>=0){const pt=typeof h.entry_signals[J]=="string"?{name:H,image:"",originalImage:""}:{...h.entry_signals[J],image:"",originalImage:""};e(1,h.entry_signals[J]=pt,h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)}}function z(H){const J=(H.clipboardData||H.originalEvent.clipboardData).items;for(let pt of J)if(pt.type.indexOf("image")!==-1){H.preventDefault();const At=pt.getAsFile(),Ft=new FileReader;Ft.onload=Ht=>{e(1,h.entry_strategy_image=Ht.target.result,h),e(1,h.entry_strategy_image_original=Ht.target.result,h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)},Ft.readAsDataURL(At);break}}function Y(){e(1,h.entry_strategy_image="",h),e(1,h.entry_strategy_image_original="",h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)}function dt(H){const J=(H.clipboardData||H.originalEvent.clipboardData).items;for(let pt of J)if(pt.type.indexOf("image")!==-1){H.preventDefault();const At=pt.getAsFile(),Ft=new FileReader;Ft.onload=Ht=>{e(1,h.legend_htf_image=Ht.target.result,h),e(1,h.legend_htf_image_original=Ht.target.result,h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)},Ft.readAsDataURL(At);break}}function Ut(){e(1,h.legend_htf_image="",h),e(1,h.legend_htf_image_original="",h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)}function $t(H){const J=(H.clipboardData||H.originalEvent.clipboardData).items;for(let pt of J)if(pt.type.indexOf("image")!==-1){H.preventDefault();const At=pt.getAsFile(),Ft=new FileReader;Ft.onload=Ht=>{e(1,h.legend_king_image=Ht.target.result,h),e(1,h.legend_king_image_original=Ht.target.result,h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)},Ft.readAsDataURL(At);break}}function ht(){e(1,h.legend_king_image="",h),e(1,h.legend_king_image_original="",h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)}function St(H){const J=h.entry_signals.find(pt=>typeof pt=="string"?pt===H:pt.name===H);return J&&typeof J=="object"&&J.image?J.image:""}let Ct=null;function it(H,J,pt=null){var At;if(H)if(e(9,W=H),e(10,V=J),$=pt,e(11,st=!1),pt){const{type:Ft,key:Ht}=pt;if(Ft==="signal"){const Yt=h.entry_signals.find(le=>typeof le=="string"?le===Ht:le.name===Ht);e(12,Ct=(Yt==null?void 0:Yt.originalImage)||H)}else if(Ft==="trend")e(12,Ct=((At=h.trend_analysis[Ht])==null?void 0:At.originalImage)||H);else if(Ft==="pattern"){const Yt=h.entry_pattern.find(le=>le.name===Ht);e(12,Ct=(Yt==null?void 0:Yt.originalImage)||H)}else Ft==="strategy"?e(12,Ct=h.entry_strategy_image_original||H):Ft==="legend_htf"?e(12,Ct=h.legend_htf_image_original||H):Ft==="legend_king"&&e(12,Ct=h.legend_king_image_original||H)}else e(12,Ct=H)}function Dt(){e(11,st=!st)}function zt(H){if(!$){e(9,W=H);return}const{type:J,key:pt}=$;if(J==="signal"){const At=h.entry_signals.findIndex(Ft=>typeof Ft=="string"?Ft===pt:Ft.name===pt);if(At>=0){const Ft=h.entry_signals[At],Ht=typeof Ft=="string"?{name:pt,image:H,originalImage:H}:{...Ft,image:H};e(1,h.entry_signals[At]=Ht,h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)}}else if(J==="trend")h.trend_analysis[pt]&&(e(1,h.trend_analysis[pt]={...h.trend_analysis[pt],image:H},h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u));else if(J==="strategy")e(1,h.entry_strategy_image=H,h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u);else if(J==="legend_htf")e(1,h.legend_htf_image=H,h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u);else if(J==="legend_king")e(1,h.legend_king_image=H,h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u);else if(J==="pattern"){const At=h.entry_pattern.findIndex(Ft=>Ft.name===pt);At>=0&&(e(1,h.entry_pattern[At].image=H,h),e(3,w[pt]={...w[pt],image:H},w),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u))}e(9,W=H),e(11,st=!1)}function Q(){e(9,W=null),e(10,V=""),$=null,e(11,st=!1)}async function lt(){var H,J;try{e(5,L=!0);const pt=h.entry_signals.map(Ht=>typeof Ht=="string"?{name:Ht,image:""}:Ht),At={...h,account_id:u,entry_reason:q?q.getContent():h.entry_reason,exit_reason:F?F.getContent():h.exit_reason,notes:nt?nt.getContent():h.notes,entry_signals:JSON.stringify(pt),entry_checklist:JSON.stringify(h.entry_checklist),entry_pattern:JSON.stringify(h.entry_pattern),entry_strategy_image:h.entry_strategy_image,entry_strategy_image_original:h.entry_strategy_image_original,entry_timeframe:h.entry_timeframe,trend_type:h.trend_type,entry_time:new Date(h.entry_time).toISOString(),exit_time:h.exit_time?new Date(h.exit_time).toISOString():null},Ft=Ht=>{if(Ht==null||Ht==="")return null;const Yt=parseFloat(Ht);return isNaN(Yt)?null:Yt};if(At.initial_sl=Ft(h.initial_sl),At.exit_sl=Ft(h.exit_sl),At.bullet_size=Ft(h.bullet_size),At.rr_ratio=Ft(h.rr_ratio),i?(At.entry_price=Ft(h.entry_price),At.exit_price=Ft(h.exit_price),At.lot_size=Ft(h.lot_size),At.pnl=Ft(h.pnl),At.pnl_points=Ft(h.pnl_points)):(At.entry_price=Ft(h.entry_price),At.exit_price=null,At.lot_size=null,At.pnl=null,At.pnl_points=null,At.exit_time=null),p){if(et)for(const Ht of U){const Yt={...At,id:Ht.id,exit_time:Ht.exit_time,exit_price:Ht.exit_price,lot_size:Ht.lot_size,pnl:Ht.pnl,pnl_points:Ht.pnl_points,ticket:Ht.ticket,exit_sl:Ht.exit_sl,exit_reason:Ht.exit_reason};await gi.update(Ht.id,Yt)}else await gi.update(p,At);alert("")}else await gi.create(At),alert("");ye("/")}catch(pt){console.error(":",pt),alert(""+(((J=(H=pt.response)==null?void 0:H.data)==null?void 0:J.error)||pt.message))}finally{e(5,L=!1)}}const mt=[[],[]];function kt(H){Jr.call(this,n,H)}function Mt(H){Jr.call(this,n,H)}const Pt=()=>ye("/");function Tt(){h.trade_type=this.__value,e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function Bt(){h.trade_type=this.__value,e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function _t(){h.symbol=As(this),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function me(){h.side=As(this),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function qe(){h.lot_size=Ue(this.value),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function de(){h.entry_price=Ue(this.value),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function Xt(){h.initial_sl=Ue(this.value),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function nn(){h.exit_price=Ue(this.value),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function Ze(){h.exit_sl=Ue(this.value),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function Je(){h.pnl=Ue(this.value),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function ne(){h.pnl_points=Ue(this.value),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function re(){h.bullet_size=Ue(this.value),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function ve(){h.rr_ratio=Ue(this.value),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function Yn(){h.entry_price=Ue(this.value),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function Ie(){h.initial_sl=Ue(this.value),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function ce(){h.entry_time=this.value,e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}const Mn=()=>ye(`/plans/edit/${c.id}`),Ln=()=>{const H=new Date(h.entry_time).toISOString().slice(0,10);ye(`/plans/new?date=${H}&session=${h.market_session}&symbol=${h.symbol}`)};function Xn(){h.exit_time=this.value,e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}const sn=()=>ye(`/plans/edit/${c.id}`),ke=()=>{const H=new Date(h.entry_time).toISOString().slice(0,10);ye(`/plans/new?date=${H}&session=${h.market_session}&symbol=${h.symbol}`)};function rs(){h.entry_strategy=this.__value,e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function rn(){h.entry_strategy=this.__value,e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}function Jt(){h.entry_strategy=this.__value,e(1,h),e(47,s),e(46,K),e(49,f),e(48,u),e(19,m)}const pe=H=>e(1,h.entry_timeframe=H.value,h),Gn=H=>ft(H),ls=(H,J)=>{J.stopPropagation(),yt(H)},vn=(H,J,pt)=>{pt.stopPropagation(),it(H,J+" ",{type:"signal",key:J})},Ee=(H,J)=>Nt(J,H),os=(H,J)=>{!J.target.closest(".signal-checkbox")&&!J.target.closest(".signal-image-preview")&&ft(H)},as=(H,J)=>{e(1,h.entry_checklist={...h.entry_checklist,[H.id]:J.target.checked},h)},cs=H=>e(1,h.legend_king_htf=H.value,h),Es=H=>{H.stopPropagation(),ht()},us=()=>{h.legend_king_image&&it(h.legend_king_image,` (${h.legend_king_htf||""})`,{type:"legend_king"})},xe=H=>e(1,h.legend_htf=H.value,h),Ci=H=>{H.stopPropagation(),Ut()},Nn=()=>{h.legend_htf_image&&it(h.legend_htf_image,`"" (${h.legend_htf||""})`,{type:"legend_htf"})},si=H=>e(1,h.legend_de_htf=H.value,h),Oi=H=>ft(H),fs=(H,J)=>{J.stopPropagation(),yt(H)},Fe=(H,J,pt)=>{pt.stopPropagation(),it(H,J+" ",{type:"signal",key:J})},xi=(H,J)=>Nt(J,H),In=(H,J)=>{!J.target.closest(".signal-checkbox")&&!J.target.closest(".signal-image-preview")&&ft(H)},ii=H=>{H.stopPropagation(),Y()},Mi=()=>{h.entry_strategy_image&&it(h.entry_strategy_image,"",{type:"strategy"})},jn=H=>{(H.key==="Enter"||H.key===" ")&&h.entry_strategy_image&&it(h.entry_strategy_image,"",{type:"strategy"})},zn=H=>ut(H),ri=(H,J)=>(J.key==="Enter"||J.key===" ")&&ut(H),Dn=(H,J)=>J.name===H,Me=(H,J,pt)=>{e(1,J[pt].image="",h),e(1,J[pt].originalImage="",h),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)},Us=H=>it(H.image,H.name+" ",{type:"pattern",key:H.name}),hs=(H,J)=>(J.key==="Enter"||J.key===" ")&&it(H.image,H.name+" ",{type:"pattern",key:H.name}),Li=(H,J,pt,At)=>{const Ft=(At.clipboardData||At.originalEvent.clipboardData).items;for(let Ht of Ft)if(Ht.type.indexOf("image")!==-1){At.preventDefault();const Yt=Ht.getAsFile(),le=new FileReader;le.onload=te=>{const ue=te.target.result;e(1,J[pt].image=ue,h),e(1,J[pt].originalImage=ue,h),e(3,w[H.name]={image:ue,originalImage:ue},w),e(1,h),e(47,s),e(46,K),e(49,f),e(48,u)},le.readAsDataURL(Yt);break}};function Cs(H){$s[H?"unshift":"push"](()=>{F=H,e(6,F)})}function Ni(H){n.$$.not_equal(h.exit_reason,H)&&(h.exit_reason=H,e(1,h),e(47,s),e(46,K),e(49,f),e(48,u))}function ds(H){$s[H?"unshift":"push"](()=>{nt=H,e(7,nt)})}function Rn(H){n.$$.not_equal(h.notes,H)&&(h.notes=H,e(1,h),e(47,s),e(46,K),e(49,f),e(48,u))}function Ws(){D=this.value,e(4,D)}const hn=H=>H.key==="Enter"&&(H.preventDefault(),at()),Vs=H=>vt(H),ps=()=>ye("/"),Qe=H=>{H.stopPropagation(),Dt()};return n.$$set=H=>{"id"in H&&e(0,p=H.id)},n.$$.update=()=>{if(n.$$.dirty[1]&393216&&e(47,s=f.find(H=>H.id===u)),n.$$.dirty[1]&65536&&s&&e(1,h.timezone_offset=s.timezone_offset,h),n.$$.dirty[0]&2&&h.entry_strategy!=="legend"&&h.entry_timeframe==="SuperK"&&e(1,h.entry_timeframe="",h),n.$$.dirty[0]&2){const{trade_type:H,entry_price:J,exit_price:pt,lot_size:At,initial_sl:Ft,pnl:Ht,symbol:Yt,side:le}=h;if(H==="actual"&&J){const te=parseFloat(J),ue=parseFloat(pt),li=parseFloat(Ft),$e=parseFloat(At);let De=100;if(Yt.includes("JPY")?De=1e3:(Yt.includes("EUR")||Yt.includes("GBP")||Yt.includes("AUD")||Yt.includes("USD")&&!Yt.includes("XAU"))&&(De=1e5),!isNaN(te)&&!isNaN(ue)){const Zn=ue-te,Pn=Math.round(Zn*(le==="long"?1:-1)*De*100)/100;h.pnl_points!==Pn&&e(1,h.pnl_points=Pn,h)}if(!isNaN(te)&&!isNaN(li)&&!isNaN($e)){const Zn=Math.abs(te-li),Pn=Math.round(Zn*De*$e*100)/100;h.bullet_size!==Pn&&e(1,h.bullet_size=Pn,h)}const Ve=parseFloat(Ht),je=parseFloat(h.bullet_size);if(!isNaN(Ve)&&!isNaN(je)&&je!==0){const Zn=Math.round(Ve/je*100)/100;h.rr_ratio!==Zn&&e(1,h.rr_ratio=Zn,h)}}}n.$$.dirty[0]&2&&h.entry_time&&h.timezone_offset!==null&&e(1,h.market_session=_T(h.entry_time,h.timezone_offset),h),n.$$.dirty[0]&2|n.$$.dirty[1]&32768&&h.side!==K&&h.entry_strategy==="expert"&&(e(1,h.entry_signals=[],h),e(46,K=h.side)),n.$$.dirty[0]&2&&e(13,i=h.trade_type==="actual"),n.$$.dirty[0]&2&&e(18,r=h.side==="long"?_:b),n.$$.dirty[0]&2&&e(17,l=[{label:"1",value:"M1"},{label:"5",value:"M5"},{label:"15",value:"M15"},{label:"1",value:"H1"},{label:"4",value:"H4"},{label:"",value:"D1"},...h.entry_strategy==="legend"?[{label:"k",value:"SuperK"}]:[]]),n.$$.dirty[0]&4&&e(16,o=U.reduce((H,J)=>H+(J.lot_size||0),0)),n.$$.dirty[0]&4&&e(15,a=U.reduce((H,J)=>H+(J.pnl||0),0)),n.$$.dirty[0]&2|n.$$.dirty[1]&16384&&e(14,c=(()=>{if(!h.entry_time||!h.market_session||Z.length===0)return null;try{const H=new Date(h.entry_time).toISOString().slice(0,10);return Z.find(J=>{if(new Date(J.plan_date).toISOString().slice(0,10)!==H||(J.symbol||Ts[0])!==h.symbol)return!1;if(J.market_session==="all")try{const Ht=JSON.parse(J.trend_analysis||"{}")[h.market_session];return Ht&&(Ht.notes||Ht.trends&&Object.values(Ht.trends).some(Yt=>Yt.direction))}catch{return!1}else return J.market_session===h.market_session})}catch{return null}})())},[p,h,U,w,D,L,F,nt,et,W,V,st,Ct,i,c,a,o,l,r,m,A,E,T,C,M,x,at,vt,ct,ft,ut,Nt,yt,z,Y,dt,Ut,$t,ht,St,it,Dt,zt,Q,lt,Z,K,s,u,f,kt,Mt,Pt,Tt,mt,Bt,_t,me,qe,de,Xt,nn,Ze,Je,ne,re,ve,Yn,Ie,ce,Mn,Ln,Xn,sn,ke,rs,rn,Jt,pe,Gn,ls,vn,Ee,os,as,cs,Es,us,xe,Ci,Nn,si,Oi,fs,Fe,xi,In,ii,Mi,jn,zn,ri,Dn,Me,Us,hs,Li,Cs,Ni,ds,Rn,Ws,hn,Vs,ps,Qe]}class yp extends Fn{constructor(t){super(),qn(this,t,yT,mT,bn,{id:0},null,[-1,-1,-1,-1,-1,-1])}}function il(n){if(!n)return"";const t=new Date(n),e=t.getMonth()+1,s=e>=3&&e<=11,i=t.getUTCHours(),r=t.getUTCMinutes(),o=(i+8+24)%24*60+r,a=8*60,c=15*60;let u,f;s?(u=15*60,f=23*60):(u=16*60,f=24*60);let p,m;if(s?(p=20*60,m=4*60):(p=21*60,m=5*60),o>=a&&o<c)return"asian";if(o>=p||o<m)return"us";if(s){if(o>=u&&o<f)return"european"}else if(o>=u||o<0)return"european";return"asian"}function kp(n,t,e){const s=n.slice();s[44]=t[e];const i=s[8](s[44]);return s[45]=i,s}function wp(n,t,e){const s=n.slice();return s[49]=t[e],s}function wc(n){const t=n.slice(),e=yu(t[44].entry_pattern,[]);return t[48]=e,t}function Sp(n,t,e){const s=n.slice();return s[52]=t[e],s}function Ap(n,t,e){const s=n.slice();return s[55]=t[e],s}function Tp(n,t,e){const s=n.slice();return s[58]=t[e],s}function Sc(n){const t=n.slice(),e=t[62].trends||{};t[63]=e;const s=Object.entries(t[63]).filter(([r,l])=>l.direction==="long").map(([r,l])=>r);t[64]=s;const i=Object.entries(t[63]).filter(([r,l])=>l.direction==="short").map(([r,l])=>r);return t[65]=i,t}function kT(n){const t=n.slice(),e=JSON.parse(t[45].trend_analysis||"{}");t[61]=e;const s=t[61][t[44].market_session];return t[62]=s,t}function Ep(n,t,e){const s=n.slice();return s[58]=t[e],s}function wT(n,t,e){const s=n.slice();return s[68]=t[e],s}function ST(n){let t;return{c(){t=v("div"),t.innerHTML="<h3> </h3>",g(t,"class","header svelte-172w7lf")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function AT(n){let t,e,s,i,r,l,o,a,c,u,f,p,m,h,_,b,y,w,A,E,T,C,M,x,D,L,q,F,nt,et,U,W,V,$,st,Z,wt,rt,at,vt,K,ct,ft=bt(Ts),ut=[];for(let z=0;z<ft.length;z+=1)ut[z]=TT(wT(n,ft,z));let Nt=bt(n[6]),yt=[];for(let z=0;z<Nt.length;z+=1)yt[z]=Cp(Ep(n,Nt,z));return{c(){t=v("div"),e=v("h2"),e.textContent=" ",s=S(),i=v("button"),i.textContent=" ",r=S(),l=v("div"),o=v("div"),a=v("label"),a.textContent="",c=S(),u=v("select"),f=v("option"),f.textContent="";for(let z=0;z<ut.length;z+=1)ut[z].c();p=S(),m=v("div"),h=v("label"),h.textContent="",_=S(),b=v("select"),y=v("option"),y.textContent="",w=v("option"),w.textContent="",A=v("option"),A.textContent="",E=S(),T=v("div"),C=v("label"),C.textContent="",M=S(),x=v("select"),D=v("option"),D.textContent="";for(let z=0;z<yt.length;z+=1)yt[z].c();L=S(),q=v("div"),F=v("label"),F.textContent="",nt=S(),et=v("input"),U=S(),W=v("div"),V=v("label"),V.textContent="",$=S(),st=v("input"),Z=S(),wt=v("div"),rt=v("button"),rt.textContent="",at=S(),vt=v("button"),vt.textContent="",g(e,"class","svelte-172w7lf"),g(i,"class","btn btn-primary"),g(t,"class","header svelte-172w7lf"),g(a,"class","svelte-172w7lf"),f.__value="",xt(f,f.__value),g(u,"class","form-control"),n[5].symbol===void 0&&gn(()=>n[19].call(u)),g(o,"class","filter-group svelte-172w7lf"),g(h,"class","svelte-172w7lf"),y.__value="",xt(y,y.__value),w.__value="long",xt(w,w.__value),A.__value="short",xt(A,A.__value),g(b,"class","form-control"),n[5].side===void 0&&gn(()=>n[20].call(b)),g(m,"class","filter-group svelte-172w7lf"),g(C,"class","svelte-172w7lf"),D.__value="",xt(D,D.__value),g(x,"class","form-control"),n[5].tag===void 0&&gn(()=>n[21].call(x)),g(T,"class","filter-group svelte-172w7lf"),g(F,"class","svelte-172w7lf"),g(et,"type","date"),g(et,"class","form-control"),g(q,"class","filter-group svelte-172w7lf"),g(V,"class","svelte-172w7lf"),g(st,"type","date"),g(st,"class","form-control"),g(W,"class","filter-group svelte-172w7lf"),g(rt,"class","btn btn-primary"),g(vt,"class","btn"),g(wt,"class","filter-actions svelte-172w7lf"),g(l,"class","filters svelte-172w7lf")},m(z,Y){I(z,t,Y),d(t,e),d(t,s),d(t,i),I(z,r,Y),I(z,l,Y),d(l,o),d(o,a),d(o,c),d(o,u),d(u,f);for(let dt=0;dt<ut.length;dt+=1)ut[dt]&&ut[dt].m(u,null);Te(u,n[5].symbol,!0),d(l,p),d(l,m),d(m,h),d(m,_),d(m,b),d(b,y),d(b,w),d(b,A),Te(b,n[5].side,!0),d(l,E),d(l,T),d(T,C),d(T,M),d(T,x),d(x,D);for(let dt=0;dt<yt.length;dt+=1)yt[dt]&&yt[dt].m(x,null);Te(x,n[5].tag,!0),d(l,L),d(l,q),d(q,F),d(q,nt),d(q,et),xt(et,n[5].start_date),d(l,U),d(l,W),d(W,V),d(W,$),d(W,st),xt(st,n[5].end_date),d(l,Z),d(l,wt),d(wt,rt),d(wt,at),d(wt,vt),K||(ct=[j(i,"click",n[18]),j(u,"change",n[19]),j(b,"change",n[20]),j(x,"change",n[21]),j(et,"input",n[22]),j(st,"input",n[23]),j(rt,"click",n[11]),j(vt,"click",n[12])],K=!0)},p(z,Y){if(Y[0]&32&&Te(u,z[5].symbol),Y[0]&32&&Te(b,z[5].side),Y[0]&64){Nt=bt(z[6]);let dt;for(dt=0;dt<Nt.length;dt+=1){const Ut=Ep(z,Nt,dt);yt[dt]?yt[dt].p(Ut,Y):(yt[dt]=Cp(Ut),yt[dt].c(),yt[dt].m(x,null))}for(;dt<yt.length;dt+=1)yt[dt].d(1);yt.length=Nt.length}Y[0]&32&&Te(x,z[5].tag),Y[0]&32&&xt(et,z[5].start_date),Y[0]&32&&xt(st,z[5].end_date)},d(z){z&&(N(t),N(r),N(l)),Gt(ut,z),Gt(yt,z),K=!1,Vt(ct)}}}function TT(n){let t;return{c(){t=v("option"),t.textContent=`${n[68]}`,t.__value=n[68],xt(t,t.__value)},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function Cp(n){let t,e=n[58].name+"",s,i;return{c(){t=v("option"),s=P(e),t.__value=i=n[58].name,xt(t,t.__value)},m(r,l){I(r,t,l),d(t,s)},p(r,l){l[0]&64&&e!==(e=r[58].name+"")&&G(s,e),l[0]&64&&i!==(i=r[58].name)&&(t.__value=i,xt(t,t.__value))},d(r){r&&N(t)}}}function ET(n){let t,e=[],s=new Map,i,r,l,o,a,c,u,f,p=n[4].page+"",m,h,_=Math.ceil(n[4].total/n[4].page_size)+"",b,y,w,A,E,T,C,M,x=bt(n[2]);const D=L=>L[44].id;for(let L=0;L<x.length;L+=1){let q=kp(n,x,L),F=D(q);s.set(F,e[L]=Qp(F,q))}return{c(){t=v("div");for(let L=0;L<e.length;L+=1)e[L].c();i=S(),r=v("div"),l=v("button"),o=P(""),c=S(),u=v("span"),f=P(" "),m=P(p),h=P("  "),b=P(_),y=P(" "),w=S(),A=v("button"),E=P(""),g(t,"class","trades-grid svelte-172w7lf"),g(l,"class","btn"),l.disabled=a=n[4].page===1,g(u,"class","svelte-172w7lf"),g(A,"class","btn"),A.disabled=T=n[4].page>=Math.ceil(n[4].total/n[4].page_size),g(r,"class","pagination svelte-172w7lf")},m(L,q){I(L,t,q);for(let F=0;F<e.length;F+=1)e[F]&&e[F].m(t,null);I(L,i,q),I(L,r,q),d(r,l),d(l,o),d(r,c),d(r,u),d(u,f),d(u,m),d(u,h),d(u,b),d(u,y),d(r,w),d(r,A),d(A,E),C||(M=[j(l,"click",n[38]),j(A,"click",n[39])],C=!0)},p(L,q){q[0]&18180&&(x=bt(L[2]),e=ju(e,q,D,1,L,x,s,t,Fu,Qp,null,kp)),q[0]&16&&a!==(a=L[4].page===1)&&(l.disabled=a),q[0]&16&&p!==(p=L[4].page+"")&&G(m,p),q[0]&16&&_!==(_=Math.ceil(L[4].total/L[4].page_size)+"")&&G(b,_),q[0]&16&&T!==(T=L[4].page>=Math.ceil(L[4].total/L[4].page_size))&&(A.disabled=T)},i:Et,o:Et,d(L){L&&(N(t),N(i),N(r));for(let q=0;q<e.length;q+=1)e[q].d();C=!1,Vt(M)}}}function CT(n){let t,e,s,i,r;return i=new Uo({props:{to:"/new",class:"btn btn-primary",$$slots:{default:[FT]},$$scope:{ctx:n}}}),{c(){t=v("div"),e=v("p"),e.textContent=" ",s=S(),He(i.$$.fragment),g(e,"class","svelte-172w7lf"),g(t,"class","empty svelte-172w7lf")},m(l,o){I(l,t,o),d(t,e),d(t,s),Re(i,t,null),r=!0},p(l,o){const a={};o[2]&512&&(a.$$scope={dirty:o,ctx:l}),i.$set(a)},i(l){r||(Wt(i.$$.fragment,l),r=!0)},o(l){Kt(i.$$.fragment,l),r=!1},d(l){l&&N(t),Pe(i)}}}function OT(n){let t;return{c(){t=v("div"),t.textContent="...",g(t,"class","loading svelte-172w7lf")},m(e,s){I(e,t,s)},p:Et,i:Et,o:Et,d(e){e&&N(t)}}}function Op(n){let t,e=tg(n[44].entry_strategy)+"",s,i;return{c(){t=v("span"),s=P(e),g(t,"class",i="strategy-badge "+n[44].entry_strategy+" svelte-172w7lf")},m(r,l){I(r,t,l),d(t,s)},p(r,l){l[0]&4&&e!==(e=tg(r[44].entry_strategy)+"")&&G(s,e),l[0]&4&&i!==(i="strategy-badge "+r[44].entry_strategy+" svelte-172w7lf")&&g(t,"class",i)},d(r){r&&N(t)}}}function xp(n){let t,e,s,i,r=n[44].exit_price+"",l;return{c(){t=v("span"),e=v("span"),e.textContent=":",s=S(),i=v("span"),l=P(r),g(e,"class","compact-label"),g(i,"class","compact-value svelte-172w7lf"),g(t,"class","compact-item svelte-172w7lf")},m(o,a){I(o,t,a),d(t,e),d(t,s),d(t,i),d(i,l)},p(o,a){a[0]&4&&r!==(r=o[44].exit_price+"")&&G(l,r)},d(o){o&&N(t)}}}function Mp(n){let t,e,s,i,r=n[44].initial_sl+"",l,o,a,c,u=n[44].bullet_size&&Lp(n),f=n[44].rr_ratio&&Np(n);return{c(){t=v("span"),e=v("span"),e.textContent=":",s=S(),i=v("span"),l=P(r),o=S(),u&&u.c(),a=S(),f&&f.c(),c=ie(),g(e,"class","compact-label"),g(i,"class","compact-value svelte-172w7lf"),g(t,"class","compact-item svelte-172w7lf")},m(p,m){I(p,t,m),d(t,e),d(t,s),d(t,i),d(i,l),I(p,o,m),u&&u.m(p,m),I(p,a,m),f&&f.m(p,m),I(p,c,m)},p(p,m){m[0]&4&&r!==(r=p[44].initial_sl+"")&&G(l,r),p[44].bullet_size?u?u.p(p,m):(u=Lp(p),u.c(),u.m(a.parentNode,a)):u&&(u.d(1),u=null),p[44].rr_ratio?f?f.p(p,m):(f=Np(p),f.c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null)},d(p){p&&(N(t),N(o),N(a),N(c)),u&&u.d(p),f&&f.d(p)}}}function Lp(n){let t,e,s,i,r=n[44].bullet_size.toFixed(1)+"",l;return{c(){t=v("span"),e=v("span"),e.textContent=":",s=S(),i=v("span"),l=P(r),g(e,"class","compact-label"),g(i,"class","compact-value svelte-172w7lf"),g(t,"class","compact-item svelte-172w7lf")},m(o,a){I(o,t,a),d(t,e),d(t,s),d(t,i),d(i,l)},p(o,a){a[0]&4&&r!==(r=o[44].bullet_size.toFixed(1)+"")&&G(l,r)},d(o){o&&N(t)}}}function Np(n){let t,e,s,i,r=n[44].rr_ratio.toFixed(2)+"",l;return{c(){t=v("span"),e=v("span"),e.textContent=":",s=S(),i=v("span"),l=P(r),g(e,"class","compact-label"),g(i,"class","compact-value svelte-172w7lf"),g(t,"class","compact-item svelte-172w7lf")},m(o,a){I(o,t,a),d(t,e),d(t,s),d(t,i),d(i,l)},p(o,a){a[0]&4&&r!==(r=o[44].rr_ratio.toFixed(2)+"")&&G(l,r)},d(o){o&&N(t)}}}function Ip(n){let t,e=n[44].pnl>=0?"+":"",s,i=n[44].pnl.toFixed(2)+"",r,l;return{c(){t=v("span"),s=P(e),r=P(i),g(t,"class",l="pnl "+(n[44].pnl>=0?"profit":"loss")+" svelte-172w7lf"),en(t,"margin-right","1.5rem")},m(o,a){I(o,t,a),d(t,s),d(t,r)},p(o,a){a[0]&4&&e!==(e=o[44].pnl>=0?"+":"")&&G(s,e),a[0]&4&&i!==(i=o[44].pnl.toFixed(2)+"")&&G(r,i),a[0]&4&&l!==(l="pnl "+(o[44].pnl>=0?"profit":"loss")+" svelte-172w7lf")&&g(t,"class",l)},d(o){o&&N(t)}}}function xT(n){let t,e,s,i,r,l;function o(){return n[27](n[44])}return{c(){t=v("div"),e=v("span"),e.textContent=" ",s=S(),i=v("button"),i.textContent=" ",g(e,"class","plan-badge missing svelte-172w7lf"),g(i,"class","btn btn-sm btn-outline-primary svelte-172w7lf"),g(t,"class","no-plan-info svelte-172w7lf")},m(a,c){I(a,t,c),d(t,e),d(t,s),d(t,i),r||(l=j(i,"click",he(o)),r=!0)},p(a,c){n=a},d(a){a&&N(t),r=!1,l()}}}function MT(n){let t,e,s,i,r;function l(p,m){if(p[45].market_session==="all")return Dp;if(p[45].notes&&p[45].notes!=="Session-based unified plan")return LT}function o(p,m){return m===Dp?kT(p):p}let a=l(n),c=a&&a(o(n,a));function u(){return n[25](n[45])}function f(...p){return n[26](n[45],...p)}return{c(){t=v("div"),e=v("span"),e.textContent=" ",s=S(),c&&c.c(),g(e,"class","plan-badge svelte-172w7lf"),g(t,"class","matched-plan-info svelte-172w7lf"),g(t,"role","button"),g(t,"tabindex","0")},m(p,m){I(p,t,m),d(t,e),d(t,s),c&&c.m(t,null),i||(r=[j(t,"click",he(u)),j(t,"keydown",he(f))],i=!0)},p(p,m){n=p,a===(a=l(n))&&c?c.p(o(n,a),m):(c&&c.d(1),c=a&&a(o(n,a)),c&&(c.c(),c.m(t,null)))},d(p){p&&N(t),c&&c.d(),i=!1,Vt(r)}}}function LT(n){let t,e=n[45].notes.slice(0,50)+"",s,i=n[45].notes.length>50?"...":"",r;return{c(){t=v("p"),s=P(e),r=P(i),g(t,"class","plan-summary-text")},m(l,o){I(l,t,o),d(t,s),d(t,r)},p(l,o){o[0]&4&&e!==(e=l[45].notes.slice(0,50)+"")&&G(s,e),o[0]&4&&i!==(i=l[45].notes.length>50?"...":"")&&G(r,i)},d(l){l&&N(t)}}}function Dp(n){let t,e=n[62]&&Rp(Sc(n));return{c(){e&&e.c(),t=ie()},m(s,i){e&&e.m(s,i),I(s,t,i)},p(s,i){s[62]?e?e.p(Sc(s),i):(e=Rp(Sc(s)),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(s){s&&N(t),e&&e.d(s)}}}function Rp(n){let t,e,s=n[64].length>0&&Pp(n),i=n[65].length>0&&Bp(n);return{c(){t=v("div"),s&&s.c(),e=S(),i&&i.c(),g(t,"class","plan-summary-group svelte-172w7lf")},m(r,l){I(r,t,l),s&&s.m(t,null),d(t,e),i&&i.m(t,null)},p(r,l){r[64].length>0?s?s.p(r,l):(s=Pp(r),s.c(),s.m(t,e)):s&&(s.d(1),s=null),r[65].length>0?i?i.p(r,l):(i=Bp(r),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(r){r&&N(t),s&&s.d(),i&&i.d()}}}function Pp(n){let t,e=n[64].join(", ")+"",s;return{c(){t=v("span"),s=P(e),g(t,"class","trend-item bullish svelte-172w7lf")},m(i,r){I(i,t,r),d(t,s)},p(i,r){r[0]&4&&e!==(e=i[64].join(", ")+"")&&G(s,e)},d(i){i&&N(t)}}}function Bp(n){let t,e=n[65].join(", ")+"",s;return{c(){t=v("span"),s=P(e),g(t,"class","trend-item bearish svelte-172w7lf")},m(i,r){I(i,t,r),d(t,s)},p(i,r){r[0]&4&&e!==(e=i[65].join(", ")+"")&&G(s,e)},d(i){i&&N(t)}}}function qp(n){let t,e=bt(n[44].tags),s=[];for(let i=0;i<e.length;i+=1)s[i]=Fp(Tp(n,e,i));return{c(){t=v("div");for(let i=0;i<s.length;i+=1)s[i].c();g(t,"class","trade-tags svelte-172w7lf")},m(i,r){I(i,t,r);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null)},p(i,r){if(r[0]&4){e=bt(i[44].tags);let l;for(l=0;l<e.length;l+=1){const o=Tp(i,e,l);s[l]?s[l].p(o,r):(s[l]=Fp(o),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=e.length}},d(i){i&&N(t),Gt(s,i)}}}function Fp(n){let t,e,s=n[58].name+"",i;return{c(){t=v("span"),e=P("#"),i=P(s),g(t,"class","tag svelte-172w7lf")},m(r,l){I(r,t,l),d(t,e),d(t,i)},p(r,l){l[0]&4&&s!==(s=r[58].name+"")&&G(i,s)},d(r){r&&N(t)}}}function jp(n){let t,e,s=n[44].entry_reason&&zp(n),i=n[44].exit_reason&&Hp(n);return{c(){t=v("div"),s&&s.c(),e=S(),i&&i.c(),g(t,"class","trade-reasons svelte-172w7lf")},m(r,l){I(r,t,l),s&&s.m(t,null),d(t,e),i&&i.m(t,null)},p(r,l){r[44].entry_reason?s?s.p(r,l):(s=zp(r),s.c(),s.m(t,e)):s&&(s.d(1),s=null),r[44].exit_reason?i?i.p(r,l):(i=Hp(r),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(r){r&&N(t),s&&s.d(),i&&i.d()}}}function zp(n){let t,e,s,i,r=n[44].entry_reason+"",l,o;return{c(){t=v("div"),e=v("span"),e.textContent=" ",s=S(),i=v("div"),g(e,"class","reason-label svelte-172w7lf"),g(i,"class","reason-content svelte-172w7lf"),g(i,"role","presentation"),g(t,"class","reason-item")},m(a,c){I(a,t,c),d(t,e),d(t,s),d(t,i),i.innerHTML=r,l||(o=j(i,"click",zT),l=!0)},p(a,c){c[0]&4&&r!==(r=a[44].entry_reason+"")&&(i.innerHTML=r)},d(a){a&&N(t),l=!1,o()}}}function Hp(n){let t,e,s,i,r=n[44].exit_reason+"",l,o;return{c(){t=v("div"),e=v("span"),e.textContent=" ",s=S(),i=v("div"),g(e,"class","reason-label svelte-172w7lf"),g(i,"class","reason-content svelte-172w7lf"),g(i,"role","presentation"),g(t,"class","reason-item")},m(a,c){I(a,t,c),d(t,e),d(t,s),d(t,i),i.innerHTML=r,l||(o=j(i,"click",HT),l=!0)},p(a,c){c[0]&4&&r!==(r=a[44].exit_reason+"")&&(i.innerHTML=r)},d(a){a&&N(t),l=!1,o()}}}function Up(n){let t,e,s,i,r=n[44].notes+"",l,o;return{c(){t=v("div"),e=v("span"),e.textContent=" ",s=S(),i=v("div"),g(e,"class","reason-label svelte-172w7lf"),g(i,"class","notes-content svelte-172w7lf"),g(t,"class","trade-notes svelte-172w7lf")},m(a,c){I(a,t,c),d(t,e),d(t,s),d(t,i),i.innerHTML=r,l||(o=j(i,"click",UT),l=!0)},p(a,c){c[0]&4&&r!==(r=a[44].notes+"")&&(i.innerHTML=r)},d(a){a&&N(t),l=!1,o()}}}function Wp(n){let t,e,s,i=bt(n[44].images),r=[];for(let a=0;a<i.length;a+=1)r[a]=Vp(Ap(n,i,a));let l=n[44].entry_signals&&Kp(n),o=n[44].entry_pattern&&Gp(wc(n));return{c(){t=v("div");for(let a=0;a<r.length;a+=1)r[a].c();e=S(),l&&l.c(),s=S(),o&&o.c(),g(t,"class","trade-images svelte-172w7lf")},m(a,c){I(a,t,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(t,null);d(t,e),l&&l.m(t,null),d(t,s),o&&o.m(t,null)},p(a,c){if(c[0]&16388){i=bt(a[44].images);let u;for(u=0;u<i.length;u+=1){const f=Ap(a,i,u);r[u]?r[u].p(f,c):(r[u]=Vp(f),r[u].c(),r[u].m(t,e))}for(;u<r.length;u+=1)r[u].d(1);r.length=i.length}a[44].entry_signals?l?l.p(a,c):(l=Kp(a),l.c(),l.m(t,s)):l&&(l.d(1),l=null),a[44].entry_pattern?o?o.p(wc(a),c):(o=Gp(wc(a)),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(a){a&&N(t),Gt(r,a),l&&l.d(),o&&o.d()}}}function NT(n){let t;return{c(){t=P(" ")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function IT(n){let t;return{c(){t=P(" ")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function DT(n){let t;return{c(){t=P(" ")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function RT(n){let t;return{c(){t=P(" ")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function PT(n){let t;return{c(){t=P(" ")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function Vp(n){let t,e,s,i,r,l,o,a,c;function u(..._){return n[28](n[55],..._)}function f(_,b){return _[55].image_type==="entry"?PT:_[55].image_type==="exit"?RT:_[55].image_type==="trailing_stop"?DT:_[55].image_type==="observation"?IT:NT}let p=f(n),m=p(n);function h(..._){return n[29](n[55],..._)}return{c(){t=v("button"),e=v("img"),r=S(),l=v("span"),m.c(),o=S(),ae(e.src,s=Gi.getUrl(n[55].image_path))||g(e,"src",s),g(e,"alt",i=n[55].image_type),g(e,"class","svelte-172w7lf"),g(l,"class","image-label"),g(t,"class","image-thumb svelte-172w7lf"),g(t,"title","")},m(_,b){I(_,t,b),d(t,e),d(t,r),d(t,l),m.m(l,null),d(t,o),a||(c=[j(e,"error",u),j(t,"click",h)],a=!0)},p(_,b){n=_,b[0]&4&&!ae(e.src,s=Gi.getUrl(n[55].image_path))&&g(e,"src",s),b[0]&4&&i!==(i=n[55].image_type)&&g(e,"alt",i),p!==(p=f(n))&&(m.d(1),m=p(n),m&&(m.c(),m.m(l,null)))},d(_){_&&N(t),m.d(),a=!1,Vt(c)}}}function Kp(n){let t,e=bt(yu(n[44].entry_signals,[])),s=[];for(let i=0;i<e.length;i+=1)s[i]=Xp(Sp(n,e,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();t=ie()},m(i,r){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(i,r);I(i,t,r)},p(i,r){if(r[0]&16388){e=bt(yu(i[44].entry_signals,[]));let l;for(l=0;l<e.length;l+=1){const o=Sp(i,e,l);s[l]?s[l].p(o,r):(s[l]=Xp(o),s[l].c(),s[l].m(t.parentNode,t))}for(;l<s.length;l+=1)s[l].d(1);s.length=e.length}},d(i){i&&N(t),Gt(s,i)}}}function Yp(n){let t,e,s,i,r,l,o,a=n[52].name+"",c,u,f,p,m;function h(...b){return n[30](n[52],...b)}function _(...b){return n[31](n[52],...b)}return{c(){t=v("button"),e=v("img"),r=S(),l=v("span"),o=P(" "),c=P(a),u=S(),ae(e.src,s=n[52].image)||g(e,"src",s),g(e,"alt",i=n[52].name),g(e,"class","svelte-172w7lf"),g(l,"class","image-label"),g(t,"class","image-thumb svelte-172w7lf"),g(t,"title",f=" "+n[52].name+" ")},m(b,y){I(b,t,y),d(t,e),d(t,r),d(t,l),d(l,o),d(l,c),d(t,u),p||(m=[j(e,"error",h),j(t,"click",_)],p=!0)},p(b,y){n=b,y[0]&4&&!ae(e.src,s=n[52].image)&&g(e,"src",s),y[0]&4&&i!==(i=n[52].name)&&g(e,"alt",i),y[0]&4&&a!==(a=n[52].name+"")&&G(c,a),y[0]&4&&f!==(f=" "+n[52].name+" ")&&g(t,"title",f)},d(b){b&&N(t),p=!1,Vt(m)}}}function Xp(n){let t,e=n[52].image&&Yp(n);return{c(){e&&e.c(),t=ie()},m(s,i){e&&e.m(s,i),I(s,t,i)},p(s,i){s[52].image?e?e.p(s,i):(e=Yp(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(s){s&&N(t),e&&e.d(s)}}}function Gp(n){let t,e;function s(l,o){if(o[0]&4&&(t=null),t==null&&(t=!!Array.isArray(l[48])),t)return qT;if(typeof l[44].entry_pattern=="string"&&l[44].entry_strategy_image)return BT}let i=s(n,[-1,-1,-1]),r=i&&i(n);return{c(){r&&r.c(),e=ie()},m(l,o){r&&r.m(l,o),I(l,e,o)},p(l,o){i===(i=s(l,o))&&r?r.p(l,o):(r&&r.d(1),r=i&&i(l),r&&(r.c(),r.m(e.parentNode,e)))},d(l){l&&N(e),r&&r.d(l)}}}function BT(n){let t,e,s,i,r,l,o=n[44].entry_pattern+"",a,c,u;function f(...p){return n[35](n[44],...p)}return{c(){t=v("button"),e=v("img"),i=S(),r=v("span"),l=P(" "),a=P(o),ae(e.src,s=n[44].entry_strategy_image)||g(e,"src",s),g(e,"alt",""),g(e,"class","svelte-172w7lf"),g(r,"class","image-label"),g(t,"class","image-thumb svelte-172w7lf"),g(t,"title","")},m(p,m){I(p,t,m),d(t,e),d(t,i),d(t,r),d(r,l),d(r,a),c||(u=[j(e,"error",n[34]),j(t,"click",f)],c=!0)},p(p,m){n=p,m[0]&4&&!ae(e.src,s=n[44].entry_strategy_image)&&g(e,"src",s),m[0]&4&&o!==(o=n[44].entry_pattern+"")&&G(a,o)},d(p){p&&N(t),c=!1,Vt(u)}}}function qT(n){let t,e=bt(n[48]),s=[];for(let i=0;i<e.length;i+=1)s[i]=Jp(wp(n,e,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();t=ie()},m(i,r){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(i,r);I(i,t,r)},p(i,r){if(r[0]&16388){e=bt(i[48]);let l;for(l=0;l<e.length;l+=1){const o=wp(i,e,l);s[l]?s[l].p(o,r):(s[l]=Jp(o),s[l].c(),s[l].m(t.parentNode,t))}for(;l<s.length;l+=1)s[l].d(1);s.length=e.length}},d(i){i&&N(t),Gt(s,i)}}}function Zp(n){let t,e,s,i,r,l,o,a=n[49].name+"",c,u,f,p,m;function h(...b){return n[32](n[49],...b)}function _(...b){return n[33](n[49],...b)}return{c(){t=v("button"),e=v("img"),r=S(),l=v("span"),o=P(" "),c=P(a),u=S(),ae(e.src,s=n[49].image)||g(e,"src",s),g(e,"alt",i=n[49].name),g(e,"class","svelte-172w7lf"),g(l,"class","image-label"),g(t,"class","image-thumb svelte-172w7lf"),g(t,"title",f=" "+n[49].name+" ")},m(b,y){I(b,t,y),d(t,e),d(t,r),d(t,l),d(l,o),d(l,c),d(t,u),p||(m=[j(e,"error",h),j(t,"click",_)],p=!0)},p(b,y){n=b,y[0]&4&&!ae(e.src,s=n[49].image)&&g(e,"src",s),y[0]&4&&i!==(i=n[49].name)&&g(e,"alt",i),y[0]&4&&a!==(a=n[49].name+"")&&G(c,a),y[0]&4&&f!==(f=" "+n[49].name+" ")&&g(t,"title",f)},d(b){b&&N(t),p=!1,Vt(m)}}}function Jp(n){let t,e=n[49].image&&Zp(n);return{c(){e&&e.c(),t=ie()},m(s,i){e&&e.m(s,i),I(s,t,i)},p(s,i){s[49].image?e?e.p(s,i):(e=Zp(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(s){s&&N(t),e&&e.d(s)}}}function Qp(n,t){let e,s,i,r,l,o,a=t[44].symbol+"",c,u,f,p=t[44].side==="long"?" ":" ",m,h,_,b,y,w,A,E,T=t[44].entry_price+"",C,M,x,D,L,q,F,nt,et=t[44].lot_size+"",U,W,V,$,st,Z,wt=eg(t[44].entry_time)+"",rt,at,vt,K,ct,ft,ut,Nt=t[9](t[44])+"",yt,z,Y,dt,Ut,$t,ht,St,Ct;function it(...de){return t[24](t[44],...de)}let Dt=t[44].entry_strategy&&Op(t),zt=t[44].exit_price&&xp(t),Q=t[44].initial_sl&&Mp(t),lt=t[44].pnl!==null&&Ip(t);function mt(de,Xt){return de[45]?MT:xT}let kt=mt(t),Mt=kt(t),Pt=t[44].tags&&t[44].tags.length>0&&qp(t),Tt=(t[44].entry_reason||t[44].exit_reason)&&jp(t),Bt=t[44].notes&&Up(t),_t=t[44].images&&t[44].images.length>0&&Wp(t);function me(){return t[36](t[44])}function qe(...de){return t[37](t[44],...de)}return{key:n,first:null,c(){e=v("div"),s=v("button"),s.textContent="",i=S(),r=v("div"),l=v("div"),o=v("h3"),c=P(a),u=S(),f=v("span"),m=P(p),_=S(),Dt&&Dt.c(),b=S(),y=v("span"),w=v("span"),w.textContent=":",A=S(),E=v("span"),C=P(T),M=S(),zt&&zt.c(),x=S(),Q&&Q.c(),D=S(),L=v("span"),q=v("span"),q.textContent=":",F=S(),nt=v("span"),U=P(et),W=S(),V=v("span"),$=v("span"),$.textContent=":",st=S(),Z=v("span"),rt=P(wt),at=S(),lt&&lt.c(),vt=S(),K=v("div"),ct=v("span"),ft=P(""),ut=v("strong"),yt=P(Nt),z=S(),Mt.c(),Y=S(),Pt&&Pt.c(),dt=S(),Tt&&Tt.c(),Ut=S(),Bt&&Bt.c(),$t=S(),_t&&_t.c(),ht=S(),g(s,"class","delete-btn svelte-172w7lf"),g(s,"title",""),g(o,"class","svelte-172w7lf"),g(f,"class",h="badge "+(t[44].side==="long"?"badge-danger":"badge-success")),g(w,"class","compact-label"),g(E,"class","compact-value svelte-172w7lf"),g(y,"class","compact-item svelte-172w7lf"),g(q,"class","compact-label"),g(nt,"class","compact-value svelte-172w7lf"),g(L,"class","compact-item svelte-172w7lf"),g($,"class","compact-label"),g(Z,"class","compact-value svelte-172w7lf"),g(V,"class","compact-item svelte-172w7lf"),g(l,"class","compact-left svelte-172w7lf"),g(r,"class","trade-header-compact svelte-172w7lf"),g(ut,"class","svelte-172w7lf"),g(ct,"class","session-label-inline svelte-172w7lf"),g(K,"class","daily-plan-match-section svelte-172w7lf"),g(e,"class","trade-card svelte-172w7lf"),g(e,"role","button"),g(e,"tabindex","0"),this.first=e},m(de,Xt){I(de,e,Xt),d(e,s),d(e,i),d(e,r),d(r,l),d(l,o),d(o,c),d(l,u),d(l,f),d(f,m),d(l,_),Dt&&Dt.m(l,null),d(l,b),d(l,y),d(y,w),d(y,A),d(y,E),d(E,C),d(l,M),zt&&zt.m(l,null),d(l,x),Q&&Q.m(l,null),d(l,D),d(l,L),d(L,q),d(L,F),d(L,nt),d(nt,U),d(l,W),d(l,V),d(V,$),d(V,st),d(V,Z),d(Z,rt),d(r,at),lt&&lt.m(r,null),d(e,vt),d(e,K),d(K,ct),d(ct,ft),d(ct,ut),d(ut,yt),d(K,z),Mt.m(K,null),d(e,Y),Pt&&Pt.m(e,null),d(e,dt),Tt&&Tt.m(e,null),d(e,Ut),Bt&&Bt.m(e,null),d(e,$t),_t&&_t.m(e,null),d(e,ht),St||(Ct=[j(s,"click",it),j(e,"click",me),j(e,"keydown",qe)],St=!0)},p(de,Xt){t=de,Xt[0]&4&&a!==(a=t[44].symbol+"")&&G(c,a),Xt[0]&4&&p!==(p=t[44].side==="long"?" ":" ")&&G(m,p),Xt[0]&4&&h!==(h="badge "+(t[44].side==="long"?"badge-danger":"badge-success"))&&g(f,"class",h),t[44].entry_strategy?Dt?Dt.p(t,Xt):(Dt=Op(t),Dt.c(),Dt.m(l,b)):Dt&&(Dt.d(1),Dt=null),Xt[0]&4&&T!==(T=t[44].entry_price+"")&&G(C,T),t[44].exit_price?zt?zt.p(t,Xt):(zt=xp(t),zt.c(),zt.m(l,x)):zt&&(zt.d(1),zt=null),t[44].initial_sl?Q?Q.p(t,Xt):(Q=Mp(t),Q.c(),Q.m(l,D)):Q&&(Q.d(1),Q=null),Xt[0]&4&&et!==(et=t[44].lot_size+"")&&G(U,et),Xt[0]&4&&wt!==(wt=eg(t[44].entry_time)+"")&&G(rt,wt),t[44].pnl!==null?lt?lt.p(t,Xt):(lt=Ip(t),lt.c(),lt.m(r,null)):lt&&(lt.d(1),lt=null),Xt[0]&4&&Nt!==(Nt=t[9](t[44])+"")&&G(yt,Nt),kt===(kt=mt(t))&&Mt?Mt.p(t,Xt):(Mt.d(1),Mt=kt(t),Mt&&(Mt.c(),Mt.m(K,null))),t[44].tags&&t[44].tags.length>0?Pt?Pt.p(t,Xt):(Pt=qp(t),Pt.c(),Pt.m(e,dt)):Pt&&(Pt.d(1),Pt=null),t[44].entry_reason||t[44].exit_reason?Tt?Tt.p(t,Xt):(Tt=jp(t),Tt.c(),Tt.m(e,Ut)):Tt&&(Tt.d(1),Tt=null),t[44].notes?Bt?Bt.p(t,Xt):(Bt=Up(t),Bt.c(),Bt.m(e,$t)):Bt&&(Bt.d(1),Bt=null),t[44].images&&t[44].images.length>0?_t?_t.p(t,Xt):(_t=Wp(t),_t.c(),_t.m(e,ht)):_t&&(_t.d(1),_t=null)},d(de){de&&N(e),Dt&&Dt.d(),zt&&zt.d(),Q&&Q.d(),lt&&lt.d(),Mt.d(),Pt&&Pt.d(),Tt&&Tt.d(),Bt&&Bt.d(),_t&&_t.d(),St=!1,Vt(Ct)}}}function FT(n){let t;return{c(){t=P("")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function $p(n){let t,e,s,i,r,l,o,a;return{c(){t=v("div"),e=v("div"),s=v("button"),s.textContent="",i=S(),r=v("img"),g(s,"class","modal-close svelte-172w7lf"),ae(r.src,l=n[7])||g(r,"src",l),g(r,"alt",""),g(r,"class","svelte-172w7lf"),g(e,"class","modal-content svelte-172w7lf"),g(t,"class","modal svelte-172w7lf")},m(c,u){I(c,t,u),d(t,e),d(e,s),d(e,i),d(e,r),o||(a=[j(s,"click",n[15]),j(e,"click",he(n[17])),j(t,"click",n[15])],o=!0)},p(c,u){u[0]&128&&!ae(r.src,l=c[7])&&g(r,"src",l)},d(c){c&&N(t),o=!1,Vt(a)}}}function jT(n){let t,e,s,i,r,l,o;function a(_,b){return _[0]?ST:AT}let c=a(n),u=c(n);const f=[OT,CT,ET],p=[];function m(_,b){return _[3]?0:_[2].length===0?1:2}s=m(n),i=p[s]=f[s](n);let h=n[7]&&$p(n);return{c(){t=v("div"),u.c(),e=S(),i.c(),r=S(),h&&h.c(),l=ie(),g(t,"class","card")},m(_,b){I(_,t,b),u.m(t,null),d(t,e),p[s].m(t,null),I(_,r,b),h&&h.m(_,b),I(_,l,b),o=!0},p(_,b){c===(c=a(_))&&u?u.p(_,b):(u.d(1),u=c(_),u&&(u.c(),u.m(t,e)));let y=s;s=m(_),s===y?p[s].p(_,b):(ns(),Kt(p[y],1,1,()=>{p[y]=null}),ss(),i=p[s],i?i.p(_,b):(i=p[s]=f[s](_),i.c()),Wt(i,1),i.m(t,null)),_[7]?h?h.p(_,b):(h=$p(_),h.c(),h.m(l.parentNode,l)):h&&(h.d(1),h=null)},i(_){o||(Wt(i),o=!0)},o(_){Kt(i),o=!1},d(_){_&&(N(t),N(r),N(l)),u.d(),p[s].d(),h&&h.d(_)}}}function tg(n){return{expert:" ",elite:" ",legend:" "}[n]||""}function eg(n){return new Date(n).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function yu(n,t){if(!n)return t;try{return JSON.parse(n)}catch{return t}}const zT=n=>n.stopPropagation(),HT=n=>n.stopPropagation(),UT=n=>n.stopPropagation();function WT(n,t,e){let s,i;Ye(n,Rs,z=>e(16,s=z)),Ye(n,ql,z=>e(1,i=z));let{isCompact:r=!1}=t,l=[],o=[],a=!0,c={page:1,page_size:20,total:0},u={symbol:"",side:"",tag:"",start_date:"",end_date:""},f=[],p=null;es(()=>{y()});async function m(){try{o=(await yi.getAll({account_id:s,page_size:100})).data.data||[]}catch(z){console.error(":",z)}}function h(z){if(!z.entry_time||!z.market_session||o.length===0)return null;try{const Y=new Date(z.entry_time).toISOString().slice(0,10);return o.find(dt=>{if(new Date(dt.plan_date).toISOString().slice(0,10)!==Y||(dt.symbol||Ts[0])!==z.symbol)return!1;if(dt.market_session==="all")try{const St=JSON.parse(dt.trend_analysis||"{}")[z.market_session];return St&&(St.notes||St.trends&&Object.values(St.trends).some(Ct=>Ct.direction))}catch{return!1}else return dt.market_session===z.market_session})}catch{return null}}function _(z){let Y=z.market_session;!Y&&z.entry_time&&(Y=il(z.entry_time));const dt=vs.find(Ut=>Ut.value===Y);return dt?dt.label:Y||""}async function b(){try{e(3,a=!0);const z={account_id:s,page:c.page,page_size:c.page_size,...u};Object.keys(z).forEach(dt=>{z[dt]===""&&delete z[dt]});const Y=await gi.getAll(z);e(2,l=Y.data.data||[]),e(4,c=Y.data.pagination)}catch(z){console.error(":",z),alert("")}finally{e(3,a=!1)}}async function y(){try{const z=await H2.getAll();e(6,f=z.data||[])}catch(z){console.error(":",z)}}async function w(z){var Y,dt;if(confirm(""))try{await gi.delete(z),alert(""),b()}catch(Ut){console.error(":",Ut),alert(""+(((dt=(Y=Ut.response)==null?void 0:Y.data)==null?void 0:dt.error)||Ut.message))}}function A(){e(4,c.page=1,c),b()}function E(){e(5,u={symbol:"",side:"",tag:"",start_date:"",end_date:""}),e(4,c.page=1,c),b()}function T(z){e(4,c.page=z,c),b()}function C(z){z&&(z.startsWith("data:image/")||z.startsWith("blob:")?e(7,p=z):e(7,p=Gi.getUrl(z)))}function M(){e(7,p=null)}function x(z){Jr.call(this,n,z)}const D=()=>ye(`/new?symbol=${i}`);function L(){u.symbol=As(this),e(5,u),e(1,i),e(16,s)}function q(){u.side=As(this),e(5,u),e(1,i),e(16,s)}function F(){u.tag=As(this),e(5,u),e(1,i),e(16,s)}function nt(){u.start_date=this.value,e(5,u),e(1,i),e(16,s)}function et(){u.end_date=this.value,e(5,u),e(1,i),e(16,s)}const U=(z,Y)=>{Y.stopPropagation(),w(z.id)},W=z=>ye(`/plans/edit/${z.id}`),V=(z,Y)=>(Y.key==="Enter"||Y.key===" ")&&ye(`/plans/edit/${z.id}`),$=z=>{const Y=new Date(z.entry_time).toISOString().slice(0,10);ye(`/plans/new?date=${Y}&session=${z.market_session}&symbol=${z.symbol}`)},st=(z,Y)=>{console.error(":",z.image_path),Y.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjE0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+5ZyW54mH6Yyy5aSx5pWXPC90ZXh0Pjwvc3ZnPg=="},Z=(z,Y)=>{Y.stopPropagation(),C(z.image_path)},wt=(z,Y)=>{console.error(":",z.name),Y.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjE0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+5ZyW54mH6Yyy5aSx5pWXPC90ZXh0Pjwvc3ZnPg=="},rt=(z,Y)=>{Y.stopPropagation(),C(z.image)},at=(z,Y)=>{console.error(":",z.name),Y.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjE0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+5ZyW54mH6Yyy5aSx5pWXPC90ZXh0Pjwvc3ZnPg=="},vt=(z,Y)=>{Y.stopPropagation(),C(z.image)},K=z=>{console.error(""),z.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjE0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+5ZyW54mH6Yyy5aSx5pWXPC90ZXh0Pjwvc3ZnPg=="},ct=(z,Y)=>{Y.stopPropagation(),C(z.entry_strategy_image)},ft=z=>ye(`/edit/${z.id}`),ut=(z,Y)=>(Y.key==="Enter"||Y.key===" ")&&ye(`/edit/${z.id}`),Nt=()=>T(c.page-1),yt=()=>T(c.page+1);return n.$$set=z=>{"isCompact"in z&&e(0,r=z.isCompact)},n.$$.update=()=>{n.$$.dirty[0]&65538&&(i||s)&&(e(5,u.symbol=i,u),e(4,c.page=1,c),b(),m())},[r,i,l,a,c,u,f,p,h,_,w,A,E,T,C,M,s,x,D,L,q,F,nt,et,U,W,V,$,st,Z,wt,rt,at,vt,K,ct,ft,ut,Nt,yt]}class VT extends Fn{constructor(t){super(),qn(this,t,WT,jT,bn,{isCompact:0},null,[-1,-1,-1])}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ho(n){return n+.5|0}const zi=(n,t,e)=>Math.max(Math.min(n,e),t);function kl(n){return zi(ho(n*2.55),0,255)}function Yi(n){return zi(ho(n*255),0,255)}function di(n){return zi(ho(n/2.55)/100,0,1)}function ng(n){return zi(ho(n*100),0,100)}const _s={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ku=[..."0123456789ABCDEF"],KT=n=>ku[n&15],YT=n=>ku[(n&240)>>4]+ku[n&15],Co=n=>(n&240)>>4===(n&15),XT=n=>Co(n.r)&&Co(n.g)&&Co(n.b)&&Co(n.a);function GT(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&_s[n[1]]*17,g:255&_s[n[2]]*17,b:255&_s[n[3]]*17,a:t===5?_s[n[4]]*17:255}:(t===7||t===9)&&(e={r:_s[n[1]]<<4|_s[n[2]],g:_s[n[3]]<<4|_s[n[4]],b:_s[n[5]]<<4|_s[n[6]],a:t===9?_s[n[7]]<<4|_s[n[8]]:255})),e}const ZT=(n,t)=>n<255?t(n):"";function JT(n){var t=XT(n)?KT:YT;return n?"#"+t(n.r)+t(n.g)+t(n.b)+ZT(n.a,t):void 0}const QT=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _0(n,t,e){const s=t*Math.min(e,1-e),i=(r,l=(r+n/30)%12)=>e-s*Math.max(Math.min(l-3,9-l,1),-1);return[i(0),i(8),i(4)]}function $T(n,t,e){const s=(i,r=(i+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function tE(n,t,e){const s=_0(n,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)s[i]*=1-t-e,s[i]+=t;return s}function eE(n,t,e,s,i){return n===i?(t-e)/s+(t<e?6:0):t===i?(e-n)/s+2:(n-t)/s+4}function gf(n){const e=n.r/255,s=n.g/255,i=n.b/255,r=Math.max(e,s,i),l=Math.min(e,s,i),o=(r+l)/2;let a,c,u;return r!==l&&(u=r-l,c=o>.5?u/(2-r-l):u/(r+l),a=eE(e,s,i,u,r),a=a*60+.5),[a|0,c||0,o]}function mf(n,t,e,s){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,s)).map(Yi)}function _f(n,t,e){return mf(_0,n,t,e)}function nE(n,t,e){return mf(tE,n,t,e)}function sE(n,t,e){return mf($T,n,t,e)}function b0(n){return(n%360+360)%360}function iE(n){const t=QT.exec(n);let e=255,s;if(!t)return;t[5]!==s&&(e=t[6]?kl(+t[5]):Yi(+t[5]));const i=b0(+t[2]),r=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?s=nE(i,r,l):t[1]==="hsv"?s=sE(i,r,l):s=_f(i,r,l),{r:s[0],g:s[1],b:s[2],a:e}}function rE(n,t){var e=gf(n);e[0]=b0(e[0]+t),e=_f(e),n.r=e[0],n.g=e[1],n.b=e[2]}function lE(n){if(!n)return;const t=gf(n),e=t[0],s=ng(t[1]),i=ng(t[2]);return n.a<255?`hsla(${e}, ${s}%, ${i}%, ${di(n.a)})`:`hsl(${e}, ${s}%, ${i}%)`}const sg={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ig={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function oE(){const n={},t=Object.keys(ig),e=Object.keys(sg);let s,i,r,l,o;for(s=0;s<t.length;s++){for(l=o=t[s],i=0;i<e.length;i++)r=e[i],o=o.replace(r,sg[r]);r=parseInt(ig[l],16),n[o]=[r>>16&255,r>>8&255,r&255]}return n}let Oo;function aE(n){Oo||(Oo=oE(),Oo.transparent=[0,0,0,0]);const t=Oo[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const cE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function uE(n){const t=cE.exec(n);let e=255,s,i,r;if(t){if(t[7]!==s){const l=+t[7];e=t[8]?kl(l):zi(l*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?kl(s):zi(s,0,255)),i=255&(t[4]?kl(i):zi(i,0,255)),r=255&(t[6]?kl(r):zi(r,0,255)),{r:s,g:i,b:r,a:e}}}function fE(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${di(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Ac=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Rr=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function hE(n,t,e){const s=Rr(di(n.r)),i=Rr(di(n.g)),r=Rr(di(n.b));return{r:Yi(Ac(s+e*(Rr(di(t.r))-s))),g:Yi(Ac(i+e*(Rr(di(t.g))-i))),b:Yi(Ac(r+e*(Rr(di(t.b))-r))),a:n.a+e*(t.a-n.a)}}function xo(n,t,e){if(n){let s=gf(n);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=_f(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function v0(n,t){return n&&Object.assign(t||{},n)}function rg(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Yi(n[3]))):(t=v0(n,{r:0,g:0,b:0,a:1}),t.a=Yi(t.a)),t}function dE(n){return n.charAt(0)==="r"?uE(n):iE(n)}class Xl{constructor(t){if(t instanceof Xl)return t;const e=typeof t;let s;e==="object"?s=rg(t):e==="string"&&(s=GT(t)||aE(t)||dE(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=v0(this._rgb);return t&&(t.a=di(t.a)),t}set rgb(t){this._rgb=rg(t)}rgbString(){return this._valid?fE(this._rgb):void 0}hexString(){return this._valid?JT(this._rgb):void 0}hslString(){return this._valid?lE(this._rgb):void 0}mix(t,e){if(t){const s=this.rgb,i=t.rgb;let r;const l=e===r?.5:e,o=2*l-1,a=s.a-i.a,c=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=l*s.a+(1-l)*i.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=hE(this._rgb,t._rgb,e)),this}clone(){return new Xl(this.rgb)}alpha(t){return this._rgb.a=Yi(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=ho(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return xo(this._rgb,2,t),this}darken(t){return xo(this._rgb,2,-t),this}saturate(t){return xo(this._rgb,1,t),this}desaturate(t){return xo(this._rgb,1,-t),this}rotate(t){return rE(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ui(){}const pE=(()=>{let n=0;return()=>n++})();function ee(n){return n==null}function Le(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function se(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function We(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Jn(n,t){return We(n)?n:t}function Zt(n,t){return typeof n>"u"?t:n}const gE=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,y0=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Ae(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function be(n,t,e,s){let i,r,l;if(Le(n))for(r=n.length,i=0;i<r;i++)t.call(e,n[i],i);else if(se(n))for(l=Object.keys(n),r=l.length,i=0;i<r;i++)t.call(e,n[l[i]],l[i])}function _a(n,t){let e,s,i,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,s=n.length;e<s;++e)if(i=n[e],r=t[e],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function ba(n){if(Le(n))return n.map(ba);if(se(n)){const t=Object.create(null),e=Object.keys(n),s=e.length;let i=0;for(;i<s;++i)t[e[i]]=ba(n[e[i]]);return t}return n}function k0(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function mE(n,t,e,s){if(!k0(n))return;const i=t[n],r=e[n];se(i)&&se(r)?Gl(i,r,s):t[n]=ba(r)}function Gl(n,t,e){const s=Le(t)?t:[t],i=s.length;if(!se(n))return n;e=e||{};const r=e.merger||mE;let l;for(let o=0;o<i;++o){if(l=s[o],!se(l))continue;const a=Object.keys(l);for(let c=0,u=a.length;c<u;++c)r(a[c],n,l,e)}return n}function xl(n,t){return Gl(n,t,{merger:_E})}function _E(n,t,e){if(!k0(n))return;const s=t[n],i=e[n];se(s)&&se(i)?xl(s,i):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=ba(i))}const lg={"":n=>n,x:n=>n.x,y:n=>n.y};function bE(n){const t=n.split("."),e=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function vE(n){const t=bE(n);return e=>{for(const s of t){if(s==="")break;e=e&&e[s]}return e}}function Ji(n,t){return(lg[t]||(lg[t]=vE(t)))(n)}function bf(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Zl=n=>typeof n<"u",Qi=n=>typeof n=="function",og=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function yE(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const fe=Math.PI,Oe=2*fe,kE=Oe+fe,va=Number.POSITIVE_INFINITY,wE=fe/180,Xe=fe/2,lr=fe/4,ag=fe*2/3,Hi=Math.log10,Qs=Math.sign;function Ml(n,t,e){return Math.abs(n-t)<e}function cg(n){const t=Math.round(n);n=Ml(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Hi(n))),s=n/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function SE(n){const t=[],e=Math.sqrt(n);let s;for(s=1;s<e;s++)n%s===0&&(t.push(s),t.push(n/s));return e===(e|0)&&t.push(e),t.sort((i,r)=>i-r).pop(),t}function AE(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function rl(n){return!AE(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function TE(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function w0(n,t,e){let s,i,r;for(s=0,i=n.length;s<i;s++)r=n[s][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Ds(n){return n*(fe/180)}function vf(n){return n*(180/fe)}function ug(n){if(!We(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function S0(n,t){const e=t.x-n.x,s=t.y-n.y,i=Math.sqrt(e*e+s*s);let r=Math.atan2(s,e);return r<-.5*fe&&(r+=Oe),{angle:r,distance:i}}function wu(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function EE(n,t){return(n-t+kE)%Oe-fe}function Sn(n){return(n%Oe+Oe)%Oe}function Jl(n,t,e,s){const i=Sn(n),r=Sn(t),l=Sn(e),o=Sn(r-i),a=Sn(l-i),c=Sn(i-r),u=Sn(i-l);return i===r||i===l||s&&r===l||o>a&&c<u}function pn(n,t,e){return Math.max(t,Math.min(e,n))}function CE(n){return pn(n,-32768,32767)}function _i(n,t,e,s=1e-6){return n>=Math.min(t,e)-s&&n<=Math.max(t,e)+s}function yf(n,t,e){e=e||(l=>n[l]<t);let s=n.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,e(r)?i=r:s=r;return{lo:i,hi:s}}const bi=(n,t,e,s)=>yf(n,e,s?i=>{const r=n[i][t];return r<e||r===e&&n[i+1][t]===e}:i=>n[i][t]<e),OE=(n,t,e)=>yf(n,e,s=>n[s][t]>=e);function xE(n,t,e){let s=0,i=n.length;for(;s<i&&n[s]<t;)s++;for(;i>s&&n[i-1]>e;)i--;return s>0||i<n.length?n.slice(s,i):n}const A0=["push","pop","shift","splice","unshift"];function ME(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),A0.forEach(e=>{const s="_onData"+bf(e),i=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){const l=i.apply(this,r);return n._chartjs.listeners.forEach(o=>{typeof o[s]=="function"&&o[s](...r)}),l}})})}function fg(n,t){const e=n._chartjs;if(!e)return;const s=e.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(A0.forEach(r=>{delete n[r]}),delete n._chartjs)}function T0(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const E0=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function C0(n,t){let e=[],s=!1;return function(...i){e=i,s||(s=!0,E0.call(window,()=>{s=!1,n.apply(t,e)}))}}function LE(n,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(n,t,s)):n.apply(this,s),t}}const kf=n=>n==="start"?"left":n==="end"?"right":"center",wn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,NE=(n,t,e,s)=>n===(s?"left":"right")?e:n==="center"?(t+e)/2:t;function O0(n,t,e){const s=t.length;let i=0,r=s;if(n._sorted){const{iScale:l,vScale:o,_parsed:a}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=l.axis,{min:f,max:p,minDefined:m,maxDefined:h}=l.getUserBounds();if(m){if(i=Math.min(bi(a,u,f).lo,e?s:bi(t,u,l.getPixelForValue(f)).lo),c){const _=a.slice(0,i+1).reverse().findIndex(b=>!ee(b[o.axis]));i-=Math.max(0,_)}i=pn(i,0,s-1)}if(h){let _=Math.max(bi(a,l.axis,p,!0).hi+1,e?0:bi(t,u,l.getPixelForValue(p),!0).hi+1);if(c){const b=a.slice(_-1).findIndex(y=>!ee(y[o.axis]));_+=Math.max(0,b)}r=pn(_,i,s)-i}else r=s-i}return{start:i,count:r}}function x0(n){const{xScale:t,yScale:e,_scaleRanges:s}=n,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return n._scaleRanges=i,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,i),r}const Mo=n=>n===0||n===1,hg=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Oe/e)),dg=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Oe/e)+1,Ll={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Xe)+1,easeOutSine:n=>Math.sin(n*Xe),easeInOutSine:n=>-.5*(Math.cos(fe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Mo(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Mo(n)?n:hg(n,.075,.3),easeOutElastic:n=>Mo(n)?n:dg(n,.075,.3),easeInOutElastic(n){return Mo(n)?n:n<.5?.5*hg(n*2,.1125,.45):.5+.5*dg(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Ll.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ll.easeInBounce(n*2)*.5:Ll.easeOutBounce(n*2-1)*.5+.5};function wf(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function pg(n){return wf(n)?n:new Xl(n)}function Tc(n){return wf(n)?n:new Xl(n).saturate(.5).darken(.1).hexString()}const IE=["x","y","borderWidth","radius","tension"],DE=["color","borderColor","backgroundColor"];function RE(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:DE},numbers:{type:"number",properties:IE}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function PE(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const gg=new Map;function BE(n,t){t=t||{};const e=n+JSON.stringify(t);let s=gg.get(e);return s||(s=new Intl.NumberFormat(n,t),gg.set(e,s)),s}function po(n,t,e){return BE(t,e).format(n)}const M0={values(n){return Le(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const s=this.chart.options.locale;let i,r=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=qE(n,e)}const l=Hi(Math.abs(r)),o=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),a={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(a,this.options.ticks.format),po(n,s,a)},logarithmic(n,t,e){if(n===0)return"0";const s=e[t].significand||n/Math.pow(10,Math.floor(Hi(n)));return[1,2,3,5,10,15].includes(s)||t>.8*e.length?M0.numeric.call(this,n,t,e):""}};function qE(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Ya={formatters:M0};function FE(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ya.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const wr=Object.create(null),Su=Object.create(null);function Nl(n,t){if(!t)return n;const e=t.split(".");for(let s=0,i=e.length;s<i;++s){const r=e[s];n=n[r]||(n[r]=Object.create(null))}return n}function Ec(n,t,e){return typeof t=="string"?Gl(Nl(n,t),e):Gl(Nl(n,""),t)}class jE{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Tc(i.backgroundColor),this.hoverBorderColor=(s,i)=>Tc(i.borderColor),this.hoverColor=(s,i)=>Tc(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Ec(this,t,e)}get(t){return Nl(this,t)}describe(t,e){return Ec(Su,t,e)}override(t,e){return Ec(wr,t,e)}route(t,e,s,i){const r=Nl(this,t),l=Nl(this,s),o="_"+e;Object.defineProperties(r,{[o]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const a=this[o],c=l[i];return se(a)?Object.assign({},c,a):Zt(a,c)},set(a){this[o]=a}}})}apply(t){t.forEach(e=>e(this))}}var Ne=new jE({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[RE,PE,FE]);function zE(n){return!n||ee(n.size)||ee(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function ya(n,t,e,s,i){let r=t[i];return r||(r=t[i]=n.measureText(i).width,e.push(i)),r>s&&(s=r),s}function HE(n,t,e,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(i=s.data={},r=s.garbageCollect=[],s.font=t),n.save(),n.font=t;let l=0;const o=e.length;let a,c,u,f,p;for(a=0;a<o;a++)if(f=e[a],f!=null&&!Le(f))l=ya(n,i,r,l,f);else if(Le(f))for(c=0,u=f.length;c<u;c++)p=f[c],p!=null&&!Le(p)&&(l=ya(n,i,r,l,p));n.restore();const m=r.length/2;if(m>e.length){for(a=0;a<m;a++)delete i[r[a]];r.splice(0,m)}return l}function or(n,t,e){const s=n.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*s)/s+i}function mg(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function Au(n,t,e,s){L0(n,t,e,s,null)}function L0(n,t,e,s,i){let r,l,o,a,c,u,f,p;const m=t.pointStyle,h=t.rotation,_=t.radius;let b=(h||0)*wE;if(m&&typeof m=="object"&&(r=m.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,s),n.rotate(b),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(_)||_<=0)){switch(n.beginPath(),m){default:i?n.ellipse(e,s,i/2,_,0,0,Oe):n.arc(e,s,_,0,Oe),n.closePath();break;case"triangle":u=i?i/2:_,n.moveTo(e+Math.sin(b)*u,s-Math.cos(b)*_),b+=ag,n.lineTo(e+Math.sin(b)*u,s-Math.cos(b)*_),b+=ag,n.lineTo(e+Math.sin(b)*u,s-Math.cos(b)*_),n.closePath();break;case"rectRounded":c=_*.516,a=_-c,l=Math.cos(b+lr)*a,f=Math.cos(b+lr)*(i?i/2-c:a),o=Math.sin(b+lr)*a,p=Math.sin(b+lr)*(i?i/2-c:a),n.arc(e-f,s-o,c,b-fe,b-Xe),n.arc(e+p,s-l,c,b-Xe,b),n.arc(e+f,s+o,c,b,b+Xe),n.arc(e-p,s+l,c,b+Xe,b+fe),n.closePath();break;case"rect":if(!h){a=Math.SQRT1_2*_,u=i?i/2:a,n.rect(e-u,s-a,2*u,2*a);break}b+=lr;case"rectRot":f=Math.cos(b)*(i?i/2:_),l=Math.cos(b)*_,o=Math.sin(b)*_,p=Math.sin(b)*(i?i/2:_),n.moveTo(e-f,s-o),n.lineTo(e+p,s-l),n.lineTo(e+f,s+o),n.lineTo(e-p,s+l),n.closePath();break;case"crossRot":b+=lr;case"cross":f=Math.cos(b)*(i?i/2:_),l=Math.cos(b)*_,o=Math.sin(b)*_,p=Math.sin(b)*(i?i/2:_),n.moveTo(e-f,s-o),n.lineTo(e+f,s+o),n.moveTo(e+p,s-l),n.lineTo(e-p,s+l);break;case"star":f=Math.cos(b)*(i?i/2:_),l=Math.cos(b)*_,o=Math.sin(b)*_,p=Math.sin(b)*(i?i/2:_),n.moveTo(e-f,s-o),n.lineTo(e+f,s+o),n.moveTo(e+p,s-l),n.lineTo(e-p,s+l),b+=lr,f=Math.cos(b)*(i?i/2:_),l=Math.cos(b)*_,o=Math.sin(b)*_,p=Math.sin(b)*(i?i/2:_),n.moveTo(e-f,s-o),n.lineTo(e+f,s+o),n.moveTo(e+p,s-l),n.lineTo(e-p,s+l);break;case"line":l=i?i/2:Math.cos(b)*_,o=Math.sin(b)*_,n.moveTo(e-l,s-o),n.lineTo(e+l,s+o);break;case"dash":n.moveTo(e,s),n.lineTo(e+Math.cos(b)*(i?i/2:_),s+Math.sin(b)*_);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function vi(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Xa(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Ga(n){n.restore()}function UE(n,t,e,s,i){if(!t)return n.lineTo(e.x,e.y);if(i==="middle"){const r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else i==="after"!=!!s?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function WE(n,t,e,s){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function VE(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ee(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function KE(n,t,e,s,i){if(i.strikethrough||i.underline){const r=n.measureText(s),l=t-r.actualBoundingBoxLeft,o=t+r.actualBoundingBoxRight,a=e-r.actualBoundingBoxAscent,c=e+r.actualBoundingBoxDescent,u=i.strikethrough?(a+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(l,u),n.lineTo(o,u),n.stroke()}}function YE(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Sr(n,t,e,s,i,r={}){const l=Le(t)?t:[t],o=r.strokeWidth>0&&r.strokeColor!=="";let a,c;for(n.save(),n.font=i.string,VE(n,r),a=0;a<l.length;++a)c=l[a],r.backdrop&&YE(n,r.backdrop),o&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),ee(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,e,s,r.maxWidth)),n.fillText(c,e,s,r.maxWidth),KE(n,e,s,c,r),s+=Number(i.lineHeight);n.restore()}function Ql(n,t){const{x:e,y:s,w:i,h:r,radius:l}=t;n.arc(e+l.topLeft,s+l.topLeft,l.topLeft,1.5*fe,fe,!0),n.lineTo(e,s+r-l.bottomLeft),n.arc(e+l.bottomLeft,s+r-l.bottomLeft,l.bottomLeft,fe,Xe,!0),n.lineTo(e+i-l.bottomRight,s+r),n.arc(e+i-l.bottomRight,s+r-l.bottomRight,l.bottomRight,Xe,0,!0),n.lineTo(e+i,s+l.topRight),n.arc(e+i-l.topRight,s+l.topRight,l.topRight,0,-Xe,!0),n.lineTo(e+l.topLeft,s)}const XE=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,GE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ZE(n,t){const e=(""+n).match(XE);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const JE=n=>+n||0;function Sf(n,t){const e={},s=se(t),i=s?Object.keys(t):t,r=se(n)?s?l=>Zt(n[l],n[t[l]]):l=>n[l]:()=>n;for(const l of i)e[l]=JE(r(l));return e}function N0(n){return Sf(n,{top:"y",right:"x",bottom:"y",left:"x"})}function gr(n){return Sf(n,["topLeft","topRight","bottomLeft","bottomRight"])}function xn(n){const t=N0(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function fn(n,t){n=n||{},t=t||Ne.font;let e=Zt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=Zt(n.style,t.style);s&&!(""+s).match(GE)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:Zt(n.family,t.family),lineHeight:ZE(Zt(n.lineHeight,t.lineHeight),e),size:e,style:s,weight:Zt(n.weight,t.weight),string:""};return i.string=zE(i),i}function wl(n,t,e,s){let i,r,l;for(i=0,r=n.length;i<r;++i)if(l=n[i],l!==void 0&&l!==void 0)return l}function QE(n,t,e){const{min:s,max:i}=n,r=y0(t,(i-s)/2),l=(o,a)=>e&&o===0?0:o+a;return{min:l(s,-Math.abs(r)),max:l(i,r)}}function er(n,t){return Object.assign(Object.create(n),t)}function Af(n,t=[""],e,s,i=()=>n[0]){const r=e||n;typeof s>"u"&&(s=P0("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:s,_getTarget:i,override:o=>Af([o,...n],t,r,s)};return new Proxy(l,{deleteProperty(o,a){return delete o[a],delete o._keys,delete n[0][a],!0},get(o,a){return D0(o,a,()=>lC(a,t,n,o))},getOwnPropertyDescriptor(o,a){return Reflect.getOwnPropertyDescriptor(o._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,a){return bg(o).includes(a)},ownKeys(o){return bg(o)},set(o,a,c){const u=o._storage||(o._storage=i());return o[a]=u[a]=c,delete o._keys,!0}})}function ll(n,t,e,s){const i={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:I0(n,s),setContext:r=>ll(n,r,e,s),override:r=>ll(n.override(r),t,e,s)};return new Proxy(i,{deleteProperty(r,l){return delete r[l],delete n[l],!0},get(r,l,o){return D0(r,l,()=>tC(r,l,o))},getOwnPropertyDescriptor(r,l){return r._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(r,l,o){return n[l]=o,delete r[l],!0}})}function I0(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=n;return{allKeys:i,scriptable:e,indexable:s,isScriptable:Qi(e)?e:()=>e,isIndexable:Qi(s)?s:()=>s}}const $E=(n,t)=>n?n+bf(t):t,Tf=(n,t)=>se(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function D0(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const s=e();return n[t]=s,s}function tC(n,t,e){const{_proxy:s,_context:i,_subProxy:r,_descriptors:l}=n;let o=s[t];return Qi(o)&&l.isScriptable(t)&&(o=eC(t,o,n,e)),Le(o)&&o.length&&(o=nC(t,o,n,l.isIndexable)),Tf(t,o)&&(o=ll(o,i,r&&r[t],l)),o}function eC(n,t,e,s){const{_proxy:i,_context:r,_subProxy:l,_stack:o}=e;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let a=t(r,l||s);return o.delete(n),Tf(n,a)&&(a=Ef(i._scopes,i,n,a)),a}function nC(n,t,e,s){const{_proxy:i,_context:r,_subProxy:l,_descriptors:o}=e;if(typeof r.index<"u"&&s(n))return t[r.index%t.length];if(se(t[0])){const a=t,c=i._scopes.filter(u=>u!==a);t=[];for(const u of a){const f=Ef(c,i,n,u);t.push(ll(f,r,l&&l[n],o))}}return t}function R0(n,t,e){return Qi(n)?n(t,e):n}const sC=(n,t)=>n===!0?t:typeof n=="string"?Ji(t,n):void 0;function iC(n,t,e,s,i){for(const r of t){const l=sC(e,r);if(l){n.add(l);const o=R0(l._fallback,e,i);if(typeof o<"u"&&o!==e&&o!==s)return o}else if(l===!1&&typeof s<"u"&&e!==s)return null}return!1}function Ef(n,t,e,s){const i=t._rootScopes,r=R0(t._fallback,e,s),l=[...n,...i],o=new Set;o.add(s);let a=_g(o,l,e,r||e,s);return a===null||typeof r<"u"&&r!==e&&(a=_g(o,l,r,a,s),a===null)?!1:Af(Array.from(o),[""],i,r,()=>rC(t,e,s))}function _g(n,t,e,s,i){for(;e;)e=iC(n,t,e,s,i);return e}function rC(n,t,e){const s=n._getTarget();t in s||(s[t]={});const i=s[t];return Le(i)&&se(e)?e:i||{}}function lC(n,t,e,s){let i;for(const r of t)if(i=P0($E(r,n),e),typeof i<"u")return Tf(n,i)?Ef(e,s,n,i):i}function P0(n,t){for(const e of t){if(!e)continue;const s=e[n];if(typeof s<"u")return s}}function bg(n){let t=n._keys;return t||(t=n._keys=oC(n._scopes)),t}function oC(n){const t=new Set;for(const e of n)for(const s of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function B0(n,t,e,s){const{iScale:i}=n,{key:r="r"}=this._parsing,l=new Array(s);let o,a,c,u;for(o=0,a=s;o<a;++o)c=o+e,u=t[c],l[o]={r:i.parse(Ji(u,r),c)};return l}const aC=Number.EPSILON||1e-14,ol=(n,t)=>t<n.length&&!n[t].skip&&n[t],q0=n=>n==="x"?"y":"x";function cC(n,t,e,s){const i=n.skip?t:n,r=t,l=e.skip?t:e,o=wu(r,i),a=wu(l,r);let c=o/(o+a),u=a/(o+a);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=s*c,p=s*u;return{previous:{x:r.x-f*(l.x-i.x),y:r.y-f*(l.y-i.y)},next:{x:r.x+p*(l.x-i.x),y:r.y+p*(l.y-i.y)}}}function uC(n,t,e){const s=n.length;let i,r,l,o,a,c=ol(n,0);for(let u=0;u<s-1;++u)if(a=c,c=ol(n,u+1),!(!a||!c)){if(Ml(t[u],0,aC)){e[u]=e[u+1]=0;continue}i=e[u]/t[u],r=e[u+1]/t[u],o=Math.pow(i,2)+Math.pow(r,2),!(o<=9)&&(l=3/Math.sqrt(o),e[u]=i*l*t[u],e[u+1]=r*l*t[u])}}function fC(n,t,e="x"){const s=q0(e),i=n.length;let r,l,o,a=ol(n,0);for(let c=0;c<i;++c){if(l=o,o=a,a=ol(n,c+1),!o)continue;const u=o[e],f=o[s];l&&(r=(u-l[e])/3,o[`cp1${e}`]=u-r,o[`cp1${s}`]=f-r*t[c]),a&&(r=(a[e]-u)/3,o[`cp2${e}`]=u+r,o[`cp2${s}`]=f+r*t[c])}}function hC(n,t="x"){const e=q0(t),s=n.length,i=Array(s).fill(0),r=Array(s);let l,o,a,c=ol(n,0);for(l=0;l<s;++l)if(o=a,a=c,c=ol(n,l+1),!!a){if(c){const u=c[t]-a[t];i[l]=u!==0?(c[e]-a[e])/u:0}r[l]=o?c?Qs(i[l-1])!==Qs(i[l])?0:(i[l-1]+i[l])/2:i[l-1]:i[l]}uC(n,i,r),fC(n,r,t)}function Lo(n,t,e){return Math.max(Math.min(n,e),t)}function dC(n,t){let e,s,i,r,l,o=vi(n[0],t);for(e=0,s=n.length;e<s;++e)l=r,r=o,o=e<s-1&&vi(n[e+1],t),r&&(i=n[e],l&&(i.cp1x=Lo(i.cp1x,t.left,t.right),i.cp1y=Lo(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=Lo(i.cp2x,t.left,t.right),i.cp2y=Lo(i.cp2y,t.top,t.bottom)))}function pC(n,t,e,s,i){let r,l,o,a;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")hC(n,i);else{let c=s?n[n.length-1]:n[0];for(r=0,l=n.length;r<l;++r)o=n[r],a=cC(c,o,n[Math.min(r+1,l-(s?0:1))%l],t.tension),o.cp1x=a.previous.x,o.cp1y=a.previous.y,o.cp2x=a.next.x,o.cp2y=a.next.y,c=o}t.capBezierPoints&&dC(n,e)}function Cf(){return typeof window<"u"&&typeof document<"u"}function Of(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ka(n,t,e){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=n,s}const Za=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function gC(n,t){return Za(n).getPropertyValue(t)}const mC=["top","right","bottom","left"];function mr(n,t,e){const s={};e=e?"-"+e:"";for(let i=0;i<4;i++){const r=mC[i];s[r]=parseFloat(n[t+"-"+r+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const _C=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function bC(n,t){const e=n.touches,s=e&&e.length?e[0]:n,{offsetX:i,offsetY:r}=s;let l=!1,o,a;if(_C(i,r,n.target))o=i,a=r;else{const c=t.getBoundingClientRect();o=s.clientX-c.left,a=s.clientY-c.top,l=!0}return{x:o,y:a,box:l}}function ur(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:s}=t,i=Za(e),r=i.boxSizing==="border-box",l=mr(i,"padding"),o=mr(i,"border","width"),{x:a,y:c,box:u}=bC(n,e),f=l.left+(u&&o.left),p=l.top+(u&&o.top);let{width:m,height:h}=t;return r&&(m-=l.width+o.width,h-=l.height+o.height),{x:Math.round((a-f)/m*e.width/s),y:Math.round((c-p)/h*e.height/s)}}function vC(n,t,e){let s,i;if(t===void 0||e===void 0){const r=n&&Of(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{const l=r.getBoundingClientRect(),o=Za(r),a=mr(o,"border","width"),c=mr(o,"padding");t=l.width-c.width-a.width,e=l.height-c.height-a.height,s=ka(o.maxWidth,r,"clientWidth"),i=ka(o.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:s||va,maxHeight:i||va}}const Ui=n=>Math.round(n*10)/10;function yC(n,t,e,s){const i=Za(n),r=mr(i,"margin"),l=ka(i.maxWidth,n,"clientWidth")||va,o=ka(i.maxHeight,n,"clientHeight")||va,a=vC(n,t,e);let{width:c,height:u}=a;if(i.boxSizing==="content-box"){const p=mr(i,"border","width"),m=mr(i,"padding");c-=m.width+p.width,u-=m.height+p.height}return c=Math.max(0,c-r.width),u=Math.max(0,s?c/s:u-r.height),c=Ui(Math.min(c,l,a.maxWidth)),u=Ui(Math.min(u,o,a.maxHeight)),c&&!u&&(u=Ui(c/2)),(t!==void 0||e!==void 0)&&s&&a.height&&u>a.height&&(u=a.height,c=Ui(Math.floor(u*s))),{width:c,height:u}}function vg(n,t,e){const s=t||1,i=Ui(n.height*s),r=Ui(n.width*s);n.height=Ui(n.height),n.width=Ui(n.width);const l=n.canvas;return l.style&&(e||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||l.height!==i||l.width!==r?(n.currentDevicePixelRatio=s,l.height=i,l.width=r,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const kC=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Cf()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function yg(n,t){const e=gC(n,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function fr(n,t,e,s){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function wC(n,t,e,s){return{x:n.x+e*(t.x-n.x),y:s==="middle"?e<.5?n.y:t.y:s==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function SC(n,t,e,s){const i={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},l=fr(n,i,e),o=fr(i,r,e),a=fr(r,t,e),c=fr(l,o,e),u=fr(o,a,e);return fr(c,u,e)}const AC=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,s){return e-s},leftForLtr(e,s){return e-s}}},TC=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Zr(n,t,e){return n?AC(t,e):TC()}function F0(n,t){let e,s;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=s)}function j0(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function z0(n){return n==="angle"?{between:Jl,compare:EE,normalize:Sn}:{between:_i,compare:(t,e)=>t-e,normalize:t=>t}}function kg({start:n,end:t,count:e,loop:s,style:i}){return{start:n%e,end:t%e,loop:s&&(t-n+1)%e===0,style:i}}function EC(n,t,e){const{property:s,start:i,end:r}=e,{between:l,normalize:o}=z0(s),a=t.length;let{start:c,end:u,loop:f}=n,p,m;if(f){for(c+=a,u+=a,p=0,m=a;p<m&&l(o(t[c%a][s]),i,r);++p)c--,u--;c%=a,u%=a}return u<c&&(u+=a),{start:c,end:u,loop:f,style:n.style}}function H0(n,t,e){if(!e)return[n];const{property:s,start:i,end:r}=e,l=t.length,{compare:o,between:a,normalize:c}=z0(s),{start:u,end:f,loop:p,style:m}=EC(n,t,e),h=[];let _=!1,b=null,y,w,A;const E=()=>a(i,A,y)&&o(i,A)!==0,T=()=>o(r,y)===0||a(r,A,y),C=()=>_||E(),M=()=>!_||T();for(let x=u,D=u;x<=f;++x)w=t[x%l],!w.skip&&(y=c(w[s]),y!==A&&(_=a(y,i,r),b===null&&C()&&(b=o(y,i)===0?x:D),b!==null&&M()&&(h.push(kg({start:b,end:x,loop:p,count:l,style:m})),b=null),D=x,A=y));return b!==null&&h.push(kg({start:b,end:f,loop:p,count:l,style:m})),h}function U0(n,t){const e=[],s=n.segments;for(let i=0;i<s.length;i++){const r=H0(s[i],n.points,t);r.length&&e.push(...r)}return e}function CC(n,t,e,s){let i=0,r=t-1;if(e&&!s)for(;i<t&&!n[i].skip;)i++;for(;i<t&&n[i].skip;)i++;for(i%=t,e&&(r+=i);r>i&&n[r%t].skip;)r--;return r%=t,{start:i,end:r}}function OC(n,t,e,s){const i=n.length,r=[];let l=t,o=n[t],a;for(a=t+1;a<=e;++a){const c=n[a%i];c.skip||c.stop?o.skip||(s=!1,r.push({start:t%i,end:(a-1)%i,loop:s}),t=l=c.stop?a:null):(l=a,o.skip&&(t=a)),o=c}return l!==null&&r.push({start:t%i,end:l%i,loop:s}),r}function xC(n,t){const e=n.points,s=n.options.spanGaps,i=e.length;if(!i)return[];const r=!!n._loop,{start:l,end:o}=CC(e,i,r,s);if(s===!0)return wg(n,[{start:l,end:o,loop:r}],e,t);const a=o<l?o+i:o,c=!!n._fullLoop&&l===0&&o===i-1;return wg(n,OC(e,l,a,c),e,t)}function wg(n,t,e,s){return!s||!s.setContext||!e?t:MC(n,t,e,s)}function MC(n,t,e,s){const i=n._chart.getContext(),r=Sg(n.options),{_datasetIndex:l,options:{spanGaps:o}}=n,a=e.length,c=[];let u=r,f=t[0].start,p=f;function m(h,_,b,y){const w=o?-1:1;if(h!==_){for(h+=a;e[h%a].skip;)h-=w;for(;e[_%a].skip;)_+=w;h%a!==_%a&&(c.push({start:h%a,end:_%a,loop:b,style:y}),u=y,f=_%a)}}for(const h of t){f=o?f:h.start;let _=e[f%a],b;for(p=f+1;p<=h.end;p++){const y=e[p%a];b=Sg(s.setContext(er(i,{type:"segment",p0:_,p1:y,p0DataIndex:(p-1)%a,p1DataIndex:p%a,datasetIndex:l}))),LC(b,u)&&m(f,p-1,h.loop,u),_=y,u=b}f<p-1&&m(f,p-1,h.loop,u)}return c}function Sg(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function LC(n,t){if(!t)return!1;const e=[],s=function(i,r){return wf(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(n,s)!==JSON.stringify(t,s)}function No(n,t,e){return n.options.clip?n[e]:t[e]}function NC(n,t){const{xScale:e,yScale:s}=n;return e&&s?{left:No(e,t,"left"),right:No(e,t,"right"),top:No(s,t,"top"),bottom:No(s,t,"bottom")}:t}function W0(n,t){const e=t._clip;if(e.disabled)return!1;const s=NC(t,n.chartArea);return{left:e.left===!1?0:s.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:s.right+(e.right===!0?0:e.right),top:e.top===!1?0:s.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:s.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class IC{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,i){const r=e.listeners[i],l=e.duration;r.forEach(o=>o({chart:t,initial:e.initial,numSteps:l,currentStep:Math.min(s-e.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=E0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let l=r.length-1,o=!1,a;for(;l>=0;--l)a=r[l],a._active?(a._total>s.duration&&(s.duration=a._total),a.tick(t),o=!0):(r[l]=r[r.length-1],r.pop());o&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const s=e.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var fi=new IC;const Ag="transparent",DC={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const s=pg(n||Ag),i=s.valid&&pg(t||Ag);return i&&i.valid?i.mix(s,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class RC{constructor(t,e,s,i){const r=e[s];i=wl([t.to,i,r,t.from]);const l=wl([t.from,r,i]);this._active=!0,this._fn=t.fn||DC[t.type||typeof l],this._easing=Ll[t.easing]||Ll.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=l,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,l=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=wl([t.to,e,i,t.from]),this._from=wl([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,s=this._duration,i=this._prop,r=this._from,l=this._loop,o=this._to;let a;if(this._active=r!==o&&(l||e<s),!this._active){this._target[i]=o,this._notify(!0);return}if(e<0){this._target[i]=r;return}a=e/s%2,a=l&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,o,a)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){const e=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][e]()}}class V0{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!se(t))return;const e=Object.keys(Ne.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!se(r))return;const l={};for(const o of e)l[o]=r[o];(Le(r.properties)&&r.properties||[i]).forEach(o=>{(o===i||!s.has(o))&&s.set(o,l)})})}_animateOptions(t,e){const s=e.options,i=BC(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&PC(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,e){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),l=Object.keys(e),o=Date.now();let a;for(a=l.length-1;a>=0;--a){const c=l[a];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,e));continue}const u=e[c];let f=r[c];const p=s.get(c);if(f)if(p&&f.active()){f.update(p,u,o);continue}else f.cancel();if(!p||!p.duration){t[c]=u;continue}r[c]=f=new RC(p,t,c,u),i.push(f)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const s=this._createAnimations(t,e);if(s.length)return fi.add(this._chart,s),!0}}function PC(n,t){const e=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=n[s[i]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function BC(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Tg(n,t){const e=n&&n.options||{},s=e.reverse,i=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function qC(n,t,e){if(e===!1)return!1;const s=Tg(n,e),i=Tg(t,e);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function FC(n){let t,e,s,i;return se(n)?(t=n.top,e=n.right,s=n.bottom,i=n.left):t=e=s=i=n,{top:t,right:e,bottom:s,left:i,disabled:n===!1}}function K0(n,t){const e=[],s=n._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)e.push(s[i].index);return e}function Eg(n,t,e,s={}){const i=n.keys,r=s.mode==="single";let l,o,a,c;if(t===null)return;let u=!1;for(l=0,o=i.length;l<o;++l){if(a=+i[l],a===e){if(u=!0,s.all)continue;break}c=n.values[a],We(c)&&(r||t===0||Qs(t)===Qs(c))&&(t+=c)}return!u&&!s.all?0:t}function jC(n,t){const{iScale:e,vScale:s}=t,i=e.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",l=Object.keys(n),o=new Array(l.length);let a,c,u;for(a=0,c=l.length;a<c;++a)u=l[a],o[a]={[i]:u,[r]:n[u]};return o}function Cc(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function zC(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function HC(n){const{min:t,max:e,minDefined:s,maxDefined:i}=n.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function UC(n,t,e){const s=n[t]||(n[t]={});return s[e]||(s[e]={})}function Cg(n,t,e,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=n[i.index];if(e&&r>0||!e&&r<0)return i.index}return null}function Og(n,t){const{chart:e,_cachedMeta:s}=n,i=e._stacks||(e._stacks={}),{iScale:r,vScale:l,index:o}=s,a=r.axis,c=l.axis,u=zC(r,l,s),f=t.length;let p;for(let m=0;m<f;++m){const h=t[m],{[a]:_,[c]:b}=h,y=h._stacks||(h._stacks={});p=y[c]=UC(i,u,_),p[o]=b,p._top=Cg(p,l,!0,s.type),p._bottom=Cg(p,l,!1,s.type);const w=p._visualValues||(p._visualValues={});w[o]=b}}function Oc(n,t){const e=n.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function WC(n,t){return er(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function VC(n,t,e){return er(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function gl(n,t){const e=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){t=t||n._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][e]===void 0)return;delete r[s][e],r[s]._visualValues!==void 0&&r[s]._visualValues[e]!==void 0&&delete r[s]._visualValues[e]}}}const xc=n=>n==="reset"||n==="none",xg=(n,t)=>t?n:Object.assign({},n),KC=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:K0(e,!0),values:null};class Bs{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Cc(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&gl(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,s=this.getDataset(),i=(f,p,m,h)=>f==="x"?p:f==="r"?h:m,r=e.xAxisID=Zt(s.xAxisID,Oc(t,"x")),l=e.yAxisID=Zt(s.yAxisID,Oc(t,"y")),o=e.rAxisID=Zt(s.rAxisID,Oc(t,"r")),a=e.indexAxis,c=e.iAxisID=i(a,r,l,o),u=e.vAxisID=i(a,l,r,o);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(l),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&fg(this._data,this),t._stacked&&gl(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),s=this._data;if(se(e)){const i=this._cachedMeta;this._data=jC(e,i)}else if(s!==e){if(s){fg(s,this);const i=this._cachedMeta;gl(i),i._parsed=[]}e&&Object.isExtensible(e)&&ME(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=Cc(e.vScale,e),e.stack!==s.stack&&(i=!0,gl(e),e.stack=s.stack),this._resyncElements(t),(i||r!==e._stacked)&&(Og(this,e._parsed),e._stacked=Cc(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:l}=s,o=r.axis;let a=t===0&&e===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],u,f,p;if(this._parsing===!1)s._parsed=i,s._sorted=!0,p=i;else{Le(i[t])?p=this.parseArrayData(s,i,t,e):se(i[t])?p=this.parseObjectData(s,i,t,e):p=this.parsePrimitiveData(s,i,t,e);const m=()=>f[o]===null||c&&f[o]<c[o];for(u=0;u<e;++u)s._parsed[u+t]=f=p[u],a&&(m()&&(a=!1),c=f);s._sorted=a}l&&Og(this,p)}parsePrimitiveData(t,e,s,i){const{iScale:r,vScale:l}=t,o=r.axis,a=l.axis,c=r.getLabels(),u=r===l,f=new Array(i);let p,m,h;for(p=0,m=i;p<m;++p)h=p+s,f[p]={[o]:u||r.parse(c[h],h),[a]:l.parse(e[h],h)};return f}parseArrayData(t,e,s,i){const{xScale:r,yScale:l}=t,o=new Array(i);let a,c,u,f;for(a=0,c=i;a<c;++a)u=a+s,f=e[u],o[a]={x:r.parse(f[0],u),y:l.parse(f[1],u)};return o}parseObjectData(t,e,s,i){const{xScale:r,yScale:l}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c=new Array(i);let u,f,p,m;for(u=0,f=i;u<f;++u)p=u+s,m=e[p],c[u]={x:r.parse(Ji(m,o),p),y:l.parse(Ji(m,a),p)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,s){const i=this.chart,r=this._cachedMeta,l=e[t.axis],o={keys:K0(i,!0),values:e._stacks[t.axis]._visualValues};return Eg(o,l,r.index,{mode:s})}updateRangeFromParsed(t,e,s,i){const r=s[e.axis];let l=r===null?NaN:r;const o=i&&s._stacks[e.axis];i&&o&&(i.values=o,l=Eg(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,e){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,l=i.length,o=this._getOtherScale(t),a=KC(e,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=HC(o);let p,m;function h(){m=i[p];const _=m[o.axis];return!We(m[t.axis])||u>_||f<_}for(p=0;p<l&&!(!h()&&(this.updateRangeFromParsed(c,t,m,a),r));++p);if(r){for(p=l-1;p>=0;--p)if(!h()){this.updateRangeFromParsed(c,t,m,a);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,s=[];let i,r,l;for(i=0,r=e.length;i<r;++i)l=e[i][t.axis],We(l)&&s.push(l);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,s=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=FC(Zt(this.options.clip,qC(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,s=this._cachedMeta,i=s.data||[],r=e.chartArea,l=[],o=this._drawStart||0,a=this._drawCount||i.length-o,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,r,o,a),u=o;u<o+a;++u){const f=i[u];f.hidden||(f.active&&c?l.push(f):f.draw(t,r))}for(u=0;u<l.length;++u)l[u].draw(t,r)}getStyle(t,e){const s=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,e,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];r=l.$context||(l.$context=VC(this.getContext(),t,l)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=WC(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",s){const i=e==="active",r=this._cachedDataOpts,l=t+"-"+e,o=r[l],a=this.enableOptionSharing&&Zl(s);if(o)return xg(o,a);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),f=i?[`${t}Hover`,"hover",t,""]:[t,""],p=c.getOptionScopes(this.getDataset(),u),m=Object.keys(Ne.elements[t]),h=()=>this.getContext(s,i,e),_=c.resolveNamedOptions(p,m,h,f);return _.$shared&&(_.$shared=a,r[l]=Object.freeze(xg(_,a))),_}_resolveAnimations(t,e,s){const i=this.chart,r=this._cachedDataOpts,l=`animation-${e}`,o=r[l];if(o)return o;let a;if(i.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,e),p=u.getOptionScopes(this.getDataset(),f);a=u.createResolver(p,this.getContext(t,s,e))}const c=new V0(i,a&&a.animations);return a&&a._cacheable&&(r[l]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||xc(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const s=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(s),l=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,s),{sharedOptions:r,includeOptions:l}}updateElement(t,e,s,i){xc(i)?Object.assign(t,s):this._resolveAnimations(e,i).update(t,s)}updateSharedOptions(t,e,s){t&&!xc(e)&&this._resolveAnimations(void 0,e).update(t,s)}_setStyle(t,e,s,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,e,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,s=this._cachedMeta.data;for(const[o,a,c]of this._syncList)this[o](a,c);this._syncList=[];const i=s.length,r=e.length,l=Math.min(r,i);l&&this.parse(0,l),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,s=!0){const i=this._cachedMeta,r=i.data,l=t+e;let o;const a=c=>{for(c.length+=e,o=c.length-1;o>=l;o--)c[o]=c[o-e]};for(a(r),o=t;o<l;++o)r[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(t,e),s&&this.updateElements(r,t,e,"reset")}updateElements(t,e,s,i){}_removeElements(t,e){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,e);s._stacked&&gl(s,i)}s.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,s,i]=t;this[e](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}X(Bs,"defaults",{}),X(Bs,"datasetElementType",null),X(Bs,"dataElementType",null);function YC(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let s=[];for(let i=0,r=e.length;i<r;i++)s=s.concat(e[i].controller.getAllParsedValues(n));n._cache.$bar=T0(s.sort((i,r)=>i-r))}return n._cache.$bar}function XC(n){const t=n.iScale,e=YC(t,n.type);let s=t._length,i,r,l,o;const a=()=>{l===32767||l===-32768||(Zl(o)&&(s=Math.min(s,Math.abs(l-o)||s)),o=l)};for(i=0,r=e.length;i<r;++i)l=t.getPixelForValue(e[i]),a();for(o=void 0,i=0,r=t.ticks.length;i<r;++i)l=t.getPixelForTick(i),a();return s}function GC(n,t,e,s){const i=e.barThickness;let r,l;return ee(i)?(r=t.min*e.categoryPercentage,l=e.barPercentage):(r=i*s,l=1),{chunk:r/s,ratio:l,start:t.pixels[n]-r/2}}function ZC(n,t,e,s){const i=t.pixels,r=i[n];let l=n>0?i[n-1]:null,o=n<i.length-1?i[n+1]:null;const a=e.categoryPercentage;l===null&&(l=r-(o===null?t.end-t.start:o-r)),o===null&&(o=r+r-l);const c=r-(r-Math.min(l,o))/2*a;return{chunk:Math.abs(o-l)/2*a/s,ratio:e.barPercentage,start:c}}function JC(n,t,e,s){const i=e.parse(n[0],s),r=e.parse(n[1],s),l=Math.min(i,r),o=Math.max(i,r);let a=l,c=o;Math.abs(l)>Math.abs(o)&&(a=o,c=l),t[e.axis]=c,t._custom={barStart:a,barEnd:c,start:i,end:r,min:l,max:o}}function Y0(n,t,e,s){return Le(n)?JC(n,t,e,s):t[e.axis]=e.parse(n,s),t}function Mg(n,t,e,s){const i=n.iScale,r=n.vScale,l=i.getLabels(),o=i===r,a=[];let c,u,f,p;for(c=e,u=e+s;c<u;++c)p=t[c],f={},f[i.axis]=o||i.parse(l[c],c),a.push(Y0(p,f,r,c));return a}function Mc(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function QC(n,t,e){return n!==0?Qs(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function $C(n){let t,e,s,i,r;return n.horizontal?(t=n.base>n.x,e="left",s="right"):(t=n.base<n.y,e="bottom",s="top"),t?(i="end",r="start"):(i="start",r="end"),{start:e,end:s,reverse:t,top:i,bottom:r}}function tO(n,t,e,s){let i=t.borderSkipped;const r={};if(!i){n.borderSkipped=r;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:o,reverse:a,top:c,bottom:u}=$C(n);i==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===s?i=c:(e._bottom||0)===s?i=u:(r[Lg(u,l,o,a)]=!0,i=c)),r[Lg(i,l,o,a)]=!0,n.borderSkipped=r}function Lg(n,t,e,s){return s?(n=eO(n,t,e),n=Ng(n,e,t)):n=Ng(n,t,e),n}function eO(n,t,e){return n===t?e:n===e?t:n}function Ng(n,t,e){return n==="start"?t:n==="end"?e:n}function nO(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class Zo extends Bs{parsePrimitiveData(t,e,s,i){return Mg(t,e,s,i)}parseArrayData(t,e,s,i){return Mg(t,e,s,i)}parseObjectData(t,e,s,i){const{iScale:r,vScale:l}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c=r.axis==="x"?o:a,u=l.axis==="x"?o:a,f=[];let p,m,h,_;for(p=s,m=s+i;p<m;++p)_=e[p],h={},h[r.axis]=r.parse(Ji(_,c),p),f.push(Y0(Ji(_,u),h,l,p));return f}updateRangeFromParsed(t,e,s,i){super.updateRangeFromParsed(t,e,s,i);const r=s._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:s,vScale:i}=e,r=this.getParsed(t),l=r._custom,o=Mc(l)?"["+l.start+", "+l.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,s,i){const r=i==="reset",{index:l,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),c=o.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,i);for(let m=e;m<e+s;m++){const h=this.getParsed(m),_=r||ee(h[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(m),b=this._calculateBarIndexPixels(m,u),y=(h._stacks||{})[o.axis],w={horizontal:c,base:_.base,enableBorderRadius:!y||Mc(h._custom)||l===y._top||l===y._bottom,x:c?_.head:b.center,y:c?b.center:_.head,height:c?b.size:Math.abs(_.size),width:c?Math.abs(_.size):b.size};p&&(w.options=f||this.resolveDataElementOptions(m,t[m].active?"active":i));const A=w.options||t[m].options;tO(w,A,y,l),nO(w,A,u.ratio),this.updateElement(t[m],m,w,i)}}_getStacks(t,e){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=s.options.stacked,l=[],o=this._cachedMeta.controller.getParsed(e),a=o&&o[s.axis],c=u=>{const f=u._parsed.find(m=>m[s.axis]===a),p=f&&f[u.vScale.axis];if(ee(p)||isNaN(p))return!0};for(const u of i)if(!(e!==void 0&&c(u))&&((r===!1||l.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&l.push(u.stack),u.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[Zt(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,s){const i=this._getStacks(t,s),r=e!==void 0?i.indexOf(e):-1;return r===-1?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,s=e.iScale,i=[];let r,l;for(r=0,l=e.data.length;r<l;++r)i.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const o=t.barThickness;return{min:o||XC(e),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:s,index:i},options:{base:r,minBarLength:l}}=this,o=r||0,a=this.getParsed(t),c=a._custom,u=Mc(c);let f=a[e.axis],p=0,m=s?this.applyStack(e,a,s):f,h,_;m!==f&&(p=m-f,m=f),u&&(f=c.barStart,m=c.barEnd-c.barStart,f!==0&&Qs(f)!==Qs(c.barEnd)&&(p=0),p+=f);const b=!ee(r)&&!u?r:p;let y=e.getPixelForValue(b);if(this.chart.getDataVisibility(t)?h=e.getPixelForValue(p+m):h=y,_=h-y,Math.abs(_)<l){_=QC(_,e,o)*l,f===o&&(y-=_/2);const w=e.getPixelForDecimal(0),A=e.getPixelForDecimal(1),E=Math.min(w,A),T=Math.max(w,A);y=Math.max(Math.min(y,T),E),h=y+_,s&&!u&&(a._stacks[e.axis]._visualValues[i]=e.getValueForPixel(h)-e.getValueForPixel(y))}if(y===e.getPixelForValue(o)){const w=Qs(_)*e.getLineWidthForValue(o)/2;y+=w,_-=w}return{size:_,base:y,head:h,center:h+_/2}}_calculateBarIndexPixels(t,e){const s=e.scale,i=this.options,r=i.skipNull,l=Zt(i.maxBarThickness,1/0);let o,a;const c=this._getAxisCount();if(e.grouped){const u=r?this._getStackCount(t):e.stackCount,f=i.barThickness==="flex"?ZC(t,e,i,u*c):GC(t,e,i,u*c),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(Zt(p,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+m;o=f.start+f.chunk*h+f.chunk/2,a=Math.min(l,f.chunk*f.ratio)}else o=s.getPixelForValue(this.getParsed(t)[s.axis],t),a=Math.min(l,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,s=t.data,i=s.length;let r=0;for(;r<i;++r)this.getParsed(r)[e.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}X(Zo,"id","bar"),X(Zo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),X(Zo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Jo extends Bs{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,s,i){const r=super.parsePrimitiveData(t,e,s,i);for(let l=0;l<r.length;l++)r[l]._custom=this.resolveDataElementOptions(l+s).radius;return r}parseArrayData(t,e,s,i){const r=super.parseArrayData(t,e,s,i);for(let l=0;l<r.length;l++){const o=e[s+l];r[l]._custom=Zt(o[2],this.resolveDataElementOptions(l+s).radius)}return r}parseObjectData(t,e,s,i){const r=super.parseObjectData(t,e,s,i);for(let l=0;l<r.length;l++){const o=e[s+l];r[l]._custom=Zt(o&&o.r&&+o.r,this.resolveDataElementOptions(l+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let s=t.length-1;s>=0;--s)e=Math.max(e,t[s].size(this.resolveDataElementOptions(s))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=e,l=this.getParsed(t),o=i.getLabelForValue(l.x),a=r.getLabelForValue(l.y),c=l._custom;return{label:s[t]||"",value:"("+o+", "+a+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,s,i){const r=i==="reset",{iScale:l,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:c}=this._getSharedOptions(e,i),u=l.axis,f=o.axis;for(let p=e;p<e+s;p++){const m=t[p],h=!r&&this.getParsed(p),_={},b=_[u]=r?l.getPixelForDecimal(.5):l.getPixelForValue(h[u]),y=_[f]=r?o.getBasePixel():o.getPixelForValue(h[f]);_.skip=isNaN(b)||isNaN(y),c&&(_.options=a||this.resolveDataElementOptions(p,m.active?"active":i),r&&(_.options.radius=0)),this.updateElement(m,p,_,i)}}resolveDataElementOptions(t,e){const s=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return e!=="active"&&(i.radius=0),i.radius+=Zt(s&&s._custom,r),i}}X(Jo,"id","bubble"),X(Jo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),X(Jo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function sO(n,t,e){let s=1,i=1,r=0,l=0;if(t<Oe){const o=n,a=o+t,c=Math.cos(o),u=Math.sin(o),f=Math.cos(a),p=Math.sin(a),m=(A,E,T)=>Jl(A,o,a,!0)?1:Math.max(E,E*e,T,T*e),h=(A,E,T)=>Jl(A,o,a,!0)?-1:Math.min(E,E*e,T,T*e),_=m(0,c,f),b=m(Xe,u,p),y=h(fe,c,f),w=h(fe+Xe,u,p);s=(_-y)/2,i=(b-w)/2,r=-(_+y)/2,l=-(b+w)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:l}}class dr extends Bs{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=a=>+s[a];if(se(s[t])){const{key:a="value"}=this._parsing;r=c=>+Ji(s[c],a)}let l,o;for(l=t,o=t+e;l<o;++l)i._parsed[l]=r(l)}}_getRotation(){return Ds(this.options.rotation-90)}_getCircumference(){return Ds(this.options.circumference)}_getRotationExtents(){let t=Oe,e=-Oe;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),l=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+l)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:s}=e,i=this._cachedMeta,r=i.data,l=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(s.width,s.height)-l)/2,0),a=Math.min(gE(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:h,offsetY:_}=sO(f,u,a),b=(s.width-l)/p,y=(s.height-l)/m,w=Math.max(Math.min(b,y)/2,0),A=y0(this.options.radius,w),E=Math.max(A*a,0),T=(A-E)/this._getVisibleDatasetWeightTotal();this.offsetX=h*A,this.offsetY=_*A,i.total=this.calculateTotal(),this.outerRadius=A-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/Oe)}updateElements(t,e,s,i){const r=i==="reset",l=this.chart,o=l.chartArea,c=l.options.animation,u=(o.left+o.right)/2,f=(o.top+o.bottom)/2,p=r&&c.animateScale,m=p?0:this.innerRadius,h=p?0:this.outerRadius,{sharedOptions:_,includeOptions:b}=this._getSharedOptions(e,i);let y=this._getRotation(),w;for(w=0;w<e;++w)y+=this._circumference(w,r);for(w=e;w<e+s;++w){const A=this._circumference(w,r),E=t[w],T={x:u+this.offsetX,y:f+this.offsetY,startAngle:y,endAngle:y+A,circumference:A,outerRadius:h,innerRadius:m};b&&(T.options=_||this.resolveDataElementOptions(w,E.active?"active":i)),y+=A,this.updateElement(E,w,T,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let s=0,i;for(i=0;i<e.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Oe*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=po(e._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const s=this.chart;let i,r,l,o,a;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){l=s.getDatasetMeta(i),t=l.data,o=l.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)a=o.resolveDataElementOptions(i),a.borderAlign!=="inner"&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(e+=this._getRingWeight(s));return e}_getRingWeight(t){return Math.max(Zt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}X(dr,"id","doughnut"),X(dr,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),X(dr,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),X(dr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:s,textAlign:i,color:r,useBorderRadius:l,borderRadius:o}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((a,c)=>{const f=t.getDatasetMeta(0).controller.getStyle(c);return{text:a,fillStyle:f.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(c),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:i,pointStyle:s,borderRadius:l&&(o||f.borderRadius),index:c}}):[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}}});class Qo extends Bs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=e,l=this.chart._animationsDisabled;let{start:o,count:a}=O0(e,i,l);this._drawStart=o,this._drawCount=a,x0(e)&&(o=0,a=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!l,options:c},t),this.updateElements(i,o,a,t)}updateElements(t,e,s,i){const r=i==="reset",{iScale:l,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(e,i),p=l.axis,m=o.axis,{spanGaps:h,segment:_}=this.options,b=rl(h)?h:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||i==="none",w=e+s,A=t.length;let E=e>0&&this.getParsed(e-1);for(let T=0;T<A;++T){const C=t[T],M=y?C:{};if(T<e||T>=w){M.skip=!0;continue}const x=this.getParsed(T),D=ee(x[m]),L=M[p]=l.getPixelForValue(x[p],T),q=M[m]=r||D?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,x,a):x[m],T);M.skip=isNaN(L)||isNaN(q)||D,M.stop=T>0&&Math.abs(x[p]-E[p])>b,_&&(M.parsed=x,M.raw=c.data[T]),f&&(M.options=u||this.resolveDataElementOptions(T,C.active?"active":i)),y||this.updateElement(C,T,M,i),E=x}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,s=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),l=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}X(Qo,"id","line"),X(Qo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),X(Qo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Il extends Bs{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=po(e._parsed[t].r,s.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,s,i){return B0.bind(this)(t,e,s,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,s=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),l=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),o=(r-l)/t.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,s,i){const r=i==="reset",l=this.chart,a=l.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,f=c.yCenter,p=c.getIndexAngle(0)-.5*fe;let m=p,h;const _=360/this.countVisibleElements();for(h=0;h<e;++h)m+=this._computeAngle(h,i,_);for(h=e;h<e+s;h++){const b=t[h];let y=m,w=m+this._computeAngle(h,i,_),A=l.getDataVisibility(h)?c.getDistanceFromCenterForValue(this.getParsed(h).r):0;m=w,r&&(a.animateScale&&(A=0),a.animateRotate&&(y=w=p));const E={x:u,y:f,innerRadius:0,outerRadius:A,startAngle:y,endAngle:w,options:this.resolveDataElementOptions(h,b.active?"active":i)};this.updateElement(b,h,E,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((s,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++}),e}_computeAngle(t,e,s){return this.chart.getDataVisibility(t)?Ds(this.resolveDataElementOptions(t,e).angle||s):0}}X(Il,"id","polarArea"),X(Il,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),X(Il,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return e.labels.map((r,l)=>{const a=t.getDatasetMeta(0).controller.getStyle(l);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Tu extends dr{}X(Tu,"id","pie"),X(Tu,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class $o extends Bs{getLabelAndValue(t){const e=this._cachedMeta.vScale,s=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(s[e.axis])}}parseObjectData(t,e,s,i){return B0.bind(this)(t,e,s,i)}update(t){const e=this._cachedMeta,s=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(s.points=i,t!=="resize"){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===i.length,options:l};this.updateElement(s,void 0,o,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,s,i){const r=this._cachedMeta.rScale,l=i==="reset";for(let o=e;o<e+s;o++){const a=t[o],c=this.resolveDataElementOptions(o,a.active?"active":i),u=r.getPointPositionForValue(o,this.getParsed(o).r),f=l?r.xCenter:u.x,p=l?r.yCenter:u.y,m={x:f,y:p,angle:u.angle,skip:isNaN(f)||isNaN(p),options:c};this.updateElement(a,o,m,i)}}}X($o,"id","radar"),X($o,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),X($o,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class ta extends Bs{getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=e,l=this.getParsed(t),o=i.getLabelForValue(l.x),a=r.getLabelForValue(l.y);return{label:s[t]||"",value:"("+o+", "+a+")"}}update(t){const e=this._cachedMeta,{data:s=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:l}=O0(e,s,i);if(this._drawStart=r,this._drawCount=l,x0(e)&&(r=0,l=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:a}=e;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!a._decimated,o.points=s;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(s,r,l,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,s,i){const r=i==="reset",{iScale:l,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(e,i),f=this.getSharedOptions(u),p=this.includeOptions(i,f),m=l.axis,h=o.axis,{spanGaps:_,segment:b}=this.options,y=rl(_)?_:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||r||i==="none";let A=e>0&&this.getParsed(e-1);for(let E=e;E<e+s;++E){const T=t[E],C=this.getParsed(E),M=w?T:{},x=ee(C[h]),D=M[m]=l.getPixelForValue(C[m],E),L=M[h]=r||x?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,C,a):C[h],E);M.skip=isNaN(D)||isNaN(L)||x,M.stop=E>0&&Math.abs(C[m]-A[m])>y,b&&(M.parsed=C,M.raw=c.data[E]),p&&(M.options=f||this.resolveDataElementOptions(E,T.active?"active":i)),w||this.updateElement(T,E,M,i),A=C}this.updateSharedOptions(f,i,u)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let o=0;for(let a=e.length-1;a>=0;--a)o=Math.max(o,e[a].size(this.resolveDataElementOptions(a))/2);return o>0&&o}const s=t.dataset,i=s.options&&s.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),l=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,l)/2}}X(ta,"id","scatter"),X(ta,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),X(ta,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var iO=Object.freeze({__proto__:null,BarController:Zo,BubbleController:Jo,DoughnutController:dr,LineController:Qo,PieController:Tu,PolarAreaController:Il,RadarController:$o,ScatterController:ta});function ar(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class xf{constructor(t){X(this,"options");this.options=t||{}}static override(t){Object.assign(xf.prototype,t)}init(){}formats(){return ar()}parse(){return ar()}format(){return ar()}add(){return ar()}diff(){return ar()}startOf(){return ar()}endOf(){return ar()}}var rO={_date:xf};function lO(n,t,e,s){const{controller:i,data:r,_sorted:l}=n,o=i._cachedMeta.iScale,a=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&l&&r.length){const c=o._reversePixels?OE:bi;if(s){if(i._sharedOptions){const u=r[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){const p=c(r,t,e-f),m=c(r,t,e+f);return{lo:p.lo,hi:m.hi}}}}else{const u=c(r,t,e);if(a){const{vScale:f}=i._cachedMeta,{_parsed:p}=n,m=p.slice(0,u.lo+1).reverse().findIndex(_=>!ee(_[f.axis]));u.lo-=Math.max(0,m);const h=p.slice(u.hi).findIndex(_=>!ee(_[f.axis]));u.hi+=Math.max(0,h)}return u}}return{lo:0,hi:r.length-1}}function Ja(n,t,e,s,i){const r=n.getSortedVisibleDatasetMetas(),l=e[t];for(let o=0,a=r.length;o<a;++o){const{index:c,data:u}=r[o],{lo:f,hi:p}=lO(r[o],t,l,i);for(let m=f;m<=p;++m){const h=u[m];h.skip||s(h,c,m)}}}function oO(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,l=e?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(l,2))}}function Lc(n,t,e,s,i){const r=[];return!i&&!n.isPointInArea(t)||Ja(n,e,t,function(o,a,c){!i&&!vi(o,n.chartArea,0)||o.inRange(t.x,t.y,s)&&r.push({element:o,datasetIndex:a,index:c})},!0),r}function aO(n,t,e,s){let i=[];function r(l,o,a){const{startAngle:c,endAngle:u}=l.getProps(["startAngle","endAngle"],s),{angle:f}=S0(l,{x:t.x,y:t.y});Jl(f,c,u)&&i.push({element:l,datasetIndex:o,index:a})}return Ja(n,e,t,r),i}function cO(n,t,e,s,i,r){let l=[];const o=oO(e);let a=Number.POSITIVE_INFINITY;function c(u,f,p){const m=u.inRange(t.x,t.y,i);if(s&&!m)return;const h=u.getCenterPoint(i);if(!(!!r||n.isPointInArea(h))&&!m)return;const b=o(t,h);b<a?(l=[{element:u,datasetIndex:f,index:p}],a=b):b===a&&l.push({element:u,datasetIndex:f,index:p})}return Ja(n,e,t,c),l}function Nc(n,t,e,s,i,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!s?aO(n,t,e,i):cO(n,t,e,s,i,r)}function Ig(n,t,e,s,i){const r=[],l=e==="x"?"inXRange":"inYRange";let o=!1;return Ja(n,e,t,(a,c,u)=>{a[l]&&a[l](t[e],i)&&(r.push({element:a,datasetIndex:c,index:u}),o=o||a.inRange(t.x,t.y,i))}),s&&!o?[]:r}var uO={modes:{index(n,t,e,s){const i=ur(t,n),r=e.axis||"x",l=e.includeInvisible||!1,o=e.intersect?Lc(n,i,r,s,l):Nc(n,i,r,!1,s,l),a=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=o[0].index,f=c.data[u];f&&!f.skip&&a.push({element:f,datasetIndex:c.index,index:u})}),a):[]},dataset(n,t,e,s){const i=ur(t,n),r=e.axis||"xy",l=e.includeInvisible||!1;let o=e.intersect?Lc(n,i,r,s,l):Nc(n,i,r,!1,s,l);if(o.length>0){const a=o[0].datasetIndex,c=n.getDatasetMeta(a).data;o=[];for(let u=0;u<c.length;++u)o.push({element:c[u],datasetIndex:a,index:u})}return o},point(n,t,e,s){const i=ur(t,n),r=e.axis||"xy",l=e.includeInvisible||!1;return Lc(n,i,r,s,l)},nearest(n,t,e,s){const i=ur(t,n),r=e.axis||"xy",l=e.includeInvisible||!1;return Nc(n,i,r,e.intersect,s,l)},x(n,t,e,s){const i=ur(t,n);return Ig(n,i,"x",e.intersect,s)},y(n,t,e,s){const i=ur(t,n);return Ig(n,i,"y",e.intersect,s)}}};const X0=["left","top","right","bottom"];function ml(n,t){return n.filter(e=>e.pos===t)}function Dg(n,t){return n.filter(e=>X0.indexOf(e.pos)===-1&&e.box.axis===t)}function _l(n,t){return n.sort((e,s)=>{const i=t?s:e,r=t?e:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function fO(n){const t=[];let e,s,i,r,l,o;for(e=0,s=(n||[]).length;e<s;++e)i=n[e],{position:r,options:{stack:l,stackWeight:o=1}}=i,t.push({index:e,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:l&&r+l,stackWeight:o});return t}function hO(n){const t={};for(const e of n){const{stack:s,pos:i,stackWeight:r}=e;if(!s||!X0.includes(i))continue;const l=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=r}return t}function dO(n,t){const e=hO(n),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,l,o;for(r=0,l=n.length;r<l;++r){o=n[r];const{fullSize:a}=o.box,c=e[o.stack],u=c&&o.stackWeight/c.weight;o.horizontal?(o.width=u?u*s:a&&t.availableWidth,o.height=i):(o.width=s,o.height=u?u*i:a&&t.availableHeight)}return e}function pO(n){const t=fO(n),e=_l(t.filter(c=>c.box.fullSize),!0),s=_l(ml(t,"left"),!0),i=_l(ml(t,"right")),r=_l(ml(t,"top"),!0),l=_l(ml(t,"bottom")),o=Dg(t,"x"),a=Dg(t,"y");return{fullSize:e,leftAndTop:s.concat(r),rightAndBottom:i.concat(a).concat(l).concat(o),chartArea:ml(t,"chartArea"),vertical:s.concat(i).concat(a),horizontal:r.concat(l).concat(o)}}function Rg(n,t,e,s){return Math.max(n[e],t[e])+Math.max(n[s],t[s])}function G0(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function gO(n,t,e,s){const{pos:i,box:r}=e,l=n.maxPadding;if(!se(i)){e.size&&(n[i]-=e.size);const f=s[e.stack]||{size:0,count:1};f.size=Math.max(f.size,e.horizontal?r.height:r.width),e.size=f.size/f.count,n[i]+=e.size}r.getPadding&&G0(l,r.getPadding());const o=Math.max(0,t.outerWidth-Rg(l,n,"left","right")),a=Math.max(0,t.outerHeight-Rg(l,n,"top","bottom")),c=o!==n.w,u=a!==n.h;return n.w=o,n.h=a,e.horizontal?{same:c,other:u}:{same:u,other:c}}function mO(n){const t=n.maxPadding;function e(s){const i=Math.max(t[s]-n[s],0);return n[s]+=i,i}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function _O(n,t){const e=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(l=>{r[l]=Math.max(t[l],e[l])}),r}return s(n?["left","right"]:["top","bottom"])}function Sl(n,t,e,s){const i=[];let r,l,o,a,c,u;for(r=0,l=n.length,c=0;r<l;++r){o=n[r],a=o.box,a.update(o.width||t.w,o.height||t.h,_O(o.horizontal,t));const{same:f,other:p}=gO(t,e,o,s);c|=f&&i.length,u=u||p,a.fullSize||i.push(o)}return c&&Sl(i,t,e,s)||u}function Io(n,t,e,s,i){n.top=e,n.left=t,n.right=t+s,n.bottom=e+i,n.width=s,n.height=i}function Pg(n,t,e,s){const i=e.padding;let{x:r,y:l}=t;for(const o of n){const a=o.box,c=s[o.stack]||{placed:0,weight:1},u=o.stackWeight/c.weight||1;if(o.horizontal){const f=t.w*u,p=c.size||a.height;Zl(c.start)&&(l=c.start),a.fullSize?Io(a,i.left,l,e.outerWidth-i.right-i.left,p):Io(a,t.left+c.placed,l,f,p),c.start=l,c.placed+=f,l=a.bottom}else{const f=t.h*u,p=c.size||a.width;Zl(c.start)&&(r=c.start),a.fullSize?Io(a,r,i.top,p,e.outerHeight-i.bottom-i.top):Io(a,r,t.top+c.placed,p,f),c.start=r,c.placed+=f,r=a.right}}t.x=r,t.y=l}var En={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,s){if(!n)return;const i=xn(n.options.layout.padding),r=Math.max(t-i.width,0),l=Math.max(e-i.height,0),o=pO(n.boxes),a=o.vertical,c=o.horizontal;be(n.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=a.reduce((_,b)=>b.box.options&&b.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:r,availableHeight:l,vBoxMaxWidth:r/2/u,hBoxMaxHeight:l/2}),p=Object.assign({},i);G0(p,xn(s));const m=Object.assign({maxPadding:p,w:r,h:l,x:i.left,y:i.top},i),h=dO(a.concat(c),f);Sl(o.fullSize,m,f,h),Sl(a,m,f,h),Sl(c,m,f,h)&&Sl(a,m,f,h),mO(m),Pg(o.leftAndTop,m,f,h),m.x+=m.w,m.y+=m.h,Pg(o.rightAndBottom,m,f,h),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},be(o.chartArea,_=>{const b=_.box;Object.assign(b,n.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Z0{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,i){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):s)}}isAttached(t){return!0}updateConfig(t){}}class bO extends Z0{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ea="$chartjs",vO={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Bg=n=>n===null||n==="";function yO(n,t){const e=n.style,s=n.getAttribute("height"),i=n.getAttribute("width");if(n[ea]={initial:{height:s,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Bg(i)){const r=yg(n,"width");r!==void 0&&(n.width=r)}if(Bg(s))if(n.style.height==="")n.height=n.width/(t||2);else{const r=yg(n,"height");r!==void 0&&(n.height=r)}return n}const J0=kC?{passive:!0}:!1;function kO(n,t,e){n&&n.addEventListener(t,e,J0)}function wO(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,J0)}function SO(n,t){const e=vO[n.type]||n.type,{x:s,y:i}=ur(n,t);return{type:e,chart:t,native:n,x:s!==void 0?s:null,y:i!==void 0?i:null}}function wa(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function AO(n,t,e){const s=n.canvas,i=new MutationObserver(r=>{let l=!1;for(const o of r)l=l||wa(o.addedNodes,s),l=l&&!wa(o.removedNodes,s);l&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function TO(n,t,e){const s=n.canvas,i=new MutationObserver(r=>{let l=!1;for(const o of r)l=l||wa(o.removedNodes,s),l=l&&!wa(o.addedNodes,s);l&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const $l=new Map;let qg=0;function Q0(){const n=window.devicePixelRatio;n!==qg&&(qg=n,$l.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function EO(n,t){$l.size||window.addEventListener("resize",Q0),$l.set(n,t)}function CO(n){$l.delete(n),$l.size||window.removeEventListener("resize",Q0)}function OO(n,t,e){const s=n.canvas,i=s&&Of(s);if(!i)return;const r=C0((o,a)=>{const c=i.clientWidth;e(o,a),c<i.clientWidth&&e()},window),l=new ResizeObserver(o=>{const a=o[0],c=a.contentRect.width,u=a.contentRect.height;c===0&&u===0||r(c,u)});return l.observe(i),EO(n,r),l}function Ic(n,t,e){e&&e.disconnect(),t==="resize"&&CO(n)}function xO(n,t,e){const s=n.canvas,i=C0(r=>{n.ctx!==null&&e(SO(r,n))},n);return kO(s,t,i),i}class MO extends Z0{acquireContext(t,e){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(yO(t,e),s):null}releaseContext(t){const e=t.canvas;if(!e[ea])return!1;const s=e[ea].initial;["height","width"].forEach(r=>{const l=s[r];ee(l)?e.removeAttribute(r):e.setAttribute(r,l)});const i=s.style||{};return Object.keys(i).forEach(r=>{e.style[r]=i[r]}),e.width=e.width,delete e[ea],!0}addEventListener(t,e,s){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),l={attach:AO,detach:TO,resize:OO}[e]||xO;i[e]=l(t,e,s)}removeEventListener(t,e){const s=t.$proxies||(t.$proxies={}),i=s[e];if(!i)return;({attach:Ic,detach:Ic,resize:Ic}[e]||wO)(t,e,i),s[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,i){return yC(t,e,s,i)}isAttached(t){const e=t&&Of(t);return!!(e&&e.isConnected)}}function LO(n){return!Cf()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?bO:MO}var zo;let Ei=(zo=class{constructor(){X(this,"x");X(this,"y");X(this,"active",!1);X(this,"options");X(this,"$animations")}tooltipPosition(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return rl(this.x)&&rl(this.y)}getProps(t,e){const s=this.$animations;if(!e||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}},X(zo,"defaults",{}),X(zo,"defaultRoutes"),zo);function NO(n,t){const e=n.options.ticks,s=IO(n),i=Math.min(e.maxTicksLimit||s,s),r=e.major.enabled?RO(t):[],l=r.length,o=r[0],a=r[l-1],c=[];if(l>i)return PO(t,c,r,l/i),c;const u=DO(r,t,i);if(l>0){let f,p;const m=l>1?Math.round((a-o)/(l-1)):null;for(Do(t,c,u,ee(m)?0:o-m,o),f=0,p=l-1;f<p;f++)Do(t,c,u,r[f],r[f+1]);return Do(t,c,u,a,ee(m)?t.length:a+m),c}return Do(t,c,u),c}function IO(n){const t=n.options.offset,e=n._tickSize(),s=n._length/e+(t?0:1),i=n._maxLength/e;return Math.floor(Math.min(s,i))}function DO(n,t,e){const s=BO(n),i=t.length/e;if(!s)return Math.max(i,1);const r=SE(s);for(let l=0,o=r.length-1;l<o;l++){const a=r[l];if(a>i)return a}return Math.max(i,1)}function RO(n){const t=[];let e,s;for(e=0,s=n.length;e<s;e++)n[e].major&&t.push(e);return t}function PO(n,t,e,s){let i=0,r=e[0],l;for(s=Math.ceil(s),l=0;l<n.length;l++)l===r&&(t.push(n[l]),i++,r=e[i*s])}function Do(n,t,e,s,i){const r=Zt(s,0),l=Math.min(Zt(i,n.length),n.length);let o=0,a,c,u;for(e=Math.ceil(e),i&&(a=i-s,e=a/Math.floor(a/e)),u=r;u<0;)o++,u=Math.round(r+o*e);for(c=Math.max(r,0);c<l;c++)c===u&&(t.push(n[c]),o++,u=Math.round(r+o*e))}function BO(n){const t=n.length;let e,s;if(t<2)return!1;for(s=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==s)return!1;return s}const qO=n=>n==="left"?"right":n==="right"?"left":n,Fg=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,jg=(n,t)=>Math.min(t||n,n);function zg(n,t){const e=[],s=n.length/t,i=n.length;let r=0;for(;r<i;r+=s)e.push(n[Math.floor(r)]);return e}function FO(n,t,e){const s=n.ticks.length,i=Math.min(t,s-1),r=n._startPixel,l=n._endPixel,o=1e-6;let a=n.getPixelForTick(i),c;if(!(e&&(s===1?c=Math.max(a-r,l-a):t===0?c=(n.getPixelForTick(1)-a)/2:c=(a-n.getPixelForTick(i-1))/2,a+=i<t?c:-c,a<r-o||a>l+o)))return a}function jO(n,t){be(n,e=>{const s=e.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[s[r]];s.splice(0,i)}})}function bl(n){return n.drawTicks?n.tickLength:0}function Hg(n,t){if(!n.display)return 0;const e=fn(n.font,t),s=xn(n.padding);return(Le(n.text)?n.text.length:1)*e.lineHeight+s.height}function zO(n,t){return er(n,{scale:t,type:"scale"})}function HO(n,t,e){return er(n,{tick:e,index:t,type:"tick"})}function UO(n,t,e){let s=kf(n);return(e&&t!=="right"||!e&&t==="right")&&(s=qO(s)),s}function WO(n,t,e,s){const{top:i,left:r,bottom:l,right:o,chart:a}=n,{chartArea:c,scales:u}=a;let f=0,p,m,h;const _=l-i,b=o-r;if(n.isHorizontal()){if(m=wn(s,r,o),se(e)){const y=Object.keys(e)[0],w=e[y];h=u[y].getPixelForValue(w)+_-t}else e==="center"?h=(c.bottom+c.top)/2+_-t:h=Fg(n,e,t);p=o-r}else{if(se(e)){const y=Object.keys(e)[0],w=e[y];m=u[y].getPixelForValue(w)-b+t}else e==="center"?m=(c.left+c.right)/2-b+t:m=Fg(n,e,t);h=wn(s,l,i),f=e==="left"?-Xe:Xe}return{titleX:m,titleY:h,maxWidth:p,rotation:f}}class Lr extends Ei{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:i}=this;return t=Jn(t,Number.POSITIVE_INFINITY),e=Jn(e,Number.NEGATIVE_INFINITY),s=Jn(s,Number.POSITIVE_INFINITY),i=Jn(i,Number.NEGATIVE_INFINITY),{min:Jn(t,s),max:Jn(e,i),minDefined:We(t),maxDefined:We(e)}}getMinMax(t){let{min:e,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),l;if(i&&r)return{min:e,max:s};const o=this.getMatchingVisibleMetas();for(let a=0,c=o.length;a<c;++a)l=o[a].controller.getMinMax(this,t),i||(e=Math.min(e,l.min)),r||(s=Math.max(s,l.max));return e=r&&e>s?s:e,s=i&&e>s?e:s,{min:Jn(e,Jn(s,e)),max:Jn(s,Jn(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ae(this.options.beforeUpdate,[this])}update(t,e,s){const{beginAtZero:i,grace:r,ticks:l}=this.options,o=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=QE(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?zg(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=NO(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,s;this.isHorizontal()?(e=this.left,s=this.right):(e=this.top,s=this.bottom,t=!t),this._startPixel=e,this._endPixel=s,this._reversePixels=t,this._length=s-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ae(this.options.afterUpdate,[this])}beforeSetDimensions(){Ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ae(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ae(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=Ae(e.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,s=jg(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let l=i,o,a,c;if(!this._isVisible()||!e.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,m=pn(this.chart.width-f,0,this.maxWidth);o=t.offset?this.maxWidth/s:m/(s-1),f+6>o&&(o=m/(s-(t.offset?.5:1)),a=this.maxHeight-bl(t.grid)-e.padding-Hg(t.title,this.chart.options.font),c=Math.sqrt(f*f+p*p),l=vf(Math.min(Math.asin(pn((u.highest.height+6)/o,-1,1)),Math.asin(pn(a/c,-1,1))-Math.asin(pn(p/c,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ae(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:s,title:i,grid:r}}=this,l=this._isVisible(),o=this.isHorizontal();if(l){const a=Hg(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=bl(r)+a):(t.height=this.maxHeight,t.width=bl(r)+a),s.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:p}=this._getLabelSizes(),m=s.padding*2,h=Ds(this.labelRotation),_=Math.cos(h),b=Math.sin(h);if(o){const y=s.mirror?0:b*f.width+_*p.height;t.height=Math.min(this.maxHeight,t.height+y+m)}else{const y=s.mirror?0:_*f.width+b*p.height;t.width=Math.min(this.maxWidth,t.width+y+m)}this._calculatePadding(c,u,b,_)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,i){const{ticks:{align:r,padding:l},position:o}=this.options,a=this.labelRotation!==0,c=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;a?c?(p=i*t.width,m=s*e.height):(p=s*t.height,m=i*e.width):r==="start"?m=e.width:r==="end"?p=t.width:r!=="inner"&&(p=t.width/2,m=e.width/2),this.paddingLeft=Math.max((p-u+l)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-f+l)*this.width/(this.width-f),0)}else{let u=e.height/2,f=t.height/2;r==="start"?(u=0,f=t.height):r==="end"&&(u=e.height,f=0),this.paddingTop=u+l,this.paddingBottom=f+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ae(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,s;for(e=0,s=t.length;e<s;e++)ee(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let s=this.ticks;e<s.length&&(s=zg(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){const{ctx:i,_longestTextCache:r}=this,l=[],o=[],a=Math.floor(e/jg(e,s));let c=0,u=0,f,p,m,h,_,b,y,w,A,E,T;for(f=0;f<e;f+=a){if(h=t[f].label,_=this._resolveTickFontOptions(f),i.font=b=_.string,y=r[b]=r[b]||{data:{},gc:[]},w=_.lineHeight,A=E=0,!ee(h)&&!Le(h))A=ya(i,y.data,y.gc,A,h),E=w;else if(Le(h))for(p=0,m=h.length;p<m;++p)T=h[p],!ee(T)&&!Le(T)&&(A=ya(i,y.data,y.gc,A,T),E+=w);l.push(A),o.push(E),c=Math.max(A,c),u=Math.max(E,u)}jO(r,e);const C=l.indexOf(c),M=o.indexOf(u),x=D=>({width:l[D]||0,height:o[D]||0});return{first:x(0),last:x(e-1),widest:x(C),highest:x(M),widths:l,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return CE(this._alignToPixels?or(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const s=e[t];return s.$context||(s.$context=HO(this.getContext(),t,s))}return this.$context||(this.$context=zO(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Ds(this.labelRotation),s=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),l=t.autoSkipPadding||0,o=r?r.widest.width+l:0,a=r?r.highest.height+l:0;return this.isHorizontal()?a*s>o*i?o/s:a/i:a*i<o*s?a/s:o/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,s=this.chart,i=this.options,{grid:r,position:l,border:o}=i,a=r.offset,c=this.isHorizontal(),f=this.ticks.length+(a?1:0),p=bl(r),m=[],h=o.setContext(this.getContext()),_=h.display?h.width:0,b=_/2,y=function(W){return or(s,W,_)};let w,A,E,T,C,M,x,D,L,q,F,nt;if(l==="top")w=y(this.bottom),M=this.bottom-p,D=w-b,q=y(t.top)+b,nt=t.bottom;else if(l==="bottom")w=y(this.top),q=t.top,nt=y(t.bottom)-b,M=w+b,D=this.top+p;else if(l==="left")w=y(this.right),C=this.right-p,x=w-b,L=y(t.left)+b,F=t.right;else if(l==="right")w=y(this.left),L=t.left,F=y(t.right)-b,C=w+b,x=this.left+p;else if(e==="x"){if(l==="center")w=y((t.top+t.bottom)/2+.5);else if(se(l)){const W=Object.keys(l)[0],V=l[W];w=y(this.chart.scales[W].getPixelForValue(V))}q=t.top,nt=t.bottom,M=w+b,D=M+p}else if(e==="y"){if(l==="center")w=y((t.left+t.right)/2);else if(se(l)){const W=Object.keys(l)[0],V=l[W];w=y(this.chart.scales[W].getPixelForValue(V))}C=w-b,x=C-p,L=t.left,F=t.right}const et=Zt(i.ticks.maxTicksLimit,f),U=Math.max(1,Math.ceil(f/et));for(A=0;A<f;A+=U){const W=this.getContext(A),V=r.setContext(W),$=o.setContext(W),st=V.lineWidth,Z=V.color,wt=$.dash||[],rt=$.dashOffset,at=V.tickWidth,vt=V.tickColor,K=V.tickBorderDash||[],ct=V.tickBorderDashOffset;E=FO(this,A,a),E!==void 0&&(T=or(s,E,st),c?C=x=L=F=T:M=D=q=nt=T,m.push({tx1:C,ty1:M,tx2:x,ty2:D,x1:L,y1:q,x2:F,y2:nt,width:st,color:Z,borderDash:wt,borderDashOffset:rt,tickWidth:at,tickColor:vt,tickBorderDash:K,tickBorderDashOffset:ct}))}return this._ticksLength=f,this._borderValue=w,m}_computeLabelItems(t){const e=this.axis,s=this.options,{position:i,ticks:r}=s,l=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:c,padding:u,mirror:f}=r,p=bl(s.grid),m=p+u,h=f?-u:m,_=-Ds(this.labelRotation),b=[];let y,w,A,E,T,C,M,x,D,L,q,F,nt="middle";if(i==="top")C=this.bottom-h,M=this._getXAxisLabelAlignment();else if(i==="bottom")C=this.top+h,M=this._getXAxisLabelAlignment();else if(i==="left"){const U=this._getYAxisLabelAlignment(p);M=U.textAlign,T=U.x}else if(i==="right"){const U=this._getYAxisLabelAlignment(p);M=U.textAlign,T=U.x}else if(e==="x"){if(i==="center")C=(t.top+t.bottom)/2+m;else if(se(i)){const U=Object.keys(i)[0],W=i[U];C=this.chart.scales[U].getPixelForValue(W)+m}M=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")T=(t.left+t.right)/2-m;else if(se(i)){const U=Object.keys(i)[0],W=i[U];T=this.chart.scales[U].getPixelForValue(W)}M=this._getYAxisLabelAlignment(p).textAlign}e==="y"&&(a==="start"?nt="top":a==="end"&&(nt="bottom"));const et=this._getLabelSizes();for(y=0,w=o.length;y<w;++y){A=o[y],E=A.label;const U=r.setContext(this.getContext(y));x=this.getPixelForTick(y)+r.labelOffset,D=this._resolveTickFontOptions(y),L=D.lineHeight,q=Le(E)?E.length:1;const W=q/2,V=U.color,$=U.textStrokeColor,st=U.textStrokeWidth;let Z=M;l?(T=x,M==="inner"&&(y===w-1?Z=this.options.reverse?"left":"right":y===0?Z=this.options.reverse?"right":"left":Z="center"),i==="top"?c==="near"||_!==0?F=-q*L+L/2:c==="center"?F=-et.highest.height/2-W*L+L:F=-et.highest.height+L/2:c==="near"||_!==0?F=L/2:c==="center"?F=et.highest.height/2-W*L:F=et.highest.height-q*L,f&&(F*=-1),_!==0&&!U.showLabelBackdrop&&(T+=L/2*Math.sin(_))):(C=x,F=(1-q)*L/2);let wt;if(U.showLabelBackdrop){const rt=xn(U.backdropPadding),at=et.heights[y],vt=et.widths[y];let K=F-rt.top,ct=0-rt.left;switch(nt){case"middle":K-=at/2;break;case"bottom":K-=at;break}switch(M){case"center":ct-=vt/2;break;case"right":ct-=vt;break;case"inner":y===w-1?ct-=vt:y>0&&(ct-=vt/2);break}wt={left:ct,top:K,width:vt+rt.width,height:at+rt.height,color:U.backdropColor}}b.push({label:E,font:D,textOffset:F,options:{rotation:_,color:V,strokeColor:$,strokeWidth:st,textAlign:Z,textBaseline:nt,translation:[T,C],backdrop:wt}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Ds(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,l=this._getLabelSizes(),o=t+r,a=l.widest.width;let c,u;return e==="left"?i?(u=this.right+r,s==="near"?c="left":s==="center"?(c="center",u+=a/2):(c="right",u+=a)):(u=this.right-o,s==="near"?c="right":s==="center"?(c="center",u-=a/2):(c="left",u=this.left)):e==="right"?i?(u=this.left+r,s==="near"?c="right":s==="center"?(c="center",u-=a/2):(c="left",u-=a)):(u=this.left+o,s==="near"?c="left":s==="center"?(c="center",u+=a/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:s,top:i,width:r,height:l}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,i,r,l),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,l;const o=(a,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(a.x,a.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(e.display)for(r=0,l=i.length;r<l;++r){const a=i[r];e.drawOnChartArea&&o({x:a.x1,y:a.y1},{x:a.x2,y:a.y2},a),e.drawTicks&&o({x:a.tx1,y:a.ty1},{x:a.tx2,y:a.ty2},{color:a.tickColor,width:a.tickWidth,borderDash:a.tickBorderDash,borderDashOffset:a.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),l=s.display?r.width:0;if(!l)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let c,u,f,p;this.isHorizontal()?(c=or(t,this.left,l)-l/2,u=or(t,this.right,o)+o/2,f=p=a):(f=or(t,this.top,l)-l/2,p=or(t,this.bottom,o)+o/2,c=u=a),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(c,f),e.lineTo(u,p),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&Xa(s,i);const r=this.getLabelItems(t);for(const l of r){const o=l.options,a=l.font,c=l.label,u=l.textOffset;Sr(s,c,0,u,a,o)}i&&Ga(s)}drawTitle(){const{ctx:t,options:{position:e,title:s,reverse:i}}=this;if(!s.display)return;const r=fn(s.font),l=xn(s.padding),o=s.align;let a=r.lineHeight/2;e==="bottom"||e==="center"||se(e)?(a+=l.bottom,Le(s.text)&&(a+=r.lineHeight*(s.text.length-1))):a+=l.top;const{titleX:c,titleY:u,maxWidth:f,rotation:p}=WO(this,a,e,o);Sr(t,s.text,0,0,r,{color:s.color,maxWidth:f,rotation:p,textAlign:UO(o,e,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,s=Zt(t.grid&&t.grid.z,-1),i=Zt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Lr.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,l;for(r=0,l=e.length;r<l;++r){const o=e[r];o[s]===this.id&&(!t||o.type===t)&&i.push(o)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return fn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Ro{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let s;YO(e)&&(s=this.register(e));const i=this.items,r=t.id,l=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,VO(t,l,s),this.override&&Ne.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const e=this.items,s=t.id,i=this.scope;s in e&&delete e[s],i&&s in Ne[i]&&(delete Ne[i][s],this.override&&delete wr[s])}}function VO(n,t,e){const s=Gl(Object.create(null),[e?Ne.get(e):{},Ne.get(t),n.defaults]);Ne.set(t,s),n.defaultRoutes&&KO(t,n.defaultRoutes),n.descriptors&&Ne.describe(t,n.descriptors)}function KO(n,t){Object.keys(t).forEach(e=>{const s=e.split("."),i=s.pop(),r=[n].concat(s).join("."),l=t[e].split("."),o=l.pop(),a=l.join(".");Ne.route(r,i,a,o)})}function YO(n){return"id"in n&&"defaults"in n}class XO{constructor(){this.controllers=new Ro(Bs,"datasets",!0),this.elements=new Ro(Ei,"elements"),this.plugins=new Ro(Object,"plugins"),this.scales=new Ro(Lr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):be(i,l=>{const o=s||this._getRegistryForType(l);this._exec(t,o,l)})})}_exec(t,e,s){const i=bf(t);Ae(s["before"+i],[],s),e[t](s),Ae(s["after"+i],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var Xs=new XO;class GO{constructor(){this._init=void 0}notify(t,e,s,i){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=i?this._descriptors(t).filter(i):this._descriptors(t),l=this._notify(r,t,e,s);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),l}_notify(t,e,s,i){i=i||{};for(const r of t){const l=r.plugin,o=l[s],a=[e,i,r.options];if(Ae(o,a,l)===!1&&i.cancelable)return!1}return!0}invalidate(){ee(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const s=t&&t.config,i=Zt(s.options&&s.options.plugins,{}),r=ZO(s);return i===!1&&!e?[]:QO(t,r,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],s=this._cache,i=(r,l)=>r.filter(o=>!l.some(a=>o.plugin.id===a.plugin.id));this._notify(i(e,s),t,"stop"),this._notify(i(s,e),t,"start")}}function ZO(n){const t={},e=[],s=Object.keys(Xs.plugins.items);for(let r=0;r<s.length;r++)e.push(Xs.getPlugin(s[r]));const i=n.plugins||[];for(let r=0;r<i.length;r++){const l=i[r];e.indexOf(l)===-1&&(e.push(l),t[l.id]=!0)}return{plugins:e,localIds:t}}function JO(n,t){return!t&&n===!1?null:n===!0?{}:n}function QO(n,{plugins:t,localIds:e},s,i){const r=[],l=n.getContext();for(const o of t){const a=o.id,c=JO(s[a],i);c!==null&&r.push({plugin:o,options:$O(n.config,{plugin:o,local:e[a]},c,l)})}return r}function $O(n,{plugin:t,local:e},s,i){const r=n.pluginScopeKeys(t),l=n.getOptionScopes(s,r);return e&&t.defaults&&l.push(t.defaults),n.createResolver(l,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Eu(n,t){const e=Ne.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function tx(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function ex(n,t){return n===t?"_index_":"_value_"}function Ug(n){if(n==="x"||n==="y"||n==="r")return n}function nx(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Cu(n,...t){if(Ug(n))return n;for(const e of t){const s=e.axis||nx(e.position)||n.length>1&&Ug(n[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Wg(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function sx(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(s=>s.xAxisID===n||s.yAxisID===n);if(e.length)return Wg(n,"x",e[0])||Wg(n,"y",e[0])}return{}}function ix(n,t){const e=wr[n.type]||{scales:{}},s=t.scales||{},i=Eu(n.type,t),r=Object.create(null);return Object.keys(s).forEach(l=>{const o=s[l];if(!se(o))return console.error(`Invalid scale configuration for scale: ${l}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const a=Cu(l,o,sx(l,n),Ne.scales[o.type]),c=ex(a,i),u=e.scales||{};r[l]=xl(Object.create(null),[{axis:a},o,u[a],u[c]])}),n.data.datasets.forEach(l=>{const o=l.type||n.type,a=l.indexAxis||Eu(o,t),u=(wr[o]||{}).scales||{};Object.keys(u).forEach(f=>{const p=tx(f,a),m=l[p+"AxisID"]||p;r[m]=r[m]||Object.create(null),xl(r[m],[{axis:p},s[m],u[f]])})}),Object.keys(r).forEach(l=>{const o=r[l];xl(o,[Ne.scales[o.type],Ne.scale])}),r}function $0(n){const t=n.options||(n.options={});t.plugins=Zt(t.plugins,{}),t.scales=ix(n,t)}function tv(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function rx(n){return n=n||{},n.data=tv(n.data),$0(n),n}const Vg=new Map,ev=new Set;function Po(n,t){let e=Vg.get(n);return e||(e=t(),Vg.set(n,e),ev.add(e)),e}const vl=(n,t,e)=>{const s=Ji(t,e);s!==void 0&&n.add(s)};class lx{constructor(t){this._config=rx(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=tv(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),$0(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Po(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Po(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Po(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,s=this.type;return Po(`${s}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const s=this._scopeCache;let i=s.get(t);return(!i||e)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,e,s){const{options:i,type:r}=this,l=this._cachedScopes(t,s),o=l.get(e);if(o)return o;const a=new Set;e.forEach(u=>{t&&(a.add(t),u.forEach(f=>vl(a,t,f))),u.forEach(f=>vl(a,i,f)),u.forEach(f=>vl(a,wr[r]||{},f)),u.forEach(f=>vl(a,Ne,f)),u.forEach(f=>vl(a,Su,f))});const c=Array.from(a);return c.length===0&&c.push(Object.create(null)),ev.has(e)&&l.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,wr[e]||{},Ne.datasets[e]||{},{type:e},Ne,Su]}resolveNamedOptions(t,e,s,i=[""]){const r={$shared:!0},{resolver:l,subPrefixes:o}=Kg(this._resolverCache,t,i);let a=l;if(ax(l,e)){r.$shared=!1,s=Qi(s)?s():s;const c=this.createResolver(t,s,o);a=ll(l,s,c)}for(const c of e)r[c]=a[c];return r}createResolver(t,e,s=[""],i){const{resolver:r}=Kg(this._resolverCache,t,s);return se(e)?ll(r,e,void 0,i):r}}function Kg(n,t,e){let s=n.get(t);s||(s=new Map,n.set(t,s));const i=e.join();let r=s.get(i);return r||(r={resolver:Af(t,e),subPrefixes:e.filter(o=>!o.toLowerCase().includes("hover"))},s.set(i,r)),r}const ox=n=>se(n)&&Object.getOwnPropertyNames(n).some(t=>Qi(n[t]));function ax(n,t){const{isScriptable:e,isIndexable:s}=I0(n);for(const i of t){const r=e(i),l=s(i),o=(l||r)&&n[i];if(r&&(Qi(o)||ox(o))||l&&Le(o))return!0}return!1}var cx="4.5.1";const ux=["top","bottom","left","right","chartArea"];function Yg(n,t){return n==="top"||n==="bottom"||ux.indexOf(n)===-1&&t==="x"}function Xg(n,t){return function(e,s){return e[n]===s[n]?e[t]-s[t]:e[n]-s[n]}}function Gg(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Ae(e&&e.onComplete,[n],t)}function fx(n){const t=n.chart,e=t.options.animation;Ae(e&&e.onProgress,[n],t)}function nv(n){return Cf()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const na={},Zg=n=>{const t=nv(n);return Object.values(na).filter(e=>e.canvas===t).pop()};function hx(n,t,e){const s=Object.keys(n);for(const i of s){const r=+i;if(r>=t){const l=n[i];delete n[i],(e>0||r>t)&&(n[r+e]=l)}}}function dx(n,t,e,s){return!e||n.type==="mouseout"?null:s?t:n}class pi{static register(...t){Xs.add(...t),Jg()}static unregister(...t){Xs.remove(...t),Jg()}constructor(t,e){const s=this.config=new lx(e),i=nv(t),r=Zg(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const l=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||LO(i)),this.platform.updateConfig(s);const o=this.platform.acquireContext(i,l.aspectRatio),a=o&&o.canvas,c=a&&a.height,u=a&&a.width;if(this.id=pE(),this.ctx=o,this.canvas=a,this.width=u,this.height=c,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new GO,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=LE(f=>this.update(f),l.resizeDelay||0),this._dataChanges=[],na[this.id]=this,!o||!a){console.error("Failed to create chart: can't acquire context from the given item");return}fi.listen(this,"complete",Gg),fi.listen(this,"progress",fx),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:s,height:i,_aspectRatio:r}=this;return ee(t)?e&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Xs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():vg(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return mg(this.canvas,this.ctx),this}stop(){return fi.stop(this),this}resize(t,e){fi.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(i,t,e,r),o=s.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,vg(this,o,!0)&&(this.notifyPlugins("resize",{size:l}),Ae(s.onResize,[this,l],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};be(e,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,s=this.scales,i=Object.keys(s).reduce((l,o)=>(l[o]=!1,l),{});let r=[];e&&(r=r.concat(Object.keys(e).map(l=>{const o=e[l],a=Cu(l,o),c=a==="r",u=a==="x";return{options:o,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),be(r,l=>{const o=l.options,a=o.id,c=Cu(a,o),u=Zt(o.type,l.dtype);(o.position===void 0||Yg(o.position,c)!==Yg(l.dposition))&&(o.position=l.dposition),i[a]=!0;let f=null;if(a in s&&s[a].type===u)f=s[a];else{const p=Xs.getScale(u);f=new p({id:a,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(o,t)}),be(i,(l,o)=>{l||delete s[o]}),be(s,l=>{En.configure(this,l,l.options),En.addBox(this,l)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>e){for(let i=e;i<s;++i)this._destroyDatasetMeta(i);t.splice(e,s-e)}this._sortedMetasets=t.slice(0).sort(Xg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((s,i)=>{e.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=e.length;s<i;s++){const r=e[s];let l=this.getDatasetMeta(s);const o=r.type||this.config.type;if(l.type&&l.type!==o&&(this._destroyDatasetMeta(s),l=this.getDatasetMeta(s)),l.type=o,l.indexAxis=r.indexAxis||Eu(o,this.options),l.order=r.order||0,l.index=s,l.label=""+r.label,l.visible=this.isDatasetVisible(s),l.controller)l.controller.updateIndex(s),l.controller.linkScales();else{const a=Xs.getController(o),{datasetElementType:c,dataElementType:u}=Ne.datasets[o];Object.assign(a,{dataElementType:Xs.getElement(u),datasetElementType:c&&Xs.getElement(c)}),l.controller=new a(this,s),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){be(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const s=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),p=!i&&r.indexOf(f)===-1;f.buildOrUpdateElements(p),l=Math.max(+f.getMaxOverflow(),l)}l=this._minPadding=s.layout.autoPadding?l:0,this._updateLayout(l),i||be(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Xg("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){be(this.scales,t=>{En.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!og(e,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of e){const l=s==="_removeElements"?-r:r;hx(t,i,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,s=r=>new Set(t.filter(l=>l[0]===r).map((l,o)=>o+","+l.splice(1).join(","))),i=s(0);for(let r=1;r<e;r++)if(!og(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;En.update(this,this.width,this.height,t);const e=this.chartArea,s=e.width<=0||e.height<=0;this._layers=[],be(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,s=this.data.datasets.length;e<s;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,s=this.data.datasets.length;e<s;++e)this._updateDataset(e,Qi(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fi.has(this)?this.attached&&!fi.running(this)&&fi.start(this):(this.draw(),Gg({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,s=[];let i,r;for(i=0,r=e.length;i<r;++i){const l=e[i];(!t||l.visible)&&s.push(l)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=W0(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&Xa(e,i),t.controller.draw(),i&&Ga(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return vi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,s,i){const r=uO.modes[e];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=er(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!e.hidden}setDatasetVisibility(t,e){const s=this.getDatasetMeta(t);s.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),l=r.controller._resolveAnimations(void 0,i);Zl(e)?(r.data[e].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),l.update(r,{visible:s}),this.update(o=>o.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),fi.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),mg(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete na[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,s=(r,l)=>{e.addEventListener(this,r,l),t[r]=l},i=(r,l,o)=>{r.offsetX=l,r.offsetY=o,this._eventHandler(r)};be(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,s=(a,c)=>{e.addEventListener(this,a,c),t[a]=c},i=(a,c)=>{t[a]&&(e.removeEventListener(this,a,c),delete t[a])},r=(a,c)=>{this.canvas&&this.resize(a,c)};let l;const o=()=>{i("attach",o),this.attached=!0,this.resize(),s("resize",r),s("detach",l)};l=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",o)},e.isAttached(this.canvas)?o():l()}unbindEvents(){be(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},be(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,s){const i=s?"set":"remove";let r,l,o,a;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){l=t[o];const c=l&&this.getDatasetMeta(l.datasetIndex).controller;c&&c[i+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],s=t.map(({datasetIndex:r,index:l})=>{const o=this.getDatasetMeta(r);if(!o)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:o.data[l],index:l}});!_a(s,e)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,e))}notifyPlugins(t,e,s){return this._plugins.notify(this,t,e,s)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,s){const i=this.options.hover,r=(a,c)=>a.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),l=r(e,t),o=s?t:r(t,e);l.length&&this.updateHoverStyle(l,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const s={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,e,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,e,s){const{_active:i=[],options:r}=this,l=e,o=this._getActiveElements(t,i,s,l),a=yE(t),c=dx(t,this._lastEvent,s,a);s&&(this._lastEvent=null,Ae(r.onHover,[t,o,this],this),a&&Ae(r.onClick,[t,o,this],this));const u=!_a(o,i);return(u||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=c,u}_getActiveElements(t,e,s,i){if(t.type==="mouseout")return[];if(!s)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}X(pi,"defaults",Ne),X(pi,"instances",na),X(pi,"overrides",wr),X(pi,"registry",Xs),X(pi,"version",cx),X(pi,"getChart",Zg);function Jg(){return be(pi.instances,n=>n._plugins.invalidate())}function px(n,t,e){const{startAngle:s,x:i,y:r,outerRadius:l,innerRadius:o,options:a}=t,{borderWidth:c,borderJoinStyle:u}=a,f=Math.min(c/l,Sn(s-e));if(n.beginPath(),n.arc(i,r,l-c/2,s+f/2,e-f/2),o>0){const p=Math.min(c/o,Sn(s-e));n.arc(i,r,o+c/2,e-p/2,s+p/2,!0)}else{const p=Math.min(c/2,l*Sn(s-e));if(u==="round")n.arc(i,r,p,e-fe/2,s+fe/2,!0);else if(u==="bevel"){const m=2*p*p,h=-m*Math.cos(e+fe/2)+i,_=-m*Math.sin(e+fe/2)+r,b=m*Math.cos(s+fe/2)+i,y=m*Math.sin(s+fe/2)+r;n.lineTo(h,_),n.lineTo(b,y)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function gx(n,t,e){const{startAngle:s,pixelMargin:i,x:r,y:l,outerRadius:o,innerRadius:a}=t;let c=i/o;n.beginPath(),n.arc(r,l,o,s-c,e+c),a>i?(c=i/a,n.arc(r,l,a,e+c,s-c,!0)):n.arc(r,l,i,e+Xe,s-Xe),n.closePath(),n.clip()}function mx(n){return Sf(n,["outerStart","outerEnd","innerStart","innerEnd"])}function _x(n,t,e,s){const i=mx(n.options.borderRadius),r=(e-t)/2,l=Math.min(r,s*t/2),o=a=>{const c=(e-Math.min(r,a))*s/2;return pn(a,0,Math.min(r,c))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:pn(i.innerStart,0,l),innerEnd:pn(i.innerEnd,0,l)}}function Pr(n,t,e,s){return{x:e+n*Math.cos(t),y:s+n*Math.sin(t)}}function Sa(n,t,e,s,i,r){const{x:l,y:o,startAngle:a,pixelMargin:c,innerRadius:u}=t,f=Math.max(t.outerRadius+s+e-c,0),p=u>0?u+s+e+c:0;let m=0;const h=i-a;if(s){const U=u>0?u-s:0,W=f>0?f-s:0,V=(U+W)/2,$=V!==0?h*V/(V+s):h;m=(h-$)/2}const _=Math.max(.001,h*f-e/fe)/f,b=(h-_)/2,y=a+b+m,w=i-b-m,{outerStart:A,outerEnd:E,innerStart:T,innerEnd:C}=_x(t,p,f,w-y),M=f-A,x=f-E,D=y+A/M,L=w-E/x,q=p+T,F=p+C,nt=y+T/q,et=w-C/F;if(n.beginPath(),r){const U=(D+L)/2;if(n.arc(l,o,f,D,U),n.arc(l,o,f,U,L),E>0){const st=Pr(x,L,l,o);n.arc(st.x,st.y,E,L,w+Xe)}const W=Pr(F,w,l,o);if(n.lineTo(W.x,W.y),C>0){const st=Pr(F,et,l,o);n.arc(st.x,st.y,C,w+Xe,et+Math.PI)}const V=(w-C/p+(y+T/p))/2;if(n.arc(l,o,p,w-C/p,V,!0),n.arc(l,o,p,V,y+T/p,!0),T>0){const st=Pr(q,nt,l,o);n.arc(st.x,st.y,T,nt+Math.PI,y-Xe)}const $=Pr(M,y,l,o);if(n.lineTo($.x,$.y),A>0){const st=Pr(M,D,l,o);n.arc(st.x,st.y,A,y-Xe,D)}}else{n.moveTo(l,o);const U=Math.cos(D)*f+l,W=Math.sin(D)*f+o;n.lineTo(U,W);const V=Math.cos(L)*f+l,$=Math.sin(L)*f+o;n.lineTo(V,$)}n.closePath()}function bx(n,t,e,s,i){const{fullCircles:r,startAngle:l,circumference:o}=t;let a=t.endAngle;if(r){Sa(n,t,e,s,a,i);for(let c=0;c<r;++c)n.fill();isNaN(o)||(a=l+(o%Oe||Oe))}return Sa(n,t,e,s,a,i),n.fill(),a}function vx(n,t,e,s,i){const{fullCircles:r,startAngle:l,circumference:o,options:a}=t,{borderWidth:c,borderJoinStyle:u,borderDash:f,borderDashOffset:p,borderRadius:m}=a,h=a.borderAlign==="inner";if(!c)return;n.setLineDash(f||[]),n.lineDashOffset=p,h?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let _=t.endAngle;if(r){Sa(n,t,e,s,_,i);for(let b=0;b<r;++b)n.stroke();isNaN(o)||(_=l+(o%Oe||Oe))}h&&gx(n,t,_),a.selfJoin&&_-l>=fe&&m===0&&u!=="miter"&&px(n,t,_),r||(Sa(n,t,e,s,_,i),n.stroke())}class Al extends Ei{constructor(e){super();X(this,"circumference");X(this,"endAngle");X(this,"fullCircles");X(this,"innerRadius");X(this,"outerRadius");X(this,"pixelMargin");X(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,i){const r=this.getProps(["x","y"],i),{angle:l,distance:o}=S0(r,{x:e,y:s}),{startAngle:a,endAngle:c,innerRadius:u,outerRadius:f,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,h=Zt(p,c-a),_=Jl(l,a,c)&&a!==c,b=h>=Oe||_,y=_i(o,u+m,f+m);return b&&y}getCenterPoint(e){const{x:s,y:i,startAngle:r,endAngle:l,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:u}=this.options,f=(r+l)/2,p=(o+a+u+c)/2;return{x:s+Math.cos(f)*p,y:i+Math.sin(f)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:i}=this,r=(s.offset||0)/4,l=(s.spacing||0)/2,o=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=i>Oe?Math.floor(i/Oe):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const c=1-Math.sin(Math.min(fe,i||0)),u=r*c;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,bx(e,this,u,l,o),vx(e,this,u,l,o),e.restore()}}X(Al,"id","arc"),X(Al,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),X(Al,"defaultRoutes",{backgroundColor:"backgroundColor"}),X(Al,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function sv(n,t,e=t){n.lineCap=Zt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Zt(e.borderDash,t.borderDash)),n.lineDashOffset=Zt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Zt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Zt(e.borderWidth,t.borderWidth),n.strokeStyle=Zt(e.borderColor,t.borderColor)}function yx(n,t,e){n.lineTo(e.x,e.y)}function kx(n){return n.stepped?UE:n.tension||n.cubicInterpolationMode==="monotone"?WE:yx}function iv(n,t,e={}){const s=n.length,{start:i=0,end:r=s-1}=e,{start:l,end:o}=t,a=Math.max(i,l),c=Math.min(r,o),u=i<l&&r<l||i>o&&r>o;return{count:s,start:a,loop:t.loop,ilen:c<a&&!u?s+c-a:c-a}}function wx(n,t,e,s){const{points:i,options:r}=t,{count:l,start:o,loop:a,ilen:c}=iv(i,e,s),u=kx(r);let{move:f=!0,reverse:p}=s||{},m,h,_;for(m=0;m<=c;++m)h=i[(o+(p?c-m:m))%l],!h.skip&&(f?(n.moveTo(h.x,h.y),f=!1):u(n,_,h,p,r.stepped),_=h);return a&&(h=i[(o+(p?c:0))%l],u(n,_,h,p,r.stepped)),!!a}function Sx(n,t,e,s){const i=t.points,{count:r,start:l,ilen:o}=iv(i,e,s),{move:a=!0,reverse:c}=s||{};let u=0,f=0,p,m,h,_,b,y;const w=E=>(l+(c?o-E:E))%r,A=()=>{_!==b&&(n.lineTo(u,b),n.lineTo(u,_),n.lineTo(u,y))};for(a&&(m=i[w(0)],n.moveTo(m.x,m.y)),p=0;p<=o;++p){if(m=i[w(p)],m.skip)continue;const E=m.x,T=m.y,C=E|0;C===h?(T<_?_=T:T>b&&(b=T),u=(f*u+E)/++f):(A(),n.lineTo(E,T),h=C,f=0,_=b=T),y=T}A()}function Ou(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Sx:wx}function Ax(n){return n.stepped?wC:n.tension||n.cubicInterpolationMode==="monotone"?SC:fr}function Tx(n,t,e,s){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,s)&&i.closePath()),sv(n,t.options),n.stroke(i)}function Ex(n,t,e,s){const{segments:i,options:r}=t,l=Ou(t);for(const o of i)sv(n,r,o.style),n.beginPath(),l(n,t,o,{start:e,end:e+s-1})&&n.closePath(),n.stroke()}const Cx=typeof Path2D=="function";function Ox(n,t,e,s){Cx&&!t.options.segment?Tx(n,t,e,s):Ex(n,t,e,s)}class Wi extends Ei{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;pC(this._points,s,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=xC(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,s=t.length;return s&&e[t[s-1].end]}interpolate(t,e){const s=this.options,i=t[e],r=this.points,l=U0(this,{property:e,start:i,end:i});if(!l.length)return;const o=[],a=Ax(s);let c,u;for(c=0,u=l.length;c<u;++c){const{start:f,end:p}=l[c],m=r[f],h=r[p];if(m===h){o.push(m);continue}const _=Math.abs((i-m[e])/(h[e]-m[e])),b=a(m,h,_,s.stepped);b[e]=t[e],o.push(b)}return o.length===1?o[0]:o}pathSegment(t,e,s){return Ou(this)(t,this,e,s)}path(t,e,s){const i=this.segments,r=Ou(this);let l=this._loop;e=e||0,s=s||this.points.length-e;for(const o of i)l&=r(t,this,o,{start:e,end:e+s-1});return!!l}draw(t,e,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),Ox(t,this,s,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}X(Wi,"id","line"),X(Wi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),X(Wi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),X(Wi,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Qg(n,t,e,s){const i=n.options,{[e]:r}=n.getProps([e],s);return Math.abs(t-r)<i.radius+i.hitRadius}class sa extends Ei{constructor(e){super();X(this,"parsed");X(this,"skip");X(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,i){const r=this.options,{x:l,y:o}=this.getProps(["x","y"],i);return Math.pow(e-l,2)+Math.pow(s-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,s){return Qg(this,e,"x",s)}inYRange(e,s){return Qg(this,e,"y",s)}getCenterPoint(e){const{x:s,y:i}=this.getProps(["x","y"],e);return{x:s,y:i}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const i=s&&e.borderWidth||0;return(s+i)*2}draw(e,s){const i=this.options;this.skip||i.radius<.1||!vi(this,s,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,Au(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}X(sa,"id","point"),X(sa,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),X(sa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function rv(n,t){const{x:e,y:s,base:i,width:r,height:l}=n.getProps(["x","y","base","width","height"],t);let o,a,c,u,f;return n.horizontal?(f=l/2,o=Math.min(e,i),a=Math.max(e,i),c=s-f,u=s+f):(f=r/2,o=e-f,a=e+f,c=Math.min(s,i),u=Math.max(s,i)),{left:o,top:c,right:a,bottom:u}}function Vi(n,t,e,s){return n?0:pn(t,e,s)}function xx(n,t,e){const s=n.options.borderWidth,i=n.borderSkipped,r=N0(s);return{t:Vi(i.top,r.top,0,e),r:Vi(i.right,r.right,0,t),b:Vi(i.bottom,r.bottom,0,e),l:Vi(i.left,r.left,0,t)}}function Mx(n,t,e){const{enableBorderRadius:s}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,r=gr(i),l=Math.min(t,e),o=n.borderSkipped,a=s||se(i);return{topLeft:Vi(!a||o.top||o.left,r.topLeft,0,l),topRight:Vi(!a||o.top||o.right,r.topRight,0,l),bottomLeft:Vi(!a||o.bottom||o.left,r.bottomLeft,0,l),bottomRight:Vi(!a||o.bottom||o.right,r.bottomRight,0,l)}}function Lx(n){const t=rv(n),e=t.right-t.left,s=t.bottom-t.top,i=xx(n,e/2,s/2),r=Mx(n,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:r},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function Dc(n,t,e,s){const i=t===null,r=e===null,o=n&&!(i&&r)&&rv(n,s);return o&&(i||_i(t,o.left,o.right))&&(r||_i(e,o.top,o.bottom))}function Nx(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Ix(n,t){n.rect(t.x,t.y,t.w,t.h)}function Rc(n,t,e={}){const s=n.x!==e.x?-t:0,i=n.y!==e.y?-t:0,r=(n.x+n.w!==e.x+e.w?t:0)-s,l=(n.y+n.h!==e.y+e.h?t:0)-i;return{x:n.x+s,y:n.y+i,w:n.w+r,h:n.h+l,radius:n.radius}}class ia extends Ei{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:l}=Lx(this),o=Nx(l.radius)?Ql:Ix;t.save(),(l.w!==r.w||l.h!==r.h)&&(t.beginPath(),o(t,Rc(l,e,r)),t.clip(),o(t,Rc(r,-e,l)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),o(t,Rc(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,s){return Dc(this,t,e,s)}inXRange(t,e){return Dc(this,t,null,e)}inYRange(t,e){return Dc(this,null,t,e)}getCenterPoint(t){const{x:e,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?s:(s+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}X(ia,"id","bar"),X(ia,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),X(ia,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Dx=Object.freeze({__proto__:null,ArcElement:Al,BarElement:ia,LineElement:Wi,PointElement:sa});const xu=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],$g=xu.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function lv(n){return xu[n%xu.length]}function ov(n){return $g[n%$g.length]}function Rx(n,t){return n.borderColor=lv(t),n.backgroundColor=ov(t),++t}function Px(n,t){return n.backgroundColor=n.data.map(()=>lv(t++)),t}function Bx(n,t){return n.backgroundColor=n.data.map(()=>ov(t++)),t}function qx(n){let t=0;return(e,s)=>{const i=n.getDatasetMeta(s).controller;i instanceof dr?t=Px(e,t):i instanceof Il?t=Bx(e,t):i&&(t=Rx(e,t))}}function tm(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function Fx(n){return n&&(n.borderColor||n.backgroundColor)}function jx(){return Ne.borderColor!=="rgba(0,0,0,0.1)"||Ne.backgroundColor!=="rgba(0,0,0,0.1)"}var zx={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:s},options:i}=n.config,{elements:r}=i,l=tm(s)||Fx(i)||r&&tm(r)||jx();if(!e.forceOverride&&l)return;const o=qx(n);s.forEach(o)}};function Hx(n,t,e,s,i){const r=i.samples||s;if(r>=e)return n.slice(t,t+e);const l=[],o=(e-2)/(r-2);let a=0;const c=t+e-1;let u=t,f,p,m,h,_;for(l[a++]=n[u],f=0;f<r-2;f++){let b=0,y=0,w;const A=Math.floor((f+1)*o)+1+t,E=Math.min(Math.floor((f+2)*o)+1,e)+t,T=E-A;for(w=A;w<E;w++)b+=n[w].x,y+=n[w].y;b/=T,y/=T;const C=Math.floor(f*o)+1+t,M=Math.min(Math.floor((f+1)*o)+1,e)+t,{x,y:D}=n[u];for(m=h=-1,w=C;w<M;w++)h=.5*Math.abs((x-b)*(n[w].y-D)-(x-n[w].x)*(y-D)),h>m&&(m=h,p=n[w],_=w);l[a++]=p,u=_}return l[a++]=n[c],l}function Ux(n,t,e,s){let i=0,r=0,l,o,a,c,u,f,p,m,h,_;const b=[],y=t+e-1,w=n[t].x,E=n[y].x-w;for(l=t;l<t+e;++l){o=n[l],a=(o.x-w)/E*s,c=o.y;const T=a|0;if(T===u)c<h?(h=c,f=l):c>_&&(_=c,p=l),i=(r*i+o.x)/++r;else{const C=l-1;if(!ee(f)&&!ee(p)){const M=Math.min(f,p),x=Math.max(f,p);M!==m&&M!==C&&b.push({...n[M],x:i}),x!==m&&x!==C&&b.push({...n[x],x:i})}l>0&&C!==m&&b.push(n[C]),b.push(o),u=T,r=0,h=_=c,f=p=m=l}}return b}function av(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function em(n){n.data.datasets.forEach(t=>{av(t)})}function Wx(n,t){const e=t.length;let s=0,i;const{iScale:r}=n,{min:l,max:o,minDefined:a,maxDefined:c}=r.getUserBounds();return a&&(s=pn(bi(t,r.axis,l).lo,0,e-1)),c?i=pn(bi(t,r.axis,o).hi+1,s,e)-s:i=e-s,{start:s,count:i}}var Vx={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){em(n);return}const s=n.width;n.data.datasets.forEach((i,r)=>{const{_data:l,indexAxis:o}=i,a=n.getDatasetMeta(r),c=l||i.data;if(wl([o,n.options.indexAxis])==="y"||!a.controller.supportsDecimation)return;const u=n.scales[a.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:f,count:p}=Wx(a,c);const m=e.threshold||4*s;if(p<=m){av(i);return}ee(l)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(_){this._data=_}}));let h;switch(e.algorithm){case"lttb":h=Hx(c,f,p,s,e);break;case"min-max":h=Ux(c,f,p,s);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}i._decimated=h})},destroy(n){em(n)}};function Kx(n,t,e){const s=n.segments,i=n.points,r=t.points,l=[];for(const o of s){let{start:a,end:c}=o;c=Qa(a,c,i);const u=Mu(e,i[a],i[c],o.loop);if(!t.segments){l.push({source:o,target:u,start:i[a],end:i[c]});continue}const f=U0(t,u);for(const p of f){const m=Mu(e,r[p.start],r[p.end],p.loop),h=H0(o,i,m);for(const _ of h)l.push({source:_,target:p,start:{[e]:nm(u,m,"start",Math.max)},end:{[e]:nm(u,m,"end",Math.min)}})}}return l}function Mu(n,t,e,s){if(s)return;let i=t[n],r=e[n];return n==="angle"&&(i=Sn(i),r=Sn(r)),{property:n,start:i,end:r}}function Yx(n,t){const{x:e=null,y:s=null}=n||{},i=t.points,r=[];return t.segments.forEach(({start:l,end:o})=>{o=Qa(l,o,i);const a=i[l],c=i[o];s!==null?(r.push({x:a.x,y:s}),r.push({x:c.x,y:s})):e!==null&&(r.push({x:e,y:a.y}),r.push({x:e,y:c.y}))}),r}function Qa(n,t,e){for(;t>n;t--){const s=e[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function nm(n,t,e,s){return n&&t?s(n[e],t[e]):n?n[e]:t?t[e]:0}function cv(n,t){let e=[],s=!1;return Le(n)?(s=!0,e=n):e=Yx(n,t),e.length?new Wi({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function sm(n){return n&&n.fill!==!1}function Xx(n,t,e){let i=n[t].fill;const r=[t];let l;if(!e)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!We(i))return i;if(l=n[i],!l)return!1;if(l.visible)return i;r.push(i),i=l.fill}return!1}function Gx(n,t,e){const s=$x(n);if(se(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return We(i)&&Math.floor(i)===i?Zx(s[0],t,i,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function Zx(n,t,e,s){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=s?!1:e}function Jx(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:se(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function Qx(n,t,e){let s;return n==="start"?s=e:n==="end"?s=t.options.reverse?t.min:t.max:se(n)?s=n.value:s=t.getBaseValue(),s}function $x(n){const t=n.options,e=t.fill;let s=Zt(e&&e.target,e);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function tM(n){const{scale:t,index:e,line:s}=n,i=[],r=s.segments,l=s.points,o=eM(t,e);o.push(cv({x:null,y:t.bottom},s));for(let a=0;a<r.length;a++){const c=r[a];for(let u=c.start;u<=c.end;u++)nM(i,l[u],o)}return new Wi({points:i,options:{}})}function eM(n,t){const e=[],s=n.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const r=s[i];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function nM(n,t,e){const s=[];for(let i=0;i<e.length;i++){const r=e[i],{first:l,last:o,point:a}=sM(r,t,"x");if(!(!a||l&&o)){if(l)s.unshift(a);else if(n.push(a),!o)break}}n.push(...s)}function sM(n,t,e){const s=n.interpolate(t,e);if(!s)return{};const i=s[e],r=n.segments,l=n.points;let o=!1,a=!1;for(let c=0;c<r.length;c++){const u=r[c],f=l[u.start][e],p=l[u.end][e];if(_i(i,f,p)){o=i===f,a=i===p;break}}return{first:o,last:a,point:s}}class uv{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,s){const{x:i,y:r,radius:l}=this;return e=e||{start:0,end:Oe},t.arc(i,r,l,e.end,e.start,!0),!s.bounds}interpolate(t){const{x:e,y:s,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:s+Math.sin(r)*i,angle:r}}}function iM(n){const{chart:t,fill:e,line:s}=n;if(We(e))return rM(t,e);if(e==="stack")return tM(n);if(e==="shape")return!0;const i=lM(n);return i instanceof uv?i:cv(i,s)}function rM(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function lM(n){return(n.scale||{}).getPointPositionForValue?aM(n):oM(n)}function oM(n){const{scale:t={},fill:e}=n,s=Jx(e,t);if(We(s)){const i=t.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function aM(n){const{scale:t,fill:e}=n,s=t.options,i=t.getLabels().length,r=s.reverse?t.max:t.min,l=Qx(e,t,r),o=[];if(s.grid.circular){const a=t.getPointPositionForValue(0,r);return new uv({x:a.x,y:a.y,radius:t.getDistanceFromCenterForValue(l)})}for(let a=0;a<i;++a)o.push(t.getPointPositionForValue(a,l));return o}function Pc(n,t,e){const s=iM(t),{chart:i,index:r,line:l,scale:o,axis:a}=t,c=l.options,u=c.fill,f=c.backgroundColor,{above:p=f,below:m=f}=u||{},h=i.getDatasetMeta(r),_=W0(i,h);s&&l.points.length&&(Xa(n,e),cM(n,{line:l,target:s,above:p,below:m,area:e,scale:o,axis:a,clip:_}),Ga(n))}function cM(n,t){const{line:e,target:s,above:i,below:r,area:l,scale:o,clip:a}=t,c=e._loop?"angle":t.axis;n.save();let u=r;r!==i&&(c==="x"?(im(n,s,l.top),Bc(n,{line:e,target:s,color:i,scale:o,property:c,clip:a}),n.restore(),n.save(),im(n,s,l.bottom)):c==="y"&&(rm(n,s,l.left),Bc(n,{line:e,target:s,color:r,scale:o,property:c,clip:a}),n.restore(),n.save(),rm(n,s,l.right),u=i)),Bc(n,{line:e,target:s,color:u,scale:o,property:c,clip:a}),n.restore()}function im(n,t,e){const{segments:s,points:i}=t;let r=!0,l=!1;n.beginPath();for(const o of s){const{start:a,end:c}=o,u=i[a],f=i[Qa(a,c,i)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),l=!!t.pathSegment(n,o,{move:l}),l?n.closePath():n.lineTo(f.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function rm(n,t,e){const{segments:s,points:i}=t;let r=!0,l=!1;n.beginPath();for(const o of s){const{start:a,end:c}=o,u=i[a],f=i[Qa(a,c,i)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(e,u.y),n.lineTo(u.x,u.y)),l=!!t.pathSegment(n,o,{move:l}),l?n.closePath():n.lineTo(e,f.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function Bc(n,t){const{line:e,target:s,property:i,color:r,scale:l,clip:o}=t,a=Kx(e,s,i);for(const{source:c,target:u,start:f,end:p}of a){const{style:{backgroundColor:m=r}={}}=c,h=s!==!0;n.save(),n.fillStyle=m,uM(n,l,o,h&&Mu(i,f,p)),n.beginPath();const _=!!e.pathSegment(n,c);let b;if(h){_?n.closePath():lm(n,s,p,i);const y=!!s.pathSegment(n,u,{move:_,reverse:!0});b=_&&y,b||lm(n,s,f,i)}n.closePath(),n.fill(b?"evenodd":"nonzero"),n.restore()}}function uM(n,t,e,s){const i=t.chart.chartArea,{property:r,start:l,end:o}=s||{};if(r==="x"||r==="y"){let a,c,u,f;r==="x"?(a=l,c=i.top,u=o,f=i.bottom):(a=i.left,c=l,u=i.right,f=o),n.beginPath(),e&&(a=Math.max(a,e.left),u=Math.min(u,e.right),c=Math.max(c,e.top),f=Math.min(f,e.bottom)),n.rect(a,c,u-a,f-c),n.clip()}}function lm(n,t,e,s){const i=t.interpolate(e,s);i&&n.lineTo(i.x,i.y)}var fM={id:"filler",afterDatasetsUpdate(n,t,e){const s=(n.data.datasets||[]).length,i=[];let r,l,o,a;for(l=0;l<s;++l)r=n.getDatasetMeta(l),o=r.dataset,a=null,o&&o.options&&o instanceof Wi&&(a={visible:n.isDatasetVisible(l),index:l,fill:Gx(o,l,s),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:o}),r.$filler=a,i.push(a);for(l=0;l<s;++l)a=i[l],!(!a||a.fill===!1)&&(a.fill=Xx(i,l,e.propagate))},beforeDraw(n,t,e){const s=e.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let l=i.length-1;l>=0;--l){const o=i[l].$filler;o&&(o.line.updateControlPoints(r,o.axis),s&&o.fill&&Pc(n.ctx,o,r))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const s=n.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const r=s[i].$filler;sm(r)&&Pc(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,t,e){const s=t.meta.$filler;!sm(s)||e.drawTime!=="beforeDatasetDraw"||Pc(n.ctx,s,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const om=(n,t)=>{let{boxHeight:e=t,boxWidth:s=t}=n;return n.usePointStyle&&(e=Math.min(e,t),s=n.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}},hM=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class am extends Ei{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Ae(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=fn(s.font),r=i.size,l=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=om(s,r);let c,u;e.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(l,r,o,a)+10):(u=this.maxHeight,c=this._fitCols(l,i,o,a)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,i){const{ctx:r,maxWidth:l,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+o;let f=t;r.textAlign="left",r.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((h,_)=>{const b=s+e/2+r.measureText(h.text).width;(_===0||c[c.length-1]+b+2*o>l)&&(f+=u,c[c.length-(_>0?0:1)]=0,m+=u,p++),a[_]={left:0,top:m,row:p,width:b,height:i},c[c.length-1]+=b+o}),f}_fitCols(t,e,s,i){const{ctx:r,maxHeight:l,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],c=this.columnSizes=[],u=l-t;let f=o,p=0,m=0,h=0,_=0;return this.legendItems.forEach((b,y)=>{const{itemWidth:w,itemHeight:A}=dM(s,e,r,b,i);y>0&&m+A+2*o>u&&(f+=p+o,c.push({width:p,height:m}),h+=p+o,_++,p=m=0),a[y]={left:h,top:m,col:_,width:w,height:A},p=Math.max(p,w),m+=A+o}),f+=p,c.push({width:p,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:i},rtl:r}}=this,l=Zr(r,this.left,this.width);if(this.isHorizontal()){let o=0,a=wn(s,this.left+i,this.right-this.lineWidths[o]);for(const c of e)o!==c.row&&(o=c.row,a=wn(s,this.left+i,this.right-this.lineWidths[o])),c.top+=this.top+t+i,c.left=l.leftForLtr(l.x(a),c.width),a+=c.width+i}else{let o=0,a=wn(s,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const c of e)c.col!==o&&(o=c.col,a=wn(s,this.top+t+i,this.bottom-this.columnSizes[o].height)),c.top=a,c.left+=this.left+i,c.left=l.leftForLtr(l.x(c.left),c.width),a+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Xa(t,this),this._draw(),Ga(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:s,ctx:i}=this,{align:r,labels:l}=t,o=Ne.color,a=Zr(t.rtl,this.left,this.width),c=fn(l.font),{padding:u}=l,f=c.size,p=f/2;let m;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:h,boxHeight:_,itemHeight:b}=om(l,f),y=function(C,M,x){if(isNaN(h)||h<=0||isNaN(_)||_<0)return;i.save();const D=Zt(x.lineWidth,1);if(i.fillStyle=Zt(x.fillStyle,o),i.lineCap=Zt(x.lineCap,"butt"),i.lineDashOffset=Zt(x.lineDashOffset,0),i.lineJoin=Zt(x.lineJoin,"miter"),i.lineWidth=D,i.strokeStyle=Zt(x.strokeStyle,o),i.setLineDash(Zt(x.lineDash,[])),l.usePointStyle){const L={radius:_*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:D},q=a.xPlus(C,h/2),F=M+p;L0(i,L,q,F,l.pointStyleWidth&&h)}else{const L=M+Math.max((f-_)/2,0),q=a.leftForLtr(C,h),F=gr(x.borderRadius);i.beginPath(),Object.values(F).some(nt=>nt!==0)?Ql(i,{x:q,y:L,w:h,h:_,radius:F}):i.rect(q,L,h,_),i.fill(),D!==0&&i.stroke()}i.restore()},w=function(C,M,x){Sr(i,x.text,C,M+b/2,c,{strikethrough:x.hidden,textAlign:a.textAlign(x.textAlign)})},A=this.isHorizontal(),E=this._computeTitleHeight();A?m={x:wn(r,this.left+u,this.right-s[0]),y:this.top+u+E,line:0}:m={x:this.left+u,y:wn(r,this.top+E+u,this.bottom-e[0].height),line:0},F0(this.ctx,t.textDirection);const T=b+u;this.legendItems.forEach((C,M)=>{i.strokeStyle=C.fontColor,i.fillStyle=C.fontColor;const x=i.measureText(C.text).width,D=a.textAlign(C.textAlign||(C.textAlign=l.textAlign)),L=h+p+x;let q=m.x,F=m.y;a.setWidth(this.width),A?M>0&&q+L+u>this.right&&(F=m.y+=T,m.line++,q=m.x=wn(r,this.left+u,this.right-s[m.line])):M>0&&F+T>this.bottom&&(q=m.x=q+e[m.line].width+u,m.line++,F=m.y=wn(r,this.top+E+u,this.bottom-e[m.line].height));const nt=a.x(q);if(y(nt,F,C),q=NE(D,q+h+p,A?q+L:this.right,t.rtl),w(a.x(q),F,C),A)m.x+=L+u;else if(typeof C.text!="string"){const et=c.lineHeight;m.y+=fv(C,et)+u}else m.y+=T}),j0(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,s=fn(e.font),i=xn(e.padding);if(!e.display)return;const r=Zr(t.rtl,this.left,this.width),l=this.ctx,o=e.position,a=s.size/2,c=i.top+a;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,f=wn(t.align,f,this.right-p);else{const h=this.columnSizes.reduce((_,b)=>Math.max(_,b.height),0);u=c+wn(t.align,this.top,this.bottom-h-t.labels.padding-this._computeTitleHeight())}const m=wn(o,f,f+p);l.textAlign=r.textAlign(kf(o)),l.textBaseline="middle",l.strokeStyle=e.color,l.fillStyle=e.color,l.font=s.string,Sr(l,e.text,m,u,s)}_computeTitleHeight(){const t=this.options.title,e=fn(t.font),s=xn(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,i,r;if(_i(t,this.left,this.right)&&_i(e,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],_i(t,i.left,i.left+i.width)&&_i(e,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const e=this.options;if(!mM(t.type,e))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=hM(i,s);i&&!r&&Ae(e.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&Ae(e.onHover,[t,s,this],this)}else s&&Ae(e.onClick,[t,s,this],this)}}function dM(n,t,e,s,i){const r=pM(s,n,t,e),l=gM(i,s,t.lineHeight);return{itemWidth:r,itemHeight:l}}function pM(n,t,e,s){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((r,l)=>r.length>l.length?r:l)),t+e.size/2+s.measureText(i).width}function gM(n,t,e){let s=n;return typeof t.text!="string"&&(s=fv(t,e)),s}function fv(n,t){const e=n.text?n.text.length:0;return t*e}function mM(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var _M={id:"legend",_element:am,start(n,t,e){const s=n.legend=new am({ctx:n.ctx,options:e,chart:n});En.configure(n,s,e),En.addBox(n,s)},stop(n){En.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const s=n.legend;En.configure(n,s,e),s.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const s=t.datasetIndex,i=e.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:i,color:r,useBorderRadius:l,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(a=>{const c=a.controller.getStyle(e?0:void 0),u=xn(c.borderWidth);return{text:t[a.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!a.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:l&&(o||c.borderRadius),datasetIndex:a.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Mf extends Ei{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const i=Le(s.text)?s.text.length:1;this._padding=xn(s.padding);const r=i*fn(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:s,bottom:i,right:r,options:l}=this,o=l.align;let a=0,c,u,f;return this.isHorizontal()?(u=wn(o,s,r),f=e+t,c=r-s):(l.position==="left"?(u=s+t,f=wn(o,i,e),a=fe*-.5):(u=r-t,f=wn(o,e,i),a=fe*.5),c=i-e),{titleX:u,titleY:f,maxWidth:c,rotation:a}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const s=fn(e.font),r=s.lineHeight/2+this._padding.top,{titleX:l,titleY:o,maxWidth:a,rotation:c}=this._drawArgs(r);Sr(t,e.text,0,0,s,{color:e.color,maxWidth:a,rotation:c,textAlign:kf(e.align),textBaseline:"middle",translation:[l,o]})}}function bM(n,t){const e=new Mf({ctx:n.ctx,options:t,chart:n});En.configure(n,e,t),En.addBox(n,e),n.titleBlock=e}var vM={id:"title",_element:Mf,start(n,t,e){bM(n,e)},stop(n){const t=n.titleBlock;En.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const s=n.titleBlock;En.configure(n,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Bo=new WeakMap;var yM={id:"subtitle",start(n,t,e){const s=new Mf({ctx:n.ctx,options:e,chart:n});En.configure(n,s,e),En.addBox(n,s),Bo.set(n,s)},stop(n){En.removeBox(n,Bo.get(n)),Bo.delete(n)},beforeUpdate(n,t,e){const s=Bo.get(n);En.configure(n,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Tl={average(n){if(!n.length)return!1;let t,e,s=new Set,i=0,r=0;for(t=0,e=n.length;t<e;++t){const o=n[t].element;if(o&&o.hasValue()){const a=o.tooltipPosition();s.add(a.x),i+=a.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((o,a)=>o+a)/s.size,y:i/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,l,o;for(r=0,l=n.length;r<l;++r){const a=n[r].element;if(a&&a.hasValue()){const c=a.getCenterPoint(),u=wu(t,c);u<i&&(i=u,o=a)}}if(o){const a=o.tooltipPosition();e=a.x,s=a.y}return{x:e,y:s}}};function Ys(n,t){return t&&(Le(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function hi(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function kM(n,t){const{element:e,datasetIndex:s,index:i}=t,r=n.getDatasetMeta(s).controller,{label:l,value:o}=r.getLabelAndValue(i);return{chart:n,label:l,parsed:r.getParsed(i),raw:n.data.datasets[s].data[i],formattedValue:o,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:e}}function cm(n,t){const e=n.chart.ctx,{body:s,footer:i,title:r}=n,{boxWidth:l,boxHeight:o}=t,a=fn(t.bodyFont),c=fn(t.titleFont),u=fn(t.footerFont),f=r.length,p=i.length,m=s.length,h=xn(t.padding);let _=h.height,b=0,y=s.reduce((E,T)=>E+T.before.length+T.lines.length+T.after.length,0);if(y+=n.beforeBody.length+n.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),y){const E=t.displayColors?Math.max(o,a.lineHeight):a.lineHeight;_+=m*E+(y-m)*a.lineHeight+(y-1)*t.bodySpacing}p&&(_+=t.footerMarginTop+p*u.lineHeight+(p-1)*t.footerSpacing);let w=0;const A=function(E){b=Math.max(b,e.measureText(E).width+w)};return e.save(),e.font=c.string,be(n.title,A),e.font=a.string,be(n.beforeBody.concat(n.afterBody),A),w=t.displayColors?l+2+t.boxPadding:0,be(s,E=>{be(E.before,A),be(E.lines,A),be(E.after,A)}),w=0,e.font=u.string,be(n.footer,A),e.restore(),b+=h.width,{width:b,height:_}}function wM(n,t){const{y:e,height:s}=t;return e<s/2?"top":e>n.height-s/2?"bottom":"center"}function SM(n,t,e,s){const{x:i,width:r}=s,l=e.caretSize+e.caretPadding;if(n==="left"&&i+r+l>t.width||n==="right"&&i-r-l<0)return!0}function AM(n,t,e,s){const{x:i,width:r}=e,{width:l,chartArea:{left:o,right:a}}=n;let c="center";return s==="center"?c=i<=(o+a)/2?"left":"right":i<=r/2?c="left":i>=l-r/2&&(c="right"),SM(c,n,t,e)&&(c="center"),c}function um(n,t,e){const s=e.yAlign||t.yAlign||wM(n,e);return{xAlign:e.xAlign||t.xAlign||AM(n,t,e,s),yAlign:s}}function TM(n,t){let{x:e,width:s}=n;return t==="right"?e-=s:t==="center"&&(e-=s/2),e}function EM(n,t,e){let{y:s,height:i}=n;return t==="top"?s+=e:t==="bottom"?s-=i+e:s-=i/2,s}function fm(n,t,e,s){const{caretSize:i,caretPadding:r,cornerRadius:l}=n,{xAlign:o,yAlign:a}=e,c=i+r,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:m}=gr(l);let h=TM(t,o);const _=EM(t,a,c);return a==="center"?o==="left"?h+=c:o==="right"&&(h-=c):o==="left"?h-=Math.max(u,p)+i:o==="right"&&(h+=Math.max(f,m)+i),{x:pn(h,0,s.width-t.width),y:pn(_,0,s.height-t.height)}}function qo(n,t,e){const s=xn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-s.right:n.x+s.left}function hm(n){return Ys([],hi(n))}function CM(n,t,e){return er(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function dm(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const hv={beforeTitle:ui,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:ui,beforeBody:ui,beforeLabel:ui,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ee(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:ui,afterBody:ui,beforeFooter:ui,footer:ui,afterFooter:ui};function Un(n,t,e,s){const i=n[t].call(e,s);return typeof i>"u"?hv[t].call(e,s):i}class Lu extends Ei{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&e.options.animation&&s.animations,r=new V0(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=CM(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:s}=e,i=Un(s,"beforeTitle",this,t),r=Un(s,"title",this,t),l=Un(s,"afterTitle",this,t);let o=[];return o=Ys(o,hi(i)),o=Ys(o,hi(r)),o=Ys(o,hi(l)),o}getBeforeBody(t,e){return hm(Un(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:s}=e,i=[];return be(t,r=>{const l={before:[],lines:[],after:[]},o=dm(s,r);Ys(l.before,hi(Un(o,"beforeLabel",this,r))),Ys(l.lines,Un(o,"label",this,r)),Ys(l.after,hi(Un(o,"afterLabel",this,r))),i.push(l)}),i}getAfterBody(t,e){return hm(Un(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:s}=e,i=Un(s,"beforeFooter",this,t),r=Un(s,"footer",this,t),l=Un(s,"afterFooter",this,t);let o=[];return o=Ys(o,hi(i)),o=Ys(o,hi(r)),o=Ys(o,hi(l)),o}_createItems(t){const e=this._active,s=this.chart.data,i=[],r=[],l=[];let o=[],a,c;for(a=0,c=e.length;a<c;++a)o.push(kM(this.chart,e[a]));return t.filter&&(o=o.filter((u,f,p)=>t.filter(u,f,p,s))),t.itemSort&&(o=o.sort((u,f)=>t.itemSort(u,f,s))),be(o,u=>{const f=dm(t.callbacks,u);i.push(Un(f,"labelColor",this,u)),r.push(Un(f,"labelPointStyle",this,u)),l.push(Un(f,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=l,this.dataPoints=o,o}update(t,e){const s=this.options.setContext(this.getContext()),i=this._active;let r,l=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const o=Tl[s.position].call(this,i,this._eventPosition);l=this._createItems(s),this.title=this.getTitle(l,s),this.beforeBody=this.getBeforeBody(l,s),this.body=this.getBody(l,s),this.afterBody=this.getAfterBody(l,s),this.footer=this.getFooter(l,s);const a=this._size=cm(this,s),c=Object.assign({},o,a),u=um(this.chart,s,c),f=fm(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:f.x,y:f.y,width:a.width,height:a.height,caretX:o.x,caretY:o.y}}this._tooltipItems=l,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,s,i){const r=this.getCaretPosition(t,s,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,s){const{xAlign:i,yAlign:r}=this,{caretSize:l,cornerRadius:o}=s,{topLeft:a,topRight:c,bottomLeft:u,bottomRight:f}=gr(o),{x:p,y:m}=t,{width:h,height:_}=e;let b,y,w,A,E,T;return r==="center"?(E=m+_/2,i==="left"?(b=p,y=b-l,A=E+l,T=E-l):(b=p+h,y=b+l,A=E-l,T=E+l),w=b):(i==="left"?y=p+Math.max(a,u)+l:i==="right"?y=p+h-Math.max(c,f)-l:y=this.caretX,r==="top"?(A=m,E=A-l,b=y-l,w=y+l):(A=m+_,E=A+l,b=y+l,w=y-l),T=A),{x1:b,x2:y,x3:w,y1:A,y2:E,y3:T}}drawTitle(t,e,s){const i=this.title,r=i.length;let l,o,a;if(r){const c=Zr(s.rtl,this.x,this.width);for(t.x=qo(this,s.titleAlign,s),e.textAlign=c.textAlign(s.titleAlign),e.textBaseline="middle",l=fn(s.titleFont),o=s.titleSpacing,e.fillStyle=s.titleColor,e.font=l.string,a=0;a<r;++a)e.fillText(i[a],c.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+o,a+1===r&&(t.y+=s.titleMarginBottom-o)}}_drawColorBox(t,e,s,i,r){const l=this.labelColors[s],o=this.labelPointStyles[s],{boxHeight:a,boxWidth:c}=r,u=fn(r.bodyFont),f=qo(this,"left",r),p=i.x(f),m=a<u.lineHeight?(u.lineHeight-a)/2:0,h=e.y+m;if(r.usePointStyle){const _={radius:Math.min(c,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},b=i.leftForLtr(p,c)+c/2,y=h+a/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Au(t,_,b,y),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,Au(t,_,b,y)}else{t.lineWidth=se(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const _=i.leftForLtr(p,c),b=i.leftForLtr(i.xPlus(p,1),c-2),y=gr(l.borderRadius);Object.values(y).some(w=>w!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Ql(t,{x:_,y:h,w:c,h:a,radius:y}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),Ql(t,{x:b,y:h+1,w:c-2,h:a-2,radius:y}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(_,h,c,a),t.strokeRect(_,h,c,a),t.fillStyle=l.backgroundColor,t.fillRect(b,h+1,c-2,a-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,e,s){const{body:i}=this,{bodySpacing:r,bodyAlign:l,displayColors:o,boxHeight:a,boxWidth:c,boxPadding:u}=s,f=fn(s.bodyFont);let p=f.lineHeight,m=0;const h=Zr(s.rtl,this.x,this.width),_=function(x){e.fillText(x,h.x(t.x+m),t.y+p/2),t.y+=p+r},b=h.textAlign(l);let y,w,A,E,T,C,M;for(e.textAlign=l,e.textBaseline="middle",e.font=f.string,t.x=qo(this,b,s),e.fillStyle=s.bodyColor,be(this.beforeBody,_),m=o&&b!=="right"?l==="center"?c/2+u:c+2+u:0,E=0,C=i.length;E<C;++E){for(y=i[E],w=this.labelTextColors[E],e.fillStyle=w,be(y.before,_),A=y.lines,o&&A.length&&(this._drawColorBox(e,t,E,h,s),p=Math.max(f.lineHeight,a)),T=0,M=A.length;T<M;++T)_(A[T]),p=f.lineHeight;be(y.after,_)}m=0,p=f.lineHeight,be(this.afterBody,_),t.y-=r}drawFooter(t,e,s){const i=this.footer,r=i.length;let l,o;if(r){const a=Zr(s.rtl,this.x,this.width);for(t.x=qo(this,s.footerAlign,s),t.y+=s.footerMarginTop,e.textAlign=a.textAlign(s.footerAlign),e.textBaseline="middle",l=fn(s.footerFont),e.fillStyle=s.footerColor,e.font=l.string,o=0;o<r;++o)e.fillText(i[o],a.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+s.footerSpacing}}drawBackground(t,e,s,i){const{xAlign:r,yAlign:l}=this,{x:o,y:a}=t,{width:c,height:u}=s,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:h}=gr(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+f,a),l==="top"&&this.drawCaret(t,e,s,i),e.lineTo(o+c-p,a),e.quadraticCurveTo(o+c,a,o+c,a+p),l==="center"&&r==="right"&&this.drawCaret(t,e,s,i),e.lineTo(o+c,a+u-h),e.quadraticCurveTo(o+c,a+u,o+c-h,a+u),l==="bottom"&&this.drawCaret(t,e,s,i),e.lineTo(o+m,a+u),e.quadraticCurveTo(o,a+u,o,a+u-m),l==="center"&&r==="left"&&this.drawCaret(t,e,s,i),e.lineTo(o,a+f),e.quadraticCurveTo(o,a,o+f,a),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const l=Tl[t.position].call(this,this._active,this._eventPosition);if(!l)return;const o=this._size=cm(this,t),a=Object.assign({},l,this._size),c=um(e,t,a),u=fm(t,a,c,e);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=o.width,this.height=o.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const l=xn(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,e),F0(t,e.textDirection),r.y+=l.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),j0(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const s=this._active,i=t.map(({datasetIndex:o,index:a})=>{const c=this.chart.getDatasetMeta(o);if(!c)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:c.data[a],index:a}}),r=!_a(s,i),l=this._positionChanged(i,e);(r||l)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,s=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],l=this._getActiveElements(t,r,e,s),o=this._positionChanged(l,t),a=e||!_a(l,r)||o;return a&&(this._active=l,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&l.reverse(),l}_positionChanged(t,e){const{caretX:s,caretY:i,options:r}=this,l=Tl[r.position].call(this,t,e);return l!==!1&&(s!==l.x||i!==l.y)}}X(Lu,"positioners",Tl);var OM={id:"tooltip",_element:Lu,positioners:Tl,afterInit(n,t,e){e&&(n.tooltip=new Lu({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:hv},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},xM=Object.freeze({__proto__:null,Colors:zx,Decimation:Vx,Filler:fM,Legend:_M,SubTitle:yM,Title:vM,Tooltip:OM});const MM=(n,t,e,s)=>(typeof t=="string"?(e=n.push(t)-1,s.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function LM(n,t,e,s){const i=n.indexOf(t);if(i===-1)return MM(n,t,e,s);const r=n.lastIndexOf(t);return i!==r?e:i}const NM=(n,t)=>n===null?null:pn(Math.round(n),0,t);function pm(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class Nu extends Lr{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const s=this.getLabels();for(const{index:i,label:r}of e)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ee(t))return null;const s=this.getLabels();return e=isFinite(e)&&s[e]===t?e:LM(s,t,Zt(e,t),this._addedLabels),NM(e,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),e||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,e=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let l=t;l<=e;l++)i.push({value:l});return i}getLabelForValue(t){return pm.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}X(Nu,"id","category"),X(Nu,"defaults",{ticks:{callback:pm}});function IM(n,t){const e=[],{bounds:i,step:r,min:l,max:o,precision:a,count:c,maxTicks:u,maxDigits:f,includeBounds:p}=n,m=r||1,h=u-1,{min:_,max:b}=t,y=!ee(l),w=!ee(o),A=!ee(c),E=(b-_)/(f+1);let T=cg((b-_)/h/m)*m,C,M,x,D;if(T<1e-14&&!y&&!w)return[{value:_},{value:b}];D=Math.ceil(b/T)-Math.floor(_/T),D>h&&(T=cg(D*T/h/m)*m),ee(a)||(C=Math.pow(10,a),T=Math.ceil(T*C)/C),i==="ticks"?(M=Math.floor(_/T)*T,x=Math.ceil(b/T)*T):(M=_,x=b),y&&w&&r&&TE((o-l)/r,T/1e3)?(D=Math.round(Math.min((o-l)/T,u)),T=(o-l)/D,M=l,x=o):A?(M=y?l:M,x=w?o:x,D=c-1,T=(x-M)/D):(D=(x-M)/T,Ml(D,Math.round(D),T/1e3)?D=Math.round(D):D=Math.ceil(D));const L=Math.max(ug(T),ug(M));C=Math.pow(10,ee(a)?L:a),M=Math.round(M*C)/C,x=Math.round(x*C)/C;let q=0;for(y&&(p&&M!==l?(e.push({value:l}),M<l&&q++,Ml(Math.round((M+q*T)*C)/C,l,gm(l,E,n))&&q++):M<l&&q++);q<D;++q){const F=Math.round((M+q*T)*C)/C;if(w&&F>o)break;e.push({value:F})}return w&&p&&x!==o?e.length&&Ml(e[e.length-1].value,o,gm(o,E,n))?e[e.length-1].value=o:e.push({value:o}):(!w||x===o)&&e.push({value:x}),e}function gm(n,t,{horizontal:e,minRotation:s}){const i=Ds(s),r=(e?Math.sin(i):Math.cos(i))||.001,l=.75*t*(""+n).length;return Math.min(t/r,l)}class Aa extends Lr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ee(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const l=a=>i=e?i:a,o=a=>r=s?r:a;if(t){const a=Qs(i),c=Qs(r);a<0&&c<0?o(0):a>0&&c>0&&l(0)}if(i===r){let a=r===0?1:Math.abs(r*.05);o(r+a),t||l(i-a)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:s}=t,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,l=IM(i,r);return t.bounds==="ticks"&&w0(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const i=(s-e)/Math.max(t.length-1,1)/2;e-=i,s+=i}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return po(t,this.chart.options.locale,this.options.ticks.format)}}class Iu extends Aa{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=We(t)?t:0,this.max=We(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,s=Ds(this.options.ticks.minRotation),i=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}X(Iu,"id","linear"),X(Iu,"defaults",{ticks:{callback:Ya.formatters.numeric}});const to=n=>Math.floor(Hi(n)),cr=(n,t)=>Math.pow(10,to(n)+t);function mm(n){return n/Math.pow(10,to(n))===1}function _m(n,t,e){const s=Math.pow(10,e),i=Math.floor(n/s);return Math.ceil(t/s)-i}function DM(n,t){const e=t-n;let s=to(e);for(;_m(n,t,s)>10;)s++;for(;_m(n,t,s)<10;)s--;return Math.min(s,to(n))}function RM(n,{min:t,max:e}){t=Jn(n.min,t);const s=[],i=to(t);let r=DM(t,e),l=r<0?Math.pow(10,Math.abs(r)):1;const o=Math.pow(10,r),a=i>r?Math.pow(10,i):0,c=Math.round((t-a)*l)/l,u=Math.floor((t-a)/o/10)*o*10;let f=Math.floor((c-u)/Math.pow(10,r)),p=Jn(n.min,Math.round((a+u+f*Math.pow(10,r))*l)/l);for(;p<e;)s.push({value:p,major:mm(p),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(r++,f=2,l=r>=0?1:l),p=Math.round((a+u+f*Math.pow(10,r))*l)/l;const m=Jn(n.max,p);return s.push({value:m,major:mm(m),significand:f}),s}class Du extends Lr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const s=Aa.prototype.parse.apply(this,[t,e]);if(s===0){this._zero=!0;return}return We(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=We(t)?Math.max(0,t):null,this.max=We(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!We(this._userMin)&&(this.min=t===cr(this.min,0)?cr(this.min,-1):cr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let s=this.min,i=this.max;const r=o=>s=t?s:o,l=o=>i=e?i:o;s===i&&(s<=0?(r(1),l(10)):(r(cr(s,-1)),l(cr(i,1)))),s<=0&&r(cr(i,-1)),i<=0&&l(cr(s,1)),this.min=s,this.max=i}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},s=RM(e,this);return t.bounds==="ticks"&&w0(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":po(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Hi(t),this._valueRange=Hi(this.max)-Hi(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Hi(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}X(Du,"id","logarithmic"),X(Du,"defaults",{ticks:{callback:Ya.formatters.logarithmic,major:{enabled:!0}}});function Ru(n){const t=n.ticks;if(t.display&&n.display){const e=xn(t.backdropPadding);return Zt(t.font&&t.font.size,Ne.font.size)+e.height}return 0}function PM(n,t,e){return e=Le(e)?e:[e],{w:HE(n,t.string,e),h:e.length*t.lineHeight}}function bm(n,t,e,s,i){return n===s||n===i?{start:t-e/2,end:t+e/2}:n<s||n>i?{start:t-e,end:t}:{start:t,end:t+e}}function BM(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),s=[],i=[],r=n._pointLabels.length,l=n.options.pointLabels,o=l.centerPointLabels?fe/r:0;for(let a=0;a<r;a++){const c=l.setContext(n.getPointLabelContext(a));i[a]=c.padding;const u=n.getPointPosition(a,n.drawingArea+i[a],o),f=fn(c.font),p=PM(n.ctx,f,n._pointLabels[a]);s[a]=p;const m=Sn(n.getIndexAngle(a)+o),h=Math.round(vf(m)),_=bm(h,u.x,p.w,0,180),b=bm(h,u.y,p.h,90,270);qM(e,t,m,_,b)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=zM(n,s,i)}function qM(n,t,e,s,i){const r=Math.abs(Math.sin(e)),l=Math.abs(Math.cos(e));let o=0,a=0;s.start<t.l?(o=(t.l-s.start)/r,n.l=Math.min(n.l,t.l-o)):s.end>t.r&&(o=(s.end-t.r)/r,n.r=Math.max(n.r,t.r+o)),i.start<t.t?(a=(t.t-i.start)/l,n.t=Math.min(n.t,t.t-a)):i.end>t.b&&(a=(i.end-t.b)/l,n.b=Math.max(n.b,t.b+a))}function FM(n,t,e){const s=n.drawingArea,{extra:i,additionalAngle:r,padding:l,size:o}=e,a=n.getPointPosition(t,s+i+l,r),c=Math.round(vf(Sn(a.angle+Xe))),u=WM(a.y,o.h,c),f=HM(c),p=UM(a.x,o.w,f);return{visible:!0,x:a.x,y:u,textAlign:f,left:p,top:u,right:p+o.w,bottom:u+o.h}}function jM(n,t){if(!t)return!0;const{left:e,top:s,right:i,bottom:r}=n;return!(vi({x:e,y:s},t)||vi({x:e,y:r},t)||vi({x:i,y:s},t)||vi({x:i,y:r},t))}function zM(n,t,e){const s=[],i=n._pointLabels.length,r=n.options,{centerPointLabels:l,display:o}=r.pointLabels,a={extra:Ru(r)/2,additionalAngle:l?fe/i:0};let c;for(let u=0;u<i;u++){a.padding=e[u],a.size=t[u];const f=FM(n,u,a);s.push(f),o==="auto"&&(f.visible=jM(f,c),f.visible&&(c=f))}return s}function HM(n){return n===0||n===180?"center":n<180?"left":"right"}function UM(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function WM(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function VM(n,t,e){const{left:s,top:i,right:r,bottom:l}=e,{backdropColor:o}=t;if(!ee(o)){const a=gr(t.borderRadius),c=xn(t.backdropPadding);n.fillStyle=o;const u=s-c.left,f=i-c.top,p=r-s+c.width,m=l-i+c.height;Object.values(a).some(h=>h!==0)?(n.beginPath(),Ql(n,{x:u,y:f,w:p,h:m,radius:a}),n.fill()):n.fillRect(u,f,p,m)}}function KM(n,t){const{ctx:e,options:{pointLabels:s}}=n;for(let i=t-1;i>=0;i--){const r=n._pointLabelItems[i];if(!r.visible)continue;const l=s.setContext(n.getPointLabelContext(i));VM(e,l,r);const o=fn(l.font),{x:a,y:c,textAlign:u}=r;Sr(e,n._pointLabels[i],a,c+o.lineHeight/2,o,{color:l.color,textAlign:u,textBaseline:"middle"})}}function dv(n,t,e,s){const{ctx:i}=n;if(e)i.arc(n.xCenter,n.yCenter,t,0,Oe);else{let r=n.getPointPosition(0,t);i.moveTo(r.x,r.y);for(let l=1;l<s;l++)r=n.getPointPosition(l,t),i.lineTo(r.x,r.y)}}function YM(n,t,e,s,i){const r=n.ctx,l=t.circular,{color:o,lineWidth:a}=t;!l&&!s||!o||!a||e<0||(r.save(),r.strokeStyle=o,r.lineWidth=a,r.setLineDash(i.dash||[]),r.lineDashOffset=i.dashOffset,r.beginPath(),dv(n,e,l,s),r.closePath(),r.stroke(),r.restore())}function XM(n,t,e){return er(n,{label:e,index:t,type:"pointLabel"})}class El extends Aa{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=xn(Ru(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=We(t)&&!isNaN(t)?t:0,this.max=We(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ru(this.options))}generateTickLabels(t){Aa.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{const i=Ae(this.options.pointLabels.callback,[e,s],this);return i||i===0?i:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?BM(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,i))}getIndexAngle(t){const e=Oe/(this._pointLabels.length||1),s=this.options.startAngle||0;return Sn(t*e+Ds(s))}getDistanceFromCenterForValue(t){if(ee(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(ee(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const s=e[t];return XM(this.getContext(),t,s)}}getPointPosition(t,e,s=0){const i=this.getIndexAngle(t)-Xe+s;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:s,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),dv(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:s,grid:i,border:r}=e,l=this._pointLabels.length;let o,a,c;if(e.pointLabels.display&&KM(this,l),i.display&&this.ticks.forEach((u,f)=>{if(f!==0||f===0&&this.min<0){a=this.getDistanceFromCenterForValue(u.value);const p=this.getContext(f),m=i.setContext(p),h=r.setContext(p);YM(this,m,a,l,h)}}),s.display){for(t.save(),o=l-1;o>=0;o--){const u=s.setContext(this.getPointLabelContext(o)),{color:f,lineWidth:p}=u;!p||!f||(t.lineWidth=p,t.strokeStyle=f,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,a=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,l;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((o,a)=>{if(a===0&&this.min>=0&&!e.reverse)return;const c=s.setContext(this.getContext(a)),u=fn(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),c.showLabelBackdrop){t.font=u.string,l=t.measureText(o.label).width,t.fillStyle=c.backdropColor;const f=xn(c.backdropPadding);t.fillRect(-l/2-f.left,-r-u.size/2-f.top,l+f.width,u.size+f.height)}Sr(t,o.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}X(El,"id","radialLinear"),X(El,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ya.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),X(El,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),X(El,"descriptors",{angleLines:{_fallback:"grid"}});const $a={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wn=Object.keys($a);function vm(n,t){return n-t}function ym(n,t){if(ee(t))return null;const e=n._adapter,{parser:s,round:i,isoWeekday:r}=n._parseOpts;let l=t;return typeof s=="function"&&(l=s(l)),We(l)||(l=typeof s=="string"?e.parse(l,s):e.parse(l)),l===null?null:(i&&(l=i==="week"&&(rl(r)||r===!0)?e.startOf(l,"isoWeek",r):e.startOf(l,i)),+l)}function km(n,t,e,s){const i=Wn.length;for(let r=Wn.indexOf(n);r<i-1;++r){const l=$a[Wn[r]],o=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((e-t)/(o*l.size))<=s)return Wn[r]}return Wn[i-1]}function GM(n,t,e,s,i){for(let r=Wn.length-1;r>=Wn.indexOf(e);r--){const l=Wn[r];if($a[l].common&&n._adapter.diff(i,s,l)>=t-1)return l}return Wn[e?Wn.indexOf(e):0]}function ZM(n){for(let t=Wn.indexOf(n)+1,e=Wn.length;t<e;++t)if($a[Wn[t]].common)return Wn[t]}function wm(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:s,hi:i}=yf(e,t),r=e[s]>=t?e[s]:e[i];n[r]=!0}}function JM(n,t,e,s){const i=n._adapter,r=+i.startOf(t[0].value,s),l=t[t.length-1].value;let o,a;for(o=r;o<=l;o=+i.add(o,1,s))a=e[o],a>=0&&(t[a].major=!0);return t}function Sm(n,t,e){const s=[],i={},r=t.length;let l,o;for(l=0;l<r;++l)o=t[l],i[o]=l,s.push({value:o,major:!1});return r===0||!e?s:JM(n,s,i,e)}class eo extends Lr{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const s=t.time||(t.time={}),i=this._adapter=new rO._date(t.adapters.date);i.init(e),xl(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:ym(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:l,maxDefined:o}=this.getUserBounds();function a(c){!l&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!o&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!l||!o)&&(a(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&a(this.getMinMax(!1))),i=We(i)&&!isNaN(i)?i:+e.startOf(Date.now(),s),r=We(r)&&!isNaN(r)?r:+e.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],s=t[t.length-1]),{min:e,max:s}}buildTicks(){const t=this.options,e=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,l=this.max,o=xE(i,r,l);return this._unit=e.unit||(s.autoSkip?km(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):GM(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:ZM(this._unit),this.initOffsets(i),t.reverse&&o.reverse(),Sm(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;e=pn(e,0,l),s=pn(s,0,l),this._offsets={start:e,end:s,factor:1/(e+1+s)}}_generate(){const t=this._adapter,e=this.min,s=this.max,i=this.options,r=i.time,l=r.unit||km(r.minUnit,e,s,this._getLabelCapacity(e)),o=Zt(i.ticks.stepSize,1),a=l==="week"?r.isoWeekday:!1,c=rl(a)||a===!0,u={};let f=e,p,m;if(c&&(f=+t.startOf(f,"isoWeek",a)),f=+t.startOf(f,c?"day":l),t.diff(s,e,l)>1e5*o)throw new Error(e+" and "+s+" are too far apart with stepSize of "+o+" "+l);const h=i.ticks.source==="data"&&this.getDataTimestamps();for(p=f,m=0;p<s;p=+t.add(p,o,l),m++)wm(u,p,h);return(p===s||i.bounds==="ticks"||m===1)&&wm(u,p,h),Object.keys(u).sort(vm).map(_=>+_)}getLabelForValue(t){const e=this._adapter,s=this.options.time;return s.tooltipFormat?e.format(t,s.tooltipFormat):e.format(t,s.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,r=this._unit,l=e||i[r];return this._adapter.format(t,l)}_tickFormatFunction(t,e,s,i){const r=this.options,l=r.ticks.callback;if(l)return Ae(l,[t,e,s],this);const o=r.time.displayFormats,a=this._unit,c=this._majorUnit,u=a&&o[a],f=c&&o[c],p=s[e],m=c&&f&&p&&p.major;return this._adapter.format(t,i||(m?f:u))}generateTickLabels(t){let e,s,i;for(e=0,s=t.length;e<s;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+s)*e.factor)}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,s=this.ctx.measureText(t).width,i=Ds(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),l=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:s*r+o*l,h:s*l+o*r}}_getLabelCapacity(t){const e=this.options.time,s=e.displayFormats,i=s[e.unit]||s.millisecond,r=this._tickFormatFunction(t,0,Sm(this,[t],this._majorUnit),i),l=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],e,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,s=i.length;e<s;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,s;if(t.length)return t;const i=this.getLabels();for(e=0,s=i.length;e<s;++e)t.push(ym(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return T0(t.sort(vm))}}X(eo,"id","time"),X(eo,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Fo(n,t,e){let s=0,i=n.length-1,r,l,o,a;e?(t>=n[s].pos&&t<=n[i].pos&&({lo:s,hi:i}=bi(n,"pos",t)),{pos:r,time:o}=n[s],{pos:l,time:a}=n[i]):(t>=n[s].time&&t<=n[i].time&&({lo:s,hi:i}=bi(n,"time",t)),{time:r,pos:o}=n[s],{time:l,pos:a}=n[i]);const c=l-r;return c?o+(a-o)*(t-r)/c:o}class Pu extends eo{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Fo(e,this.min),this._tableRange=Fo(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:s}=this,i=[],r=[];let l,o,a,c,u;for(l=0,o=t.length;l<o;++l)c=t[l],c>=e&&c<=s&&i.push(c);if(i.length<2)return[{time:e,pos:0},{time:s,pos:1}];for(l=0,o=i.length;l<o;++l)u=i[l+1],a=i[l-1],c=i[l],Math.round((u+a)/2)!==c&&r.push({time:c,pos:l/(o-1)});return r}_generate(){const t=this.min,e=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(e)||s.length===1)&&s.push(e),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),s=this.getLabelTimestamps();return e.length&&s.length?t=this.normalize(e.concat(s)):t=e.length?e:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Fo(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return Fo(this._table,s*this._tableRange+this._minPos,!0)}}X(Pu,"id","timeseries"),X(Pu,"defaults",eo.defaults);var QM=Object.freeze({__proto__:null,CategoryScale:Nu,LinearScale:Iu,LogarithmicScale:Du,RadialLinearScale:El,TimeScale:eo,TimeSeriesScale:Pu});const $M=[iO,Dx,xM,QM];function t8(n){let t,e;return{c(){t=v("div"),e=v("canvas"),g(e,"class","svelte-4hmk78"),g(t,"class","chart-wrapper svelte-4hmk78")},m(s,i){I(s,t,i),d(t,e),n[2](e)},p:Et,i:Et,o:Et,d(s){s&&N(t),n[2](null)}}}function e8(n,t,e){let{data:s=[]}=t,i,r;pi.register(...$M),es(()=>{l()}),Ev(()=>{r?o():l()});function l(){if(!i||s.length===0)return;const u=i.getContext("2d"),f=u.createLinearGradient(0,0,0,400);f.addColorStop(0,"rgba(99, 102, 241, 0.4)"),f.addColorStop(1,"rgba(99, 102, 241, 0)"),r=new pi(u,{type:"line",data:{labels:s.map(p=>p.date),datasets:[{label:" (Equity)",data:s.map(p=>p.equity),borderColor:"#6366f1",borderWidth:4,pointBackgroundColor:"#6366f1",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:8,backgroundColor:f,fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{font:{size:14,weight:"bold"},color:"#2d3748"}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#667eea",borderWidth:1,padding:12,displayColors:!0,callbacks:{label(p){let m=p.dataset.label||"";return m&&(m+=": "),m+=p.parsed.y.toFixed(2),m}}}},scales:{x:{grid:{display:!1},ticks:{color:"#718096",font:{size:12}}},y:{grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{color:"#718096",font:{size:12},callback(p){return p.toFixed(0)}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}})}function o(){!r||s.length===0||(r.data.labels=s.map(u=>u.date),r.data.datasets[0].data=s.map(u=>u.equity),r.update())}function a(){r&&(r.destroy(),r=null)}Ma(()=>{a()});function c(u){$s[u?"unshift":"push"](()=>{i=u,e(0,i)})}return n.$$set=u=>{"data"in u&&e(1,s=u.data)},[i,s,c]}class n8 extends Fn{constructor(t){super(),qn(this,t,e8,t8,bn,{data:1})}}function Am(n,t,e){const s=n.slice();return s[7]=t[e],s}function Tm(n,t,e){const s=n.slice();return s[10]=t[e],s}function Em(n,t,e){const s=n.slice();return s[13]=t[e],s}function s8(n){var Mn,Ln,Xn,sn,ke,rs,rn;let t,e,s,i,r,l,o,a,c=(((Mn=n[0])==null?void 0:Mn.total_trades)||0)+"",u,f,p,m,h,_,b,y,w,A=(((Ln=n[0])==null?void 0:Ln.winning_trades)||0)+"",E,T,C,M,x,D,L,q,F,nt=(((Xn=n[0])==null?void 0:Xn.losing_trades)||0)+"",et,U,W,V,$,st,Z,wt,rt,at=Cn((sn=n[0])==null?void 0:sn.win_rate,2)+"",vt,K,ct,ft,ut,Nt,yt,z,Y,dt,Ut=(((ke=n[0])==null?void 0:ke.total_pnl)||0)>=0?"+":"",$t,ht=Im((rs=n[0])==null?void 0:rs.total_pnl)+"",St,Ct,it,Dt,zt,Q,lt,mt,kt,Mt,Pt=Cn((rn=n[0])==null?void 0:rn.profit_factor,2)+"",Tt,Bt,_t,me,qe,de,Xt,nn,Ze,Je,ne,re=n[3]&&n[3].length>0&&Cm(n),ve=n[1]&&n[1].length>0&&Om(n);function Yn(Jt,pe){return Jt[2]&&Jt[2].length>0?l8:r8}let Ie=Yn(n),ce=Ie(n);return{c(){var Jt;t=v("div"),e=v("div"),s=v("span"),s.textContent="",i=S(),r=v("div"),l=v("span"),l.textContent="",o=S(),a=v("span"),u=P(c),f=S(),p=v("div"),m=v("span"),m.textContent="",h=S(),_=v("div"),b=v("span"),b.textContent="",y=S(),w=v("span"),E=P(A),T=S(),C=v("div"),M=v("span"),M.textContent="",x=S(),D=v("div"),L=v("span"),L.textContent="",q=S(),F=v("span"),et=P(nt),U=S(),W=v("div"),V=v("span"),V.textContent="",$=S(),st=v("div"),Z=v("span"),Z.textContent="",wt=S(),rt=v("span"),vt=P(at),K=P("%"),ct=S(),ft=v("div"),ut=v("span"),ut.textContent="",Nt=S(),yt=v("div"),z=v("span"),z.textContent="",Y=S(),dt=v("span"),$t=P(Ut),St=P(ht),it=S(),Dt=v("div"),zt=v("span"),zt.textContent="",Q=S(),lt=v("div"),mt=v("span"),mt.textContent="",kt=S(),Mt=v("span"),Tt=P(Pt),Bt=S(),_t=v("div"),me=v("div"),re&&re.c(),qe=S(),ve&&ve.c(),de=S(),Xt=v("div"),nn=v("div"),Ze=v("div"),Ze.innerHTML='<h3 class="svelte-1uci0u"> </h3>',Je=S(),ce.c(),g(s,"class","metric-icon svelte-1uci0u"),g(l,"class","label svelte-1uci0u"),g(a,"class","value svelte-1uci0u"),g(r,"class","metric-info svelte-1uci0u"),g(e,"class","metric-card glass svelte-1uci0u"),g(m,"class","metric-icon svelte-1uci0u"),g(b,"class","label svelte-1uci0u"),g(w,"class","value text-success svelte-1uci0u"),g(_,"class","metric-info svelte-1uci0u"),g(p,"class","metric-card glass success-glow svelte-1uci0u"),g(M,"class","metric-icon svelte-1uci0u"),g(L,"class","label svelte-1uci0u"),g(F,"class","value text-danger svelte-1uci0u"),g(D,"class","metric-info svelte-1uci0u"),g(C,"class","metric-card glass danger-glow svelte-1uci0u"),g(V,"class","metric-icon svelte-1uci0u"),g(Z,"class","label svelte-1uci0u"),g(rt,"class","value svelte-1uci0u"),g(st,"class","metric-info svelte-1uci0u"),g(W,"class","metric-card glass primary-gradient svelte-1uci0u"),g(ut,"class","metric-icon svelte-1uci0u"),g(z,"class","label svelte-1uci0u"),g(dt,"class","value svelte-1uci0u"),g(yt,"class","metric-info svelte-1uci0u"),g(ft,"class",Ct="metric-card glass "+((((Jt=n[0])==null?void 0:Jt.total_pnl)||0)>=0?"success-gradient":"danger-gradient")+" svelte-1uci0u"),g(zt,"class","metric-icon svelte-1uci0u"),g(mt,"class","label svelte-1uci0u"),g(Mt,"class","value svelte-1uci0u"),g(lt,"class","metric-info svelte-1uci0u"),g(Dt,"class","metric-card glass svelte-1uci0u"),g(t,"class","metrics-grid svelte-1uci0u"),g(me,"class","main-column"),g(Ze,"class","section-header svelte-1uci0u"),g(nn,"class","strategy-analysis-section glass-card svelte-1uci0u"),g(Xt,"class","sidebar-column"),g(_t,"class","dashboard-body svelte-1uci0u")},m(Jt,pe){I(Jt,t,pe),d(t,e),d(e,s),d(e,i),d(e,r),d(r,l),d(r,o),d(r,a),d(a,u),d(t,f),d(t,p),d(p,m),d(p,h),d(p,_),d(_,b),d(_,y),d(_,w),d(w,E),d(t,T),d(t,C),d(C,M),d(C,x),d(C,D),d(D,L),d(D,q),d(D,F),d(F,et),d(t,U),d(t,W),d(W,V),d(W,$),d(W,st),d(st,Z),d(st,wt),d(st,rt),d(rt,vt),d(rt,K),d(t,ct),d(t,ft),d(ft,ut),d(ft,Nt),d(ft,yt),d(yt,z),d(yt,Y),d(yt,dt),d(dt,$t),d(dt,St),d(t,it),d(t,Dt),d(Dt,zt),d(Dt,Q),d(Dt,lt),d(lt,mt),d(lt,kt),d(lt,Mt),d(Mt,Tt),I(Jt,Bt,pe),I(Jt,_t,pe),d(_t,me),re&&re.m(me,null),d(me,qe),ve&&ve.m(me,null),d(_t,de),d(_t,Xt),d(Xt,nn),d(nn,Ze),d(nn,Je),ce.m(nn,null),ne=!0},p(Jt,pe){var Gn,ls,vn,Ee,os,as,cs,Es;(!ne||pe&1)&&c!==(c=(((Gn=Jt[0])==null?void 0:Gn.total_trades)||0)+"")&&G(u,c),(!ne||pe&1)&&A!==(A=(((ls=Jt[0])==null?void 0:ls.winning_trades)||0)+"")&&G(E,A),(!ne||pe&1)&&nt!==(nt=(((vn=Jt[0])==null?void 0:vn.losing_trades)||0)+"")&&G(et,nt),(!ne||pe&1)&&at!==(at=Cn((Ee=Jt[0])==null?void 0:Ee.win_rate,2)+"")&&G(vt,at),(!ne||pe&1)&&Ut!==(Ut=(((os=Jt[0])==null?void 0:os.total_pnl)||0)>=0?"+":"")&&G($t,Ut),(!ne||pe&1)&&ht!==(ht=Im((as=Jt[0])==null?void 0:as.total_pnl)+"")&&G(St,ht),(!ne||pe&1&&Ct!==(Ct="metric-card glass "+((((cs=Jt[0])==null?void 0:cs.total_pnl)||0)>=0?"success-gradient":"danger-gradient")+" svelte-1uci0u"))&&g(ft,"class",Ct),(!ne||pe&1)&&Pt!==(Pt=Cn((Es=Jt[0])==null?void 0:Es.profit_factor,2)+"")&&G(Tt,Pt),Jt[3]&&Jt[3].length>0?re?(re.p(Jt,pe),pe&8&&Wt(re,1)):(re=Cm(Jt),re.c(),Wt(re,1),re.m(me,qe)):re&&(ns(),Kt(re,1,1,()=>{re=null}),ss()),Jt[1]&&Jt[1].length>0?ve?ve.p(Jt,pe):(ve=Om(Jt),ve.c(),ve.m(me,null)):ve&&(ve.d(1),ve=null),Ie===(Ie=Yn(Jt))&&ce?ce.p(Jt,pe):(ce.d(1),ce=Ie(Jt),ce&&(ce.c(),ce.m(nn,null)))},i(Jt){ne||(Wt(re),ne=!0)},o(Jt){Kt(re),ne=!1},d(Jt){Jt&&(N(t),N(Bt),N(_t)),re&&re.d(),ve&&ve.d(),ce.d()}}}function i8(n){let t;return{c(){t=v("div"),t.innerHTML='<div class="loader svelte-1uci0u"></div> <p>...</p>',g(t,"class","loading-overlay svelte-1uci0u")},m(e,s){I(e,t,s)},p:Et,i:Et,o:Et,d(e){e&&N(t)}}}function Cm(n){let t,e,s,i,r;return i=new n8({props:{data:n[3]}}),{c(){t=v("div"),e=v("div"),e.innerHTML='<h3 class="svelte-1uci0u">  (Equity)</h3>',s=S(),He(i.$$.fragment),g(e,"class","section-header svelte-1uci0u"),g(t,"class","chart-section glass-card svelte-1uci0u")},m(l,o){I(l,t,o),d(t,e),d(t,s),Re(i,t,null),r=!0},p(l,o){const a={};o&8&&(a.data=l[3]),i.$set(a)},i(l){r||(Wt(i.$$.fragment,l),r=!0)},o(l){Kt(i.$$.fragment,l),r=!1},d(l){l&&N(t),Pe(i)}}}function Om(n){let t,e,s,i,r,l,o,a,c=bt(n[1]),u=[];for(let f=0;f<c.length;f+=1)u[f]=xm(Em(n,c,f));return{c(){t=v("div"),e=v("div"),e.innerHTML='<h3 class="svelte-1uci0u"> </h3>',s=S(),i=v("div"),r=v("table"),l=v("thead"),l.innerHTML='<tr><th class="svelte-1uci0u"></th> <th class="svelte-1uci0u"></th> <th class="svelte-1uci0u"></th> <th class="svelte-1uci0u"></th> <th class="svelte-1uci0u"></th></tr>',o=S(),a=v("tbody");for(let f=0;f<u.length;f+=1)u[f].c();g(e,"class","section-header svelte-1uci0u"),g(r,"class","modern-table svelte-1uci0u"),g(i,"class","modern-table-wrapper svelte-1uci0u"),g(t,"class","table-section glass-card svelte-1uci0u")},m(f,p){I(f,t,p),d(t,e),d(t,s),d(t,i),d(i,r),d(r,l),d(r,o),d(r,a);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(a,null)},p(f,p){if(p&2){c=bt(f[1]);let m;for(m=0;m<c.length;m+=1){const h=Em(f,c,m);u[m]?u[m].p(h,p):(u[m]=xm(h),u[m].c(),u[m].m(a,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=c.length}},d(f){f&&N(t),Gt(u,f)}}}function xm(n){let t,e,s,i=n[13].symbol+"",r,l,o,a=n[13].total_trades+"",c,u,f,p=n[13].winning_trades+"",m,h,_,b,y,w,A,E,T=Cn(n[13].win_rate,1)+"",C,M,x,D,L=(n[13].total_pnl||0)>=0?"+":"",q,F=Cn(n[13].total_pnl,2)+"",nt,et,U;return{c(){t=v("tr"),e=v("td"),s=v("strong"),r=P(i),l=S(),o=v("td"),c=P(a),u=S(),f=v("td"),m=P(p),h=S(),_=v("td"),b=v("div"),y=v("div"),A=S(),E=v("span"),C=P(T),M=P("%"),x=S(),D=v("td"),q=P(L),nt=P(F),U=S(),g(s,"class","svelte-1uci0u"),g(e,"class","symbol-cell svelte-1uci0u"),g(o,"class","svelte-1uci0u"),g(f,"class","text-success svelte-1uci0u"),g(y,"class",w="progress-bar "+((n[13].win_rate||0)>=50?"bg-success":"bg-danger")+" svelte-1uci0u"),en(y,"width",(n[13].win_rate||0)+"%"),g(E,"class","progress-text svelte-1uci0u"),g(b,"class","progress-bar-container svelte-1uci0u"),g(_,"class","svelte-1uci0u"),g(D,"class",et=ra((n[13].total_pnl||0)>=0?"text-success":"text-danger")+" svelte-1uci0u")},m(W,V){I(W,t,V),d(t,e),d(e,s),d(s,r),d(t,l),d(t,o),d(o,c),d(t,u),d(t,f),d(f,m),d(t,h),d(t,_),d(_,b),d(b,y),d(b,A),d(b,E),d(E,C),d(E,M),d(t,x),d(t,D),d(D,q),d(D,nt),d(t,U)},p(W,V){V&2&&i!==(i=W[13].symbol+"")&&G(r,i),V&2&&a!==(a=W[13].total_trades+"")&&G(c,a),V&2&&p!==(p=W[13].winning_trades+"")&&G(m,p),V&2&&w!==(w="progress-bar "+((W[13].win_rate||0)>=50?"bg-success":"bg-danger")+" svelte-1uci0u")&&g(y,"class",w),V&2&&en(y,"width",(W[13].win_rate||0)+"%"),V&2&&T!==(T=Cn(W[13].win_rate,1)+"")&&G(C,T),V&2&&L!==(L=(W[13].total_pnl||0)>=0?"+":"")&&G(q,L),V&2&&F!==(F=Cn(W[13].total_pnl,2)+"")&&G(nt,F),V&2&&et!==(et=ra((W[13].total_pnl||0)>=0?"text-success":"text-danger")+" svelte-1uci0u")&&g(D,"class",et)},d(W){W&&N(t)}}}function r8(n){let t;return{c(){t=v("div"),t.textContent="",g(t,"class","empty-mini svelte-1uci0u")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function l8(n){let t,e=bt(n[2]),s=[];for(let i=0;i<e.length;i+=1)s[i]=Lm(Am(n,e,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();t=ie()},m(i,r){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(i,r);I(i,t,r)},p(i,r){if(r&4){e=bt(i[2]);let l;for(l=0;l<e.length;l+=1){const o=Am(i,e,l);s[l]?s[l].p(o,r):(s[l]=Lm(o),s[l].c(),s[l].m(t.parentNode,t))}for(;l<s.length;l+=1)s[l].d(1);s.length=e.length}},d(i){i&&N(t),Gt(s,i)}}}function o8(n){let t;return{c(){t=v("div"),t.textContent="",g(t,"class","empty-mini svelte-1uci0u")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function a8(n){let t,e=bt(n[7].sub_item_stats),s=[];for(let i=0;i<e.length;i+=1)s[i]=Mm(Tm(n,e,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();t=ie()},m(i,r){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(i,r);I(i,t,r)},p(i,r){if(r&4){e=bt(i[7].sub_item_stats);let l;for(l=0;l<e.length;l+=1){const o=Tm(i,e,l);s[l]?s[l].p(o,r):(s[l]=Mm(o),s[l].c(),s[l].m(t.parentNode,t))}for(;l<s.length;l+=1)s[l].d(1);s.length=e.length}},d(i){i&&N(t),Gt(s,i)}}}function Mm(n){let t,e,s=n[10].name+"",i,r,l,o,a=n[10].total_trades+"",c,u,f,p,m=Cn(n[10].win_rate,0)+"",h,_,b,y,w=(n[10].total_pnl||0)>=0?"+":"",A,E=Cn(n[10].total_pnl,1)+"",T,C,M;return{c(){t=v("div"),e=v("div"),i=P(s),r=S(),l=v("div"),o=v("span"),c=P(a),u=P(" "),f=S(),p=v("span"),h=P(m),_=P("% Win"),b=S(),y=v("span"),A=P(w),T=P(E),M=S(),g(e,"class","sub-item-name svelte-1uci0u"),g(o,"class","sub-count svelte-1uci0u"),g(p,"class","sub-winrate svelte-1uci0u"),g(y,"class",C="sub-pnl "+((n[10].total_pnl||0)>=0?"pos":"neg")+" svelte-1uci0u"),g(l,"class","sub-item-meta svelte-1uci0u"),g(t,"class","sub-item-row svelte-1uci0u")},m(x,D){I(x,t,D),d(t,e),d(e,i),d(t,r),d(t,l),d(l,o),d(o,c),d(o,u),d(l,f),d(l,p),d(p,h),d(p,_),d(l,b),d(l,y),d(y,A),d(y,T),d(t,M)},p(x,D){D&4&&s!==(s=x[10].name+"")&&G(i,s),D&4&&a!==(a=x[10].total_trades+"")&&G(c,a),D&4&&m!==(m=Cn(x[10].win_rate,0)+"")&&G(h,m),D&4&&w!==(w=(x[10].total_pnl||0)>=0?"+":"")&&G(A,w),D&4&&E!==(E=Cn(x[10].total_pnl,1)+"")&&G(T,E),D&4&&C!==(C="sub-pnl "+((x[10].total_pnl||0)>=0?"pos":"neg")+" svelte-1uci0u")&&g(y,"class",C)},d(x){x&&N(t)}}}function Lm(n){let t,e,s,i=Nm(n[7].strategy)+"",r,l,o,a,c=n[7].total_trades+"",u,f,p=Cn(n[7].win_rate,1)+"",m,h,_,b=(n[7].total_pnl||0)>=0?"+":"",y,w=Cn(n[7].total_pnl,1)+"",A,E,T,C,M;function x(q,F){return q[7].sub_item_stats&&q[7].sub_item_stats.length>0?a8:o8}let D=x(n),L=D(n);return{c(){t=v("div"),e=v("div"),s=v("span"),r=P(i),o=S(),a=v("span"),u=P(c),f=P("  |  "),m=P(p),h=P("% | "),_=v("strong"),y=P(b),A=P(w),T=S(),C=v("div"),L.c(),M=S(),g(s,"class",l="strategy-badge "+n[7].strategy+" svelte-1uci0u"),g(_,"class",E=ra((n[7].total_pnl||0)>=0?"text-success":"text-danger")+" svelte-1uci0u"),g(a,"class","strategy-stats-summary svelte-1uci0u"),g(e,"class","strategy-header-row svelte-1uci0u"),g(C,"class","sub-item-stats svelte-1uci0u"),g(t,"class","strategy-group svelte-1uci0u")},m(q,F){I(q,t,F),d(t,e),d(e,s),d(s,r),d(e,o),d(e,a),d(a,u),d(a,f),d(a,m),d(a,h),d(a,_),d(_,y),d(_,A),d(t,T),d(t,C),L.m(C,null),d(t,M)},p(q,F){F&4&&i!==(i=Nm(q[7].strategy)+"")&&G(r,i),F&4&&l!==(l="strategy-badge "+q[7].strategy+" svelte-1uci0u")&&g(s,"class",l),F&4&&c!==(c=q[7].total_trades+"")&&G(u,c),F&4&&p!==(p=Cn(q[7].win_rate,1)+"")&&G(m,p),F&4&&b!==(b=(q[7].total_pnl||0)>=0?"+":"")&&G(y,b),F&4&&w!==(w=Cn(q[7].total_pnl,1)+"")&&G(A,w),F&4&&E!==(E=ra((q[7].total_pnl||0)>=0?"text-success":"text-danger")+" svelte-1uci0u")&&g(_,"class",E),D===(D=x(q))&&L?L.p(q,F):(L.d(1),L=D(q),L&&(L.c(),L.m(C,null)))},d(q){q&&N(t),L.d()}}}function c8(n){let t,e,s,i,r,l;const o=[i8,s8],a=[];function c(u,f){return u[4]?0:1}return i=c(n),r=a[i]=o[i](n),{c(){t=v("div"),e=v("header"),e.innerHTML='<h1 class="svelte-1uci0u"> </h1> <p class="subtitle svelte-1uci0u"></p>',s=S(),r.c(),g(e,"class","dashboard-header svelte-1uci0u"),g(t,"class","dashboard-container svelte-1uci0u")},m(u,f){I(u,t,f),d(t,e),d(t,s),a[i].m(t,null),l=!0},p(u,[f]){let p=i;i=c(u),i===p?a[i].p(u,f):(ns(),Kt(a[p],1,1,()=>{a[p]=null}),ss(),r=a[i],r?r.p(u,f):(r=a[i]=o[i](u),r.c()),Wt(r,1),r.m(t,null))},i(u){l||(Wt(r),l=!0)},o(u){Kt(r),l=!1},d(u){u&&N(t),a[i].d()}}}function Nm(n){return{expert:" ",elite:" ",legend:" ",unspecified:" "}[n]||n}function Im(n){return n==null?"0.00":(parseFloat(n)||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function Cn(n,t=2){return n==null?"0":(parseFloat(n)||0).toFixed(t)}function u8(n,t,e){let s;Ye(n,Rs,u=>e(5,s=u));let i={total_trades:0,winning_trades:0,losing_trades:0,win_rate:0,total_pnl:0,average_pnl:0,largest_win:0,largest_loss:0,profit_factor:0},r=[],l=[],o=[],a=!0;async function c(){try{e(4,a=!0);const u={account_id:s},[f,p,m,h]=await Promise.all([yo.getSummary(u).catch(_=>({data:i})),yo.getBySymbol(u).catch(_=>({data:[]})),yo.getByStrategy(u).catch(_=>({data:[]})),yo.getEquityCurve(u).catch(_=>({data:[]}))]);e(0,i=(f==null?void 0:f.data)||i),e(1,r=(p==null?void 0:p.data)||[]),e(2,l=(m==null?void 0:m.data)||[]),e(3,o=(h==null?void 0:h.data)||[])}catch(u){console.error(":",u)}finally{e(4,a=!1)}}return n.$$.update=()=>{n.$$.dirty&32&&s&&c()},[i,r,l,o,a,s]}class f8 extends Fn{constructor(t){super(),qn(this,t,u8,c8,bn,{})}}function Dm(n,t,e){const s=n.slice();s[19]=t[e];const i=JSON.parse(s[19].trend_analysis||"{}");s[20]=i;const r=s[19].market_session==="all";return s[21]=r,s}function Rm(n,t,e){const s=n.slice();return s[33]=t[e][0],s[34]=t[e][1],s}function Pm(n,t,e){const s=n.slice();return s[37]=t[e],s}function Bm(n,t,e){const s=n.slice();return s[24]=t[e],s}function qm(n,t,e){var o,a,c,u,f,p;const s=n.slice();s[27]=t[e];const i=(a=(o=s[20].asian)==null?void 0:o.trends)==null?void 0:a[s[27]];s[28]=i;const r=(u=(c=s[20].european)==null?void 0:c.trends)==null?void 0:u[s[27]];s[29]=r;const l=(p=(f=s[20].us)==null?void 0:f.trends)==null?void 0:p[s[27]];return s[30]=l,s}function h8(n,t,e){const s=n.slice();return s[24]=t[e],s}function d8(n,t,e){const s=n.slice();return s[42]=t[e],s}function p8(n){let t;return{c(){t=v("div"),t.innerHTML='<h3 class="svelte-dgkdtg"> </h3>',g(t,"class","header svelte-dgkdtg")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function g8(n){let t,e,s,i,r,l,o,a,c,u,f,p,m,h,_,b,y,w,A,E,T,C,M,x,D,L,q,F,nt,et,U,W,V,$,st=bt(Ts),Z=[];for(let at=0;at<st.length;at+=1)Z[at]=m8(d8(n,st,at));let wt=bt(vs),rt=[];for(let at=0;at<wt.length;at+=1)rt[at]=_8(h8(n,wt,at));return{c(){t=v("div"),e=v("h2"),e.textContent=" ",s=S(),i=v("button"),i.textContent=" ",r=S(),l=v("div"),o=v("div"),a=v("label"),a.textContent="",c=S(),u=v("input"),f=S(),p=v("div"),m=v("label"),m.textContent="",h=S(),_=v("input"),b=S(),y=v("div"),w=v("label"),w.textContent="",A=S(),E=v("select"),T=v("option"),T.textContent="";for(let at=0;at<Z.length;at+=1)Z[at].c();C=S(),M=v("div"),x=v("label"),x.textContent="",D=S(),L=v("select"),q=v("option"),q.textContent="";for(let at=0;at<rt.length;at+=1)rt[at].c();F=S(),nt=v("div"),et=v("button"),et.textContent="",U=S(),W=v("button"),W.textContent="",g(e,"class","svelte-dgkdtg"),g(i,"class","btn btn-primary"),g(t,"class","header svelte-dgkdtg"),g(a,"class","svelte-dgkdtg"),g(u,"type","date"),g(u,"class","form-control"),g(o,"class","filter-group svelte-dgkdtg"),g(m,"class","svelte-dgkdtg"),g(_,"type","date"),g(_,"class","form-control"),g(p,"class","filter-group svelte-dgkdtg"),g(w,"class","svelte-dgkdtg"),T.__value="",xt(T,T.__value),g(E,"class","form-control"),n[3].symbol===void 0&&gn(()=>n[12].call(E)),g(y,"class","filter-group svelte-dgkdtg"),g(x,"class","svelte-dgkdtg"),q.__value="",xt(q,q.__value),g(L,"class","form-control"),n[3].marketSession===void 0&&gn(()=>n[13].call(L)),g(M,"class","filter-group svelte-dgkdtg"),g(et,"class","btn btn-primary"),g(W,"class","btn btn-secondary"),g(nt,"class","filter-actions svelte-dgkdtg"),g(l,"class","filters svelte-dgkdtg")},m(at,vt){I(at,t,vt),d(t,e),d(t,s),d(t,i),I(at,r,vt),I(at,l,vt),d(l,o),d(o,a),d(o,c),d(o,u),xt(u,n[3].startDate),d(l,f),d(l,p),d(p,m),d(p,h),d(p,_),xt(_,n[3].endDate),d(l,b),d(l,y),d(y,w),d(y,A),d(y,E),d(E,T);for(let K=0;K<Z.length;K+=1)Z[K]&&Z[K].m(E,null);Te(E,n[3].symbol,!0),d(l,C),d(l,M),d(M,x),d(M,D),d(M,L),d(L,q);for(let K=0;K<rt.length;K+=1)rt[K]&&rt[K].m(L,null);Te(L,n[3].marketSession,!0),d(l,F),d(l,nt),d(nt,et),d(nt,U),d(nt,W),V||($=[j(i,"click",n[9]),j(u,"input",n[10]),j(_,"input",n[11]),j(E,"change",n[12]),j(L,"change",n[13]),j(et,"click",n[4]),j(W,"click",n[5])],V=!0)},p(at,vt){vt[0]&8&&xt(u,at[3].startDate),vt[0]&8&&xt(_,at[3].endDate),vt[0]&8&&Te(E,at[3].symbol),vt[0]&8&&Te(L,at[3].marketSession)},d(at){at&&(N(t),N(r),N(l)),Gt(Z,at),Gt(rt,at),V=!1,Vt($)}}}function m8(n){let t;return{c(){t=v("option"),t.textContent=`${n[42]}`,t.__value=n[42],xt(t,t.__value)},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function _8(n){let t;return{c(){t=v("option"),t.textContent=`${n[24].label}`,t.__value=n[24].value,xt(t,t.__value)},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function b8(n){let t,e=bt(n[2]),s=[];for(let i=0;i<e.length;i+=1)s[i]=e1(Dm(n,e,i));return{c(){t=v("div");for(let i=0;i<s.length;i+=1)s[i].c();g(t,"class","plans-list svelte-dgkdtg")},m(i,r){I(i,t,r);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null)},p(i,r){if(r[0]&196){e=bt(i[2]);let l;for(l=0;l<e.length;l+=1){const o=Dm(i,e,l);s[l]?s[l].p(o,r):(s[l]=e1(o),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=e.length}},d(i){i&&N(t),Gt(s,i)}}}function v8(n){let t,e,s,i,r,l;return{c(){t=v("div"),e=v("p"),e.textContent=" ",s=S(),i=v("button"),i.textContent="",g(e,"class","svelte-dgkdtg"),g(i,"class","btn btn-primary"),g(t,"class","empty-state svelte-dgkdtg")},m(o,a){I(o,t,a),d(t,e),d(t,s),d(t,i),r||(l=j(i,"click",n[14]),r=!0)},p:Et,d(o){o&&N(t),r=!1,l()}}}function y8(n){let t,e,s,i,r,l=n[19].notes&&Fm(n),o=bt(Object.entries(n[20])),a=[];for(let c=0;c<o.length;c+=1)a[c]=Wm(Rm(n,o,c));return{c(){l&&l.c(),t=S(),e=v("div"),s=v("h4"),s.textContent=" ",i=S(),r=v("div");for(let c=0;c<a.length;c+=1)a[c].c();g(s,"class","svelte-dgkdtg"),g(r,"class","trends-grid"),g(e,"class","plan-trends")},m(c,u){l&&l.m(c,u),I(c,t,u),I(c,e,u),d(e,s),d(e,i),d(e,r);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(r,null)},p(c,u){if(c[19].notes?l?l.p(c,u):(l=Fm(c),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),u[0]&4){o=bt(Object.entries(c[20]));let f;for(f=0;f<o.length;f+=1){const p=Rm(c,o,f);a[f]?a[f].p(p,u):(a[f]=Wm(p),a[f].c(),a[f].m(r,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=o.length}},d(c){c&&(N(t),N(e)),l&&l.d(c),Gt(a,c)}}}function k8(n){var o,a,c;let t,e,s,i=bt(br),r=[];for(let u=0;u<i.length;u+=1)r[u]=Jm(qm(n,i,u));let l=(((o=n[20].asian)==null?void 0:o.notes)||((a=n[20].european)==null?void 0:a.notes)||((c=n[20].us)==null?void 0:c.notes))&&Qm(n);return{c(){t=v("div");for(let u=0;u<r.length;u+=1)r[u].c();e=S(),l&&l.c(),s=ie(),g(t,"class","timeframe-progression svelte-dgkdtg")},m(u,f){I(u,t,f);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(t,null);I(u,e,f),l&&l.m(u,f),I(u,s,f)},p(u,f){var p,m,h;if(f[0]&4){i=bt(br);let _;for(_=0;_<i.length;_+=1){const b=qm(u,i,_);r[_]?r[_].p(b,f):(r[_]=Jm(b),r[_].c(),r[_].m(t,null))}for(;_<r.length;_+=1)r[_].d(1);r.length=i.length}(p=u[20].asian)!=null&&p.notes||(m=u[20].european)!=null&&m.notes||(h=u[20].us)!=null&&h.notes?l?l.p(u,f):(l=Qm(u),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(u){u&&(N(t),N(e),N(s)),Gt(r,u),l&&l.d(u)}}}function Fm(n){let t,e=n[19].notes+"",s;return{c(){t=v("div"),s=P(e),g(t,"class","plan-notes")},m(i,r){I(i,t,r),d(t,s)},p(i,r){r[0]&4&&e!==(e=i[19].notes+"")&&G(s,e)},d(i){i&&N(t)}}}function jm(n){let t,e,s,i=n[33]+"",r,l,o,a,c=n[34].direction&&zm(n),u=n[34].signals&&n[34].signals.length>0&&Hm(n);return{c(){t=v("div"),e=v("div"),s=v("span"),r=P(i),l=S(),c&&c.c(),o=S(),u&&u.c(),a=S(),g(s,"class","timeframe"),g(e,"class","trend-summary-header"),g(t,"class","trend-summary")},m(f,p){I(f,t,p),d(t,e),d(e,s),d(s,r),d(e,l),c&&c.m(e,null),d(t,o),u&&u.m(t,null),d(t,a)},p(f,p){p[0]&4&&i!==(i=f[33]+"")&&G(r,i),f[34].direction?c?c.p(f,p):(c=zm(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null),f[34].signals&&f[34].signals.length>0?u?u.p(f,p):(u=Hm(f),u.c(),u.m(t,a)):u&&(u.d(1),u=null)},d(f){f&&N(t),c&&c.d(),u&&u.d()}}}function zm(n){let t,e=n[34].direction==="long"?"":"",s;return{c(){t=v("span"),s=P(e),g(t,"class","direction svelte-dgkdtg"),Ot(t,"long",n[34].direction==="long"),Ot(t,"short",n[34].direction==="short")},m(i,r){I(i,t,r),d(t,s)},p(i,r){r[0]&4&&e!==(e=i[34].direction==="long"?"":"")&&G(s,e),r[0]&4&&Ot(t,"long",i[34].direction==="long"),r[0]&4&&Ot(t,"short",i[34].direction==="short")},d(i){i&&N(t)}}}function Hm(n){let t,e=bt(n[34].signals.slice(0,2)),s=[];for(let i=0;i<e.length;i+=1)s[i]=Um(Pm(n,e,i));return{c(){t=v("div");for(let i=0;i<s.length;i+=1)s[i].c();g(t,"class","trend-signals")},m(i,r){I(i,t,r);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null)},p(i,r){if(r[0]&4){e=bt(i[34].signals.slice(0,2));let l;for(l=0;l<e.length;l+=1){const o=Pm(i,e,l);s[l]?s[l].p(o,r):(s[l]=Um(o),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=e.length}},d(i){i&&N(t),Gt(s,i)}}}function Um(n){let t,e=n[37]+"",s;return{c(){t=v("span"),s=P(e),g(t,"class","signal-tag")},m(i,r){I(i,t,r),d(t,s)},p(i,r){r[0]&4&&e!==(e=i[37]+"")&&G(s,e)},d(i){i&&N(t)}}}function Wm(n){let t,e=(n[34].direction||n[34].image||n[34].signals&&n[34].signals.length>0||n[34].wave_numbers&&n[34].wave_numbers.length>0)&&jm(n);return{c(){e&&e.c(),t=ie()},m(s,i){e&&e.m(s,i),I(s,t,i)},p(s,i){s[34].direction||s[34].image||s[34].signals&&s[34].signals.length>0||s[34].wave_numbers&&s[34].wave_numbers.length>0?e?e.p(s,i):(e=jm(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(s){s&&N(t),e&&e.d(s)}}}function Vm(n){var f,p,m;let t,e,s,i,r,l,o,a=((f=n[28])==null?void 0:f.direction)&&Km(n),c=((p=n[29])==null?void 0:p.direction)&&Ym(n),u=((m=n[30])==null?void 0:m.direction)&&Gm(n);return{c(){t=v("div"),e=v("span"),e.textContent=`${n[27]}:`,s=S(),i=v("div"),a&&a.c(),r=S(),c&&c.c(),l=S(),u&&u.c(),o=S(),g(e,"class","tf-name svelte-dgkdtg"),g(i,"class","steps svelte-dgkdtg"),g(t,"class","progression-row svelte-dgkdtg")},m(h,_){I(h,t,_),d(t,e),d(t,s),d(t,i),a&&a.m(i,null),d(i,r),c&&c.m(i,null),d(i,l),u&&u.m(i,null),d(t,o)},p(h,_){var b,y,w;(b=h[28])!=null&&b.direction?a?a.p(h,_):(a=Km(h),a.c(),a.m(i,r)):a&&(a.d(1),a=null),(y=h[29])!=null&&y.direction?c?c.p(h,_):(c=Ym(h),c.c(),c.m(i,l)):c&&(c.d(1),c=null),(w=h[30])!=null&&w.direction?u?u.p(h,_):(u=Gm(h),u.c(),u.m(i,null)):u&&(u.d(1),u=null)},d(h){h&&N(t),a&&a.d(),c&&c.d(),u&&u.d()}}}function Km(n){let t,e,s=n[28].direction==="long"?"":"",i;return{c(){t=v("span"),e=P(" "),i=P(s),g(t,"class","step svelte-dgkdtg"),Ot(t,"long",n[28].direction==="long"),Ot(t,"short",n[28].direction==="short")},m(r,l){I(r,t,l),d(t,e),d(t,i)},p(r,l){l[0]&4&&s!==(s=r[28].direction==="long"?"":"")&&G(i,s),l[0]&4&&Ot(t,"long",r[28].direction==="long"),l[0]&4&&Ot(t,"short",r[28].direction==="short")},d(r){r&&N(t)}}}function Ym(n){var o;let t,e,s,i=n[29].direction==="long"?"":"",r,l=((o=n[28])==null?void 0:o.direction)&&Xm();return{c(){l&&l.c(),t=S(),e=v("span"),s=P(" "),r=P(i),g(e,"class","step svelte-dgkdtg"),Ot(e,"long",n[29].direction==="long"),Ot(e,"short",n[29].direction==="short")},m(a,c){l&&l.m(a,c),I(a,t,c),I(a,e,c),d(e,s),d(e,r)},p(a,c){var u;(u=a[28])!=null&&u.direction?l||(l=Xm(),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),c[0]&4&&i!==(i=a[29].direction==="long"?"":"")&&G(r,i),c[0]&4&&Ot(e,"long",a[29].direction==="long"),c[0]&4&&Ot(e,"short",a[29].direction==="short")},d(a){a&&(N(t),N(e)),l&&l.d(a)}}}function Xm(n){let t;return{c(){t=v("span"),t.textContent="=>",g(t,"class","arrow svelte-dgkdtg")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function Gm(n){var o,a;let t,e,s,i=n[30].direction==="long"?"":"",r,l=(((o=n[28])==null?void 0:o.direction)||((a=n[29])==null?void 0:a.direction))&&Zm();return{c(){l&&l.c(),t=S(),e=v("span"),s=P(" "),r=P(i),g(e,"class","step svelte-dgkdtg"),Ot(e,"long",n[30].direction==="long"),Ot(e,"short",n[30].direction==="short")},m(c,u){l&&l.m(c,u),I(c,t,u),I(c,e,u),d(e,s),d(e,r)},p(c,u){var f,p;(f=c[28])!=null&&f.direction||(p=c[29])!=null&&p.direction?l||(l=Zm(),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),u[0]&4&&i!==(i=c[30].direction==="long"?"":"")&&G(r,i),u[0]&4&&Ot(e,"long",c[30].direction==="long"),u[0]&4&&Ot(e,"short",c[30].direction==="short")},d(c){c&&(N(t),N(e)),l&&l.d(c)}}}function Zm(n){let t;return{c(){t=v("span"),t.textContent="=>",g(t,"class","arrow svelte-dgkdtg")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function Jm(n){var s,i,r;let t,e=(((s=n[28])==null?void 0:s.direction)||((i=n[29])==null?void 0:i.direction)||((r=n[30])==null?void 0:r.direction))&&Vm(n);return{c(){e&&e.c(),t=ie()},m(l,o){e&&e.m(l,o),I(l,t,o)},p(l,o){var a,c,u;(a=l[28])!=null&&a.direction||(c=l[29])!=null&&c.direction||(u=l[30])!=null&&u.direction?e?e.p(l,o):(e=Vm(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(l){l&&N(t),e&&e.d(l)}}}function Qm(n){let t,e=bt(["asian","european","us"]),s=[];for(let i=0;i<3;i+=1)s[i]=t1(Bm(n,e,i));return{c(){t=v("div");for(let i=0;i<3;i+=1)s[i].c();g(t,"class","unified-notes svelte-dgkdtg")},m(i,r){I(i,t,r);for(let l=0;l<3;l+=1)s[l]&&s[l].m(t,null)},p(i,r){if(r[0]&132){e=bt(["asian","european","us"]);let l;for(l=0;l<3;l+=1){const o=Bm(i,e,l);s[l]?s[l].p(o,r):(s[l]=t1(o),s[l].c(),s[l].m(t,null))}for(;l<3;l+=1)s[l].d(1)}},d(i){i&&N(t),Gt(s,i)}}}function $m(n){let t,e,s,i,r=n[20][n[24]].notes+"",l,o;return{c(){t=v("div"),e=v("span"),e.textContent=`${n[7](n[24])}`,s=S(),i=v("span"),l=P(r),o=S(),g(e,"class","note-session "+n[24]+" svelte-dgkdtg"),g(i,"class","note-text svelte-dgkdtg"),g(t,"class","note-item svelte-dgkdtg")},m(a,c){I(a,t,c),d(t,e),d(t,s),d(t,i),d(i,l),d(t,o)},p(a,c){c[0]&4&&r!==(r=a[20][a[24]].notes+"")&&G(l,r)},d(a){a&&N(t)}}}function t1(n){var s;let t,e=((s=n[20][n[24]])==null?void 0:s.notes)&&$m(n);return{c(){e&&e.c(),t=ie()},m(i,r){e&&e.m(i,r),I(i,t,r)},p(i,r){var l;(l=i[20][i[24]])!=null&&l.notes?e?e.p(i,r):(e=$m(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(i){i&&N(t),e&&e.d(i)}}}function e1(n){let t,e,s,i,r=n1(n[19].plan_date)+"",l,o,a,c=(n[19].symbol||Ts[0])+"",u,f,p,m,h,_,b,y;function w(){return n[15](n[19])}function A(M,x){return M[21]?k8:y8}let E=A(n),T=E(n);function C(){return n[16](n[19])}return{c(){t=v("div"),e=v("div"),s=v("div"),i=v("h3"),l=P(r),o=S(),a=v("span"),u=P(c),f=S(),p=v("div"),m=v("button"),m.textContent="",h=S(),T.c(),_=S(),g(i,"class","svelte-dgkdtg"),g(a,"class","symbol-badge svelte-dgkdtg"),g(s,"class","plan-info svelte-dgkdtg"),g(m,"class","action-btn delete svelte-dgkdtg"),g(p,"class","plan-actions svelte-dgkdtg"),g(e,"class","plan-header svelte-dgkdtg"),g(t,"class","plan-card svelte-dgkdtg")},m(M,x){I(M,t,x),d(t,e),d(e,s),d(s,i),d(i,l),d(s,o),d(s,a),d(a,u),d(e,f),d(e,p),d(p,m),d(t,h),T.m(t,null),d(t,_),b||(y=[j(m,"click",he(w)),j(t,"click",C)],b=!0)},p(M,x){n=M,x[0]&4&&r!==(r=n1(n[19].plan_date)+"")&&G(l,r),x[0]&4&&c!==(c=(n[19].symbol||Ts[0])+"")&&G(u,c),E===(E=A(n))&&T?T.p(n,x):(T.d(1),T=E(n),T&&(T.c(),T.m(t,_)))},d(M){M&&N(t),T.d(),b=!1,Vt(y)}}}function w8(n){let t,e;function s(c,u){return c[0]?p8:g8}let i=s(n),r=i(n);function l(c,u){return c[2].length===0?v8:b8}let o=l(n),a=o(n);return{c(){t=v("div"),r.c(),e=S(),a.c(),g(t,"class","card")},m(c,u){I(c,t,u),r.m(t,null),d(t,e),a.m(t,null)},p(c,u){i===(i=s(c))&&r?r.p(c,u):(r.d(1),r=i(c),r&&(r.c(),r.m(t,e))),o===(o=l(c))&&a?a.p(c,u):(a.d(1),a=o(c),a&&(a.c(),a.m(t,null)))},i:Et,o:Et,d(c){c&&N(t),r.d(),a.d()}}}function n1(n){return new Date(n).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"})}function S8(n,t,e){let s,i;Ye(n,Rs,C=>e(8,s=C)),Ye(n,ql,C=>e(1,i=C));let{isCompact:r=!1}=t,l=[],o=[],a={startDate:"",endDate:"",symbol:"",marketSession:""};es(()=>{});async function c(){try{const C={account_id:s};a.startDate&&(C.start_date=a.startDate),a.endDate&&(C.end_date=a.endDate),a.symbol&&(C.symbol=a.symbol),a.marketSession&&(C.market_session=a.marketSession),l=(await yi.getAll(C)).data.data||[],e(2,o=l)}catch(C){console.error(":",C),alert("")}}function u(){c()}function f(){e(3,a={startDate:"",endDate:"",symbol:"",marketSession:""}),c()}async function p(C){if(confirm(""))try{await yi.delete(C),c()}catch(M){console.error(":",M),alert("")}}function m(C){const M=vs.find(x=>x.value===C);return M?M.label:""}const h=()=>ye(`/plans/new?symbol=${i}`);function _(){a.startDate=this.value,e(3,a),e(1,i),e(8,s)}function b(){a.endDate=this.value,e(3,a),e(1,i),e(8,s)}function y(){a.symbol=As(this),e(3,a),e(1,i),e(8,s)}function w(){a.marketSession=As(this),e(3,a),e(1,i),e(8,s)}const A=()=>ye("/plans/new"),E=C=>p(C.id),T=C=>ye(`/plans/edit/${C.id}`);return n.$$set=C=>{"isCompact"in C&&e(0,r=C.isCompact)},n.$$.update=()=>{n.$$.dirty[0]&258&&(i||s)&&(e(3,a.symbol=i,a),c())},[r,i,o,a,u,f,p,m,s,h,_,b,y,w,A,E,T]}class A8 extends Fn{constructor(t){super(),qn(this,t,S8,w8,bn,{isCompact:0},null,[-1,-1])}}function s1(n,t,e){const s=n.slice();return s[55]=t[e],s[56]=t,s[57]=e,s}function i1(n,t,e){const s=n.slice();return s[58]=t[e],s}function r1(n,t,e){const s=n.slice();return s[61]=t[e],s}function l1(n,t,e){const s=n.slice();return s[64]=t[e],s}function o1(n){let t,e=n[64]+"",s;return{c(){t=v("option"),s=P(e),t.__value=n[64],xt(t,t.__value)},m(i,r){I(i,t,r),d(t,s)},p:Et,d(i){i&&N(t)}}}function a1(n){let t,e=[],s=new Map,i,r,l=bt(n[11]);const o=f=>f[8]+"-"+f[55]+"-signal-"+f[61];for(let f=0;f<l.length;f+=1){let p=r1(n,l,f),m=o(p);s.set(m,e[f]=c1(m,p))}function a(f,p){return f[9][f[55]].signals_image?E8:T8}let c=a(n),u=c(n);return{c(){t=v("div");for(let f=0;f<e.length;f+=1)e[f].c();i=S(),u.c(),r=ie(),g(t,"class","signal-chips svelte-9vrv1w")},m(f,p){I(f,t,p);for(let m=0;m<e.length;m+=1)e[m]&&e[m].m(t,null);I(f,i,p),u.m(f,p),I(f,r,p)},p(f,p){p[0]&26880&&(l=bt(f[11]),e=ju(e,p,o,1,f,l,s,t,Fu,c1,null,r1)),c===(c=a(f))&&u?u.p(f,p):(u.d(1),u=c(f),u&&(u.c(),u.m(r.parentNode,r)))},d(f){f&&(N(t),N(i),N(r));for(let p=0;p<e.length;p+=1)e[p].d();u.d(f)}}}function c1(n,t){let e,s,i;function r(){return t[37](t[55],t[61])}return{key:n,first:null,c(){e=v("button"),e.textContent=`${t[61]} `,g(e,"type","button"),g(e,"class","signal-chip svelte-9vrv1w"),Ot(e,"active",t[14](t[55],t[61])),this.first=e},m(l,o){I(l,e,o),s||(i=j(e,"click",he(r)),s=!0)},p(l,o){t=l},d(l){l&&N(e),s=!1,i()}}}function T8(n){let t,e,s;function i(...r){return n[40](n[55],...r)}return{c(){t=v("div"),t.textContent=" ",g(t,"class","trend-image-placeholderSmall svelte-9vrv1w"),g(t,"tabindex","0"),g(t,"role","textbox")},m(r,l){I(r,t,l),e||(s=[j(t,"paste",he(Ls(i))),j(t,"click",he(q8))],e=!0)},p(r,l){n=r},d(r){r&&N(t),e=!1,Vt(s)}}}function E8(n){let t,e,s,i,r,l,o;function a(){return n[38](n[55])}function c(){return n[39](n[55])}return{c(){t=v("div"),e=v("img"),i=S(),r=v("button"),r.textContent="",ae(e.src,s=n[9][n[55]].signals_image)||g(e,"src",s),g(e,"alt",n[55]+" "),en(e,"pointer-events","none"),g(e,"class","svelte-9vrv1w"),g(r,"type","button"),g(r,"class","remove-image-btn svelte-9vrv1w"),g(r,"title",""),g(t,"class","trend-image-preview svelte-9vrv1w")},m(u,f){I(u,t,f),d(t,e),d(t,i),d(t,r),l||(o=[j(r,"click",he(a)),j(t,"click",he(c))],l=!0)},p(u,f){n=u,f[0]&512&&!ae(e.src,s=n[9][n[55]].signals_image)&&g(e,"src",s)},d(u){u&&N(t),l=!1,Vt(o)}}}function u1(n){let t,e=[],s=new Map,i,r,l=bt(n[12]);const o=f=>f[8]+"-"+f[55]+"-"+f[58];for(let f=0;f<l.length;f+=1){let p=i1(n,l,f),m=o(p);s.set(m,e[f]=f1(m,p))}function a(f,p){return f[9][f[55]].wave_image?O8:C8}let c=a(n),u=c(n);return{c(){t=v("div");for(let f=0;f<e.length;f+=1)e[f].c();i=S(),u.c(),r=ie(),g(t,"class","wave-numbers svelte-9vrv1w")},m(f,p){I(f,t,p);for(let m=0;m<e.length;m+=1)e[m]&&e[m].m(t,null);I(f,i,p),u.m(f,p),I(f,r,p)},p(f,p){p[0]&430336&&(l=bt(f[12]),e=ju(e,p,o,1,f,l,s,t,Fu,f1,null,i1)),c===(c=a(f))&&u?u.p(f,p):(u.d(1),u=c(f),u&&(u.c(),u.m(r.parentNode,r)))},d(f){f&&(N(t),N(i),N(r));for(let p=0;p<e.length;p+=1)e[p].d();u.d(f)}}}function f1(n,t){let e,s,i;function r(){return t[42](t[55],t[58])}return{key:n,first:null,c(){e=v("button"),e.textContent=`${t[58]} `,g(e,"type","button"),g(e,"class","wave-number-btn svelte-9vrv1w"),Ot(e,"selected",t[17](t[55],t[58])),Ot(e,"highlighted",t[18](t[55],t[58])),this.first=e},m(l,o){I(l,e,o),s||(i=j(e,"click",he(r)),s=!0)},p(l,o){t=l},d(l){l&&N(e),s=!1,i()}}}function C8(n){let t,e,s;function i(...r){return n[45](n[55],...r)}return{c(){t=v("div"),t.textContent=" ",g(t,"class","trend-image-placeholderSmall svelte-9vrv1w"),g(t,"tabindex","0"),g(t,"role","textbox")},m(r,l){I(r,t,l),e||(s=[j(t,"paste",he(Ls(i))),j(t,"click",he(F8))],e=!0)},p(r,l){n=r},d(r){r&&N(t),e=!1,Vt(s)}}}function O8(n){let t,e,s,i,r,l,o;function a(){return n[43](n[55])}function c(){return n[44](n[55])}return{c(){t=v("div"),e=v("img"),i=S(),r=v("button"),r.textContent="",ae(e.src,s=n[9][n[55]].wave_image)||g(e,"src",s),g(e,"alt",n[55]+" "),en(e,"pointer-events","none"),g(e,"class","svelte-9vrv1w"),g(r,"type","button"),g(r,"class","remove-image-btn svelte-9vrv1w"),g(r,"title",""),g(t,"class","trend-image-preview svelte-9vrv1w")},m(u,f){I(u,t,f),d(t,e),d(t,i),d(t,r),l||(o=[j(r,"click",he(a)),j(t,"click",he(c))],l=!0)},p(u,f){n=u,f[0]&512&&!ae(e.src,s=n[9][n[55]].wave_image)&&g(e,"src",s)},d(u){u&&N(t),l=!1,Vt(o)}}}function h1(n){let t,e,s,i,r,l,o,a,c,u,f,p,m,h,_,b,y,w,A,E,T,C;function M(){return n[34](n[55])}function x(){return n[35](n[55])}function D(){n[36].call(f,n[55])}let L=n[9][n[55]].has_signals&&a1(n);function q(){n[41].call(y,n[55])}let F=n[9][n[55]].has_wave&&u1(n);function nt(...et){return n[46](n[55],...et)}return{c(){t=v("div"),e=v("label"),e.textContent=`${n[55]}`,s=S(),i=v("div"),r=v("button"),r.innerHTML='<span class="trend-name svelte-9vrv1w"></span>',l=S(),o=v("button"),o.innerHTML='<span class="trend-name svelte-9vrv1w"></span>',a=S(),c=v("div"),u=v("label"),f=v("input"),p=P(`\r
                `),m=S(),L&&L.c(),h=S(),_=v("div"),b=v("label"),y=v("input"),w=P(`\r
                `),A=S(),F&&F.c(),E=S(),g(e,"class","timeframe-label svelte-9vrv1w"),g(r,"type","button"),g(r,"class","trend-option long svelte-9vrv1w"),Ot(r,"active",n[9][n[55]].direction==="long"),g(o,"type","button"),g(o,"class","trend-option short svelte-9vrv1w"),Ot(o,"active",n[9][n[55]].direction==="short"),g(i,"class","trend-options svelte-9vrv1w"),g(f,"type","checkbox"),g(f,"class","svelte-9vrv1w"),g(u,"class","section-label inline-check svelte-9vrv1w"),g(c,"class","timeframe-signals svelte-9vrv1w"),g(y,"type","checkbox"),g(y,"class","svelte-9vrv1w"),g(b,"class","section-label inline-check svelte-9vrv1w"),g(_,"class","timeframe-wave svelte-9vrv1w"),g(t,"class","trend-item svelte-9vrv1w"),g(t,"tabindex","0")},m(et,U){I(et,t,U),d(t,e),d(t,s),d(t,i),d(i,r),d(i,l),d(i,o),d(t,a),d(t,c),d(c,u),d(u,f),f.checked=n[9][n[55]].has_signals,d(u,p),d(c,m),L&&L.m(c,null),d(t,h),d(t,_),d(_,b),d(b,y),y.checked=n[9][n[55]].has_wave,d(b,w),d(_,A),F&&F.m(_,null),d(t,E),T||(C=[j(r,"click",he(M)),j(o,"click",he(x)),j(f,"change",D),j(y,"change",q),j(t,"paste",nt),j(t,"click",j8)],T=!0)},p(et,U){n=et,U[0]&512&&Ot(r,"active",n[9][n[55]].direction==="long"),U[0]&512&&Ot(o,"active",n[9][n[55]].direction==="short"),U[0]&512&&(f.checked=n[9][n[55]].has_signals),n[9][n[55]].has_signals?L?L.p(n,U):(L=a1(n),L.c(),L.m(c,null)):L&&(L.d(1),L=null),U[0]&512&&(y.checked=n[9][n[55]].has_wave),n[9][n[55]].has_wave?F?F.p(n,U):(F=u1(n),F.c(),F.m(_,null)):F&&(F.d(1),F=null)},d(et){et&&N(t),L&&L.d(),F&&F.d(),T=!1,Vt(C)}}}function d1(n){let t,e,s,i,r,l,o,a,c=n[7]?" ":" ",u,f,p,m,h,_,b,y,w;const A=[M8,x8],E=[];function T(C,M){return C[7]?0:1}return h=T(n),_=E[h]=A[h](n),{c(){t=v("div"),e=v("div"),s=v("div"),i=v("h3"),r=P(n[5]),l=S(),o=v("div"),a=v("button"),u=P(c),f=S(),p=v("button"),p.textContent="",m=S(),_.c(),g(i,"class","svelte-9vrv1w"),g(a,"class","modal-action-btn svelte-9vrv1w"),g(p,"class","image-modal-close svelte-9vrv1w"),g(o,"class","image-modal-actions svelte-9vrv1w"),g(s,"class","image-modal-header svelte-9vrv1w"),g(e,"class","image-modal-content svelte-9vrv1w"),g(t,"class","image-modal svelte-9vrv1w")},m(C,M){I(C,t,M),d(t,e),d(e,s),d(s,i),d(i,r),d(s,l),d(s,o),d(o,a),d(a,u),d(o,f),d(o,p),d(e,m),E[h].m(e,null),b=!0,y||(w=[j(a,"click",n[24]),j(p,"click",n[23]),j(e,"click",he(n[26])),j(t,"click",n[23])],y=!0)},p(C,M){(!b||M[0]&32)&&G(r,C[5]),(!b||M[0]&128)&&c!==(c=C[7]?" ":" ")&&G(u,c);let x=h;h=T(C),h===x?E[h].p(C,M):(ns(),Kt(E[x],1,1,()=>{E[x]=null}),ss(),_=E[h],_?_.p(C,M):(_=E[h]=A[h](C),_.c()),Wt(_,1),_.m(e,null))},i(C){b||(Wt(_),b=!0)},o(C){Kt(_),b=!1},d(C){C&&N(t),E[h].d(),y=!1,Vt(w)}}}function x8(n){let t,e;return{c(){t=v("img"),ae(t.src,e=n[4])||g(t,"src",e),g(t,"alt",n[5]),g(t,"class","image-modal-img svelte-9vrv1w")},m(s,i){I(s,t,i)},p(s,i){i[0]&16&&!ae(t.src,e=s[4])&&g(t,"src",e),i[0]&32&&g(t,"alt",s[5])},i:Et,o:Et,d(s){s&&N(t)}}}function M8(n){let t,e;return t=new m0({props:{imageSrc:n[4],originalImageSrc:n[6],onSave:n[25]}}),{c(){He(t.$$.fragment)},m(s,i){Re(t,s,i),e=!0},p(s,i){const r={};i[0]&16&&(r.imageSrc=s[4]),i[0]&64&&(r.originalImageSrc=s[6]),t.$set(r)},i(s){e||(Wt(t.$$.fragment,s),e=!0)},o(s){Kt(t.$$.fragment,s),e=!1},d(s){Pe(t,s)}}}function L8(n){let t,e,s,i=n[0]?"":"",r,l,o,a,c=n[0]?" ":" ",u,f,p,m,h,_,b,y,w,A,E,T,C,M,x,D,L,q,F,nt,et,U,W,V,$,st,Z,wt,rt,at,vt,K,ct,ft,ut,Nt,yt,z,Y,dt,Ut=n[0]?" ":" ",$t,ht,St,Ct,it,Dt,zt,Q,lt=bt(n[10]),mt=[];for(let Tt=0;Tt<lt.length;Tt+=1)mt[Tt]=o1(l1(n,lt,Tt));let kt=bt(br),Mt=[];for(let Tt=0;Tt<kt.length;Tt+=1)Mt[Tt]=h1(s1(n,kt,Tt));let Pt=n[4]&&d1(n);return{c(){var Tt,Bt,_t,me,qe,de;t=v("div"),e=v("div"),s=v("h2"),r=P(i),l=S(),o=v("div"),a=v("button"),u=P(c),f=S(),p=v("button"),p.textContent=" ",m=S(),h=v("form"),_=v("div"),b=v("h3"),b.textContent=" ",y=S(),w=v("div"),A=v("label"),A.textContent="",E=S(),T=v("input"),C=S(),M=v("div"),x=v("label"),x.textContent="",D=S(),L=v("select");for(let Xt=0;Xt<mt.length;Xt+=1)mt[Xt].c();q=S(),F=v("div"),nt=v("label"),nt.textContent=" ()",et=S(),U=v("div"),W=v("button"),W.textContent=`${(Tt=vs.find(N8))==null?void 0:Tt.icon} ${(Bt=vs.find(I8))==null?void 0:Bt.label}`,V=S(),$=v("button"),$.textContent=`${(_t=vs.find(D8))==null?void 0:_t.icon} ${(me=vs.find(R8))==null?void 0:me.label}`,st=S(),Z=v("button"),Z.textContent=`${(qe=vs.find(P8))==null?void 0:qe.icon} ${(de=vs.find(B8))==null?void 0:de.label}`,wt=S(),rt=v("div"),at=v("label"),at.textContent="",vt=S(),K=v("textarea"),ct=S(),ft=v("div"),ut=v("label"),ut.textContent=" ",Nt=S(),yt=v("div");for(let Xt=0;Xt<Mt.length;Xt+=1)Mt[Xt].c();z=S(),Y=v("div"),dt=v("button"),$t=P(Ut),ht=S(),St=v("button"),St.textContent=" ",Ct=S(),Pt&&Pt.c(),it=ie(),g(s,"class","svelte-9vrv1w"),g(a,"type","button"),g(a,"class","btn btn-primary"),g(p,"type","button"),g(p,"class","btn btn-secondary svelte-9vrv1w"),g(o,"class","header-btns svelte-9vrv1w"),g(e,"class","card-header-actions svelte-9vrv1w"),g(b,"class","svelte-9vrv1w"),g(A,"for","plan_date"),g(T,"type","date"),g(T,"id","plan_date"),g(T,"class","form-control"),T.required=!0,g(w,"class","form-group"),g(x,"for","symbol"),g(L,"id","symbol"),g(L,"class","form-control"),n[2].symbol===void 0&&gn(()=>n[29].call(L)),g(M,"class","form-group"),g(W,"type","button"),g(W,"class","session-tab svelte-9vrv1w"),Ot(W,"active",n[1]==="asian"),g($,"type","button"),g($,"class","session-tab svelte-9vrv1w"),Ot($,"active",n[1]==="european"),g(Z,"type","button"),g(Z,"class","session-tab svelte-9vrv1w"),Ot(Z,"active",n[1]==="us"),g(U,"class","market-session-tabs svelte-9vrv1w"),g(F,"class","form-group"),g(at,"for","notes"),g(K,"id","notes"),g(K,"class","form-control svelte-9vrv1w"),g(K,"rows","3"),g(K,"placeholder","..."),g(rt,"class","form-group"),g(_,"class","form-section svelte-9vrv1w"),g(ut,"class","trend-label svelte-9vrv1w"),g(yt,"class","trend-grid svelte-9vrv1w"),g(ft,"class","form-group trend-analysis-section svelte-9vrv1w"),g(dt,"type","submit"),g(dt,"class","btn btn-primary"),g(St,"type","button"),g(St,"class","btn btn-secondary svelte-9vrv1w"),g(Y,"class","form-actions svelte-9vrv1w"),g(t,"class","card")},m(Tt,Bt){I(Tt,t,Bt),d(t,e),d(e,s),d(s,r),d(e,l),d(e,o),d(o,a),d(a,u),d(o,f),d(o,p),d(t,m),d(t,h),d(h,_),d(_,b),d(_,y),d(_,w),d(w,A),d(w,E),d(w,T),xt(T,n[2].plan_date),d(_,C),d(_,M),d(M,x),d(M,D),d(M,L);for(let _t=0;_t<mt.length;_t+=1)mt[_t]&&mt[_t].m(L,null);Te(L,n[2].symbol,!0),d(_,q),d(_,F),d(F,nt),d(F,et),d(F,U),d(U,W),d(U,V),d(U,$),d(U,st),d(U,Z),d(_,wt),d(_,rt),d(rt,at),d(rt,vt),d(rt,K),xt(K,n[3].notes),d(h,ct),d(h,ft),d(ft,ut),d(ft,Nt),d(ft,yt);for(let _t=0;_t<Mt.length;_t+=1)Mt[_t]&&Mt[_t].m(yt,null);d(h,z),d(h,Y),d(Y,dt),d(dt,$t),d(Y,ht),d(Y,St),I(Tt,Ct,Bt),Pt&&Pt.m(Tt,Bt),I(Tt,it,Bt),Dt=!0,zt||(Q=[j(a,"click",n[19]),j(p,"click",n[27]),j(T,"input",n[28]),j(L,"change",n[29]),j(W,"click",n[30]),j($,"click",n[31]),j(Z,"click",n[32]),j(K,"input",n[33]),j(St,"click",n[47]),j(h,"submit",Ls(n[19]))],zt=!0)},p(Tt,Bt){if((!Dt||Bt[0]&1)&&i!==(i=Tt[0]?"":"")&&G(r,i),(!Dt||Bt[0]&1)&&c!==(c=Tt[0]?" ":" ")&&G(u,c),Bt[0]&1028&&xt(T,Tt[2].plan_date),Bt[0]&1024){lt=bt(Tt[10]);let _t;for(_t=0;_t<lt.length;_t+=1){const me=l1(Tt,lt,_t);mt[_t]?mt[_t].p(me,Bt):(mt[_t]=o1(me),mt[_t].c(),mt[_t].m(L,null))}for(;_t<mt.length;_t+=1)mt[_t].d(1);mt.length=lt.length}if(Bt[0]&1028&&Te(L,Tt[2].symbol),(!Dt||Bt[0]&2)&&Ot(W,"active",Tt[1]==="asian"),(!Dt||Bt[0]&2)&&Ot($,"active",Tt[1]==="european"),(!Dt||Bt[0]&2)&&Ot(Z,"active",Tt[1]==="us"),Bt[0]&8&&xt(K,Tt[3].notes),Bt[0]&7862784){kt=bt(br);let _t;for(_t=0;_t<kt.length;_t+=1){const me=s1(Tt,kt,_t);Mt[_t]?Mt[_t].p(me,Bt):(Mt[_t]=h1(me),Mt[_t].c(),Mt[_t].m(yt,null))}for(;_t<Mt.length;_t+=1)Mt[_t].d(1);Mt.length=kt.length}(!Dt||Bt[0]&1)&&Ut!==(Ut=Tt[0]?" ":" ")&&G($t,Ut),Tt[4]?Pt?(Pt.p(Tt,Bt),Bt[0]&16&&Wt(Pt,1)):(Pt=d1(Tt),Pt.c(),Wt(Pt,1),Pt.m(it.parentNode,it)):Pt&&(ns(),Kt(Pt,1,1,()=>{Pt=null}),ss())},i(Tt){Dt||(Wt(Pt),Dt=!0)},o(Tt){Kt(Pt),Dt=!1},d(Tt){Tt&&(N(t),N(Ct),N(it)),Gt(mt,Tt),Gt(Mt,Tt),Pt&&Pt.d(Tt),zt=!1,Vt(Q)}}}const N8=n=>n.value==="asian",I8=n=>n.value==="asian",D8=n=>n.value==="european",R8=n=>n.value==="european",P8=n=>n.value==="us",B8=n=>n.value==="us",q8=n=>n.target.focus(),F8=n=>n.target.focus(),j8=n=>{n.target.closest(".trend-options")||n.currentTarget.focus()};function z8(n,t,e){let s,i,r;Ye(n,Rs,Q=>e(49,r=Q));let{id:l=null}=t,o=il(new Date);const a=br;function c(){const Q={};return a.forEach(lt=>{Q[lt]={direction:"",has_signals:!1,signals:[],has_wave:!1,wave_numbers:[],wave_highlight:"",image:"",originalImage:"",signals_image:"",signals_originalImage:"",wave_image:"",wave_originalImage:""}}),{notes:"",trends:Q}}const u=Ts;let f={account_id:r,plan_date:new Date().toISOString().slice(0,10),symbol:Ts[0],sessions:{asian:c(),european:c(),us:c()}};es(()=>{const Q=new URLSearchParams(window.location.search),lt=Q.get("date"),mt=Q.get("session"),kt=Q.get("symbol");lt&&e(2,f.plan_date=lt,f),mt&&e(1,o=mt),kt&&e(2,f.symbol=kt,f)});const p=["","","","",""],m=["","","","",""],h=[...p,...m],_=["1","2","3","4","5"];function b(Q,lt){const mt=i[Q].signals||[],kt=mt.indexOf(lt);kt>=0?e(9,i[Q].signals=mt.filter((Mt,Pt)=>Pt!==kt),i):e(9,i[Q].signals=[...mt,lt],i),e(2,f),e(8,q++,q)}function y(Q,lt){return(i[Q].signals||[]).includes(lt)}function w(Q,lt){const mt=i[Q].wave_numbers||[],kt=i[Q].wave_highlight||"";if(mt.includes(lt))kt!==lt?e(9,i[Q].wave_highlight=lt,i):e(9,i[Q].wave_highlight="",i);else if(mt.length===0)e(9,i[Q].wave_numbers=[lt],i),e(9,i[Q].wave_highlight="",i);else if(mt.length===1){const Mt=parseInt(mt[0]),Pt=parseInt(lt);Math.abs(Mt-Pt)===1&&(e(9,i[Q].wave_numbers=[mt[0],lt].sort(),i),e(9,i[Q].wave_highlight="",i))}else mt.length===2&&(e(9,i[Q].wave_numbers=[lt],i),e(9,i[Q].wave_highlight="",i));e(2,f),e(8,q++,q)}function A(Q,lt){i[Q].direction===lt?e(9,i[Q].direction="",i):e(9,i[Q].direction=lt,i),e(2,f),e(8,q++,q)}function E(Q,lt){var kt;const mt=((kt=i[Q])==null?void 0:kt.wave_numbers)||[];return mt.includes(lt.toString())||mt.includes(parseInt(lt))}function T(Q,lt){var kt;const mt=(kt=i[Q])==null?void 0:kt.wave_highlight;return mt===lt.toString()||mt===parseInt(lt)}let C=null,M="",x=null,D=null,L=!1,q=0;l&&F();async function F(){try{const lt=(await yi.getOne(l)).data,mt=lt.trend_analysis?JSON.parse(lt.trend_analysis):null;if(e(2,f.plan_date=new Date(lt.plan_date).toLocaleDateString("en-CA"),f),e(2,f.symbol=lt.symbol||Ts[0],f),mt&&mt.asian)e(2,f.sessions=mt,f);else if(mt){const kt=lt.market_session||"asian";e(2,f.sessions[kt]={notes:lt.notes||"",trends:mt},f)}Object.keys(f.sessions).forEach(kt=>{const Mt=f.sessions[kt];Mt&&Mt.trends&&Object.keys(Mt.trends).forEach(Pt=>{var Bt,_t;const Tt=Mt.trends[Pt];(((Bt=Tt.signals)==null?void 0:Bt.length)>0||Tt.signals_image)&&(Tt.has_signals=!0),(((_t=Tt.wave_numbers)==null?void 0:_t.length)>0||Tt.wave_image)&&(Tt.has_wave=!0)})}),e(2,f)}catch(Q){console.error(":",Q),alert("")}}async function nt(){var Q,lt;try{const mt={account_id:r,plan_date:new Date(f.plan_date).toISOString(),symbol:f.symbol,market_session:"all",notes:"Session-based unified plan",trend_analysis:JSON.stringify(f.sessions)};if(l)await yi.update(l,mt),alert("");else{const kt=await yi.create(mt);alert(""),kt.data&&kt.data.id?ye(`/plans/edit/${kt.data.id}`,{replace:!0}):ye("/plans")}}catch(mt){console.error(":",mt);const kt=((lt=(Q=mt.response)==null?void 0:Q.data)==null?void 0:lt.error)||"";alert(kt)}}function et(Q,lt,mt="trend"){const kt=(Q.clipboardData||Q.originalEvent.clipboardData).items;for(let Mt of kt)if(Mt.type.indexOf("image")!==-1){Q.preventDefault();const Pt=Mt.getAsFile(),Tt=new FileReader;Tt.onload=Bt=>{const _t=i[lt];mt==="signals"?(_t.signals_image=Bt.target.result,_t.signals_originalImage||(_t.signals_originalImage=Bt.target.result)):mt==="wave"?(_t.wave_image=Bt.target.result,_t.wave_originalImage||(_t.wave_originalImage=Bt.target.result)):(_t.image=Bt.target.result,_t.originalImage||(_t.originalImage=Bt.target.result)),e(2,f),e(8,q++,q)},Tt.readAsDataURL(Pt);break}}function U(Q,lt="trend"){const mt=i[Q];lt==="signals"?(mt.signals_image="",mt.signals_originalImage=""):lt==="wave"?(mt.wave_image="",mt.wave_originalImage=""):(mt.image="",mt.originalImage=""),e(2,f),e(8,q++,q)}function W(Q,lt,mt=null){if(Q)if(e(4,C=Q),e(5,M=lt),x=mt,e(7,L=!1),mt){const kt=i[mt.key];mt.type==="trend"?e(6,D=(kt==null?void 0:kt.originalImage)||Q):mt.type==="signals"?e(6,D=(kt==null?void 0:kt.signals_originalImage)||Q):mt.type==="wave"?e(6,D=(kt==null?void 0:kt.wave_originalImage)||Q):e(6,D=Q)}else e(6,D=Q)}function V(){e(4,C=null),e(5,M=""),x=null,e(7,L=!1)}function $(){e(7,L=!L)}function st(Q){if(!x){e(4,C=Q);return}const{type:lt,key:mt}=x,kt=i[mt];lt==="trend"?kt.image=Q:lt==="signals"?kt.signals_image=Q:lt==="wave"&&(kt.wave_image=Q),e(2,f),e(8,q++,q),e(4,C=Q)}function Z(Q){Jr.call(this,n,Q)}const wt=()=>ye("/");function rt(){f.plan_date=this.value,e(2,f),e(10,u)}function at(){f.symbol=As(this),e(2,f),e(10,u)}const vt=()=>e(1,o="asian"),K=()=>e(1,o="european"),ct=()=>e(1,o="us");function ft(){s.notes=this.value,e(3,s),e(2,f),e(1,o)}const ut=Q=>A(Q,"long"),Nt=Q=>A(Q,"short");function yt(Q){i[Q].has_signals=this.checked,e(9,i),e(3,s),e(2,f),e(1,o)}const z=(Q,lt)=>b(Q,lt),Y=Q=>U(Q,"signals"),dt=Q=>W(i[Q].signals_image,`${Q} `,{type:"signals",key:Q}),Ut=(Q,lt)=>et(lt,Q,"signals");function $t(Q){i[Q].has_wave=this.checked,e(9,i),e(3,s),e(2,f),e(1,o)}const ht=(Q,lt)=>w(Q,lt),St=Q=>U(Q,"wave"),Ct=Q=>W(i[Q].wave_image,`${Q} `,{type:"wave",key:Q}),it=(Q,lt)=>et(lt,Q,"wave"),Dt=(Q,lt)=>et(lt,Q),zt=()=>ye("/");return n.$$set=Q=>{"id"in Q&&e(0,l=Q.id)},n.$$.update=()=>{n.$$.dirty[0]&6&&e(3,s=f.sessions[o]),n.$$.dirty[0]&8&&e(9,i=s.trends)},[l,o,f,s,C,M,D,L,q,i,u,h,_,b,y,w,A,E,T,nt,et,U,W,V,$,st,Z,wt,rt,at,vt,K,ct,ft,ut,Nt,yt,z,Y,dt,Ut,$t,ht,St,Ct,it,Dt,zt]}class p1 extends Fn{constructor(t){super(),qn(this,t,z8,L8,bn,{id:0},null,[-1,-1,-1])}}function g1(n,t,e){const s=n.slice();return s[23]=t[e],s}function m1(n,t,e){const s=n.slice();return s[26]=t[e],s}function _1(n,t,e){const s=n.slice();return s[32]=t[e],s}function b1(n,t,e){const s=n.slice();return s[29]=t[e],s}function H8(n){const t=n.slice(),e=t[26].trades[0];return t[29]=e,t}function v1(n,t,e){const s=n.slice();s[35]=t[e];const i=tL(s[35].trend_analysis,{});s[36]=i;const r=s[35].market_session==="all";return s[37]=r,s}function y1(n,t,e){var o,a,c,u,f,p;const s=n.slice();s[40]=t[e];const i=(a=(o=s[36].asian)==null?void 0:o.trends)==null?void 0:a[s[40]];s[41]=i;const r=(u=(c=s[36].european)==null?void 0:c.trends)==null?void 0:u[s[40]];s[42]=r;const l=(p=(f=s[36].us)==null?void 0:f.trends)==null?void 0:p[s[40]];return s[43]=l,s}function U8(n){let t,e=bt(n[1]),s=[];for(let i=0;i<e.length;i+=1)s[i]=j1(g1(n,e,i));return{c(){t=v("div");for(let i=0;i<s.length;i+=1)s[i].c();g(t,"class","timeline svelte-oldx76")},m(i,r){I(i,t,r);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null)},p(i,r){if(r[0]&435){e=bt(i[1]);let l;for(l=0;l<e.length;l+=1){const o=g1(i,e,l);s[l]?s[l].p(o,r):(s[l]=j1(o),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=e.length}},d(i){i&&N(t),Gt(s,i)}}}function W8(n){let t,e,s,i,r,l,o;return{c(){t=v("div"),e=v("div"),e.textContent="",s=S(),i=v("p"),r=P(" "),l=P(n[0]),o=P(" "),g(e,"class","empty-icon svelte-oldx76"),g(t,"class","empty-state svelte-oldx76")},m(a,c){I(a,t,c),d(t,e),d(t,s),d(t,i),d(i,r),d(i,l),d(i,o)},p(a,c){c[0]&1&&G(l,a[0])},d(a){a&&N(t)}}}function V8(n){let t;return{c(){t=v("div"),t.innerHTML='<div class="loader svelte-oldx76"></div> <p>...</p>',g(t,"class","loading-state svelte-oldx76")},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function K8(n){let t,e,s;function i(){return n[15](n[23])}return{c(){t=v("div"),t.innerHTML='<div class="plus-icon svelte-oldx76"></div> <span></span>',g(t,"class","empty-placeholder dash-plan svelte-oldx76")},m(r,l){I(r,t,l),e||(s=j(t,"click",i),e=!0)},p(r,l){n=r},d(r){r&&N(t),e=!1,s()}}}function Y8(n){let t,e=bt(n[23].plans),s=[];for(let i=0;i<e.length;i+=1)s[i]=C1(v1(n,e,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();t=ie()},m(i,r){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(i,r);I(i,t,r)},p(i,r){if(r[0]&258){e=bt(i[23].plans);let l;for(l=0;l<e.length;l+=1){const o=v1(i,e,l);s[l]?s[l].p(o,r):(s[l]=C1(o),s[l].c(),s[l].m(t.parentNode,t))}for(;l<s.length;l+=1)s[l].d(1);s.length=e.length}},d(i){i&&N(t),Gt(s,i)}}}function X8(n){let t,e=(n[35].notes||"")+"",s;return{c(){t=v("p"),s=P(e),g(t,"class","simple-notes")},m(i,r){I(i,t,r),d(t,s)},p(i,r){r[0]&2&&e!==(e=(i[35].notes||"")+"")&&G(s,e)},d(i){i&&N(t)}}}function G8(n){var o,a,c;let t,e,s,i=bt(br),r=[];for(let u=0;u<i.length;u+=1)r[u]=T1(y1(n,i,u));let l=(((o=n[36].asian)==null?void 0:o.notes)||((a=n[36].european)==null?void 0:a.notes)||((c=n[36].us)==null?void 0:c.notes))&&E1();return{c(){t=v("div");for(let u=0;u<r.length;u+=1)r[u].c();e=S(),l&&l.c(),s=ie(),g(t,"class","mini-progression svelte-oldx76")},m(u,f){I(u,t,f);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(t,null);I(u,e,f),l&&l.m(u,f),I(u,s,f)},p(u,f){var p,m,h;if(f[0]&2){i=bt(br);let _;for(_=0;_<i.length;_+=1){const b=y1(u,i,_);r[_]?r[_].p(b,f):(r[_]=T1(b),r[_].c(),r[_].m(t,null))}for(;_<r.length;_+=1)r[_].d(1);r.length=i.length}(p=u[36].asian)!=null&&p.notes||(m=u[36].european)!=null&&m.notes||(h=u[36].us)!=null&&h.notes?l||(l=E1(),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(u){u&&(N(t),N(e),N(s)),Gt(r,u),l&&l.d(u)}}}function k1(n){var f,p,m;let t,e,s,i,r,l,o,a=((f=n[41])==null?void 0:f.direction)&&w1(n),c=((p=n[42])==null?void 0:p.direction)&&S1(n),u=((m=n[43])==null?void 0:m.direction)&&A1(n);return{c(){t=v("div"),e=v("span"),e.textContent=`${n[40]}:`,s=S(),i=v("div"),a&&a.c(),r=S(),c&&c.c(),l=S(),u&&u.c(),o=S(),g(e,"class","tf-name svelte-oldx76"),g(i,"class","tf-steps svelte-oldx76"),g(t,"class","tf-row svelte-oldx76")},m(h,_){I(h,t,_),d(t,e),d(t,s),d(t,i),a&&a.m(i,null),d(i,r),c&&c.m(i,null),d(i,l),u&&u.m(i,null),d(t,o)},p(h,_){var b,y,w;(b=h[41])!=null&&b.direction?a?a.p(h,_):(a=w1(h),a.c(),a.m(i,r)):a&&(a.d(1),a=null),(y=h[42])!=null&&y.direction?c?c.p(h,_):(c=S1(h),c.c(),c.m(i,l)):c&&(c.d(1),c=null),(w=h[43])!=null&&w.direction?u?u.p(h,_):(u=A1(h),u.c(),u.m(i,null)):u&&(u.d(1),u=null)},d(h){h&&N(t),a&&a.d(),c&&c.d(),u&&u.d()}}}function w1(n){let t,e,s=n[41].direction==="long"?"":"",i,r;return{c(){t=v("span"),e=P(" "),i=P(s),g(t,"class",r="mini-step "+n[41].direction+" svelte-oldx76")},m(l,o){I(l,t,o),d(t,e),d(t,i)},p(l,o){o[0]&2&&s!==(s=l[41].direction==="long"?"":"")&&G(i,s),o[0]&2&&r!==(r="mini-step "+l[41].direction+" svelte-oldx76")&&g(t,"class",r)},d(l){l&&N(t)}}}function S1(n){let t,e,s=n[42].direction==="long"?"":"",i,r;return{c(){t=v("span"),e=P(" "),i=P(s),g(t,"class",r="mini-step "+n[42].direction+" svelte-oldx76")},m(l,o){I(l,t,o),d(t,e),d(t,i)},p(l,o){o[0]&2&&s!==(s=l[42].direction==="long"?"":"")&&G(i,s),o[0]&2&&r!==(r="mini-step "+l[42].direction+" svelte-oldx76")&&g(t,"class",r)},d(l){l&&N(t)}}}function A1(n){let t,e,s=n[43].direction==="long"?"":"",i,r;return{c(){t=v("span"),e=P(" "),i=P(s),g(t,"class",r="mini-step "+n[43].direction+" svelte-oldx76")},m(l,o){I(l,t,o),d(t,e),d(t,i)},p(l,o){o[0]&2&&s!==(s=l[43].direction==="long"?"":"")&&G(i,s),o[0]&2&&r!==(r="mini-step "+l[43].direction+" svelte-oldx76")&&g(t,"class",r)},d(l){l&&N(t)}}}function T1(n){var s,i,r;let t,e=(((s=n[41])==null?void 0:s.direction)||((i=n[42])==null?void 0:i.direction)||((r=n[43])==null?void 0:r.direction))&&k1(n);return{c(){e&&e.c(),t=ie()},m(l,o){e&&e.m(l,o),I(l,t,o)},p(l,o){var a,c,u;(a=l[41])!=null&&a.direction||(c=l[42])!=null&&c.direction||(u=l[43])!=null&&u.direction?e?e.p(l,o):(e=k1(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(l){l&&N(t),e&&e.d(l)}}}function E1(n){let t;return{c(){t=v("div"),t.innerHTML="<p> </p>",g(t,"class","mini-notes")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function C1(n){let t,e,s,i,r,l,o,a,c;function u(){return n[13](n[35])}function f(_,b){return _[37]?G8:X8}let p=f(n),m=p(n);function h(){return n[14](n[35])}return{c(){t=v("div"),e=v("div"),s=v("span"),s.textContent=" ",i=S(),r=v("button"),r.textContent="",l=S(),m.c(),o=S(),g(s,"class","item-type svelte-oldx76"),g(r,"class","icon-btn delete svelte-oldx76"),g(e,"class","item-header svelte-oldx76"),g(t,"class","plan-item-card svelte-oldx76")},m(_,b){I(_,t,b),d(t,e),d(e,s),d(e,i),d(e,r),d(t,l),m.m(t,null),d(t,o),a||(c=[j(r,"click",he(u)),j(t,"click",h)],a=!0)},p(_,b){n=_,p===(p=f(n))&&m?m.p(n,b):(m.d(1),m=p(n),m&&(m.c(),m.m(t,o)))},d(_){_&&N(t),m.d(),a=!1,Vt(c)}}}function Z8(n){let t,e,s;return{c(){t=v("div"),t.innerHTML='<div class="plus-icon svelte-oldx76"></div> <span></span>',g(t,"class","empty-placeholder dash-trade svelte-oldx76")},m(i,r){I(i,t,r),e||(s=j(t,"click",n[21]),e=!0)},p:Et,d(i){i&&N(t),e=!1,s()}}}function J8(n){let t,e=bt(n[23].groupedTrades),s=[];for(let i=0;i<e.length;i+=1)s[i]=F1(m1(n,e,i));return{c(){t=v("div");for(let i=0;i<s.length;i+=1)s[i].c();g(t,"class","trades-stack svelte-oldx76")},m(i,r){I(i,t,r);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null)},p(i,r){if(r[0]&178){e=bt(i[23].groupedTrades);let l;for(l=0;l<e.length;l+=1){const o=m1(i,e,l);s[l]?s[l].p(o,r):(s[l]=F1(o),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=e.length}},d(i){i&&N(t),Gt(s,i)}}}function O1(n){let t,e,s,i,r=n[29].symbol+"",l,o,a,c=n[4](n[29])+"",u,f,p,m,h,_=n[29].side==="long"?" ":" ",b,y,w,A,E,T,C,M,x,D,L,q,F,nt=n[29].entry_price+"",et,U,W,V,$,st=(n[29].exit_price||"-")+"",Z,wt,rt,at,vt,K=n[29].lot_size+"",ct,ft,ut,Nt,yt,z=Ta(n[29].entry_time).split(" ")[1]+"",Y,dt,Ut,$t,ht,St=n[29].entry_strategy&&x1(n),Ct=n[29].ticket&&M1(n),it=n[29].pnl!==null&&L1(n);function Dt(){return n[18](n[26])}let zt=n[29].exit_sl&&N1(n),Q=n[29].initial_sl&&I1(n),lt=n[29].images&&n[29].images.length>0&&D1(n);function mt(){return n[20](n[29])}return{c(){t=v("div"),e=v("div"),s=v("div"),i=v("span"),l=P(r),o=S(),a=v("span"),u=P(c),p=S(),St&&St.c(),m=S(),h=v("span"),b=P(_),w=S(),Ct&&Ct.c(),A=S(),E=v("div"),it&&it.c(),T=S(),C=v("button"),C.textContent="",M=S(),x=v("div"),D=v("div"),L=v("span"),q=P(": "),F=v("strong"),et=P(nt),U=S(),W=v("span"),V=P(": "),$=v("strong"),Z=P(st),wt=S(),rt=v("span"),at=P(": "),vt=v("strong"),ct=P(K),ft=S(),zt&&zt.c(),ut=S(),Q&&Q.c(),Nt=S(),yt=v("div"),Y=P(z),dt=S(),lt&&lt.c(),Ut=S(),g(i,"class","symbol-inline-tag svelte-oldx76"),g(a,"class",f="session-tag "+(n[29].market_session||il(n[29].entry_time))+" svelte-oldx76"),g(h,"class",y="side-tag "+n[29].side+" svelte-oldx76"),g(s,"class","trade-meta svelte-oldx76"),g(C,"class","icon-btn delete svelte-oldx76"),g(E,"class","trade-right svelte-oldx76"),g(e,"class","item-header svelte-oldx76"),g(D,"class","detail-row svelte-oldx76"),g(yt,"class","trade-time svelte-oldx76"),g(x,"class","trade-details svelte-oldx76"),g(t,"class","trade-item-card svelte-oldx76")},m(kt,Mt){I(kt,t,Mt),d(t,e),d(e,s),d(s,i),d(i,l),d(s,o),d(s,a),d(a,u),d(s,p),St&&St.m(s,null),d(s,m),d(s,h),d(h,b),d(s,w),Ct&&Ct.m(s,null),d(e,A),d(e,E),it&&it.m(E,null),d(E,T),d(E,C),d(t,M),d(t,x),d(x,D),d(D,L),d(L,q),d(L,F),d(F,et),d(D,U),d(D,W),d(W,V),d(W,$),d($,Z),d(D,wt),d(D,rt),d(rt,at),d(rt,vt),d(vt,ct),d(D,ft),zt&&zt.m(D,null),d(D,ut),Q&&Q.m(D,null),d(x,Nt),d(x,yt),d(yt,Y),d(t,dt),lt&&lt.m(t,null),d(t,Ut),$t||(ht=[j(C,"click",he(Dt)),j(t,"click",mt)],$t=!0)},p(kt,Mt){n=kt,Mt[0]&2&&r!==(r=n[29].symbol+"")&&G(l,r),Mt[0]&2&&c!==(c=n[4](n[29])+"")&&G(u,c),Mt[0]&2&&f!==(f="session-tag "+(n[29].market_session||il(n[29].entry_time))+" svelte-oldx76")&&g(a,"class",f),n[29].entry_strategy?St?St.p(n,Mt):(St=x1(n),St.c(),St.m(s,m)):St&&(St.d(1),St=null),Mt[0]&2&&_!==(_=n[29].side==="long"?" ":" ")&&G(b,_),Mt[0]&2&&y!==(y="side-tag "+n[29].side+" svelte-oldx76")&&g(h,"class",y),n[29].ticket?Ct?Ct.p(n,Mt):(Ct=M1(n),Ct.c(),Ct.m(s,null)):Ct&&(Ct.d(1),Ct=null),n[29].pnl!==null?it?it.p(n,Mt):(it=L1(n),it.c(),it.m(E,T)):it&&(it.d(1),it=null),Mt[0]&2&&nt!==(nt=n[29].entry_price+"")&&G(et,nt),Mt[0]&2&&st!==(st=(n[29].exit_price||"-")+"")&&G(Z,st),Mt[0]&2&&K!==(K=n[29].lot_size+"")&&G(ct,K),n[29].exit_sl?zt?zt.p(n,Mt):(zt=N1(n),zt.c(),zt.m(D,ut)):zt&&(zt.d(1),zt=null),n[29].initial_sl?Q?Q.p(n,Mt):(Q=I1(n),Q.c(),Q.m(D,null)):Q&&(Q.d(1),Q=null),Mt[0]&2&&z!==(z=Ta(n[29].entry_time).split(" ")[1]+"")&&G(Y,z),n[29].images&&n[29].images.length>0?lt?lt.p(n,Mt):(lt=D1(n),lt.c(),lt.m(t,Ut)):lt&&(lt.d(1),lt=null)},d(kt){kt&&N(t),St&&St.d(),Ct&&Ct.d(),it&&it.d(),zt&&zt.d(),Q&&Q.d(),lt&&lt.d(),$t=!1,Vt(ht)}}}function Q8(n){let t,e,s,i,r,l,o=n[26].summary.symbol+"",a,c,u,f=n[26].summary.side==="long"?" ":" ",p,m,h,_,b,y,w=n[26].summary.entry_price+"",A,E,T,C,M,x=n[26].summary.totalLot.toFixed(2)+"",D,L,q,F,nt=n[26].summary.totalPnl>=0?"+":"",et,U=n[26].summary.totalPnl.toFixed(2)+"",W,V,$,st,Z,wt,rt,at,vt;function K(){return n[16](n[26])}let ct=bt(n[26].trades),ft=[];for(let Nt=0;Nt<ct.length;Nt+=1)ft[Nt]=q1(b1(n,ct,Nt));function ut(){return n[17](n[26])}return{c(){t=v("div"),e=v("div"),s=v("div"),i=v("span"),i.textContent=" ",r=S(),l=v("span"),a=P(o),c=S(),u=v("span"),p=P(f),h=S(),_=v("span"),b=P(": "),y=v("strong"),A=P(w),E=S(),T=v("span"),C=P(": "),M=v("strong"),D=P(x),L=S(),q=v("div"),F=v("span"),et=P(nt),W=P(U),$=S(),st=v("button"),st.textContent="",Z=S(),wt=v("div");for(let Nt=0;Nt<ft.length;Nt+=1)ft[Nt].c();rt=S(),g(i,"class","multi-indicator svelte-oldx76"),g(l,"class","symbol-inline-tag svelte-oldx76"),g(u,"class",m="side-tag "+n[26].summary.side+" svelte-oldx76"),g(_,"class","group-entry-price svelte-oldx76"),g(T,"class","group-lot svelte-oldx76"),g(s,"class","group-meta svelte-oldx76"),g(F,"class",V="pnl-tag "+(n[26].summary.totalPnl>=0?"profit":"loss")+" svelte-oldx76"),g(st,"class","icon-btn delete svelte-oldx76"),g(q,"class","group-pnl svelte-oldx76"),g(e,"class","group-header svelte-oldx76"),g(wt,"class","group-partial-closes svelte-oldx76"),g(t,"class","trade-time-group is-multi svelte-oldx76")},m(Nt,yt){I(Nt,t,yt),d(t,e),d(e,s),d(s,i),d(s,r),d(s,l),d(l,a),d(s,c),d(s,u),d(u,p),d(s,h),d(s,_),d(_,b),d(_,y),d(y,A),d(s,E),d(s,T),d(T,C),d(T,M),d(M,D),d(e,L),d(e,q),d(q,F),d(F,et),d(F,W),d(q,$),d(q,st),d(t,Z),d(t,wt);for(let z=0;z<ft.length;z+=1)ft[z]&&ft[z].m(wt,null);d(t,rt),at||(vt=[j(st,"click",he(K)),j(t,"click",ut)],at=!0)},p(Nt,yt){if(n=Nt,yt[0]&2&&o!==(o=n[26].summary.symbol+"")&&G(a,o),yt[0]&2&&f!==(f=n[26].summary.side==="long"?" ":" ")&&G(p,f),yt[0]&2&&m!==(m="side-tag "+n[26].summary.side+" svelte-oldx76")&&g(u,"class",m),yt[0]&2&&w!==(w=n[26].summary.entry_price+"")&&G(A,w),yt[0]&2&&x!==(x=n[26].summary.totalLot.toFixed(2)+"")&&G(D,x),yt[0]&2&&nt!==(nt=n[26].summary.totalPnl>=0?"+":"")&&G(et,nt),yt[0]&2&&U!==(U=n[26].summary.totalPnl.toFixed(2)+"")&&G(W,U),yt[0]&2&&V!==(V="pnl-tag "+(n[26].summary.totalPnl>=0?"profit":"loss")+" svelte-oldx76")&&g(F,"class",V),yt[0]&2){ct=bt(n[26].trades);let z;for(z=0;z<ct.length;z+=1){const Y=b1(n,ct,z);ft[z]?ft[z].p(Y,yt):(ft[z]=q1(Y),ft[z].c(),ft[z].m(wt,null))}for(;z<ft.length;z+=1)ft[z].d(1);ft.length=ct.length}},d(Nt){Nt&&N(t),Gt(ft,Nt),at=!1,Vt(vt)}}}function x1(n){let t,e=U1(n[29].entry_strategy)+"",s,i;return{c(){t=v("span"),s=P(e),g(t,"class",i="strategy-tag "+n[29].entry_strategy+" svelte-oldx76")},m(r,l){I(r,t,l),d(t,s)},p(r,l){l[0]&2&&e!==(e=U1(r[29].entry_strategy)+"")&&G(s,e),l[0]&2&&i!==(i="strategy-tag "+r[29].entry_strategy+" svelte-oldx76")&&g(t,"class",i)},d(r){r&&N(t)}}}function M1(n){let t,e,s=n[29].ticket+"",i;return{c(){t=v("span"),e=P("#"),i=P(s),g(t,"class","ticket-tag svelte-oldx76")},m(r,l){I(r,t,l),d(t,e),d(t,i)},p(r,l){l[0]&2&&s!==(s=r[29].ticket+"")&&G(i,s)},d(r){r&&N(t)}}}function L1(n){let t,e=n[29].pnl>=0?"+":"",s,i=n[29].pnl.toFixed(2)+"",r,l;return{c(){t=v("span"),s=P(e),r=P(i),g(t,"class",l="pnl-tag "+(n[29].pnl>=0?"profit":"loss")+" svelte-oldx76")},m(o,a){I(o,t,a),d(t,s),d(t,r)},p(o,a){a[0]&2&&e!==(e=o[29].pnl>=0?"+":"")&&G(s,e),a[0]&2&&i!==(i=o[29].pnl.toFixed(2)+"")&&G(r,i),a[0]&2&&l!==(l="pnl-tag "+(o[29].pnl>=0?"profit":"loss")+" svelte-oldx76")&&g(t,"class",l)},d(o){o&&N(t)}}}function N1(n){let t,e,s,i=n[29].exit_sl+"",r;return{c(){t=v("span"),e=P("SL: "),s=v("strong"),r=P(i),g(t,"class","exit-sl-info")},m(l,o){I(l,t,o),d(t,e),d(t,s),d(s,r)},p(l,o){o[0]&2&&i!==(i=l[29].exit_sl+"")&&G(r,i)},d(l){l&&N(t)}}}function I1(n){var p,m;let t,e,s,i=(((p=n[29].bullet_size)==null?void 0:p.toFixed(1))||"-")+"",r,l,o,a,c,u=(((m=n[29].rr_ratio)==null?void 0:m.toFixed(2))||"-")+"",f;return{c(){t=v("span"),e=P(": "),s=v("strong"),r=P(i),l=S(),o=v("span"),a=P(": "),c=v("strong"),f=P(u),g(s,"class","svelte-oldx76"),g(t,"class","bullet-info svelte-oldx76"),g(c,"class","svelte-oldx76"),g(o,"class","rr-info svelte-oldx76")},m(h,_){I(h,t,_),d(t,e),d(t,s),d(s,r),I(h,l,_),I(h,o,_),d(o,a),d(o,c),d(c,f)},p(h,_){var b,y;_[0]&2&&i!==(i=(((b=h[29].bullet_size)==null?void 0:b.toFixed(1))||"-")+"")&&G(r,i),_[0]&2&&u!==(u=(((y=h[29].rr_ratio)==null?void 0:y.toFixed(2))||"-")+"")&&G(f,u)},d(h){h&&(N(t),N(l),N(o))}}}function D1(n){let t,e,s=bt(n[29].images.slice(0,3)),i=[];for(let l=0;l<s.length;l+=1)i[l]=R1(_1(n,s,l));let r=n[29].images.length>3&&P1(n);return{c(){t=v("div");for(let l=0;l<i.length;l+=1)i[l].c();e=S(),r&&r.c(),g(t,"class","mini-gallery svelte-oldx76")},m(l,o){I(l,t,o);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(t,null);d(t,e),r&&r.m(t,null)},p(l,o){if(o[0]&34){s=bt(l[29].images.slice(0,3));let a;for(a=0;a<s.length;a+=1){const c=_1(l,s,a);i[a]?i[a].p(c,o):(i[a]=R1(c),i[a].c(),i[a].m(t,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=s.length}l[29].images.length>3?r?r.p(l,o):(r=P1(l),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(l){l&&N(t),Gt(i,l),r&&r.d()}}}function R1(n){let t,e,s,i,r;function l(){return n[19](n[32])}return{c(){t=v("div"),e=v("img"),ae(e.src,s=Gi.getUrl(n[32].image_path))||g(e,"src",s),g(e,"alt","trade"),g(e,"class","svelte-oldx76"),g(t,"class","mini-img svelte-oldx76")},m(o,a){I(o,t,a),d(t,e),i||(r=j(t,"click",he(l)),i=!0)},p(o,a){n=o,a[0]&2&&!ae(e.src,s=Gi.getUrl(n[32].image_path))&&g(e,"src",s)},d(o){o&&N(t),i=!1,r()}}}function P1(n){let t,e,s=n[29].images.length-3+"",i;return{c(){t=v("div"),e=P("+"),i=P(s),g(t,"class","more-imgs")},m(r,l){I(r,t,l),d(t,e),d(t,i)},p(r,l){l[0]&2&&s!==(s=r[29].images.length-3+"")&&G(i,s)},d(r){r&&N(t)}}}function B1(n){let t,e,s=n[29].ticket+"",i;return{c(){t=v("span"),e=P("#"),i=P(s),g(t,"class","partial-ticket svelte-oldx76")},m(r,l){I(r,t,l),d(t,e),d(t,i)},p(r,l){l[0]&2&&s!==(s=r[29].ticket+"")&&G(i,s)},d(r){r&&N(t)}}}function q1(n){var D;let t,e,s=Ta(n[29].entry_time).split(" ")[1]+"",i,r,l,o,a,c=(n[29].exit_price||"-")+"",u,f,p=n[29].lot_size+"",m,h,_,b,y=n[29].pnl>=0?"+":"",w,A=((D=n[29].pnl)==null?void 0:D.toFixed(2))+"",E,T,C,M,x=n[29].ticket&&B1(n);return{c(){t=v("div"),e=v("span"),i=P(s),r=S(),l=v("span"),o=P(": "),a=v("strong"),u=P(c),f=P(" ("),m=P(p),h=P(" )"),_=S(),b=v("span"),w=P(y),E=P(A),C=S(),x&&x.c(),M=S(),g(e,"class","partial-time svelte-oldx76"),g(a,"class","svelte-oldx76"),g(l,"class","partial-info svelte-oldx76"),g(b,"class",T="partial-pnl "+(n[29].pnl>=0?"profit":"loss")+" svelte-oldx76"),g(t,"class","partial-close-row svelte-oldx76")},m(L,q){I(L,t,q),d(t,e),d(e,i),d(t,r),d(t,l),d(l,o),d(l,a),d(a,u),d(l,f),d(l,m),d(l,h),d(t,_),d(t,b),d(b,w),d(b,E),d(t,C),x&&x.m(t,null),d(t,M)},p(L,q){var F;q[0]&2&&s!==(s=Ta(L[29].entry_time).split(" ")[1]+"")&&G(i,s),q[0]&2&&c!==(c=(L[29].exit_price||"-")+"")&&G(u,c),q[0]&2&&p!==(p=L[29].lot_size+"")&&G(m,p),q[0]&2&&y!==(y=L[29].pnl>=0?"+":"")&&G(w,y),q[0]&2&&A!==(A=((F=L[29].pnl)==null?void 0:F.toFixed(2))+"")&&G(E,A),q[0]&2&&T!==(T="partial-pnl "+(L[29].pnl>=0?"profit":"loss")+" svelte-oldx76")&&g(b,"class",T),L[29].ticket?x?x.p(L,q):(x=B1(L),x.c(),x.m(t,M)):x&&(x.d(1),x=null)},d(L){L&&N(t),x&&x.d()}}}function F1(n){let t;function e(l,o){return l[26].trades.length>1?Q8:O1}function s(l,o){return o===O1?H8(l):l}let i=e(n),r=i(s(n,i));return{c(){r.c(),t=ie()},m(l,o){r.m(l,o),I(l,t,o)},p(l,o){i===(i=e(l))&&r?r.p(s(l,i),o):(r.d(1),r=i(s(l,i)),r&&(r.c(),r.m(t.parentNode,t)))},d(l){l&&N(t),r.d(l)}}}function j1(n){let t,e,s,i=H1(n[23].date)+"",r,l,o,a,c,u,f;function p(w,A){return w[23].plans.length>0?Y8:K8}let m=p(n),h=m(n);function _(w,A){return w[23].groupedTrades.length>0?J8:Z8}let b=_(n),y=b(n);return{c(){t=v("div"),e=v("div"),s=v("div"),r=P(i),l=S(),o=v("div"),a=v("div"),h.c(),c=S(),u=v("div"),y.c(),f=S(),g(s,"class","date-tag svelte-oldx76"),g(e,"class","day-marker svelte-oldx76"),g(a,"class","plan-column svelte-oldx76"),g(u,"class","trade-column svelte-oldx76"),g(o,"class","day-card-container svelte-oldx76"),g(t,"class","day-wrapper svelte-oldx76")},m(w,A){I(w,t,A),d(t,e),d(e,s),d(s,r),d(t,l),d(t,o),d(o,a),h.m(a,null),d(o,c),d(o,u),y.m(u,null),d(t,f)},p(w,A){A[0]&2&&i!==(i=H1(w[23].date)+"")&&G(r,i),m===(m=p(w))&&h?h.p(w,A):(h.d(1),h=m(w),h&&(h.c(),h.m(a,null))),b===(b=_(w))&&y?y.p(w,A):(y.d(1),y=b(w),y&&(y.c(),y.m(u,null)))},d(w){w&&N(t),h.d(),y.d()}}}function z1(n){let t,e,s,i,r,l,o,a;return{c(){t=v("div"),e=v("div"),s=v("button"),s.textContent="",i=S(),r=v("img"),g(s,"class","modal-close svelte-oldx76"),ae(r.src,l=n[3])||g(r,"src",l),g(r,"alt",""),g(r,"class","svelte-oldx76"),g(e,"class","modal-content svelte-oldx76"),g(t,"class","modal svelte-oldx76")},m(c,u){I(c,t,u),d(t,e),d(e,s),d(e,i),d(e,r),o||(a=[j(s,"click",n[6]),j(e,"click",he(n[10])),j(t,"click",n[6])],o=!0)},p(c,u){u[0]&8&&!ae(r.src,l=c[3])&&g(r,"src",l)},d(c){c&&N(t),o=!1,Vt(a)}}}function $8(n){let t,e,s,i,r,l,o,a,c,u,f,p;function m(y,w){return y[2]?V8:y[1].length===0?W8:U8}let h=m(n),_=h(n),b=n[3]&&z1(n);return{c(){t=v("div"),e=v("div"),s=v("div"),i=v("div"),r=v("button"),r.innerHTML='<div class="action-icon svelte-oldx76"></div> <div class="action-info svelte-oldx76"><span class="action-name svelte-oldx76"></span> <span class="action-desc svelte-oldx76"></span></div> <div class="action-plus svelte-oldx76"></div>',l=S(),o=v("button"),o.innerHTML='<div class="action-icon svelte-oldx76"></div> <div class="action-info svelte-oldx76"><span class="action-name svelte-oldx76"></span> <span class="action-desc svelte-oldx76"></span></div> <div class="action-plus svelte-oldx76"></div>',a=S(),_.c(),c=S(),b&&b.c(),u=ie(),g(r,"class","action-card plan svelte-oldx76"),g(o,"class","action-card trade svelte-oldx76"),g(i,"class","hero-actions svelte-oldx76"),g(s,"class","hero-content"),g(e,"class","home-hero svelte-oldx76"),g(t,"class","timeline-container svelte-oldx76")},m(y,w){I(y,t,w),d(t,e),d(e,s),d(s,i),d(i,r),d(i,l),d(i,o),d(t,a),_.m(t,null),I(y,c,w),b&&b.m(y,w),I(y,u,w),f||(p=[j(r,"click",n[11]),j(o,"click",n[12])],f=!0)},p(y,w){h===(h=m(y))&&_?_.p(y,w):(_.d(1),_=h(y),_&&(_.c(),_.m(t,null))),y[3]?b?b.p(y,w):(b=z1(y),b.c(),b.m(u.parentNode,u)):b&&(b.d(1),b=null)},i:Et,o:Et,d(y){y&&(N(t),N(c),N(u)),_.d(),b&&b.d(y),f=!1,Vt(p)}}}function Ta(n){return new Date(n).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function H1(n){const t=new Date(n),e=["","","","","","",""];return`${t.getFullYear()}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getDate().toString().padStart(2,"0")} (${e[t.getDay()]})`}function U1(n){return{expert:" ",elite:" ",legend:" "}[n]||""}function tL(n,t){if(!n)return t;try{return JSON.parse(n)}catch{return t}}function eL(n,t,e){let s,i;Ye(n,Rs,L=>e(9,s=L)),Ye(n,ql,L=>e(0,i=L));let r=[],l=!0,o=null;async function a(){try{e(2,l=!0);const L=i,[q,F]=await Promise.all([yi.getAll({account_id:s,symbol:L,page_size:20}),gi.getAll({account_id:s,symbol:L,page_size:50})]),nt=q.data.data||[],et=F.data.data||[],U={};nt.forEach(W=>{const V=new Date(W.plan_date).toISOString().slice(0,10);U[V]||(U[V]={date:V,plans:[],groupedTrades:[]}),U[V].plans.push(W)}),et.forEach(W=>{const V=new Date(W.entry_time).toISOString().slice(0,10);U[V]||(U[V]={date:V,plans:[],groupedTrades:[]});const $=W.entry_time;let st=U[V].groupedTrades.find(Z=>Z.entry_time===$);st||(st={entry_time:$,trades:[],summary:{totalPnl:0,totalLot:0,symbol:W.symbol,entry_price:W.entry_price,side:W.side}},U[V].groupedTrades.push(st)),st.trades.push(W),st.summary.totalPnl+=W.pnl||0,st.summary.totalLot+=W.lot_size||0}),e(1,r=Object.values(U).sort((W,V)=>V.date.localeCompare(W.date))),r.forEach(W=>{W.groupedTrades.forEach(V=>{V.trades.length>1&&V.trades.sort(($,st)=>new Date($.exit_time||0)-new Date(st.exit_time||0))})})}catch(L){console.error(":",L)}finally{e(2,l=!1)}}es(()=>{a()});function c(L){var F;let q=L.market_session;return!q&&L.entry_time&&(q=il(L.entry_time)),((F=vs.find(nt=>nt.value===q))==null?void 0:F.label)||q||""}function u(L){L&&e(3,o=L.startsWith("http")?L:Gi.getUrl(L))}function f(){e(3,o=null)}async function p(L){if(confirm(`( ${L.trades.length} )`))try{for(const q of L.trades)await gi.delete(q.id);a()}catch{alert("")}}async function m(L){if(confirm(""))try{await yi.delete(L),a()}catch{alert("")}}function h(L){Jr.call(this,n,L)}const _=()=>ye("/plans/new?symbol="+i),b=()=>ye("/new?symbol="+i),y=L=>m(L.id),w=L=>ye(`/plans/edit/${L.id}`),A=L=>ye(`/plans/new?date=${L.date}&symbol=${i}`),E=L=>p(L),T=L=>ye(`/edit/${L.trades[0].id}`),C=L=>p(L),M=L=>u(L.image_path),x=L=>ye(`/edit/${L.id}`),D=()=>ye(`/new?symbol=${i}`);return n.$$.update=()=>{n.$$.dirty[0]&513&&(i||s)&&a()},[i,r,l,o,c,u,f,p,m,s,h,_,b,y,w,A,E,T,C,M,x,D]}class nL extends Fn{constructor(t){super(),qn(this,t,eL,$8,bn,{},null,[-1,-1])}}function W1(n,t,e){const s=n.slice();return s[5]=t[e],s}function V1(n){let t,e,s,i,r,l,o=bt(n[2]),a=[];for(let c=0;c<o.length;c+=1)a[c]=K1(W1(n,o,c));return{c(){t=v("div"),e=v("span"),e.textContent=":",s=S(),i=v("select");for(let c=0;c<a.length;c+=1)a[c].c();g(e,"class","label svelte-a2g4eo"),g(i,"class","svelte-a2g4eo"),g(t,"class","selector-wrapper svelte-a2g4eo")},m(c,u){I(c,t,u),d(t,e),d(t,s),d(t,i);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(i,null);Te(i,n[1]),r||(l=j(i,"change",n[3]),r=!0)},p(c,u){if(u&4){o=bt(c[2]);let f;for(f=0;f<o.length;f+=1){const p=W1(c,o,f);a[f]?a[f].p(p,u):(a[f]=K1(p),a[f].c(),a[f].m(i,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=o.length}u&6&&Te(i,c[1])},d(c){c&&N(t),Gt(a,c),r=!1,l()}}}function K1(n){let t,e=n[5].name+"",s,i,r=n[5].type==="metatrader"?"(MT5)":"()",l,o,a;return{c(){t=v("option"),s=P(e),i=S(),l=P(r),o=S(),t.__value=a=n[5].id,xt(t,t.__value),g(t,"class","svelte-a2g4eo")},m(c,u){I(c,t,u),d(t,s),d(t,i),d(t,l),d(t,o)},p(c,u){u&4&&e!==(e=c[5].name+"")&&G(s,e),u&4&&r!==(r=c[5].type==="metatrader"?"(MT5)":"()")&&G(l,r),u&4&&a!==(a=c[5].id)&&(t.__value=a,xt(t,t.__value))},d(c){c&&N(t)}}}function sL(n){let t,e=!n[0]&&V1(n);return{c(){t=v("div"),e&&e.c(),g(t,"class","account-selector svelte-a2g4eo")},m(s,i){I(s,t,i),e&&e.m(t,null)},p(s,[i]){s[0]?e&&(e.d(1),e=null):e?e.p(s,i):(e=V1(s),e.c(),e.m(t,null))},i:Et,o:Et,d(s){s&&N(t),e&&e.d()}}}function iL(n,t,e){let s,i;Ye(n,Rs,a=>e(1,s=a)),Ye(n,Fl,a=>e(2,i=a));let r=!0;async function l(){try{const c=(await Di.getAll()).data;console.log("Fetched accounts:",c),Fl.set(c),c.length>0&&!c.find(u=>u.id===s)&&Rs.set(c[0].id)}catch(a){console.error("Failed to fetch accounts:",a)}finally{e(0,r=!1)}}es(l);function o(a){Rs.set(parseInt(a.target.value)),window.location.reload()}return[r,s,i,o]}class rL extends Fn{constructor(t){super(),qn(this,t,iL,sL,bn,{})}}function Y1(n,t,e){const s=n.slice();return s[49]=t[e],s}function X1(n,t,e){const s=n.slice();return s[52]=t[e],s}function G1(n,t,e){const s=n.slice();return s[49]=t[e],s}function lL(n){let t,e=bt(n[11]),s=[];for(let i=0;i<e.length;i+=1)s[i]=n_(X1(n,e,i));return{c(){t=v("div");for(let i=0;i<s.length;i+=1)s[i].c();g(t,"class","account-grid svelte-oike8q")},m(i,r){I(i,t,r);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null)},p(i,r){if(r[0]&4058880){e=bt(i[11]);let l;for(l=0;l<e.length;l+=1){const o=X1(i,e,l);s[l]?s[l].p(o,r):(s[l]=n_(o),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=e.length}},d(i){i&&N(t),Gt(s,i)}}}function oL(n){let t;return{c(){t=v("p"),t.textContent="..."},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function Z1(n){let t,e,s;function i(){return n[24](n[52])}return{c(){t=v("button"),t.textContent="",g(t,"class","delete-acc-btn svelte-oike8q"),g(t,"title","")},m(r,l){I(r,t,l),e||(s=j(t,"click",he(i)),e=!0)},p(r,l){n=r},d(r){r&&N(t),e=!1,s()}}}function aL(n){let t,e,s=n[52].name+"",i,r,l,o,a;function c(){return n[29](n[52])}return{c(){t=v("div"),e=v("h3"),i=P(s),r=S(),l=v("button"),l.textContent="",g(e,"class","svelte-oike8q"),g(l,"class","btn-edit-small svelte-oike8q"),g(l,"title",""),g(t,"class","name-display svelte-oike8q")},m(u,f){I(u,t,f),d(t,e),d(e,i),d(t,r),d(t,l),o||(a=j(l,"click",he(c)),o=!0)},p(u,f){n=u,f[0]&2048&&s!==(s=n[52].name+"")&&G(i,s)},d(u){u&&N(t),o=!1,a()}}}function cL(n){let t,e,s,i,r,l,o,a,c,u;function f(..._){return n[26](n[52],..._)}let p=bt(Array.from({length:25},f_)),m=[];for(let _=0;_<p.length;_+=1)m[_]=J1(G1(n,p,_));function h(){return n[28](n[52])}return{c(){t=v("div"),e=v("input"),s=S(),i=v("select");for(let _=0;_<m.length;_+=1)m[_].c();r=S(),l=v("button"),l.textContent="",o=S(),a=v("button"),a.textContent="",g(e,"type","text"),g(e,"class","form-control edit-name-input svelte-oike8q"),g(i,"class","form-control edit-offset-select svelte-oike8q"),n[10]===void 0&&gn(()=>n[27].call(i)),g(l,"class","btn-icon save svelte-oike8q"),g(l,"title",""),g(a,"class","btn-icon cancel svelte-oike8q"),g(a,"title",""),g(t,"class","edit-name-wrapper svelte-oike8q"),g(t,"role","presentation")},m(_,b){I(_,t,b),d(t,e),xt(e,n[9]),d(t,s),d(t,i);for(let y=0;y<m.length;y+=1)m[y]&&m[y].m(i,null);Te(i,n[10],!0),d(t,r),d(t,l),d(t,o),d(t,a),c||(u=[j(e,"input",n[25]),j(e,"keypress",f),j(i,"change",n[27]),j(l,"click",h),j(a,"click",n[19]),j(t,"click",he(n[22]))],c=!0)},p(_,b){if(n=_,b[0]&512&&e.value!==n[9]&&xt(e,n[9]),b&0){p=bt(Array.from({length:25},f_));let y;for(y=0;y<p.length;y+=1){const w=G1(n,p,y);m[y]?m[y].p(w,b):(m[y]=J1(w),m[y].c(),m[y].m(i,null))}for(;y<m.length;y+=1)m[y].d(1);m.length=p.length}b[0]&1024&&Te(i,n[10])},d(_){_&&N(t),Gt(m,_),c=!1,Vt(u)}}}function J1(n){let t,e,s=n[49]>=0?"+":"",i,r=n[49]+"",l;return{c(){t=v("option"),e=P("UTC"),i=P(s),l=P(r),t.__value=n[49],xt(t,t.__value)},m(o,a){I(o,t,a),d(t,e),d(t,i),d(t,l)},p:Et,d(o){o&&N(t)}}}function Q1(n){let t,e,s,i=n[52].mt5_account_id+"",r,l,o,a,c=n[52].sync_status+"",u,f,p,m,h=n[52].last_synced_at&&$1(n),_=n[52].sync_status==="failed"&&n[52].last_sync_error&&t_(n);return{c(){t=v("div"),e=v("p"),s=P("ID: "),r=P(i),l=S(),o=v("div"),a=v("span"),u=P(c),p=S(),h&&h.c(),m=S(),_&&_.c(),g(a,"class",f="badge sync-badge "+n[52].sync_status+" svelte-oike8q"),g(o,"class","sync-info svelte-oike8q"),g(t,"class","mt5-detail svelte-oike8q")},m(b,y){I(b,t,y),d(t,e),d(e,s),d(e,r),d(t,l),d(t,o),d(o,a),d(a,u),d(o,p),h&&h.m(o,null),d(t,m),_&&_.m(t,null)},p(b,y){y[0]&2048&&i!==(i=b[52].mt5_account_id+"")&&G(r,i),y[0]&2048&&c!==(c=b[52].sync_status+"")&&G(u,c),y[0]&2048&&f!==(f="badge sync-badge "+b[52].sync_status+" svelte-oike8q")&&g(a,"class",f),b[52].last_synced_at?h?h.p(b,y):(h=$1(b),h.c(),h.m(o,null)):h&&(h.d(1),h=null),b[52].sync_status==="failed"&&b[52].last_sync_error?_?_.p(b,y):(_=t_(b),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},d(b){b&&N(t),h&&h.d(),_&&_.d()}}}function $1(n){let t,e,s=new Date(n[52].last_synced_at).toLocaleString()+"",i;return{c(){t=v("span"),e=P(": "),i=P(s),g(t,"class","sync-time svelte-oike8q")},m(r,l){I(r,t,l),d(t,e),d(t,i)},p(r,l){l[0]&2048&&s!==(s=new Date(r[52].last_synced_at).toLocaleString()+"")&&G(i,s)},d(r){r&&N(t)}}}function t_(n){let t,e,s=n[52].last_sync_error+"",i;return{c(){t=v("div"),e=P(" "),i=P(s),g(t,"class","sync-error-msg svelte-oike8q")},m(r,l){I(r,t,l),d(t,e),d(t,i)},p(r,l){l[0]&2048&&s!==(s=r[52].last_sync_error+"")&&G(i,s)},d(r){r&&N(t)}}}function e_(n){let t,e,s;function i(){return n[31](n[52])}return{c(){t=v("button"),t.textContent=" ",g(t,"class","btn btn-sync svelte-oike8q")},m(r,l){I(r,t,l),e||(s=j(t,"click",he(i)),e=!0)},p(r,l){n=r},d(r){r&&N(t),e=!1,s()}}}function n_(n){let t,e,s,i,r,l,o=n[52].type==="local"?"":"MetaTrader 5",a,c,u,f,p=n[52].status+"",m,h,_,b,y,w=n[52].timezone_offset>=0?"+":"",A,E=n[52].timezone_offset+"",T,C,M,x,D,L,q,F,nt,et,U,W=n[52].id!==1&&Z1(n);function V(ct,ft){return ct[8]===ct[52].id?cL:aL}let $=V(n),st=$(n),Z=n[52].type==="metatrader"&&Q1(n);function wt(){return n[30](n[52])}let rt=n[52].type==="metatrader"&&e_(n);function at(){return n[32](n[52])}function vt(){return n[33](n[52])}function K(...ct){return n[34](n[52],...ct)}return{c(){t=v("div"),W&&W.c(),e=S(),s=v("div"),st.c(),i=S(),r=v("div"),l=v("span"),a=P(o),u=S(),f=v("span"),m=P(p),_=S(),b=v("span"),y=P("UTC"),A=P(w),T=P(E),C=S(),Z&&Z.c(),M=S(),x=v("div"),D=v("button"),D.textContent="  CSV",L=S(),rt&&rt.c(),q=S(),F=v("button"),F.textContent=" ",nt=S(),g(l,"class",c="badge "+(n[52].type==="local"?"badge-info":"badge-mt5")+" svelte-oike8q"),g(f,"class",h="badge "+(n[52].status==="active"?"badge-success":"badge-danger")),g(b,"class","badge badge-utc svelte-oike8q"),g(r,"class","badges svelte-oike8q"),g(s,"class","acc-info svelte-oike8q"),g(D,"class","btn btn-secondary"),g(F,"class","btn btn-warning"),g(F,"title",""),g(x,"class","acc-actions svelte-oike8q"),g(t,"class","account-card card svelte-oike8q"),g(t,"role","button"),g(t,"tabindex","0"),Ot(t,"mt5",n[52].type==="metatrader")},m(ct,ft){I(ct,t,ft),W&&W.m(t,null),d(t,e),d(t,s),st.m(s,null),d(s,i),d(s,r),d(r,l),d(l,a),d(r,u),d(r,f),d(f,m),d(r,_),d(r,b),d(b,y),d(b,A),d(b,T),d(s,C),Z&&Z.m(s,null),d(t,M),d(t,x),d(x,D),d(x,L),rt&&rt.m(x,null),d(x,q),d(x,F),d(t,nt),et||(U=[j(D,"click",he(wt)),j(F,"click",he(at)),j(t,"click",vt),j(t,"keydown",K)],et=!0)},p(ct,ft){n=ct,n[52].id!==1?W?W.p(n,ft):(W=Z1(n),W.c(),W.m(t,e)):W&&(W.d(1),W=null),$===($=V(n))&&st?st.p(n,ft):(st.d(1),st=$(n),st&&(st.c(),st.m(s,i))),ft[0]&2048&&o!==(o=n[52].type==="local"?"":"MetaTrader 5")&&G(a,o),ft[0]&2048&&c!==(c="badge "+(n[52].type==="local"?"badge-info":"badge-mt5")+" svelte-oike8q")&&g(l,"class",c),ft[0]&2048&&p!==(p=n[52].status+"")&&G(m,p),ft[0]&2048&&h!==(h="badge "+(n[52].status==="active"?"badge-success":"badge-danger"))&&g(f,"class",h),ft[0]&2048&&w!==(w=n[52].timezone_offset>=0?"+":"")&&G(A,w),ft[0]&2048&&E!==(E=n[52].timezone_offset+"")&&G(T,E),n[52].type==="metatrader"?Z?Z.p(n,ft):(Z=Q1(n),Z.c(),Z.m(s,null)):Z&&(Z.d(1),Z=null),n[52].type==="metatrader"?rt?rt.p(n,ft):(rt=e_(n),rt.c(),rt.m(x,q)):rt&&(rt.d(1),rt=null),ft[0]&2048&&Ot(t,"mt5",n[52].type==="metatrader")},d(ct){ct&&N(t),W&&W.d(),st.d(),Z&&Z.d(),rt&&rt.d(),et=!1,Vt(U)}}}function s_(n){let t,e,s,i,r,l,o,a,c,u,f,p,m,h,_,b,y,w,A,E,T,C,M,x,D,L,q,F,nt,et,U,W=bt(Array.from({length:25},h_)),V=[];for(let $=0;$<W.length;$+=1)V[$]=i_(Y1(n,W,$));return nt=Fc(n[37][0]),{c(){t=v("div"),e=v("div"),s=v("h2"),s.textContent="",i=S(),r=v("div"),l=v("label"),l.textContent="",o=S(),a=v("input"),c=S(),u=v("div"),f=v("label"),f.textContent="",p=S(),m=v("div"),h=v("label"),_=v("input"),b=P("  ()"),y=S(),w=v("div"),A=v("label"),A.textContent=" (UTC)",E=S(),T=v("select");for(let $=0;$<V.length;$+=1)V[$].c();C=S(),M=v("p"),M.textContent="",x=S(),D=v("div"),L=v("button"),L.textContent="",q=S(),F=v("button"),F.textContent="",g(l,"for","new-acc-name"),g(a,"id","new-acc-name"),g(a,"type","text"),g(a,"class","form-control"),g(a,"placeholder",""),g(r,"class","form-group"),g(_,"type","radio"),_.__value="local",xt(_,_.__value),_.checked=!0,g(h,"class","radio-label svelte-oike8q"),g(m,"class","type-selector svelte-oike8q"),g(u,"class","form-group"),g(A,"for","new-acc-timezone"),g(T,"id","new-acc-timezone"),g(T,"class","form-control"),n[2].timezone_offset===void 0&&gn(()=>n[38].call(T)),g(M,"class","help-text svelte-oike8q"),g(w,"class","form-group"),g(L,"class","btn"),g(F,"class","btn btn-primary"),g(D,"class","modal-actions svelte-oike8q"),g(e,"class","modal card svelte-oike8q"),g(t,"class","modal-overlay svelte-oike8q"),g(t,"role","presentation"),nt.p(_)},m($,st){I($,t,st),d(t,e),d(e,s),d(e,i),d(e,r),d(r,l),d(r,o),d(r,a),xt(a,n[2].name),d(e,c),d(e,u),d(u,f),d(u,p),d(u,m),d(m,h),d(h,_),_.checked=_.__value===n[2].type,d(h,b),d(e,y),d(e,w),d(w,A),d(w,E),d(w,T);for(let Z=0;Z<V.length;Z+=1)V[Z]&&V[Z].m(T,null);Te(T,n[2].timezone_offset,!0),d(w,C),d(w,M),d(e,x),d(e,D),d(D,L),d(D,q),d(D,F),et||(U=[j(a,"input",n[35]),j(_,"change",n[36]),j(T,"change",n[38]),j(L,"click",n[39]),j(F,"click",n[12]),j(t,"click",T_(n[40]))],et=!0)},p($,st){if(st[0]&4&&a.value!==$[2].name&&xt(a,$[2].name),st[0]&4&&(_.checked=_.__value===$[2].type),st&0){W=bt(Array.from({length:25},h_));let Z;for(Z=0;Z<W.length;Z+=1){const wt=Y1($,W,Z);V[Z]?V[Z].p(wt,st):(V[Z]=i_(wt),V[Z].c(),V[Z].m(T,null))}for(;Z<V.length;Z+=1)V[Z].d(1);V.length=W.length}st[0]&4&&Te(T,$[2].timezone_offset)},d($){$&&N(t),Gt(V,$),nt.r(),et=!1,Vt(U)}}}function i_(n){let t,e,s=n[49]>=0?"+":"",i,r=n[49]+"",l;return{c(){t=v("option"),e=P("UTC"),i=P(s),l=P(r),t.__value=n[49],xt(t,t.__value)},m(o,a){I(o,t,a),d(t,e),d(t,i),d(t,l)},p:Et,d(o){o&&N(t)}}}function r_(n){let t,e,s,i,r,l,o,a,c,u,f,p,m,h,_,b,y,w,A,E,T,C=n[6]==="ftmo"&&l_();function M(q,F){return q[7]?fL:uL}let x=M(n),D=x(n),L=n[7]&&o_(n);return{c(){t=v("div"),e=v("div"),s=v("h2"),s.textContent=" (CSV)",i=S(),r=v("div"),l=v("label"),l.textContent="",o=S(),a=v("select"),c=v("option"),c.textContent="FTMO",u=S(),f=v("div"),C&&C.c(),p=S(),m=v("div"),h=v("label"),h.textContent="",_=S(),b=v("input"),y=S(),w=v("div"),D.c(),A=S(),L&&L.c(),g(l,"for","importSource"),c.__value="ftmo",xt(c,c.__value),g(a,"id","importSource"),g(a,"class","form-control"),n[6]===void 0&&gn(()=>n[41].call(a)),g(r,"class","form-group"),g(f,"class","import-instructions svelte-oike8q"),g(h,"for","csvFile"),g(b,"type","file"),g(b,"id","csvFile"),g(b,"accept",".csv"),g(b,"class","form-control"),g(m,"class","form-group"),g(w,"class","modal-actions svelte-oike8q"),g(e,"class","modal card svelte-oike8q"),g(t,"class","modal-overlay svelte-oike8q"),g(t,"role","presentation")},m(q,F){I(q,t,F),d(t,e),d(e,s),d(e,i),d(e,r),d(r,l),d(r,o),d(r,a),d(a,c),Te(a,n[6],!0),d(e,u),d(e,f),C&&C.m(f,null),d(e,p),d(e,m),d(m,h),d(m,_),d(m,b),d(e,y),d(e,w),D.m(w,null),d(e,A),L&&L.m(e,null),E||(T=[j(a,"change",n[41]),j(b,"change",n[42]),j(t,"click",T_(n[45]))],E=!0)},p(q,F){F[0]&64&&Te(a,q[6]),q[6]==="ftmo"?C||(C=l_(),C.c(),C.m(f,null)):C&&(C.d(1),C=null),x===(x=M(q))&&D?D.p(q,F):(D.d(1),D=x(q),D&&(D.c(),D.m(w,null))),q[7]?L?L.p(q,F):(L=o_(q),L.c(),L.m(e,null)):L&&(L.d(1),L=null)},d(q){q&&N(t),C&&C.d(),D.d(),L&&L.d(),E=!1,Vt(T)}}}function l_(n){let t,e,s;return{c(){t=v("p"),t.innerHTML="<strong>FTMO CSV</strong>",e=S(),s=v("p"),s.textContent=" FTMO  CSV",g(t,"class","svelte-oike8q"),g(s,"class","help-text svelte-oike8q")},m(i,r){I(i,t,r),I(i,e,r),I(i,s,r)},d(i){i&&(N(t),N(e),N(s))}}}function uL(n){let t,e,s,i,r=n[5]?" ...":"",l,o,a;return{c(){t=v("button"),e=P(""),s=S(),i=v("button"),l=P(r),g(t,"class","btn"),t.disabled=n[5],g(i,"class","btn btn-primary"),i.disabled=n[5]},m(c,u){I(c,t,u),d(t,e),I(c,s,u),I(c,i,u),d(i,l),o||(a=[j(t,"click",n[44]),j(i,"click",n[17])],o=!0)},p(c,u){u[0]&32&&(t.disabled=c[5]),u[0]&32&&r!==(r=c[5]?" ...":"")&&G(l,r),u[0]&32&&(i.disabled=c[5])},d(c){c&&(N(t),N(s),N(i)),o=!1,Vt(a)}}}function fL(n){let t,e,s;return{c(){t=v("button"),t.textContent="",g(t,"class","btn btn-primary")},m(i,r){I(i,t,r),e||(s=j(t,"click",n[43]),e=!0)},p:Et,d(i){i&&N(t),e=!1,s()}}}function o_(n){var f,p,m;let t,e,s=n[7].message+"",i,r,l,o,a=((f=n[7].imported_tickets)==null?void 0:f.length)>0&&a_(n),c=((p=n[7].duplicate_tickets)==null?void 0:p.length)>0&&c_(n),u=((m=n[7].error_tickets)==null?void 0:m.length)>0&&u_(n);return{c(){t=v("div"),e=v("div"),i=P(s),r=S(),a&&a.c(),l=S(),c&&c.c(),o=S(),u&&u.c(),g(e,"class","summary-banner svelte-oike8q"),g(t,"class","import-result-details svelte-oike8q")},m(h,_){I(h,t,_),d(t,e),d(e,i),d(t,r),a&&a.m(t,null),d(t,l),c&&c.m(t,null),d(t,o),u&&u.m(t,null)},p(h,_){var b,y,w;_[0]&128&&s!==(s=h[7].message+"")&&G(i,s),((b=h[7].imported_tickets)==null?void 0:b.length)>0?a?a.p(h,_):(a=a_(h),a.c(),a.m(t,l)):a&&(a.d(1),a=null),((y=h[7].duplicate_tickets)==null?void 0:y.length)>0?c?c.p(h,_):(c=c_(h),c.c(),c.m(t,o)):c&&(c.d(1),c=null),((w=h[7].error_tickets)==null?void 0:w.length)>0?u?u.p(h,_):(u=u_(h),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(h){h&&N(t),a&&a.d(),c&&c.d(),u&&u.d()}}}function a_(n){let t,e,s,i=n[7].imported_count+"",r,l,o,a,c=n[7].imported_tickets.join(", ")+"",u;return{c(){t=v("div"),e=v("h4"),s=P("  ("),r=P(i),l=P(")"),o=S(),a=v("div"),u=P(c),g(e,"class","svelte-oike8q"),g(a,"class","ticket-list svelte-oike8q"),g(t,"class","ticket-section imported svelte-oike8q")},m(f,p){I(f,t,p),d(t,e),d(e,s),d(e,r),d(e,l),d(t,o),d(t,a),d(a,u)},p(f,p){p[0]&128&&i!==(i=f[7].imported_count+"")&&G(r,i),p[0]&128&&c!==(c=f[7].imported_tickets.join(", ")+"")&&G(u,c)},d(f){f&&N(t)}}}function c_(n){let t,e,s,i=n[7].duplicate_count+"",r,l,o,a,c=n[7].duplicate_tickets.join(", ")+"",u;return{c(){t=v("div"),e=v("h4"),s=P("  ("),r=P(i),l=P(")"),o=S(),a=v("div"),u=P(c),g(e,"class","svelte-oike8q"),g(a,"class","ticket-list svelte-oike8q"),g(t,"class","ticket-section duplicate svelte-oike8q")},m(f,p){I(f,t,p),d(t,e),d(e,s),d(e,r),d(e,l),d(t,o),d(t,a),d(a,u)},p(f,p){p[0]&128&&i!==(i=f[7].duplicate_count+"")&&G(r,i),p[0]&128&&c!==(c=f[7].duplicate_tickets.join(", ")+"")&&G(u,c)},d(f){f&&N(t)}}}function u_(n){let t,e,s,i=n[7].error_count+"",r,l,o,a,c=n[7].error_tickets.join(", ")+"",u;return{c(){t=v("div"),e=v("h4"),s=P("  ("),r=P(i),l=P(")"),o=S(),a=v("div"),u=P(c),g(e,"class","svelte-oike8q"),g(a,"class","ticket-list svelte-oike8q"),g(t,"class","ticket-section error svelte-oike8q")},m(f,p){I(f,t,p),d(t,e),d(e,s),d(e,r),d(e,l),d(t,o),d(t,a),d(a,u)},p(f,p){p[0]&128&&i!==(i=f[7].error_count+"")&&G(r,i),p[0]&128&&c!==(c=f[7].error_tickets.join(", ")+"")&&G(u,c)},d(f){f&&N(t)}}}function hL(n){let t,e,s,i,r,l,o,a,c,u;function f(b,y){return b[0]?oL:lL}let p=f(n),m=p(n),h=n[1]&&s_(n),_=n[3]&&r_(n);return{c(){t=v("div"),e=v("div"),s=v("h1"),s.textContent="",i=S(),r=v("button"),r.textContent="+ ",l=S(),m.c(),o=S(),h&&h.c(),a=S(),_&&_.c(),g(r,"class","btn btn-primary"),g(e,"class","header svelte-oike8q"),g(t,"class","account-mgmt")},m(b,y){I(b,t,y),d(t,e),d(e,s),d(e,i),d(e,r),d(t,l),m.m(t,null),d(t,o),h&&h.m(t,null),d(t,a),_&&_.m(t,null),c||(u=j(r,"click",n[23]),c=!0)},p(b,y){p===(p=f(b))&&m?m.p(b,y):(m.d(1),m=p(b),m&&(m.c(),m.m(t,o))),b[1]?h?h.p(b,y):(h=s_(b),h.c(),h.m(t,a)):h&&(h.d(1),h=null),b[3]?_?_.p(b,y):(_=r_(b),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},i:Et,o:Et,d(b){b&&N(t),m.d(),h&&h.d(),_&&_.d(),c=!1,u()}}}const f_=(n,t)=>t-12,h_=(n,t)=>t-12;function dL(n,t,e){let s;Ye(n,Fl,ht=>e(11,s=ht));let i=!0,r=!1,l={name:"",type:"local",mt5_account_id:"",mt5_token:"",timezone_offset:8};async function o(){try{const ht=await Di.getAll();Fl.set(ht.data)}catch(ht){console.error(ht)}finally{e(0,i=!1)}}es(o);async function a(){var ht,St;if(!l.name.trim()){alert("");return}if(l.type==="metatrader"&&(!l.mt5_account_id.trim()||!l.mt5_token.trim())){alert(" MetaApi Account ID  Token");return}try{await Di.create(l),e(1,r=!1),e(2,l={name:"",type:"local",mt5_account_id:"",mt5_token:"",timezone_offset:8}),o()}catch(Ct){console.error(Ct);const it=((St=(ht=Ct.response)==null?void 0:ht.data)==null?void 0:St.error)||Ct.message||"";alert(": "+it)}}async function c(ht){var St,Ct;if(confirm(""))try{await Di.delete(ht),o()}catch(it){console.error(it);const Dt=((Ct=(St=it.response)==null?void 0:St.data)==null?void 0:Ct.error)||it.message||"";alert(": "+Dt)}}async function u(ht){if(confirm(` 
`))try{await Di.clearData(ht),alert("")}catch(St){console.error(St),alert("")}}let f;es(()=>(o(),f=setInterval(()=>{s.some(ht=>ht.sync_status==="syncing")&&o()},3e3),()=>clearInterval(f)));async function p(ht){var St,Ct;try{await Di.sync(ht),o()}catch(it){console.error(it);const Dt=((Ct=(St=it.response)==null?void 0:St.data)==null?void 0:Ct.error)||it.message||"";alert(": "+Dt)}}let m=!1,h=null,_=null,b=!1,y="ftmo",w=null;function A(ht){h=ht,e(3,m=!0),e(4,_=null),e(6,y="ftmo"),e(7,w=null)}async function E(){var ht,St;if(!_){alert(" CSV ");return}e(5,b=!0);try{const Ct=new FormData;Ct.append("file",_),Ct.append("source",y);const it=await Di.importCSV(h,Ct);e(7,w=it.data),e(4,_=null)}catch(Ct){console.error(Ct);const it=((St=(ht=Ct.response)==null?void 0:ht.data)==null?void 0:St.error)||Ct.message||"";alert(": "+it)}finally{e(5,b=!1)}}let T=null,C="",M=8;function x(ht){e(8,T=ht.id),e(9,C=ht.name),e(10,M=ht.timezone_offset)}function D(){e(8,T=null),e(9,C="")}async function L(ht){if(!C.trim()){alert("");return}try{await Di.update(ht,{name:C.trim(),timezone_offset:parseInt(M)}),e(8,T=null),o()}catch(St){console.error(St),alert("")}}function q(ht){T||(Rs.set(ht),ye("/"))}const F=[[]];function nt(ht){Jr.call(this,n,ht)}const et=()=>e(1,r=!0),U=ht=>c(ht.id);function W(){C=this.value,e(9,C)}const V=(ht,St)=>St.key==="Enter"&&L(ht.id);function $(){M=As(this),e(10,M)}const st=ht=>L(ht.id),Z=ht=>x(ht),wt=ht=>A(ht.id),rt=ht=>p(ht.id),at=ht=>u(ht.id),vt=ht=>q(ht.id),K=(ht,St)=>(St.key==="Enter"||St.key===" ")&&q(ht.id);function ct(){l.name=this.value,e(2,l)}function ft(){l.type=this.__value,e(2,l)}function ut(){l.timezone_offset=As(this),e(2,l)}const Nt=()=>e(1,r=!1),yt=()=>e(1,r=!1);function z(){y=As(this),e(6,y)}return[i,r,l,m,_,b,y,w,T,C,M,s,a,c,u,p,A,E,x,D,L,q,nt,et,U,W,V,$,st,Z,wt,rt,at,vt,K,ct,ft,F,ut,Nt,yt,z,ht=>e(4,_=ht.target.files[0]),()=>e(3,m=!1),()=>e(3,m=!1),()=>e(3,m=!1)]}class pL extends Fn{constructor(t){super(),qn(this,t,dL,hL,bn,{},null,[-1,-1])}}function gL(n,t,e){const s=n.slice();return s[10]=t[e],s}function mL(n){let t,e,s;return{c(){t=v("div"),t.innerHTML='<img src="/logo.png" alt="Trade Time Machine Logo" class="brand-logo-img svelte-1i93mu2"/>',e=S(),s=v("span"),s.textContent="v1.0.0",g(t,"class","logo-image-container svelte-1i93mu2"),g(s,"class","app-version-tag svelte-1i93mu2")},m(i,r){I(i,t,r),I(i,e,r),I(i,s,r)},p:Et,d(i){i&&(N(t),N(e),N(s))}}}function _L(n){let t;return{c(){t=v("option"),t.textContent=`${n[10]}`,t.__value=n[10],xt(t,t.__value)},m(e,s){I(e,t,s)},p:Et,d(e){e&&N(t)}}}function d_(n){let t,e,s=n[3].icon+"",i,r,l,o=n[3].label+"",a,c;return{c(){t=v("div"),e=v("span"),i=P(s),r=S(),l=v("span"),a=P(o),g(e,"class","session-icon svelte-1i93mu2"),g(l,"class","session-label"),g(t,"class",c="current-session-tag "+n[1]+" svelte-1i93mu2")},m(u,f){I(u,t,f),d(t,e),d(e,i),d(t,r),d(t,l),d(l,a)},p(u,f){f&8&&s!==(s=u[3].icon+"")&&G(i,s),f&8&&o!==(o=u[3].label+"")&&G(a,o),f&2&&c!==(c="current-session-tag "+u[1]+" svelte-1i93mu2")&&g(t,"class",c)},d(u){u&&N(t)}}}function bL(n){let t;return{c(){t=P("")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function vL(n){let t;return{c(){t=P("")},m(e,s){I(e,t,s)},d(e){e&&N(t)}}}function yL(n){let t,e,s,i,r,l,o,a,c,u,f,p,m,h,_,b=g_(n[0])+"",y,w,A,E=p_(n[0])+"",T,C,M,x,D,L,q,F,nt,et,U,W,V,$,st,Z,wt,rt,at,vt,K,ct,ft,ut,Nt,yt,z,Y,dt,Ut,$t;i=new Uo({props:{to:"/",class:"nav-brand",$$slots:{default:[mL]},$$scope:{ctx:n}}}),i.$on("click",n[5]);let ht=bt(Ts),St=[];for(let it=0;it<ht.length;it+=1)St[it]=_L(gL(n,ht,it));let Ct=n[3]&&d_(n);return D=new Uo({props:{to:"/dashboard",class:n[2]==="dashboard"?"active":"",$$slots:{default:[bL]},$$scope:{ctx:n}}}),D.$on("click",n[7]),q=new rL({}),nt=new Uo({props:{to:"/accounts",class:n[2]==="accounts"?"nav-settings-btn active":"nav-settings-btn",title:"",$$slots:{default:[vL]},$$scope:{ctx:n}}}),nt.$on("click",n[8]),W=new ai({props:{path:"/",component:nL}}),$=new ai({props:{path:"/trades",component:VT}}),Z=new ai({props:{path:"/plans",component:A8}}),rt=new ai({props:{path:"/plans/new",component:p1}}),vt=new ai({props:{path:"/plans/edit/:id",component:p1}}),ct=new ai({props:{path:"/new",component:yp}}),ut=new ai({props:{path:"/edit/:id",component:yp}}),yt=new ai({props:{path:"/dashboard",component:f8}}),Y=new ai({props:{path:"/accounts",component:pL}}),{c(){t=v("div"),e=v("nav"),s=v("div"),He(i.$$.fragment),r=S(),l=v("div"),o=v("div"),a=v("div"),c=v("span"),c.textContent="",u=S(),f=v("select");for(let it=0;it<St.length;it+=1)St[it].c();p=S(),m=v("div"),h=v("div"),_=v("span"),y=P(b),w=S(),A=v("span"),T=P(E),C=S(),Ct&&Ct.c(),M=S(),x=v("div"),He(D.$$.fragment),L=S(),He(q.$$.fragment),F=S(),He(nt.$$.fragment),et=S(),U=v("main"),He(W.$$.fragment),V=S(),He($.$$.fragment),st=S(),He(Z.$$.fragment),wt=S(),He(rt.$$.fragment),at=S(),He(vt.$$.fragment),K=S(),He(ct.$$.fragment),ft=S(),He(ut.$$.fragment),Nt=S(),He(yt.$$.fragment),z=S(),He(Y.$$.fragment),g(c,"class","selector-icon svelte-1i93mu2"),g(f,"class","svelte-1i93mu2"),n[4]===void 0&&gn(()=>n[6].call(f)),g(a,"class","symbol-selector svelte-1i93mu2"),g(o,"class","symbol-selector-wrapper svelte-1i93mu2"),g(l,"class","header-tools svelte-1i93mu2"),g(_,"class","date svelte-1i93mu2"),g(A,"class","time svelte-1i93mu2"),g(h,"class","current-time-box svelte-1i93mu2"),g(m,"class","market-status svelte-1i93mu2"),g(x,"class","nav-links svelte-1i93mu2"),g(s,"class","navbar-content svelte-1i93mu2"),g(e,"class","navbar svelte-1i93mu2"),g(U,"class","container svelte-1i93mu2"),g(t,"class","app svelte-1i93mu2")},m(it,Dt){I(it,t,Dt),d(t,e),d(e,s),Re(i,s,null),d(s,r),d(s,l),d(l,o),d(o,a),d(a,c),d(a,u),d(a,f);for(let zt=0;zt<St.length;zt+=1)St[zt]&&St[zt].m(f,null);Te(f,n[4],!0),d(s,p),d(s,m),d(m,h),d(h,_),d(_,y),d(h,w),d(h,A),d(A,T),d(m,C),Ct&&Ct.m(m,null),d(s,M),d(s,x),Re(D,x,null),d(x,L),Re(q,x,null),d(x,F),Re(nt,x,null),d(t,et),d(t,U),Re(W,U,null),d(U,V),Re($,U,null),d(U,st),Re(Z,U,null),d(U,wt),Re(rt,U,null),d(U,at),Re(vt,U,null),d(U,K),Re(ct,U,null),d(U,ft),Re(ut,U,null),d(U,Nt),Re(yt,U,null),d(U,z),Re(Y,U,null),dt=!0,Ut||($t=j(f,"change",n[6]),Ut=!0)},p(it,Dt){const zt={};Dt&8192&&(zt.$$scope={dirty:Dt,ctx:it}),i.$set(zt),Dt&16&&Te(f,it[4]),(!dt||Dt&1)&&b!==(b=g_(it[0])+"")&&G(y,b),(!dt||Dt&1)&&E!==(E=p_(it[0])+"")&&G(T,E),it[3]?Ct?Ct.p(it,Dt):(Ct=d_(it),Ct.c(),Ct.m(m,null)):Ct&&(Ct.d(1),Ct=null);const Q={};Dt&4&&(Q.class=it[2]==="dashboard"?"active":""),Dt&8192&&(Q.$$scope={dirty:Dt,ctx:it}),D.$set(Q);const lt={};Dt&4&&(lt.class=it[2]==="accounts"?"nav-settings-btn active":"nav-settings-btn"),Dt&8192&&(lt.$$scope={dirty:Dt,ctx:it}),nt.$set(lt)},i(it){dt||(Wt(i.$$.fragment,it),Wt(D.$$.fragment,it),Wt(q.$$.fragment,it),Wt(nt.$$.fragment,it),Wt(W.$$.fragment,it),Wt($.$$.fragment,it),Wt(Z.$$.fragment,it),Wt(rt.$$.fragment,it),Wt(vt.$$.fragment,it),Wt(ct.$$.fragment,it),Wt(ut.$$.fragment,it),Wt(yt.$$.fragment,it),Wt(Y.$$.fragment,it),dt=!0)},o(it){Kt(i.$$.fragment,it),Kt(D.$$.fragment,it),Kt(q.$$.fragment,it),Kt(nt.$$.fragment,it),Kt(W.$$.fragment,it),Kt($.$$.fragment,it),Kt(Z.$$.fragment,it),Kt(rt.$$.fragment,it),Kt(vt.$$.fragment,it),Kt(ct.$$.fragment,it),Kt(ut.$$.fragment,it),Kt(yt.$$.fragment,it),Kt(Y.$$.fragment,it),dt=!1},d(it){it&&N(t),Pe(i),Gt(St,it),Ct&&Ct.d(),Pe(D),Pe(q),Pe(nt),Pe(W),Pe($),Pe(Z),Pe(rt),Pe(vt),Pe(ct),Pe(ut),Pe(yt),Pe(Y),Ut=!1,$t()}}}function kL(n){let t,e;return t=new hy({props:{$$slots:{default:[yL]},$$scope:{ctx:n}}}),{c(){He(t.$$.fragment)},m(s,i){Re(t,s,i),e=!0},p(s,[i]){const r={};i&8223&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){e||(Wt(t.$$.fragment,s),e=!0)},o(s){Kt(t.$$.fragment,s),e=!1},d(s){Pe(t,s)}}}function p_(n){return n.toLocaleTimeString("zh-TW",{hour12:!1,hour:"2-digit",minute:"2-digit"})}function g_(n){return n.toLocaleDateString("zh-TW",{month:"2-digit",day:"2-digit"}).replace(/\//g,"/")}function wL(n,t,e){let s,i,r;Ye(n,ql,m=>e(4,r=m));let l="home",o=new Date,a;es(()=>{a=setInterval(()=>{e(0,o=new Date)},1e3)}),Ma(()=>{a&&clearInterval(a)});const c=()=>e(2,l="home");function u(){r=As(this),ql.set(r)}const f=()=>e(2,l="dashboard"),p=()=>e(2,l="accounts");return n.$$.update=()=>{n.$$.dirty&1&&e(1,s=il(o)),n.$$.dirty&2&&e(3,i=vs.find(m=>m.value===s))},[o,s,l,i,r,c,u,f,p]}class SL extends Fn{constructor(t){super(),qn(this,t,wL,kL,bn,{})}}new SL({target:document.getElementById("app")})});export default AL();
